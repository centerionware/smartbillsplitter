{{- if .Values.secret.create -}}
{{- if not .Values.secret.API_KEY }}
{{- fail "When secret.create is true, a value for API_KEY must be provided." -}}
{{- end }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "bill-splitter.fullname" . }}-secret
type: Opaque
data:
  API_KEY: {{ .Values.secret.API_KEY | b64enc | quote }}
{{- end -}}