{"version":3,"file":"app-DTLf6lKU.js","sources":["../../node_modules/react/cjs/react.production.min.js","../../node_modules/react/index.js","../../node_modules/react/cjs/react-jsx-runtime.production.min.js","../../node_modules/react/jsx-runtime.js","../../node_modules/scheduler/cjs/scheduler.production.min.js","../../node_modules/scheduler/index.js","../../node_modules/react-dom/cjs/react-dom.production.min.js","../../node_modules/react-dom/index.js","../../node_modules/react-dom/client.js","../../services/cryptoService.ts","../../services/broadcastService.ts","../../services/db.ts","../../hooks/useAuth.ts","../../types.ts","../../hooks/useBills.ts","../../hooks/useImportedBills.ts","../../hooks/useRecurringBills.ts","../../hooks/useGroups.ts","../../hooks/useCategories.ts","../../hooks/useSettings.ts","../../hooks/useTheme.ts","../../hooks/usePwaInstall.ts","../../contexts/AppControlContext.tsx","../../hooks/appLogic/useRouting.ts","../../hooks/appLogic/useModalStates.ts","../../hooks/appLogic/useDashboardState.ts","../../hooks/appLogic/useDerivedData.ts","../../services/shareService/utils.ts","../../services/api.ts","../../services/shareService/polling.ts","../../services/shareService/session.ts","../../services/shareService/aggregate.ts","../../services/shareService/link-generation.ts","../../services/notificationService.ts","../../hooks/appLogic/useSideEffects.ts","../../hooks/appLogic/useDataHandlers.ts","../../hooks/useAppLogic.ts","../../components/Header.tsx","../../components/ShareActionSheet.tsx","../../services/adProviderService.ts","../../services/adService.ts","../../components/HalfScreenAdModal.tsx","../../hooks/useIntersectionObserver.ts","../../components/PaymentMethodsModal.tsx","../../components/PaymentMethodWarningModal.tsx","../../services/exportService.ts","../../components/dashboard/DashboardSummary.tsx","../../components/dashboard/DashboardControls.tsx","../../components/BillCard.tsx","../../components/SwipeableBillCard.tsx","../../components/ImportedBillCard.tsx","../../components/SwipeableImportedBillCard.tsx","../../components/AdBillCard.tsx","../../components/dashboard/BillList.tsx","../../components/ParticipantCard.tsx","../../components/SwipeableParticipantCard.tsx","../../components/dashboard/ParticipantList.tsx","../../components/dashboard/EmptyState.tsx","../../components/dashboard/ParticipantDetailView.tsx","../../components/RecurringBillCard.tsx","../../components/dashboard/GroupCard.tsx","../../components/dashboard/SwipeableGroupCard.tsx","../../components/ProgressBar.tsx","../../components/dashboard/BudgetView.tsx","../../components/dashboard/Dashboard.tsx","../../services/geminiService.ts","../../components/ReceiptScanner.tsx","../../components/ItemEditor.tsx","../../components/AdditionalInfoEditor.tsx","../../components/RecurrenceSelector.tsx","../../components/SetupDisplayNameModal.tsx","../../components/BillPrimaryDetails.tsx","../../components/BillSplitMethod.tsx","../../components/BillParticipants.tsx","../../components/BillExtraDetails.tsx","../../components/modals/SelectGroupModal.tsx","../../components/CreateBill.tsx","../../components/CreateGroup.tsx","../../components/ShareModal.tsx","../../components/BillDetails.tsx","../../components/SummaryBillDetailsModal.tsx","../../components/ImportedBillDetails.tsx","../../components/Settings.tsx","../../hooks/useQrScanner.ts","../../components/Sync.tsx","../../components/DisclaimerContent.tsx","../../components/Disclaimer.tsx","../../components/PrivacyConsent.tsx","../../components/ViewSharedBill.tsx","../../components/SwipeableRecurringBillCard.tsx","../../components/RecurringBillsList.tsx","../../hooks/useSubscriptionManager.ts","../../components/ManageSubscriptionPage.tsx","../../components/dashboard/GroupRemindersModal.tsx","../../components/dashboard/GroupDetailsView.tsx","../../components/routing/AppRouter.tsx","../../components/ConfirmationDialog.tsx","../../components/settings/Personalization.tsx","../../components/settings/PaymentIntegrations.tsx","../../components/settings/BillReminders.tsx","../../components/settings/DataManagement.tsx","../../components/settings/DataSync.tsx","../../components/settings/DangerZone.tsx","../../components/settings/SubscriptionManagement.tsx","../../components/settings/AboutSupport.tsx","../../components/settings/BudgetingSettings.tsx","../../components/SettingsModal.tsx","../../components/CsvImporterModal.tsx","../../components/QrImporterModal.tsx","../../components/modals/AppModals.tsx","../../components/PwaInstallBanner.tsx","../../components/debug/common/DebugHeader.tsx","../../components/debug/views/ConsoleView.tsx","../../components/debug/views/NetworkView.tsx","../../components/debug/common/ObjectExplorer.tsx","../../components/debug/views/BroadcastView.tsx","../../components/debug/views/DatabaseView.tsx","../../components/debug/views/DevView.tsx","../../components/debug/common/NetworkDetailView.tsx","../../components/debug/useDebugServices.ts","../../components/DebugConsole.tsx","../../components/TutorialOverlay.tsx","../../components/TutorialManager.tsx","../../App.tsx","../../components/SubscriptionWarningModal.tsx","../../components/Paywall.tsx","../../AppGate.tsx","../../components/ErrorBoundary.tsx","../../index.tsx"],"sourcesContent":["/**\n * @license React\n * react.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var l=Symbol.for(\"react.element\"),n=Symbol.for(\"react.portal\"),p=Symbol.for(\"react.fragment\"),q=Symbol.for(\"react.strict_mode\"),r=Symbol.for(\"react.profiler\"),t=Symbol.for(\"react.provider\"),u=Symbol.for(\"react.context\"),v=Symbol.for(\"react.forward_ref\"),w=Symbol.for(\"react.suspense\"),x=Symbol.for(\"react.memo\"),y=Symbol.for(\"react.lazy\"),z=Symbol.iterator;function A(a){if(null===a||\"object\"!==typeof a)return null;a=z&&a[z]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}\nvar B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,D={};function E(a,b,e){this.props=a;this.context=b;this.refs=D;this.updater=e||B}E.prototype.isReactComponent={};\nE.prototype.setState=function(a,b){if(\"object\"!==typeof a&&\"function\"!==typeof a&&null!=a)throw Error(\"setState(...): takes an object of state variables to update or a function which returns an object of state variables.\");this.updater.enqueueSetState(this,a,b,\"setState\")};E.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,\"forceUpdate\")};function F(){}F.prototype=E.prototype;function G(a,b,e){this.props=a;this.context=b;this.refs=D;this.updater=e||B}var H=G.prototype=new F;\nH.constructor=G;C(H,E.prototype);H.isPureReactComponent=!0;var I=Array.isArray,J=Object.prototype.hasOwnProperty,K={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};\nfunction M(a,b,e){var d,c={},k=null,h=null;if(null!=b)for(d in void 0!==b.ref&&(h=b.ref),void 0!==b.key&&(k=\"\"+b.key),b)J.call(b,d)&&!L.hasOwnProperty(d)&&(c[d]=b[d]);var g=arguments.length-2;if(1===g)c.children=e;else if(1<g){for(var f=Array(g),m=0;m<g;m++)f[m]=arguments[m+2];c.children=f}if(a&&a.defaultProps)for(d in g=a.defaultProps,g)void 0===c[d]&&(c[d]=g[d]);return{$$typeof:l,type:a,key:k,ref:h,props:c,_owner:K.current}}\nfunction N(a,b){return{$$typeof:l,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}function O(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===l}function escape(a){var b={\"=\":\"=0\",\":\":\"=2\"};return\"$\"+a.replace(/[=:]/g,function(a){return b[a]})}var P=/\\/+/g;function Q(a,b){return\"object\"===typeof a&&null!==a&&null!=a.key?escape(\"\"+a.key):b.toString(36)}\nfunction R(a,b,e,d,c){var k=typeof a;if(\"undefined\"===k||\"boolean\"===k)a=null;var h=!1;if(null===a)h=!0;else switch(k){case \"string\":case \"number\":h=!0;break;case \"object\":switch(a.$$typeof){case l:case n:h=!0}}if(h)return h=a,c=c(h),a=\"\"===d?\".\"+Q(h,0):d,I(c)?(e=\"\",null!=a&&(e=a.replace(P,\"$&/\")+\"/\"),R(c,b,e,\"\",function(a){return a})):null!=c&&(O(c)&&(c=N(c,e+(!c.key||h&&h.key===c.key?\"\":(\"\"+c.key).replace(P,\"$&/\")+\"/\")+a)),b.push(c)),1;h=0;d=\"\"===d?\".\":d+\":\";if(I(a))for(var g=0;g<a.length;g++){k=\na[g];var f=d+Q(k,g);h+=R(k,b,e,f,c)}else if(f=A(a),\"function\"===typeof f)for(a=f.call(a),g=0;!(k=a.next()).done;)k=k.value,f=d+Q(k,g++),h+=R(k,b,e,f,c);else if(\"object\"===k)throw b=String(a),Error(\"Objects are not valid as a React child (found: \"+(\"[object Object]\"===b?\"object with keys {\"+Object.keys(a).join(\", \")+\"}\":b)+\"). If you meant to render a collection of children, use an array instead.\");return h}\nfunction S(a,b,e){if(null==a)return a;var d=[],c=0;R(a,d,\"\",\"\",function(a){return b.call(e,a,c++)});return d}function T(a){if(-1===a._status){var b=a._result;b=b();b.then(function(b){if(0===a._status||-1===a._status)a._status=1,a._result=b},function(b){if(0===a._status||-1===a._status)a._status=2,a._result=b});-1===a._status&&(a._status=0,a._result=b)}if(1===a._status)return a._result.default;throw a._result;}\nvar U={current:null},V={transition:null},W={ReactCurrentDispatcher:U,ReactCurrentBatchConfig:V,ReactCurrentOwner:K};function X(){throw Error(\"act(...) is not supported in production builds of React.\");}\nexports.Children={map:S,forEach:function(a,b,e){S(a,function(){b.apply(this,arguments)},e)},count:function(a){var b=0;S(a,function(){b++});return b},toArray:function(a){return S(a,function(a){return a})||[]},only:function(a){if(!O(a))throw Error(\"React.Children.only expected to receive a single React element child.\");return a}};exports.Component=E;exports.Fragment=p;exports.Profiler=r;exports.PureComponent=G;exports.StrictMode=q;exports.Suspense=w;\nexports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W;exports.act=X;\nexports.cloneElement=function(a,b,e){if(null===a||void 0===a)throw Error(\"React.cloneElement(...): The argument must be a React element, but you passed \"+a+\".\");var d=C({},a.props),c=a.key,k=a.ref,h=a._owner;if(null!=b){void 0!==b.ref&&(k=b.ref,h=K.current);void 0!==b.key&&(c=\"\"+b.key);if(a.type&&a.type.defaultProps)var g=a.type.defaultProps;for(f in b)J.call(b,f)&&!L.hasOwnProperty(f)&&(d[f]=void 0===b[f]&&void 0!==g?g[f]:b[f])}var f=arguments.length-2;if(1===f)d.children=e;else if(1<f){g=Array(f);\nfor(var m=0;m<f;m++)g[m]=arguments[m+2];d.children=g}return{$$typeof:l,type:a.type,key:c,ref:k,props:d,_owner:h}};exports.createContext=function(a){a={$$typeof:u,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null};a.Provider={$$typeof:t,_context:a};return a.Consumer=a};exports.createElement=M;exports.createFactory=function(a){var b=M.bind(null,a);b.type=a;return b};exports.createRef=function(){return{current:null}};\nexports.forwardRef=function(a){return{$$typeof:v,render:a}};exports.isValidElement=O;exports.lazy=function(a){return{$$typeof:y,_payload:{_status:-1,_result:a},_init:T}};exports.memo=function(a,b){return{$$typeof:x,type:a,compare:void 0===b?null:b}};exports.startTransition=function(a){var b=V.transition;V.transition={};try{a()}finally{V.transition=b}};exports.unstable_act=X;exports.useCallback=function(a,b){return U.current.useCallback(a,b)};exports.useContext=function(a){return U.current.useContext(a)};\nexports.useDebugValue=function(){};exports.useDeferredValue=function(a){return U.current.useDeferredValue(a)};exports.useEffect=function(a,b){return U.current.useEffect(a,b)};exports.useId=function(){return U.current.useId()};exports.useImperativeHandle=function(a,b,e){return U.current.useImperativeHandle(a,b,e)};exports.useInsertionEffect=function(a,b){return U.current.useInsertionEffect(a,b)};exports.useLayoutEffect=function(a,b){return U.current.useLayoutEffect(a,b)};\nexports.useMemo=function(a,b){return U.current.useMemo(a,b)};exports.useReducer=function(a,b,e){return U.current.useReducer(a,b,e)};exports.useRef=function(a){return U.current.useRef(a)};exports.useState=function(a){return U.current.useState(a)};exports.useSyncExternalStore=function(a,b,e){return U.current.useSyncExternalStore(a,b,e)};exports.useTransition=function(){return U.current.useTransition()};exports.version=\"18.3.1\";\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react.production.min.js');\n} else {\n  module.exports = require('./cjs/react.development.js');\n}\n","/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","/**\n * @license React\n * scheduler.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';function f(a,b){var c=a.length;a.push(b);a:for(;0<c;){var d=c-1>>>1,e=a[d];if(0<g(e,b))a[d]=b,a[c]=e,c=d;else break a}}function h(a){return 0===a.length?null:a[0]}function k(a){if(0===a.length)return null;var b=a[0],c=a.pop();if(c!==b){a[0]=c;a:for(var d=0,e=a.length,w=e>>>1;d<w;){var m=2*(d+1)-1,C=a[m],n=m+1,x=a[n];if(0>g(C,c))n<e&&0>g(x,C)?(a[d]=x,a[n]=c,d=n):(a[d]=C,a[m]=c,d=m);else if(n<e&&0>g(x,c))a[d]=x,a[n]=c,d=n;else break a}}return b}\nfunction g(a,b){var c=a.sortIndex-b.sortIndex;return 0!==c?c:a.id-b.id}if(\"object\"===typeof performance&&\"function\"===typeof performance.now){var l=performance;exports.unstable_now=function(){return l.now()}}else{var p=Date,q=p.now();exports.unstable_now=function(){return p.now()-q}}var r=[],t=[],u=1,v=null,y=3,z=!1,A=!1,B=!1,D=\"function\"===typeof setTimeout?setTimeout:null,E=\"function\"===typeof clearTimeout?clearTimeout:null,F=\"undefined\"!==typeof setImmediate?setImmediate:null;\n\"undefined\"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(a){for(var b=h(t);null!==b;){if(null===b.callback)k(t);else if(b.startTime<=a)k(t),b.sortIndex=b.expirationTime,f(r,b);else break;b=h(t)}}function H(a){B=!1;G(a);if(!A)if(null!==h(r))A=!0,I(J);else{var b=h(t);null!==b&&K(H,b.startTime-a)}}\nfunction J(a,b){A=!1;B&&(B=!1,E(L),L=-1);z=!0;var c=y;try{G(b);for(v=h(r);null!==v&&(!(v.expirationTime>b)||a&&!M());){var d=v.callback;if(\"function\"===typeof d){v.callback=null;y=v.priorityLevel;var e=d(v.expirationTime<=b);b=exports.unstable_now();\"function\"===typeof e?v.callback=e:v===h(r)&&k(r);G(b)}else k(r);v=h(r)}if(null!==v)var w=!0;else{var m=h(t);null!==m&&K(H,m.startTime-b);w=!1}return w}finally{v=null,y=c,z=!1}}var N=!1,O=null,L=-1,P=5,Q=-1;\nfunction M(){return exports.unstable_now()-Q<P?!1:!0}function R(){if(null!==O){var a=exports.unstable_now();Q=a;var b=!0;try{b=O(!0,a)}finally{b?S():(N=!1,O=null)}}else N=!1}var S;if(\"function\"===typeof F)S=function(){F(R)};else if(\"undefined\"!==typeof MessageChannel){var T=new MessageChannel,U=T.port2;T.port1.onmessage=R;S=function(){U.postMessage(null)}}else S=function(){D(R,0)};function I(a){O=a;N||(N=!0,S())}function K(a,b){L=D(function(){a(exports.unstable_now())},b)}\nexports.unstable_IdlePriority=5;exports.unstable_ImmediatePriority=1;exports.unstable_LowPriority=4;exports.unstable_NormalPriority=3;exports.unstable_Profiling=null;exports.unstable_UserBlockingPriority=2;exports.unstable_cancelCallback=function(a){a.callback=null};exports.unstable_continueExecution=function(){A||z||(A=!0,I(J))};\nexports.unstable_forceFrameRate=function(a){0>a||125<a?console.error(\"forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported\"):P=0<a?Math.floor(1E3/a):5};exports.unstable_getCurrentPriorityLevel=function(){return y};exports.unstable_getFirstCallbackNode=function(){return h(r)};exports.unstable_next=function(a){switch(y){case 1:case 2:case 3:var b=3;break;default:b=y}var c=y;y=b;try{return a()}finally{y=c}};exports.unstable_pauseExecution=function(){};\nexports.unstable_requestPaint=function(){};exports.unstable_runWithPriority=function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=y;y=a;try{return b()}finally{y=c}};\nexports.unstable_scheduleCallback=function(a,b,c){var d=exports.unstable_now();\"object\"===typeof c&&null!==c?(c=c.delay,c=\"number\"===typeof c&&0<c?d+c:d):c=d;switch(a){case 1:var e=-1;break;case 2:e=250;break;case 5:e=1073741823;break;case 4:e=1E4;break;default:e=5E3}e=c+e;a={id:u++,callback:b,priorityLevel:a,startTime:c,expirationTime:e,sortIndex:-1};c>d?(a.sortIndex=c,f(t,a),null===h(r)&&a===h(t)&&(B?(E(L),L=-1):B=!0,K(H,c-d))):(a.sortIndex=e,f(r,a),A||z||(A=!0,I(J)));return a};\nexports.unstable_shouldYield=M;exports.unstable_wrapCallback=function(a){var b=y;return function(){var c=y;y=b;try{return a.apply(this,arguments)}finally{y=c}}};\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/scheduler.production.min.js');\n} else {\n  module.exports = require('./cjs/scheduler.development.js');\n}\n","/**\n * @license React\n * react-dom.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n/*\n Modernizr 3.0.0pre (Custom Build) | MIT\n*/\n'use strict';var aa=require(\"react\"),ca=require(\"scheduler\");function p(a){for(var b=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+a,c=1;c<arguments.length;c++)b+=\"&args[]=\"+encodeURIComponent(arguments[c]);return\"Minified React error #\"+a+\"; visit \"+b+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}var da=new Set,ea={};function fa(a,b){ha(a,b);ha(a+\"Capture\",b)}\nfunction ha(a,b){ea[a]=b;for(a=0;a<b.length;a++)da.add(b[a])}\nvar ia=!(\"undefined\"===typeof window||\"undefined\"===typeof window.document||\"undefined\"===typeof window.document.createElement),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$/,la=\n{},ma={};function oa(a){if(ja.call(ma,a))return!0;if(ja.call(la,a))return!1;if(ka.test(a))return ma[a]=!0;la[a]=!0;return!1}function pa(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case \"function\":case \"symbol\":return!0;case \"boolean\":if(d)return!1;if(null!==c)return!c.acceptsBooleans;a=a.toLowerCase().slice(0,5);return\"data-\"!==a&&\"aria-\"!==a;default:return!1}}\nfunction qa(a,b,c,d){if(null===b||\"undefined\"===typeof b||pa(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function v(a,b,c,d,e,f,g){this.acceptsBooleans=2===b||3===b||4===b;this.attributeName=d;this.attributeNamespace=e;this.mustUseProperty=c;this.propertyName=a;this.type=b;this.sanitizeURL=f;this.removeEmptyString=g}var z={};\n\"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style\".split(\" \").forEach(function(a){z[a]=new v(a,0,!1,a,null,!1,!1)});[[\"acceptCharset\",\"accept-charset\"],[\"className\",\"class\"],[\"htmlFor\",\"for\"],[\"httpEquiv\",\"http-equiv\"]].forEach(function(a){var b=a[0];z[b]=new v(b,1,!1,a[1],null,!1,!1)});[\"contentEditable\",\"draggable\",\"spellCheck\",\"value\"].forEach(function(a){z[a]=new v(a,2,!1,a.toLowerCase(),null,!1,!1)});\n[\"autoReverse\",\"externalResourcesRequired\",\"focusable\",\"preserveAlpha\"].forEach(function(a){z[a]=new v(a,2,!1,a,null,!1,!1)});\"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope\".split(\" \").forEach(function(a){z[a]=new v(a,3,!1,a.toLowerCase(),null,!1,!1)});\n[\"checked\",\"multiple\",\"muted\",\"selected\"].forEach(function(a){z[a]=new v(a,3,!0,a,null,!1,!1)});[\"capture\",\"download\"].forEach(function(a){z[a]=new v(a,4,!1,a,null,!1,!1)});[\"cols\",\"rows\",\"size\",\"span\"].forEach(function(a){z[a]=new v(a,6,!1,a,null,!1,!1)});[\"rowSpan\",\"start\"].forEach(function(a){z[a]=new v(a,5,!1,a.toLowerCase(),null,!1,!1)});var ra=/[\\-:]([a-z])/g;function sa(a){return a[1].toUpperCase()}\n\"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height\".split(\" \").forEach(function(a){var b=a.replace(ra,\nsa);z[b]=new v(b,1,!1,a,null,!1,!1)});\"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type\".split(\" \").forEach(function(a){var b=a.replace(ra,sa);z[b]=new v(b,1,!1,a,\"http://www.w3.org/1999/xlink\",!1,!1)});[\"xml:base\",\"xml:lang\",\"xml:space\"].forEach(function(a){var b=a.replace(ra,sa);z[b]=new v(b,1,!1,a,\"http://www.w3.org/XML/1998/namespace\",!1,!1)});[\"tabIndex\",\"crossOrigin\"].forEach(function(a){z[a]=new v(a,1,!1,a.toLowerCase(),null,!1,!1)});\nz.xlinkHref=new v(\"xlinkHref\",1,!1,\"xlink:href\",\"http://www.w3.org/1999/xlink\",!0,!1);[\"src\",\"href\",\"action\",\"formAction\"].forEach(function(a){z[a]=new v(a,1,!1,a.toLowerCase(),null,!0,!0)});\nfunction ta(a,b,c,d){var e=z.hasOwnProperty(b)?z[b]:null;if(null!==e?0!==e.type:d||!(2<b.length)||\"o\"!==b[0]&&\"O\"!==b[0]||\"n\"!==b[1]&&\"N\"!==b[1])qa(b,c,e,d)&&(c=null),d||null===e?oa(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,\"\"+c)):e.mustUseProperty?a[e.propertyName]=null===c?3===e.type?!1:\"\":c:(b=e.attributeName,d=e.attributeNamespace,null===c?a.removeAttribute(b):(e=e.type,c=3===e||4===e&&!0===c?\"\":\"\"+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c)))}\nvar ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for(\"react.element\"),wa=Symbol.for(\"react.portal\"),ya=Symbol.for(\"react.fragment\"),za=Symbol.for(\"react.strict_mode\"),Aa=Symbol.for(\"react.profiler\"),Ba=Symbol.for(\"react.provider\"),Ca=Symbol.for(\"react.context\"),Da=Symbol.for(\"react.forward_ref\"),Ea=Symbol.for(\"react.suspense\"),Fa=Symbol.for(\"react.suspense_list\"),Ga=Symbol.for(\"react.memo\"),Ha=Symbol.for(\"react.lazy\");Symbol.for(\"react.scope\");Symbol.for(\"react.debug_trace_mode\");\nvar Ia=Symbol.for(\"react.offscreen\");Symbol.for(\"react.legacy_hidden\");Symbol.for(\"react.cache\");Symbol.for(\"react.tracing_marker\");var Ja=Symbol.iterator;function Ka(a){if(null===a||\"object\"!==typeof a)return null;a=Ja&&a[Ja]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}var A=Object.assign,La;function Ma(a){if(void 0===La)try{throw Error();}catch(c){var b=c.stack.trim().match(/\\n( *(at )?)/);La=b&&b[1]||\"\"}return\"\\n\"+La+a}var Na=!1;\nfunction Oa(a,b){if(!a||Na)return\"\";Na=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(b)if(b=function(){throw Error();},Object.defineProperty(b.prototype,\"props\",{set:function(){throw Error();}}),\"object\"===typeof Reflect&&Reflect.construct){try{Reflect.construct(b,[])}catch(l){var d=l}Reflect.construct(a,[],b)}else{try{b.call()}catch(l){d=l}a.call(b.prototype)}else{try{throw Error();}catch(l){d=l}a()}}catch(l){if(l&&d&&\"string\"===typeof l.stack){for(var e=l.stack.split(\"\\n\"),\nf=d.stack.split(\"\\n\"),g=e.length-1,h=f.length-1;1<=g&&0<=h&&e[g]!==f[h];)h--;for(;1<=g&&0<=h;g--,h--)if(e[g]!==f[h]){if(1!==g||1!==h){do if(g--,h--,0>h||e[g]!==f[h]){var k=\"\\n\"+e[g].replace(\" at new \",\" at \");a.displayName&&k.includes(\"<anonymous>\")&&(k=k.replace(\"<anonymous>\",a.displayName));return k}while(1<=g&&0<=h)}break}}}finally{Na=!1,Error.prepareStackTrace=c}return(a=a?a.displayName||a.name:\"\")?Ma(a):\"\"}\nfunction Pa(a){switch(a.tag){case 5:return Ma(a.type);case 16:return Ma(\"Lazy\");case 13:return Ma(\"Suspense\");case 19:return Ma(\"SuspenseList\");case 0:case 2:case 15:return a=Oa(a.type,!1),a;case 11:return a=Oa(a.type.render,!1),a;case 1:return a=Oa(a.type,!0),a;default:return\"\"}}\nfunction Qa(a){if(null==a)return null;if(\"function\"===typeof a)return a.displayName||a.name||null;if(\"string\"===typeof a)return a;switch(a){case ya:return\"Fragment\";case wa:return\"Portal\";case Aa:return\"Profiler\";case za:return\"StrictMode\";case Ea:return\"Suspense\";case Fa:return\"SuspenseList\"}if(\"object\"===typeof a)switch(a.$$typeof){case Ca:return(a.displayName||\"Context\")+\".Consumer\";case Ba:return(a._context.displayName||\"Context\")+\".Provider\";case Da:var b=a.render;a=a.displayName;a||(a=b.displayName||\nb.name||\"\",a=\"\"!==a?\"ForwardRef(\"+a+\")\":\"ForwardRef\");return a;case Ga:return b=a.displayName||null,null!==b?b:Qa(a.type)||\"Memo\";case Ha:b=a._payload;a=a._init;try{return Qa(a(b))}catch(c){}}return null}\nfunction Ra(a){var b=a.type;switch(a.tag){case 24:return\"Cache\";case 9:return(b.displayName||\"Context\")+\".Consumer\";case 10:return(b._context.displayName||\"Context\")+\".Provider\";case 18:return\"DehydratedFragment\";case 11:return a=b.render,a=a.displayName||a.name||\"\",b.displayName||(\"\"!==a?\"ForwardRef(\"+a+\")\":\"ForwardRef\");case 7:return\"Fragment\";case 5:return b;case 4:return\"Portal\";case 3:return\"Root\";case 6:return\"Text\";case 16:return Qa(b);case 8:return b===za?\"StrictMode\":\"Mode\";case 22:return\"Offscreen\";\ncase 12:return\"Profiler\";case 21:return\"Scope\";case 13:return\"Suspense\";case 19:return\"SuspenseList\";case 25:return\"TracingMarker\";case 1:case 0:case 17:case 2:case 14:case 15:if(\"function\"===typeof b)return b.displayName||b.name||null;if(\"string\"===typeof b)return b}return null}function Sa(a){switch(typeof a){case \"boolean\":case \"number\":case \"string\":case \"undefined\":return a;case \"object\":return a;default:return\"\"}}\nfunction Ta(a){var b=a.type;return(a=a.nodeName)&&\"input\"===a.toLowerCase()&&(\"checkbox\"===b||\"radio\"===b)}\nfunction Ua(a){var b=Ta(a)?\"checked\":\"value\",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=\"\"+a[b];if(!a.hasOwnProperty(b)&&\"undefined\"!==typeof c&&\"function\"===typeof c.get&&\"function\"===typeof c.set){var e=c.get,f=c.set;Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=\"\"+a;f.call(this,a)}});Object.defineProperty(a,b,{enumerable:c.enumerable});return{getValue:function(){return d},setValue:function(a){d=\"\"+a},stopTracking:function(){a._valueTracker=\nnull;delete a[b]}}}}function Va(a){a._valueTracker||(a._valueTracker=Ua(a))}function Wa(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue();var d=\"\";a&&(d=Ta(a)?a.checked?\"true\":\"false\":a.value);a=d;return a!==c?(b.setValue(a),!0):!1}function Xa(a){a=a||(\"undefined\"!==typeof document?document:void 0);if(\"undefined\"===typeof a)return null;try{return a.activeElement||a.body}catch(b){return a.body}}\nfunction Ya(a,b){var c=b.checked;return A({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=c?c:a._wrapperState.initialChecked})}function Za(a,b){var c=null==b.defaultValue?\"\":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=Sa(null!=b.value?b.value:c);a._wrapperState={initialChecked:d,initialValue:c,controlled:\"checkbox\"===b.type||\"radio\"===b.type?null!=b.checked:null!=b.value}}function ab(a,b){b=b.checked;null!=b&&ta(a,\"checked\",b,!1)}\nfunction bb(a,b){ab(a,b);var c=Sa(b.value),d=b.type;if(null!=c)if(\"number\"===d){if(0===c&&\"\"===a.value||a.value!=c)a.value=\"\"+c}else a.value!==\"\"+c&&(a.value=\"\"+c);else if(\"submit\"===d||\"reset\"===d){a.removeAttribute(\"value\");return}b.hasOwnProperty(\"value\")?cb(a,b.type,c):b.hasOwnProperty(\"defaultValue\")&&cb(a,b.type,Sa(b.defaultValue));null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}\nfunction db(a,b,c){if(b.hasOwnProperty(\"value\")||b.hasOwnProperty(\"defaultValue\")){var d=b.type;if(!(\"submit\"!==d&&\"reset\"!==d||void 0!==b.value&&null!==b.value))return;b=\"\"+a._wrapperState.initialValue;c||b===a.value||(a.value=b);a.defaultValue=b}c=a.name;\"\"!==c&&(a.name=\"\");a.defaultChecked=!!a._wrapperState.initialChecked;\"\"!==c&&(a.name=c)}\nfunction cb(a,b,c){if(\"number\"!==b||Xa(a.ownerDocument)!==a)null==c?a.defaultValue=\"\"+a._wrapperState.initialValue:a.defaultValue!==\"\"+c&&(a.defaultValue=\"\"+c)}var eb=Array.isArray;\nfunction fb(a,b,c,d){a=a.options;if(b){b={};for(var e=0;e<c.length;e++)b[\"$\"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty(\"$\"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{c=\"\"+Sa(c);b=null;for(e=0;e<a.length;e++){if(a[e].value===c){a[e].selected=!0;d&&(a[e].defaultSelected=!0);return}null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}\nfunction gb(a,b){if(null!=b.dangerouslySetInnerHTML)throw Error(p(91));return A({},b,{value:void 0,defaultValue:void 0,children:\"\"+a._wrapperState.initialValue})}function hb(a,b){var c=b.value;if(null==c){c=b.children;b=b.defaultValue;if(null!=c){if(null!=b)throw Error(p(92));if(eb(c)){if(1<c.length)throw Error(p(93));c=c[0]}b=c}null==b&&(b=\"\");c=b}a._wrapperState={initialValue:Sa(c)}}\nfunction ib(a,b){var c=Sa(b.value),d=Sa(b.defaultValue);null!=c&&(c=\"\"+c,c!==a.value&&(a.value=c),null==b.defaultValue&&a.defaultValue!==c&&(a.defaultValue=c));null!=d&&(a.defaultValue=\"\"+d)}function jb(a){var b=a.textContent;b===a._wrapperState.initialValue&&\"\"!==b&&null!==b&&(a.value=b)}function kb(a){switch(a){case \"svg\":return\"http://www.w3.org/2000/svg\";case \"math\":return\"http://www.w3.org/1998/Math/MathML\";default:return\"http://www.w3.org/1999/xhtml\"}}\nfunction lb(a,b){return null==a||\"http://www.w3.org/1999/xhtml\"===a?kb(b):\"http://www.w3.org/2000/svg\"===a&&\"foreignObject\"===b?\"http://www.w3.org/1999/xhtml\":a}\nvar mb,nb=function(a){return\"undefined\"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c,d,e)})}:a}(function(a,b){if(\"http://www.w3.org/2000/svg\"!==a.namespaceURI||\"innerHTML\"in a)a.innerHTML=b;else{mb=mb||document.createElement(\"div\");mb.innerHTML=\"<svg>\"+b.valueOf().toString()+\"</svg>\";for(b=mb.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}});\nfunction ob(a,b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType){c.nodeValue=b;return}}a.textContent=b}\nvar pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,\nzoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=[\"Webkit\",\"ms\",\"Moz\",\"O\"];Object.keys(pb).forEach(function(a){qb.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1);pb[b]=pb[a]})});function rb(a,b,c){return null==b||\"boolean\"===typeof b||\"\"===b?\"\":c||\"number\"!==typeof b||0===b||pb.hasOwnProperty(a)&&pb[a]?(\"\"+b).trim():b+\"px\"}\nfunction sb(a,b){a=a.style;for(var c in b)if(b.hasOwnProperty(c)){var d=0===c.indexOf(\"--\"),e=rb(c,b[c],d);\"float\"===c&&(c=\"cssFloat\");d?a.setProperty(c,e):a[c]=e}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});\nfunction ub(a,b){if(b){if(tb[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML))throw Error(p(137,a));if(null!=b.dangerouslySetInnerHTML){if(null!=b.children)throw Error(p(60));if(\"object\"!==typeof b.dangerouslySetInnerHTML||!(\"__html\"in b.dangerouslySetInnerHTML))throw Error(p(61));}if(null!=b.style&&\"object\"!==typeof b.style)throw Error(p(62));}}\nfunction vb(a,b){if(-1===a.indexOf(\"-\"))return\"string\"===typeof b.is;switch(a){case \"annotation-xml\":case \"color-profile\":case \"font-face\":case \"font-face-src\":case \"font-face-uri\":case \"font-face-format\":case \"font-face-name\":case \"missing-glyph\":return!1;default:return!0}}var wb=null;function xb(a){a=a.target||a.srcElement||window;a.correspondingUseElement&&(a=a.correspondingUseElement);return 3===a.nodeType?a.parentNode:a}var yb=null,zb=null,Ab=null;\nfunction Bb(a){if(a=Cb(a)){if(\"function\"!==typeof yb)throw Error(p(280));var b=a.stateNode;b&&(b=Db(b),yb(a.stateNode,a.type,b))}}function Eb(a){zb?Ab?Ab.push(a):Ab=[a]:zb=a}function Fb(){if(zb){var a=zb,b=Ab;Ab=zb=null;Bb(a);if(b)for(a=0;a<b.length;a++)Bb(b[a])}}function Gb(a,b){return a(b)}function Hb(){}var Ib=!1;function Jb(a,b,c){if(Ib)return a(b,c);Ib=!0;try{return Gb(a,b,c)}finally{if(Ib=!1,null!==zb||null!==Ab)Hb(),Fb()}}\nfunction Kb(a,b){var c=a.stateNode;if(null===c)return null;var d=Db(c);if(null===d)return null;c=d[b];a:switch(b){case \"onClick\":case \"onClickCapture\":case \"onDoubleClick\":case \"onDoubleClickCapture\":case \"onMouseDown\":case \"onMouseDownCapture\":case \"onMouseMove\":case \"onMouseMoveCapture\":case \"onMouseUp\":case \"onMouseUpCapture\":case \"onMouseEnter\":(d=!d.disabled)||(a=a.type,d=!(\"button\"===a||\"input\"===a||\"select\"===a||\"textarea\"===a));a=!d;break a;default:a=!1}if(a)return null;if(c&&\"function\"!==\ntypeof c)throw Error(p(231,b,typeof c));return c}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,\"passive\",{get:function(){Lb=!0}});window.addEventListener(\"test\",Mb,Mb);window.removeEventListener(\"test\",Mb,Mb)}catch(a){Lb=!1}function Nb(a,b,c,d,e,f,g,h,k){var l=Array.prototype.slice.call(arguments,3);try{b.apply(c,l)}catch(m){this.onError(m)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(a){Ob=!0;Pb=a}};function Tb(a,b,c,d,e,f,g,h,k){Ob=!1;Pb=null;Nb.apply(Sb,arguments)}\nfunction Ub(a,b,c,d,e,f,g,h,k){Tb.apply(this,arguments);if(Ob){if(Ob){var l=Pb;Ob=!1;Pb=null}else throw Error(p(198));Qb||(Qb=!0,Rb=l)}}function Vb(a){var b=a,c=a;if(a.alternate)for(;b.return;)b=b.return;else{a=b;do b=a,0!==(b.flags&4098)&&(c=b.return),a=b.return;while(a)}return 3===b.tag?c:null}function Wb(a){if(13===a.tag){var b=a.memoizedState;null===b&&(a=a.alternate,null!==a&&(b=a.memoizedState));if(null!==b)return b.dehydrated}return null}function Xb(a){if(Vb(a)!==a)throw Error(p(188));}\nfunction Yb(a){var b=a.alternate;if(!b){b=Vb(a);if(null===b)throw Error(p(188));return b!==a?null:a}for(var c=a,d=b;;){var e=c.return;if(null===e)break;var f=e.alternate;if(null===f){d=e.return;if(null!==d){c=d;continue}break}if(e.child===f.child){for(f=e.child;f;){if(f===c)return Xb(e),a;if(f===d)return Xb(e),b;f=f.sibling}throw Error(p(188));}if(c.return!==d.return)c=e,d=f;else{for(var g=!1,h=e.child;h;){if(h===c){g=!0;c=e;d=f;break}if(h===d){g=!0;d=e;c=f;break}h=h.sibling}if(!g){for(h=f.child;h;){if(h===\nc){g=!0;c=f;d=e;break}if(h===d){g=!0;d=f;c=e;break}h=h.sibling}if(!g)throw Error(p(189));}}if(c.alternate!==d)throw Error(p(190));}if(3!==c.tag)throw Error(p(188));return c.stateNode.current===c?a:b}function Zb(a){a=Yb(a);return null!==a?$b(a):null}function $b(a){if(5===a.tag||6===a.tag)return a;for(a=a.child;null!==a;){var b=$b(a);if(null!==b)return b;a=a.sibling}return null}\nvar ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(a){if(lc&&\"function\"===typeof lc.onCommitFiberRoot)try{lc.onCommitFiberRoot(kc,a,void 0,128===(a.current.flags&128))}catch(b){}}\nvar oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(a){a>>>=0;return 0===a?32:31-(pc(a)/qc|0)|0}var rc=64,sc=4194304;\nfunction tc(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;\ndefault:return a}}function uc(a,b){var c=a.pendingLanes;if(0===c)return 0;var d=0,e=a.suspendedLanes,f=a.pingedLanes,g=c&268435455;if(0!==g){var h=g&~e;0!==h?d=tc(h):(f&=g,0!==f&&(d=tc(f)))}else g=c&~e,0!==g?d=tc(g):0!==f&&(d=tc(f));if(0===d)return 0;if(0!==b&&b!==d&&0===(b&e)&&(e=d&-d,f=b&-b,e>=f||16===e&&0!==(f&4194240)))return b;0!==(d&4)&&(d|=c&16);b=a.entangledLanes;if(0!==b)for(a=a.entanglements,b&=d;0<b;)c=31-oc(b),e=1<<c,d|=a[c],b&=~e;return d}\nfunction vc(a,b){switch(a){case 1:case 2:case 4:return b+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return b+5E3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}\nfunction wc(a,b){for(var c=a.suspendedLanes,d=a.pingedLanes,e=a.expirationTimes,f=a.pendingLanes;0<f;){var g=31-oc(f),h=1<<g,k=e[g];if(-1===k){if(0===(h&c)||0!==(h&d))e[g]=vc(h,b)}else k<=b&&(a.expiredLanes|=h);f&=~h}}function xc(a){a=a.pendingLanes&-1073741825;return 0!==a?a:a&1073741824?1073741824:0}function yc(){var a=rc;rc<<=1;0===(rc&4194240)&&(rc=64);return a}function zc(a){for(var b=[],c=0;31>c;c++)b.push(a);return b}\nfunction Ac(a,b,c){a.pendingLanes|=b;536870912!==b&&(a.suspendedLanes=0,a.pingedLanes=0);a=a.eventTimes;b=31-oc(b);a[b]=c}function Bc(a,b){var c=a.pendingLanes&~b;a.pendingLanes=b;a.suspendedLanes=0;a.pingedLanes=0;a.expiredLanes&=b;a.mutableReadLanes&=b;a.entangledLanes&=b;b=a.entanglements;var d=a.eventTimes;for(a=a.expirationTimes;0<c;){var e=31-oc(c),f=1<<e;b[e]=0;d[e]=-1;a[e]=-1;c&=~f}}\nfunction Cc(a,b){var c=a.entangledLanes|=b;for(a=a.entanglements;c;){var d=31-oc(c),e=1<<d;e&b|a[d]&b&&(a[d]|=b);c&=~e}}var C=0;function Dc(a){a&=-a;return 1<a?4<a?0!==(a&268435455)?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc=\"mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit\".split(\" \");\nfunction Sc(a,b){switch(a){case \"focusin\":case \"focusout\":Lc=null;break;case \"dragenter\":case \"dragleave\":Mc=null;break;case \"mouseover\":case \"mouseout\":Nc=null;break;case \"pointerover\":case \"pointerout\":Oc.delete(b.pointerId);break;case \"gotpointercapture\":case \"lostpointercapture\":Pc.delete(b.pointerId)}}\nfunction Tc(a,b,c,d,e,f){if(null===a||a.nativeEvent!==f)return a={blockedOn:b,domEventName:c,eventSystemFlags:d,nativeEvent:f,targetContainers:[e]},null!==b&&(b=Cb(b),null!==b&&Fc(b)),a;a.eventSystemFlags|=d;b=a.targetContainers;null!==e&&-1===b.indexOf(e)&&b.push(e);return a}\nfunction Uc(a,b,c,d,e){switch(b){case \"focusin\":return Lc=Tc(Lc,a,b,c,d,e),!0;case \"dragenter\":return Mc=Tc(Mc,a,b,c,d,e),!0;case \"mouseover\":return Nc=Tc(Nc,a,b,c,d,e),!0;case \"pointerover\":var f=e.pointerId;Oc.set(f,Tc(Oc.get(f)||null,a,b,c,d,e));return!0;case \"gotpointercapture\":return f=e.pointerId,Pc.set(f,Tc(Pc.get(f)||null,a,b,c,d,e)),!0}return!1}\nfunction Vc(a){var b=Wc(a.target);if(null!==b){var c=Vb(b);if(null!==c)if(b=c.tag,13===b){if(b=Wb(c),null!==b){a.blockedOn=b;Ic(a.priority,function(){Gc(c)});return}}else if(3===b&&c.stateNode.current.memoizedState.isDehydrated){a.blockedOn=3===c.tag?c.stateNode.containerInfo:null;return}}a.blockedOn=null}\nfunction Xc(a){if(null!==a.blockedOn)return!1;for(var b=a.targetContainers;0<b.length;){var c=Yc(a.domEventName,a.eventSystemFlags,b[0],a.nativeEvent);if(null===c){c=a.nativeEvent;var d=new c.constructor(c.type,c);wb=d;c.target.dispatchEvent(d);wb=null}else return b=Cb(c),null!==b&&Fc(b),a.blockedOn=c,!1;b.shift()}return!0}function Zc(a,b,c){Xc(a)&&c.delete(b)}function $c(){Jc=!1;null!==Lc&&Xc(Lc)&&(Lc=null);null!==Mc&&Xc(Mc)&&(Mc=null);null!==Nc&&Xc(Nc)&&(Nc=null);Oc.forEach(Zc);Pc.forEach(Zc)}\nfunction ad(a,b){a.blockedOn===b&&(a.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}\nfunction bd(a){function b(b){return ad(b,a)}if(0<Kc.length){ad(Kc[0],a);for(var c=1;c<Kc.length;c++){var d=Kc[c];d.blockedOn===a&&(d.blockedOn=null)}}null!==Lc&&ad(Lc,a);null!==Mc&&ad(Mc,a);null!==Nc&&ad(Nc,a);Oc.forEach(b);Pc.forEach(b);for(c=0;c<Qc.length;c++)d=Qc[c],d.blockedOn===a&&(d.blockedOn=null);for(;0<Qc.length&&(c=Qc[0],null===c.blockedOn);)Vc(c),null===c.blockedOn&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;\nfunction ed(a,b,c,d){var e=C,f=cd.transition;cd.transition=null;try{C=1,fd(a,b,c,d)}finally{C=e,cd.transition=f}}function gd(a,b,c,d){var e=C,f=cd.transition;cd.transition=null;try{C=4,fd(a,b,c,d)}finally{C=e,cd.transition=f}}\nfunction fd(a,b,c,d){if(dd){var e=Yc(a,b,c,d);if(null===e)hd(a,b,d,id,c),Sc(a,d);else if(Uc(e,a,b,c,d))d.stopPropagation();else if(Sc(a,d),b&4&&-1<Rc.indexOf(a)){for(;null!==e;){var f=Cb(e);null!==f&&Ec(f);f=Yc(a,b,c,d);null===f&&hd(a,b,d,id,c);if(f===e)break;e=f}null!==e&&d.stopPropagation()}else hd(a,b,d,null,c)}}var id=null;\nfunction Yc(a,b,c,d){id=null;a=xb(d);a=Wc(a);if(null!==a)if(b=Vb(a),null===b)a=null;else if(c=b.tag,13===c){a=Wb(b);if(null!==a)return a;a=null}else if(3===c){if(b.stateNode.current.memoizedState.isDehydrated)return 3===b.tag?b.stateNode.containerInfo:null;a=null}else b!==a&&(a=null);id=a;return null}\nfunction jd(a){switch(a){case \"cancel\":case \"click\":case \"close\":case \"contextmenu\":case \"copy\":case \"cut\":case \"auxclick\":case \"dblclick\":case \"dragend\":case \"dragstart\":case \"drop\":case \"focusin\":case \"focusout\":case \"input\":case \"invalid\":case \"keydown\":case \"keypress\":case \"keyup\":case \"mousedown\":case \"mouseup\":case \"paste\":case \"pause\":case \"play\":case \"pointercancel\":case \"pointerdown\":case \"pointerup\":case \"ratechange\":case \"reset\":case \"resize\":case \"seeked\":case \"submit\":case \"touchcancel\":case \"touchend\":case \"touchstart\":case \"volumechange\":case \"change\":case \"selectionchange\":case \"textInput\":case \"compositionstart\":case \"compositionend\":case \"compositionupdate\":case \"beforeblur\":case \"afterblur\":case \"beforeinput\":case \"blur\":case \"fullscreenchange\":case \"focus\":case \"hashchange\":case \"popstate\":case \"select\":case \"selectstart\":return 1;case \"drag\":case \"dragenter\":case \"dragexit\":case \"dragleave\":case \"dragover\":case \"mousemove\":case \"mouseout\":case \"mouseover\":case \"pointermove\":case \"pointerout\":case \"pointerover\":case \"scroll\":case \"toggle\":case \"touchmove\":case \"wheel\":case \"mouseenter\":case \"mouseleave\":case \"pointerenter\":case \"pointerleave\":return 4;\ncase \"message\":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var a,b=ld,c=b.length,d,e=\"value\"in kd?kd.value:kd.textContent,f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);return md=e.slice(a,1<d?1-d:void 0)}\nfunction od(a){var b=a.keyCode;\"charCode\"in a?(a=a.charCode,0===a&&13===b&&(a=13)):a=b;10===a&&(a=13);return 32<=a||13===a?a:0}function pd(){return!0}function qd(){return!1}\nfunction rd(a){function b(b,d,e,f,g){this._reactName=b;this._targetInst=e;this.type=d;this.nativeEvent=f;this.target=g;this.currentTarget=null;for(var c in a)a.hasOwnProperty(c)&&(b=a[c],this[c]=b?b(f):f[c]);this.isDefaultPrevented=(null!=f.defaultPrevented?f.defaultPrevented:!1===f.returnValue)?pd:qd;this.isPropagationStopped=qd;return this}A(b.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():\"unknown\"!==typeof a.returnValue&&\n(a.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():\"unknown\"!==typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd});return b}\nvar sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(a){return void 0===a.relatedTarget?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){if(\"movementX\"in\na)return a.movementX;a!==yd&&(yd&&\"mousemove\"===a.type?(wd=a.screenX-yd.screenX,xd=a.screenY-yd.screenY):xd=wd=0,yd=a);return wd},movementY:function(a){return\"movementY\"in a?a.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function(a){return\"clipboardData\"in a?a.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:\"Escape\",\nSpacebar:\" \",Left:\"ArrowLeft\",Up:\"ArrowUp\",Right:\"ArrowRight\",Down:\"ArrowDown\",Del:\"Delete\",Win:\"OS\",Menu:\"ContextMenu\",Apps:\"ContextMenu\",Scroll:\"ScrollLock\",MozPrintableKey:\"Unidentified\"},Nd={8:\"Backspace\",9:\"Tab\",12:\"Clear\",13:\"Enter\",16:\"Shift\",17:\"Control\",18:\"Alt\",19:\"Pause\",20:\"CapsLock\",27:\"Escape\",32:\" \",33:\"PageUp\",34:\"PageDown\",35:\"End\",36:\"Home\",37:\"ArrowLeft\",38:\"ArrowUp\",39:\"ArrowRight\",40:\"ArrowDown\",45:\"Insert\",46:\"Delete\",112:\"F1\",113:\"F2\",114:\"F3\",115:\"F4\",116:\"F5\",117:\"F6\",118:\"F7\",\n119:\"F8\",120:\"F9\",121:\"F10\",122:\"F11\",123:\"F12\",144:\"NumLock\",145:\"ScrollLock\",224:\"Meta\"},Od={Alt:\"altKey\",Control:\"ctrlKey\",Meta:\"metaKey\",Shift:\"shiftKey\"};function Pd(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):(a=Od[a])?!!b[a]:!1}function zd(){return Pd}\nvar Qd=A({},ud,{key:function(a){if(a.key){var b=Md[a.key]||a.key;if(\"Unidentified\"!==b)return b}return\"keypress\"===a.type?(a=od(a),13===a?\"Enter\":String.fromCharCode(a)):\"keydown\"===a.type||\"keyup\"===a.type?Nd[a.keyCode]||\"Unidentified\":\"\"},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(a){return\"keypress\"===a.type?od(a):0},keyCode:function(a){return\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0},which:function(a){return\"keypress\"===\na.type?od(a):\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function(a){return\"deltaX\"in a?a.deltaX:\"wheelDeltaX\"in a?-a.wheelDeltaX:0},\ndeltaY:function(a){return\"deltaY\"in a?a.deltaY:\"wheelDeltaY\"in a?-a.wheelDeltaY:\"wheelDelta\"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&\"CompositionEvent\"in window,be=null;ia&&\"documentMode\"in document&&(be=document.documentMode);var ce=ia&&\"TextEvent\"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=String.fromCharCode(32),fe=!1;\nfunction ge(a,b){switch(a){case \"keyup\":return-1!==$d.indexOf(b.keyCode);case \"keydown\":return 229!==b.keyCode;case \"keypress\":case \"mousedown\":case \"focusout\":return!0;default:return!1}}function he(a){a=a.detail;return\"object\"===typeof a&&\"data\"in a?a.data:null}var ie=!1;function je(a,b){switch(a){case \"compositionend\":return he(b);case \"keypress\":if(32!==b.which)return null;fe=!0;return ee;case \"textInput\":return a=b.data,a===ee&&fe?null:a;default:return null}}\nfunction ke(a,b){if(ie)return\"compositionend\"===a||!ae&&ge(a,b)?(a=nd(),md=ld=kd=null,ie=!1,a):null;switch(a){case \"paste\":return null;case \"keypress\":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case \"compositionend\":return de&&\"ko\"!==b.locale?null:b.data;default:return null}}\nvar le={color:!0,date:!0,datetime:!0,\"datetime-local\":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return\"input\"===b?!!le[a.type]:\"textarea\"===b?!0:!1}function ne(a,b,c,d){Eb(d);b=oe(b,\"onChange\");0<b.length&&(c=new td(\"onChange\",\"change\",null,c,d),a.push({event:c,listeners:b}))}var pe=null,qe=null;function re(a){se(a,0)}function te(a){var b=ue(a);if(Wa(b))return a}\nfunction ve(a,b){if(\"change\"===a)return b}var we=!1;if(ia){var xe;if(ia){var ye=\"oninput\"in document;if(!ye){var ze=document.createElement(\"div\");ze.setAttribute(\"oninput\",\"return;\");ye=\"function\"===typeof ze.oninput}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent(\"onpropertychange\",Be),qe=pe=null)}function Be(a){if(\"value\"===a.propertyName&&te(qe)){var b=[];ne(b,qe,a,xb(a));Jb(re,b)}}\nfunction Ce(a,b,c){\"focusin\"===a?(Ae(),pe=b,qe=c,pe.attachEvent(\"onpropertychange\",Be)):\"focusout\"===a&&Ae()}function De(a){if(\"selectionchange\"===a||\"keyup\"===a||\"keydown\"===a)return te(qe)}function Ee(a,b){if(\"click\"===a)return te(b)}function Fe(a,b){if(\"input\"===a||\"change\"===a)return te(b)}function Ge(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}var He=\"function\"===typeof Object.is?Object.is:Ge;\nfunction Ie(a,b){if(He(a,b))return!0;if(\"object\"!==typeof a||null===a||\"object\"!==typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var e=c[d];if(!ja.call(b,e)||!He(a[e],b[e]))return!1}return!0}function Je(a){for(;a&&a.firstChild;)a=a.firstChild;return a}\nfunction Ke(a,b){var c=Je(a);a=0;for(var d;c;){if(3===c.nodeType){d=a+c.textContent.length;if(a<=b&&d>=b)return{node:c,offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=Je(c)}}function Le(a,b){return a&&b?a===b?!0:a&&3===a.nodeType?!1:b&&3===b.nodeType?Le(a,b.parentNode):\"contains\"in a?a.contains(b):a.compareDocumentPosition?!!(a.compareDocumentPosition(b)&16):!1:!1}\nfunction Me(){for(var a=window,b=Xa();b instanceof a.HTMLIFrameElement;){try{var c=\"string\"===typeof b.contentWindow.location.href}catch(d){c=!1}if(c)a=b.contentWindow;else break;b=Xa(a.document)}return b}function Ne(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&(\"input\"===b&&(\"text\"===a.type||\"search\"===a.type||\"tel\"===a.type||\"url\"===a.type||\"password\"===a.type)||\"textarea\"===b||\"true\"===a.contentEditable)}\nfunction Oe(a){var b=Me(),c=a.focusedElem,d=a.selectionRange;if(b!==c&&c&&c.ownerDocument&&Le(c.ownerDocument.documentElement,c)){if(null!==d&&Ne(c))if(b=d.start,a=d.end,void 0===a&&(a=b),\"selectionStart\"in c)c.selectionStart=b,c.selectionEnd=Math.min(a,c.value.length);else if(a=(b=c.ownerDocument||document)&&b.defaultView||window,a.getSelection){a=a.getSelection();var e=c.textContent.length,f=Math.min(d.start,e);d=void 0===d.end?f:Math.min(d.end,e);!a.extend&&f>d&&(e=d,d=f,f=e);e=Ke(c,f);var g=Ke(c,\nd);e&&g&&(1!==a.rangeCount||a.anchorNode!==e.node||a.anchorOffset!==e.offset||a.focusNode!==g.node||a.focusOffset!==g.offset)&&(b=b.createRange(),b.setStart(e.node,e.offset),a.removeAllRanges(),f>d?(a.addRange(b),a.extend(g.node,g.offset)):(b.setEnd(g.node,g.offset),a.addRange(b)))}b=[];for(a=c;a=a.parentNode;)1===a.nodeType&&b.push({element:a,left:a.scrollLeft,top:a.scrollTop});\"function\"===typeof c.focus&&c.focus();for(c=0;c<b.length;c++)a=b[c],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}\nvar Pe=ia&&\"documentMode\"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;\nfunction Ue(a,b,c){var d=c.window===c?c.document:9===c.nodeType?c:c.ownerDocument;Te||null==Qe||Qe!==Xa(d)||(d=Qe,\"selectionStart\"in d&&Ne(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Se&&Ie(Se,d)||(Se=d,d=oe(Re,\"onSelect\"),0<d.length&&(b=new td(\"onSelect\",\"select\",null,b,c),a.push({event:b,listeners:d}),b.target=Qe)))}\nfunction Ve(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c[\"Webkit\"+a]=\"webkit\"+b;c[\"Moz\"+a]=\"moz\"+b;return c}var We={animationend:Ve(\"Animation\",\"AnimationEnd\"),animationiteration:Ve(\"Animation\",\"AnimationIteration\"),animationstart:Ve(\"Animation\",\"AnimationStart\"),transitionend:Ve(\"Transition\",\"TransitionEnd\")},Xe={},Ye={};\nia&&(Ye=document.createElement(\"div\").style,\"AnimationEvent\"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),\"TransitionEvent\"in window||delete We.transitionend.transition);function Ze(a){if(Xe[a])return Xe[a];if(!We[a])return a;var b=We[a],c;for(c in b)if(b.hasOwnProperty(c)&&c in Ye)return Xe[a]=b[c];return a}var $e=Ze(\"animationend\"),af=Ze(\"animationiteration\"),bf=Ze(\"animationstart\"),cf=Ze(\"transitionend\"),df=new Map,ef=\"abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel\".split(\" \");\nfunction ff(a,b){df.set(a,b);fa(b,[a])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,\"on\"+kf)}ff($e,\"onAnimationEnd\");ff(af,\"onAnimationIteration\");ff(bf,\"onAnimationStart\");ff(\"dblclick\",\"onDoubleClick\");ff(\"focusin\",\"onFocus\");ff(\"focusout\",\"onBlur\");ff(cf,\"onTransitionEnd\");ha(\"onMouseEnter\",[\"mouseout\",\"mouseover\"]);ha(\"onMouseLeave\",[\"mouseout\",\"mouseover\"]);ha(\"onPointerEnter\",[\"pointerout\",\"pointerover\"]);\nha(\"onPointerLeave\",[\"pointerout\",\"pointerover\"]);fa(\"onChange\",\"change click focusin focusout input keydown keyup selectionchange\".split(\" \"));fa(\"onSelect\",\"focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange\".split(\" \"));fa(\"onBeforeInput\",[\"compositionend\",\"keypress\",\"textInput\",\"paste\"]);fa(\"onCompositionEnd\",\"compositionend focusout keydown keypress keyup mousedown\".split(\" \"));fa(\"onCompositionStart\",\"compositionstart focusout keydown keypress keyup mousedown\".split(\" \"));\nfa(\"onCompositionUpdate\",\"compositionupdate focusout keydown keypress keyup mousedown\".split(\" \"));var lf=\"abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting\".split(\" \"),mf=new Set(\"cancel close invalid load scroll toggle\".split(\" \").concat(lf));\nfunction nf(a,b,c){var d=a.type||\"unknown-event\";a.currentTarget=c;Ub(d,b,void 0,a);a.currentTarget=null}\nfunction se(a,b){b=0!==(b&4);for(var c=0;c<a.length;c++){var d=a[c],e=d.event;d=d.listeners;a:{var f=void 0;if(b)for(var g=d.length-1;0<=g;g--){var h=d[g],k=h.instance,l=h.currentTarget;h=h.listener;if(k!==f&&e.isPropagationStopped())break a;nf(e,h,l);f=k}else for(g=0;g<d.length;g++){h=d[g];k=h.instance;l=h.currentTarget;h=h.listener;if(k!==f&&e.isPropagationStopped())break a;nf(e,h,l);f=k}}}if(Qb)throw a=Rb,Qb=!1,Rb=null,a;}\nfunction D(a,b){var c=b[of];void 0===c&&(c=b[of]=new Set);var d=a+\"__bubble\";c.has(d)||(pf(b,a,2,!1),c.add(d))}function qf(a,b,c){var d=0;b&&(d|=4);pf(c,a,d,b)}var rf=\"_reactListening\"+Math.random().toString(36).slice(2);function sf(a){if(!a[rf]){a[rf]=!0;da.forEach(function(b){\"selectionchange\"!==b&&(mf.has(b)||qf(b,!1,a),qf(b,!0,a))});var b=9===a.nodeType?a:a.ownerDocument;null===b||b[rf]||(b[rf]=!0,qf(\"selectionchange\",!1,b))}}\nfunction pf(a,b,c,d){switch(jd(b)){case 1:var e=ed;break;case 4:e=gd;break;default:e=fd}c=e.bind(null,b,c,a);e=void 0;!Lb||\"touchstart\"!==b&&\"touchmove\"!==b&&\"wheel\"!==b||(e=!0);d?void 0!==e?a.addEventListener(b,c,{capture:!0,passive:e}):a.addEventListener(b,c,!0):void 0!==e?a.addEventListener(b,c,{passive:e}):a.addEventListener(b,c,!1)}\nfunction hd(a,b,c,d,e){var f=d;if(0===(b&1)&&0===(b&2)&&null!==d)a:for(;;){if(null===d)return;var g=d.tag;if(3===g||4===g){var h=d.stateNode.containerInfo;if(h===e||8===h.nodeType&&h.parentNode===e)break;if(4===g)for(g=d.return;null!==g;){var k=g.tag;if(3===k||4===k)if(k=g.stateNode.containerInfo,k===e||8===k.nodeType&&k.parentNode===e)return;g=g.return}for(;null!==h;){g=Wc(h);if(null===g)return;k=g.tag;if(5===k||6===k){d=f=g;continue a}h=h.parentNode}}d=d.return}Jb(function(){var d=f,e=xb(c),g=[];\na:{var h=df.get(a);if(void 0!==h){var k=td,n=a;switch(a){case \"keypress\":if(0===od(c))break a;case \"keydown\":case \"keyup\":k=Rd;break;case \"focusin\":n=\"focus\";k=Fd;break;case \"focusout\":n=\"blur\";k=Fd;break;case \"beforeblur\":case \"afterblur\":k=Fd;break;case \"click\":if(2===c.button)break a;case \"auxclick\":case \"dblclick\":case \"mousedown\":case \"mousemove\":case \"mouseup\":case \"mouseout\":case \"mouseover\":case \"contextmenu\":k=Bd;break;case \"drag\":case \"dragend\":case \"dragenter\":case \"dragexit\":case \"dragleave\":case \"dragover\":case \"dragstart\":case \"drop\":k=\nDd;break;case \"touchcancel\":case \"touchend\":case \"touchmove\":case \"touchstart\":k=Vd;break;case $e:case af:case bf:k=Hd;break;case cf:k=Xd;break;case \"scroll\":k=vd;break;case \"wheel\":k=Zd;break;case \"copy\":case \"cut\":case \"paste\":k=Jd;break;case \"gotpointercapture\":case \"lostpointercapture\":case \"pointercancel\":case \"pointerdown\":case \"pointermove\":case \"pointerout\":case \"pointerover\":case \"pointerup\":k=Td}var t=0!==(b&4),J=!t&&\"scroll\"===a,x=t?null!==h?h+\"Capture\":null:h;t=[];for(var w=d,u;null!==\nw;){u=w;var F=u.stateNode;5===u.tag&&null!==F&&(u=F,null!==x&&(F=Kb(w,x),null!=F&&t.push(tf(w,F,u))));if(J)break;w=w.return}0<t.length&&(h=new k(h,n,null,c,e),g.push({event:h,listeners:t}))}}if(0===(b&7)){a:{h=\"mouseover\"===a||\"pointerover\"===a;k=\"mouseout\"===a||\"pointerout\"===a;if(h&&c!==wb&&(n=c.relatedTarget||c.fromElement)&&(Wc(n)||n[uf]))break a;if(k||h){h=e.window===e?e:(h=e.ownerDocument)?h.defaultView||h.parentWindow:window;if(k){if(n=c.relatedTarget||c.toElement,k=d,n=n?Wc(n):null,null!==\nn&&(J=Vb(n),n!==J||5!==n.tag&&6!==n.tag))n=null}else k=null,n=d;if(k!==n){t=Bd;F=\"onMouseLeave\";x=\"onMouseEnter\";w=\"mouse\";if(\"pointerout\"===a||\"pointerover\"===a)t=Td,F=\"onPointerLeave\",x=\"onPointerEnter\",w=\"pointer\";J=null==k?h:ue(k);u=null==n?h:ue(n);h=new t(F,w+\"leave\",k,c,e);h.target=J;h.relatedTarget=u;F=null;Wc(e)===d&&(t=new t(x,w+\"enter\",n,c,e),t.target=u,t.relatedTarget=J,F=t);J=F;if(k&&n)b:{t=k;x=n;w=0;for(u=t;u;u=vf(u))w++;u=0;for(F=x;F;F=vf(F))u++;for(;0<w-u;)t=vf(t),w--;for(;0<u-w;)x=\nvf(x),u--;for(;w--;){if(t===x||null!==x&&t===x.alternate)break b;t=vf(t);x=vf(x)}t=null}else t=null;null!==k&&wf(g,h,k,t,!1);null!==n&&null!==J&&wf(g,J,n,t,!0)}}}a:{h=d?ue(d):window;k=h.nodeName&&h.nodeName.toLowerCase();if(\"select\"===k||\"input\"===k&&\"file\"===h.type)var na=ve;else if(me(h))if(we)na=Fe;else{na=De;var xa=Ce}else(k=h.nodeName)&&\"input\"===k.toLowerCase()&&(\"checkbox\"===h.type||\"radio\"===h.type)&&(na=Ee);if(na&&(na=na(a,d))){ne(g,na,c,e);break a}xa&&xa(a,h,d);\"focusout\"===a&&(xa=h._wrapperState)&&\nxa.controlled&&\"number\"===h.type&&cb(h,\"number\",h.value)}xa=d?ue(d):window;switch(a){case \"focusin\":if(me(xa)||\"true\"===xa.contentEditable)Qe=xa,Re=d,Se=null;break;case \"focusout\":Se=Re=Qe=null;break;case \"mousedown\":Te=!0;break;case \"contextmenu\":case \"mouseup\":case \"dragend\":Te=!1;Ue(g,c,e);break;case \"selectionchange\":if(Pe)break;case \"keydown\":case \"keyup\":Ue(g,c,e)}var $a;if(ae)b:{switch(a){case \"compositionstart\":var ba=\"onCompositionStart\";break b;case \"compositionend\":ba=\"onCompositionEnd\";\nbreak b;case \"compositionupdate\":ba=\"onCompositionUpdate\";break b}ba=void 0}else ie?ge(a,c)&&(ba=\"onCompositionEnd\"):\"keydown\"===a&&229===c.keyCode&&(ba=\"onCompositionStart\");ba&&(de&&\"ko\"!==c.locale&&(ie||\"onCompositionStart\"!==ba?\"onCompositionEnd\"===ba&&ie&&($a=nd()):(kd=e,ld=\"value\"in kd?kd.value:kd.textContent,ie=!0)),xa=oe(d,ba),0<xa.length&&(ba=new Ld(ba,a,null,c,e),g.push({event:ba,listeners:xa}),$a?ba.data=$a:($a=he(c),null!==$a&&(ba.data=$a))));if($a=ce?je(a,c):ke(a,c))d=oe(d,\"onBeforeInput\"),\n0<d.length&&(e=new Ld(\"onBeforeInput\",\"beforeinput\",null,c,e),g.push({event:e,listeners:d}),e.data=$a)}se(g,b)})}function tf(a,b,c){return{instance:a,listener:b,currentTarget:c}}function oe(a,b){for(var c=b+\"Capture\",d=[];null!==a;){var e=a,f=e.stateNode;5===e.tag&&null!==f&&(e=f,f=Kb(a,c),null!=f&&d.unshift(tf(a,f,e)),f=Kb(a,b),null!=f&&d.push(tf(a,f,e)));a=a.return}return d}function vf(a){if(null===a)return null;do a=a.return;while(a&&5!==a.tag);return a?a:null}\nfunction wf(a,b,c,d,e){for(var f=b._reactName,g=[];null!==c&&c!==d;){var h=c,k=h.alternate,l=h.stateNode;if(null!==k&&k===d)break;5===h.tag&&null!==l&&(h=l,e?(k=Kb(c,f),null!=k&&g.unshift(tf(c,k,h))):e||(k=Kb(c,f),null!=k&&g.push(tf(c,k,h))));c=c.return}0!==g.length&&a.push({event:b,listeners:g})}var xf=/\\r\\n?/g,yf=/\\u0000|\\uFFFD/g;function zf(a){return(\"string\"===typeof a?a:\"\"+a).replace(xf,\"\\n\").replace(yf,\"\")}function Af(a,b,c){b=zf(b);if(zf(a)!==b&&c)throw Error(p(425));}function Bf(){}\nvar Cf=null,Df=null;function Ef(a,b){return\"textarea\"===a||\"noscript\"===a||\"string\"===typeof b.children||\"number\"===typeof b.children||\"object\"===typeof b.dangerouslySetInnerHTML&&null!==b.dangerouslySetInnerHTML&&null!=b.dangerouslySetInnerHTML.__html}\nvar Ff=\"function\"===typeof setTimeout?setTimeout:void 0,Gf=\"function\"===typeof clearTimeout?clearTimeout:void 0,Hf=\"function\"===typeof Promise?Promise:void 0,Jf=\"function\"===typeof queueMicrotask?queueMicrotask:\"undefined\"!==typeof Hf?function(a){return Hf.resolve(null).then(a).catch(If)}:Ff;function If(a){setTimeout(function(){throw a;})}\nfunction Kf(a,b){var c=b,d=0;do{var e=c.nextSibling;a.removeChild(c);if(e&&8===e.nodeType)if(c=e.data,\"/$\"===c){if(0===d){a.removeChild(e);bd(b);return}d--}else\"$\"!==c&&\"$?\"!==c&&\"$!\"!==c||d++;c=e}while(c);bd(b)}function Lf(a){for(;null!=a;a=a.nextSibling){var b=a.nodeType;if(1===b||3===b)break;if(8===b){b=a.data;if(\"$\"===b||\"$!\"===b||\"$?\"===b)break;if(\"/$\"===b)return null}}return a}\nfunction Mf(a){a=a.previousSibling;for(var b=0;a;){if(8===a.nodeType){var c=a.data;if(\"$\"===c||\"$!\"===c||\"$?\"===c){if(0===b)return a;b--}else\"/$\"===c&&b++}a=a.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of=\"__reactFiber$\"+Nf,Pf=\"__reactProps$\"+Nf,uf=\"__reactContainer$\"+Nf,of=\"__reactEvents$\"+Nf,Qf=\"__reactListeners$\"+Nf,Rf=\"__reactHandles$\"+Nf;\nfunction Wc(a){var b=a[Of];if(b)return b;for(var c=a.parentNode;c;){if(b=c[uf]||c[Of]){c=b.alternate;if(null!==b.child||null!==c&&null!==c.child)for(a=Mf(a);null!==a;){if(c=a[Of])return c;a=Mf(a)}return b}a=c;c=a.parentNode}return null}function Cb(a){a=a[Of]||a[uf];return!a||5!==a.tag&&6!==a.tag&&13!==a.tag&&3!==a.tag?null:a}function ue(a){if(5===a.tag||6===a.tag)return a.stateNode;throw Error(p(33));}function Db(a){return a[Pf]||null}var Sf=[],Tf=-1;function Uf(a){return{current:a}}\nfunction E(a){0>Tf||(a.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(a,b){Tf++;Sf[Tf]=a.current;a.current=b}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(a,b){var c=a.type.contextTypes;if(!c)return Vf;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e={},f;for(f in c)e[f]=b[f];d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e);return e}\nfunction Zf(a){a=a.childContextTypes;return null!==a&&void 0!==a}function $f(){E(Wf);E(H)}function ag(a,b,c){if(H.current!==Vf)throw Error(p(168));G(H,b);G(Wf,c)}function bg(a,b,c){var d=a.stateNode;b=b.childContextTypes;if(\"function\"!==typeof d.getChildContext)return c;d=d.getChildContext();for(var e in d)if(!(e in b))throw Error(p(108,Ra(a)||\"Unknown\",e));return A({},c,d)}\nfunction cg(a){a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Vf;Xf=H.current;G(H,a);G(Wf,Wf.current);return!0}function dg(a,b,c){var d=a.stateNode;if(!d)throw Error(p(169));c?(a=bg(a,b,Xf),d.__reactInternalMemoizedMergedChildContext=a,E(Wf),E(H),G(H,a)):E(Wf);G(Wf,c)}var eg=null,fg=!1,gg=!1;function hg(a){null===eg?eg=[a]:eg.push(a)}function ig(a){fg=!0;hg(a)}\nfunction jg(){if(!gg&&null!==eg){gg=!0;var a=0,b=C;try{var c=eg;for(C=1;a<c.length;a++){var d=c[a];do d=d(!0);while(null!==d)}eg=null;fg=!1}catch(e){throw null!==eg&&(eg=eg.slice(a+1)),ac(fc,jg),e;}finally{C=b,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg=\"\";function tg(a,b){kg[lg++]=ng;kg[lg++]=mg;mg=a;ng=b}\nfunction ug(a,b,c){og[pg++]=rg;og[pg++]=sg;og[pg++]=qg;qg=a;var d=rg;a=sg;var e=32-oc(d)-1;d&=~(1<<e);c+=1;var f=32-oc(b)+e;if(30<f){var g=e-e%5;f=(d&(1<<g)-1).toString(32);d>>=g;e-=g;rg=1<<32-oc(b)+e|c<<e|d;sg=f+a}else rg=1<<f|c<<e|d,sg=a}function vg(a){null!==a.return&&(tg(a,1),ug(a,1,0))}function wg(a){for(;a===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;a===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;\nfunction Ag(a,b){var c=Bg(5,null,null,0);c.elementType=\"DELETED\";c.stateNode=b;c.return=a;b=a.deletions;null===b?(a.deletions=[c],a.flags|=16):b.push(c)}\nfunction Cg(a,b){switch(a.tag){case 5:var c=a.type;b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b;return null!==b?(a.stateNode=b,xg=a,yg=Lf(b.firstChild),!0):!1;case 6:return b=\"\"===a.pendingProps||3!==b.nodeType?null:b,null!==b?(a.stateNode=b,xg=a,yg=null,!0):!1;case 13:return b=8!==b.nodeType?null:b,null!==b?(c=null!==qg?{id:rg,overflow:sg}:null,a.memoizedState={dehydrated:b,treeContext:c,retryLane:1073741824},c=Bg(18,null,null,0),c.stateNode=b,c.return=a,a.child=c,xg=a,yg=\nnull,!0):!1;default:return!1}}function Dg(a){return 0!==(a.mode&1)&&0===(a.flags&128)}function Eg(a){if(I){var b=yg;if(b){var c=b;if(!Cg(a,b)){if(Dg(a))throw Error(p(418));b=Lf(c.nextSibling);var d=xg;b&&Cg(a,b)?Ag(d,c):(a.flags=a.flags&-4097|2,I=!1,xg=a)}}else{if(Dg(a))throw Error(p(418));a.flags=a.flags&-4097|2;I=!1;xg=a}}}function Fg(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&13!==a.tag;)a=a.return;xg=a}\nfunction Gg(a){if(a!==xg)return!1;if(!I)return Fg(a),I=!0,!1;var b;(b=3!==a.tag)&&!(b=5!==a.tag)&&(b=a.type,b=\"head\"!==b&&\"body\"!==b&&!Ef(a.type,a.memoizedProps));if(b&&(b=yg)){if(Dg(a))throw Hg(),Error(p(418));for(;b;)Ag(a,b),b=Lf(b.nextSibling)}Fg(a);if(13===a.tag){a=a.memoizedState;a=null!==a?a.dehydrated:null;if(!a)throw Error(p(317));a:{a=a.nextSibling;for(b=0;a;){if(8===a.nodeType){var c=a.data;if(\"/$\"===c){if(0===b){yg=Lf(a.nextSibling);break a}b--}else\"$\"!==c&&\"$!\"!==c&&\"$?\"!==c||b++}a=a.nextSibling}yg=\nnull}}else yg=xg?Lf(a.stateNode.nextSibling):null;return!0}function Hg(){for(var a=yg;a;)a=Lf(a.nextSibling)}function Ig(){yg=xg=null;I=!1}function Jg(a){null===zg?zg=[a]:zg.push(a)}var Kg=ua.ReactCurrentBatchConfig;\nfunction Lg(a,b,c){a=c.ref;if(null!==a&&\"function\"!==typeof a&&\"object\"!==typeof a){if(c._owner){c=c._owner;if(c){if(1!==c.tag)throw Error(p(309));var d=c.stateNode}if(!d)throw Error(p(147,a));var e=d,f=\"\"+a;if(null!==b&&null!==b.ref&&\"function\"===typeof b.ref&&b.ref._stringRef===f)return b.ref;b=function(a){var b=e.refs;null===a?delete b[f]:b[f]=a};b._stringRef=f;return b}if(\"string\"!==typeof a)throw Error(p(284));if(!c._owner)throw Error(p(290,a));}return a}\nfunction Mg(a,b){a=Object.prototype.toString.call(b);throw Error(p(31,\"[object Object]\"===a?\"object with keys {\"+Object.keys(b).join(\", \")+\"}\":a));}function Ng(a){var b=a._init;return b(a._payload)}\nfunction Og(a){function b(b,c){if(a){var d=b.deletions;null===d?(b.deletions=[c],b.flags|=16):d.push(c)}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,b),b=b.sibling;return a}function e(a,b){a=Pg(a,b);a.index=0;a.sibling=null;return a}function f(b,c,d){b.index=d;if(!a)return b.flags|=1048576,c;d=b.alternate;if(null!==d)return d=d.index,d<c?(b.flags|=2,c):d;b.flags|=2;return c}function g(b){a&&\nnull===b.alternate&&(b.flags|=2);return b}function h(a,b,c,d){if(null===b||6!==b.tag)return b=Qg(c,a.mode,d),b.return=a,b;b=e(b,c);b.return=a;return b}function k(a,b,c,d){var f=c.type;if(f===ya)return m(a,b,c.props.children,d,c.key);if(null!==b&&(b.elementType===f||\"object\"===typeof f&&null!==f&&f.$$typeof===Ha&&Ng(f)===b.type))return d=e(b,c.props),d.ref=Lg(a,b,c),d.return=a,d;d=Rg(c.type,c.key,c.props,null,a.mode,d);d.ref=Lg(a,b,c);d.return=a;return d}function l(a,b,c,d){if(null===b||4!==b.tag||\nb.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation)return b=Sg(c,a.mode,d),b.return=a,b;b=e(b,c.children||[]);b.return=a;return b}function m(a,b,c,d,f){if(null===b||7!==b.tag)return b=Tg(c,a.mode,d,f),b.return=a,b;b=e(b,c);b.return=a;return b}function q(a,b,c){if(\"string\"===typeof b&&\"\"!==b||\"number\"===typeof b)return b=Qg(\"\"+b,a.mode,c),b.return=a,b;if(\"object\"===typeof b&&null!==b){switch(b.$$typeof){case va:return c=Rg(b.type,b.key,b.props,null,a.mode,c),\nc.ref=Lg(a,null,b),c.return=a,c;case wa:return b=Sg(b,a.mode,c),b.return=a,b;case Ha:var d=b._init;return q(a,d(b._payload),c)}if(eb(b)||Ka(b))return b=Tg(b,a.mode,c,null),b.return=a,b;Mg(a,b)}return null}function r(a,b,c,d){var e=null!==b?b.key:null;if(\"string\"===typeof c&&\"\"!==c||\"number\"===typeof c)return null!==e?null:h(a,b,\"\"+c,d);if(\"object\"===typeof c&&null!==c){switch(c.$$typeof){case va:return c.key===e?k(a,b,c,d):null;case wa:return c.key===e?l(a,b,c,d):null;case Ha:return e=c._init,r(a,\nb,e(c._payload),d)}if(eb(c)||Ka(c))return null!==e?null:m(a,b,c,d,null);Mg(a,c)}return null}function y(a,b,c,d,e){if(\"string\"===typeof d&&\"\"!==d||\"number\"===typeof d)return a=a.get(c)||null,h(b,a,\"\"+d,e);if(\"object\"===typeof d&&null!==d){switch(d.$$typeof){case va:return a=a.get(null===d.key?c:d.key)||null,k(b,a,d,e);case wa:return a=a.get(null===d.key?c:d.key)||null,l(b,a,d,e);case Ha:var f=d._init;return y(a,b,c,f(d._payload),e)}if(eb(d)||Ka(d))return a=a.get(c)||null,m(b,a,d,e,null);Mg(b,d)}return null}\nfunction n(e,g,h,k){for(var l=null,m=null,u=g,w=g=0,x=null;null!==u&&w<h.length;w++){u.index>w?(x=u,u=null):x=u.sibling;var n=r(e,u,h[w],k);if(null===n){null===u&&(u=x);break}a&&u&&null===n.alternate&&b(e,u);g=f(n,g,w);null===m?l=n:m.sibling=n;m=n;u=x}if(w===h.length)return c(e,u),I&&tg(e,w),l;if(null===u){for(;w<h.length;w++)u=q(e,h[w],k),null!==u&&(g=f(u,g,w),null===m?l=u:m.sibling=u,m=u);I&&tg(e,w);return l}for(u=d(e,u);w<h.length;w++)x=y(u,e,w,h[w],k),null!==x&&(a&&null!==x.alternate&&u.delete(null===\nx.key?w:x.key),g=f(x,g,w),null===m?l=x:m.sibling=x,m=x);a&&u.forEach(function(a){return b(e,a)});I&&tg(e,w);return l}function t(e,g,h,k){var l=Ka(h);if(\"function\"!==typeof l)throw Error(p(150));h=l.call(h);if(null==h)throw Error(p(151));for(var u=l=null,m=g,w=g=0,x=null,n=h.next();null!==m&&!n.done;w++,n=h.next()){m.index>w?(x=m,m=null):x=m.sibling;var t=r(e,m,n.value,k);if(null===t){null===m&&(m=x);break}a&&m&&null===t.alternate&&b(e,m);g=f(t,g,w);null===u?l=t:u.sibling=t;u=t;m=x}if(n.done)return c(e,\nm),I&&tg(e,w),l;if(null===m){for(;!n.done;w++,n=h.next())n=q(e,n.value,k),null!==n&&(g=f(n,g,w),null===u?l=n:u.sibling=n,u=n);I&&tg(e,w);return l}for(m=d(e,m);!n.done;w++,n=h.next())n=y(m,e,w,n.value,k),null!==n&&(a&&null!==n.alternate&&m.delete(null===n.key?w:n.key),g=f(n,g,w),null===u?l=n:u.sibling=n,u=n);a&&m.forEach(function(a){return b(e,a)});I&&tg(e,w);return l}function J(a,d,f,h){\"object\"===typeof f&&null!==f&&f.type===ya&&null===f.key&&(f=f.props.children);if(\"object\"===typeof f&&null!==f){switch(f.$$typeof){case va:a:{for(var k=\nf.key,l=d;null!==l;){if(l.key===k){k=f.type;if(k===ya){if(7===l.tag){c(a,l.sibling);d=e(l,f.props.children);d.return=a;a=d;break a}}else if(l.elementType===k||\"object\"===typeof k&&null!==k&&k.$$typeof===Ha&&Ng(k)===l.type){c(a,l.sibling);d=e(l,f.props);d.ref=Lg(a,l,f);d.return=a;a=d;break a}c(a,l);break}else b(a,l);l=l.sibling}f.type===ya?(d=Tg(f.props.children,a.mode,h,f.key),d.return=a,a=d):(h=Rg(f.type,f.key,f.props,null,a.mode,h),h.ref=Lg(a,d,f),h.return=a,a=h)}return g(a);case wa:a:{for(l=f.key;null!==\nd;){if(d.key===l)if(4===d.tag&&d.stateNode.containerInfo===f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling);d=e(d,f.children||[]);d.return=a;a=d;break a}else{c(a,d);break}else b(a,d);d=d.sibling}d=Sg(f,a.mode,h);d.return=a;a=d}return g(a);case Ha:return l=f._init,J(a,d,l(f._payload),h)}if(eb(f))return n(a,d,f,h);if(Ka(f))return t(a,d,f,h);Mg(a,f)}return\"string\"===typeof f&&\"\"!==f||\"number\"===typeof f?(f=\"\"+f,null!==d&&6===d.tag?(c(a,d.sibling),d=e(d,f),d.return=a,a=d):\n(c(a,d),d=Qg(f,a.mode,h),d.return=a,a=d),g(a)):c(a,d)}return J}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(a){var b=Wg.current;E(Wg);a._currentValue=b}function bh(a,b,c){for(;null!==a;){var d=a.alternate;(a.childLanes&b)!==b?(a.childLanes|=b,null!==d&&(d.childLanes|=b)):null!==d&&(d.childLanes&b)!==b&&(d.childLanes|=b);if(a===c)break;a=a.return}}\nfunction ch(a,b){Xg=a;Zg=Yg=null;a=a.dependencies;null!==a&&null!==a.firstContext&&(0!==(a.lanes&b)&&(dh=!0),a.firstContext=null)}function eh(a){var b=a._currentValue;if(Zg!==a)if(a={context:a,memoizedValue:b,next:null},null===Yg){if(null===Xg)throw Error(p(308));Yg=a;Xg.dependencies={lanes:0,firstContext:a}}else Yg=Yg.next=a;return b}var fh=null;function gh(a){null===fh?fh=[a]:fh.push(a)}\nfunction hh(a,b,c,d){var e=b.interleaved;null===e?(c.next=c,gh(b)):(c.next=e.next,e.next=c);b.interleaved=c;return ih(a,d)}function ih(a,b){a.lanes|=b;var c=a.alternate;null!==c&&(c.lanes|=b);c=a;for(a=a.return;null!==a;)a.childLanes|=b,c=a.alternate,null!==c&&(c.childLanes|=b),c=a,a=a.return;return 3===c.tag?c.stateNode:null}var jh=!1;function kh(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}\nfunction lh(a,b){a=a.updateQueue;b.updateQueue===a&&(b.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function mh(a,b){return{eventTime:a,lane:b,tag:0,payload:null,callback:null,next:null}}\nfunction nh(a,b,c){var d=a.updateQueue;if(null===d)return null;d=d.shared;if(0!==(K&2)){var e=d.pending;null===e?b.next=b:(b.next=e.next,e.next=b);d.pending=b;return ih(a,c)}e=d.interleaved;null===e?(b.next=b,gh(d)):(b.next=e.next,e.next=b);d.interleaved=b;return ih(a,c)}function oh(a,b,c){b=b.updateQueue;if(null!==b&&(b=b.shared,0!==(c&4194240))){var d=b.lanes;d&=a.pendingLanes;c|=d;b.lanes=c;Cc(a,c)}}\nfunction ph(a,b){var c=a.updateQueue,d=a.alternate;if(null!==d&&(d=d.updateQueue,c===d)){var e=null,f=null;c=c.firstBaseUpdate;if(null!==c){do{var g={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};null===f?e=f=g:f=f.next=g;c=c.next}while(null!==c);null===f?e=f=b:f=f.next=b}else e=f=b;c={baseState:d.baseState,firstBaseUpdate:e,lastBaseUpdate:f,shared:d.shared,effects:d.effects};a.updateQueue=c;return}a=c.lastBaseUpdate;null===a?c.firstBaseUpdate=b:a.next=\nb;c.lastBaseUpdate=b}\nfunction qh(a,b,c,d){var e=a.updateQueue;jh=!1;var f=e.firstBaseUpdate,g=e.lastBaseUpdate,h=e.shared.pending;if(null!==h){e.shared.pending=null;var k=h,l=k.next;k.next=null;null===g?f=l:g.next=l;g=k;var m=a.alternate;null!==m&&(m=m.updateQueue,h=m.lastBaseUpdate,h!==g&&(null===h?m.firstBaseUpdate=l:h.next=l,m.lastBaseUpdate=k))}if(null!==f){var q=e.baseState;g=0;m=l=k=null;h=f;do{var r=h.lane,y=h.eventTime;if((d&r)===r){null!==m&&(m=m.next={eventTime:y,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,\nnext:null});a:{var n=a,t=h;r=b;y=c;switch(t.tag){case 1:n=t.payload;if(\"function\"===typeof n){q=n.call(y,q,r);break a}q=n;break a;case 3:n.flags=n.flags&-65537|128;case 0:n=t.payload;r=\"function\"===typeof n?n.call(y,q,r):n;if(null===r||void 0===r)break a;q=A({},q,r);break a;case 2:jh=!0}}null!==h.callback&&0!==h.lane&&(a.flags|=64,r=e.effects,null===r?e.effects=[h]:r.push(h))}else y={eventTime:y,lane:r,tag:h.tag,payload:h.payload,callback:h.callback,next:null},null===m?(l=m=y,k=q):m=m.next=y,g|=r;\nh=h.next;if(null===h)if(h=e.shared.pending,null===h)break;else r=h,h=r.next,r.next=null,e.lastBaseUpdate=r,e.shared.pending=null}while(1);null===m&&(k=q);e.baseState=k;e.firstBaseUpdate=l;e.lastBaseUpdate=m;b=e.shared.interleaved;if(null!==b){e=b;do g|=e.lane,e=e.next;while(e!==b)}else null===f&&(e.shared.lanes=0);rh|=g;a.lanes=g;a.memoizedState=q}}\nfunction sh(a,b,c){a=b.effects;b.effects=null;if(null!==a)for(b=0;b<a.length;b++){var d=a[b],e=d.callback;if(null!==e){d.callback=null;d=c;if(\"function\"!==typeof e)throw Error(p(191,e));e.call(d)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(a){if(a===th)throw Error(p(174));return a}\nfunction yh(a,b){G(wh,b);G(vh,a);G(uh,th);a=b.nodeType;switch(a){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:lb(null,\"\");break;default:a=8===a?b.parentNode:b,b=a.namespaceURI||null,a=a.tagName,b=lb(b,a)}E(uh);G(uh,b)}function zh(){E(uh);E(vh);E(wh)}function Ah(a){xh(wh.current);var b=xh(uh.current);var c=lb(b,a.type);b!==c&&(G(vh,a),G(uh,c))}function Bh(a){vh.current===a&&(E(uh),E(vh))}var L=Uf(0);\nfunction Ch(a){for(var b=a;null!==b;){if(13===b.tag){var c=b.memoizedState;if(null!==c&&(c=c.dehydrated,null===c||\"$?\"===c.data||\"$!\"===c.data))return b}else if(19===b.tag&&void 0!==b.memoizedProps.revealOrder){if(0!==(b.flags&128))return b}else if(null!==b.child){b.child.return=b;b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}return null}var Dh=[];\nfunction Eh(){for(var a=0;a<Dh.length;a++)Dh[a]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M=null,N=null,O=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P(){throw Error(p(321));}function Mh(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!He(a[c],b[c]))return!1;return!0}\nfunction Nh(a,b,c,d,e,f){Hh=f;M=b;b.memoizedState=null;b.updateQueue=null;b.lanes=0;Fh.current=null===a||null===a.memoizedState?Oh:Ph;a=c(d,e);if(Jh){f=0;do{Jh=!1;Kh=0;if(25<=f)throw Error(p(301));f+=1;O=N=null;b.updateQueue=null;Fh.current=Qh;a=c(d,e)}while(Jh)}Fh.current=Rh;b=null!==N&&null!==N.next;Hh=0;O=N=M=null;Ih=!1;if(b)throw Error(p(300));return a}function Sh(){var a=0!==Kh;Kh=0;return a}\nfunction Th(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};null===O?M.memoizedState=O=a:O=O.next=a;return O}function Uh(){if(null===N){var a=M.alternate;a=null!==a?a.memoizedState:null}else a=N.next;var b=null===O?M.memoizedState:O.next;if(null!==b)O=b,N=a;else{if(null===a)throw Error(p(310));N=a;a={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null};null===O?M.memoizedState=O=a:O=O.next=a}return O}\nfunction Vh(a,b){return\"function\"===typeof b?b(a):b}\nfunction Wh(a){var b=Uh(),c=b.queue;if(null===c)throw Error(p(311));c.lastRenderedReducer=a;var d=N,e=d.baseQueue,f=c.pending;if(null!==f){if(null!==e){var g=e.next;e.next=f.next;f.next=g}d.baseQueue=e=f;c.pending=null}if(null!==e){f=e.next;d=d.baseState;var h=g=null,k=null,l=f;do{var m=l.lane;if((Hh&m)===m)null!==k&&(k=k.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),d=l.hasEagerState?l.eagerState:a(d,l.action);else{var q={lane:m,action:l.action,hasEagerState:l.hasEagerState,\neagerState:l.eagerState,next:null};null===k?(h=k=q,g=d):k=k.next=q;M.lanes|=m;rh|=m}l=l.next}while(null!==l&&l!==f);null===k?g=d:k.next=h;He(d,b.memoizedState)||(dh=!0);b.memoizedState=d;b.baseState=g;b.baseQueue=k;c.lastRenderedState=d}a=c.interleaved;if(null!==a){e=a;do f=e.lane,M.lanes|=f,rh|=f,e=e.next;while(e!==a)}else null===e&&(c.lanes=0);return[b.memoizedState,c.dispatch]}\nfunction Xh(a){var b=Uh(),c=b.queue;if(null===c)throw Error(p(311));c.lastRenderedReducer=a;var d=c.dispatch,e=c.pending,f=b.memoizedState;if(null!==e){c.pending=null;var g=e=e.next;do f=a(f,g.action),g=g.next;while(g!==e);He(f,b.memoizedState)||(dh=!0);b.memoizedState=f;null===b.baseQueue&&(b.baseState=f);c.lastRenderedState=f}return[f,d]}function Yh(){}\nfunction Zh(a,b){var c=M,d=Uh(),e=b(),f=!He(d.memoizedState,e);f&&(d.memoizedState=e,dh=!0);d=d.queue;$h(ai.bind(null,c,d,a),[a]);if(d.getSnapshot!==b||f||null!==O&&O.memoizedState.tag&1){c.flags|=2048;bi(9,ci.bind(null,c,d,e,b),void 0,null);if(null===Q)throw Error(p(349));0!==(Hh&30)||di(c,b,e)}return e}function di(a,b,c){a.flags|=16384;a={getSnapshot:b,value:c};b=M.updateQueue;null===b?(b={lastEffect:null,stores:null},M.updateQueue=b,b.stores=[a]):(c=b.stores,null===c?b.stores=[a]:c.push(a))}\nfunction ci(a,b,c,d){b.value=c;b.getSnapshot=d;ei(b)&&fi(a)}function ai(a,b,c){return c(function(){ei(b)&&fi(a)})}function ei(a){var b=a.getSnapshot;a=a.value;try{var c=b();return!He(a,c)}catch(d){return!0}}function fi(a){var b=ih(a,1);null!==b&&gi(b,a,1,-1)}\nfunction hi(a){var b=Th();\"function\"===typeof a&&(a=a());b.memoizedState=b.baseState=a;a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:a};b.queue=a;a=a.dispatch=ii.bind(null,M,a);return[b.memoizedState,a]}\nfunction bi(a,b,c,d){a={tag:a,create:b,destroy:c,deps:d,next:null};b=M.updateQueue;null===b?(b={lastEffect:null,stores:null},M.updateQueue=b,b.lastEffect=a.next=a):(c=b.lastEffect,null===c?b.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,b.lastEffect=a));return a}function ji(){return Uh().memoizedState}function ki(a,b,c,d){var e=Th();M.flags|=a;e.memoizedState=bi(1|b,c,void 0,void 0===d?null:d)}\nfunction li(a,b,c,d){var e=Uh();d=void 0===d?null:d;var f=void 0;if(null!==N){var g=N.memoizedState;f=g.destroy;if(null!==d&&Mh(d,g.deps)){e.memoizedState=bi(b,c,f,d);return}}M.flags|=a;e.memoizedState=bi(1|b,c,f,d)}function mi(a,b){return ki(8390656,8,a,b)}function $h(a,b){return li(2048,8,a,b)}function ni(a,b){return li(4,2,a,b)}function oi(a,b){return li(4,4,a,b)}\nfunction pi(a,b){if(\"function\"===typeof b)return a=a(),b(a),function(){b(null)};if(null!==b&&void 0!==b)return a=a(),b.current=a,function(){b.current=null}}function qi(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return li(4,4,pi.bind(null,b,a),c)}function ri(){}function si(a,b){var c=Uh();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&Mh(b,d[1]))return d[0];c.memoizedState=[a,b];return a}\nfunction ti(a,b){var c=Uh();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&Mh(b,d[1]))return d[0];a=a();c.memoizedState=[a,b];return a}function ui(a,b,c){if(0===(Hh&21))return a.baseState&&(a.baseState=!1,dh=!0),a.memoizedState=c;He(c,b)||(c=yc(),M.lanes|=c,rh|=c,a.baseState=!0);return b}function vi(a,b){var c=C;C=0!==c&&4>c?c:4;a(!0);var d=Gh.transition;Gh.transition={};try{a(!1),b()}finally{C=c,Gh.transition=d}}function wi(){return Uh().memoizedState}\nfunction xi(a,b,c){var d=yi(a);c={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null};if(zi(a))Ai(b,c);else if(c=hh(a,b,c,d),null!==c){var e=R();gi(c,a,d,e);Bi(c,b,d)}}\nfunction ii(a,b,c){var d=yi(a),e={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null};if(zi(a))Ai(b,e);else{var f=a.alternate;if(0===a.lanes&&(null===f||0===f.lanes)&&(f=b.lastRenderedReducer,null!==f))try{var g=b.lastRenderedState,h=f(g,c);e.hasEagerState=!0;e.eagerState=h;if(He(h,g)){var k=b.interleaved;null===k?(e.next=e,gh(b)):(e.next=k.next,k.next=e);b.interleaved=e;return}}catch(l){}finally{}c=hh(a,b,e,d);null!==c&&(e=R(),gi(c,a,d,e),Bi(c,b,d))}}\nfunction zi(a){var b=a.alternate;return a===M||null!==b&&b===M}function Ai(a,b){Jh=Ih=!0;var c=a.pending;null===c?b.next=b:(b.next=c.next,c.next=b);a.pending=b}function Bi(a,b,c){if(0!==(c&4194240)){var d=b.lanes;d&=a.pendingLanes;c|=d;b.lanes=c;Cc(a,c)}}\nvar Rh={readContext:eh,useCallback:P,useContext:P,useEffect:P,useImperativeHandle:P,useInsertionEffect:P,useLayoutEffect:P,useMemo:P,useReducer:P,useRef:P,useState:P,useDebugValue:P,useDeferredValue:P,useTransition:P,useMutableSource:P,useSyncExternalStore:P,useId:P,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(a,b){Th().memoizedState=[a,void 0===b?null:b];return a},useContext:eh,useEffect:mi,useImperativeHandle:function(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return ki(4194308,\n4,pi.bind(null,b,a),c)},useLayoutEffect:function(a,b){return ki(4194308,4,a,b)},useInsertionEffect:function(a,b){return ki(4,2,a,b)},useMemo:function(a,b){var c=Th();b=void 0===b?null:b;a=a();c.memoizedState=[a,b];return a},useReducer:function(a,b,c){var d=Th();b=void 0!==c?c(b):b;d.memoizedState=d.baseState=b;a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:b};d.queue=a;a=a.dispatch=xi.bind(null,M,a);return[d.memoizedState,a]},useRef:function(a){var b=\nTh();a={current:a};return b.memoizedState=a},useState:hi,useDebugValue:ri,useDeferredValue:function(a){return Th().memoizedState=a},useTransition:function(){var a=hi(!1),b=a[0];a=vi.bind(null,a[1]);Th().memoizedState=a;return[b,a]},useMutableSource:function(){},useSyncExternalStore:function(a,b,c){var d=M,e=Th();if(I){if(void 0===c)throw Error(p(407));c=c()}else{c=b();if(null===Q)throw Error(p(349));0!==(Hh&30)||di(d,b,c)}e.memoizedState=c;var f={value:c,getSnapshot:b};e.queue=f;mi(ai.bind(null,d,\nf,a),[a]);d.flags|=2048;bi(9,ci.bind(null,d,f,c,b),void 0,null);return c},useId:function(){var a=Th(),b=Q.identifierPrefix;if(I){var c=sg;var d=rg;c=(d&~(1<<32-oc(d)-1)).toString(32)+c;b=\":\"+b+\"R\"+c;c=Kh++;0<c&&(b+=\"H\"+c.toString(32));b+=\":\"}else c=Lh++,b=\":\"+b+\"r\"+c.toString(32)+\":\";return a.memoizedState=b},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},\nuseDebugValue:ri,useDeferredValue:function(a){var b=Uh();return ui(b,N.memoizedState,a)},useTransition:function(){var a=Wh(Vh)[0],b=Uh().memoizedState;return[a,b]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(a){var b=Uh();return null===\nN?b.memoizedState=a:ui(b,N.memoizedState,a)},useTransition:function(){var a=Xh(Vh)[0],b=Uh().memoizedState;return[a,b]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(a,b){if(a&&a.defaultProps){b=A({},b);a=a.defaultProps;for(var c in a)void 0===b[c]&&(b[c]=a[c]);return b}return b}function Di(a,b,c,d){b=a.memoizedState;c=c(d,b);c=null===c||void 0===c?b:A({},b,c);a.memoizedState=c;0===a.lanes&&(a.updateQueue.baseState=c)}\nvar Ei={isMounted:function(a){return(a=a._reactInternals)?Vb(a)===a:!1},enqueueSetState:function(a,b,c){a=a._reactInternals;var d=R(),e=yi(a),f=mh(d,e);f.payload=b;void 0!==c&&null!==c&&(f.callback=c);b=nh(a,f,e);null!==b&&(gi(b,a,e,d),oh(b,a,e))},enqueueReplaceState:function(a,b,c){a=a._reactInternals;var d=R(),e=yi(a),f=mh(d,e);f.tag=1;f.payload=b;void 0!==c&&null!==c&&(f.callback=c);b=nh(a,f,e);null!==b&&(gi(b,a,e,d),oh(b,a,e))},enqueueForceUpdate:function(a,b){a=a._reactInternals;var c=R(),d=\nyi(a),e=mh(c,d);e.tag=2;void 0!==b&&null!==b&&(e.callback=b);b=nh(a,e,d);null!==b&&(gi(b,a,d,c),oh(b,a,d))}};function Fi(a,b,c,d,e,f,g){a=a.stateNode;return\"function\"===typeof a.shouldComponentUpdate?a.shouldComponentUpdate(d,f,g):b.prototype&&b.prototype.isPureReactComponent?!Ie(c,d)||!Ie(e,f):!0}\nfunction Gi(a,b,c){var d=!1,e=Vf;var f=b.contextType;\"object\"===typeof f&&null!==f?f=eh(f):(e=Zf(b)?Xf:H.current,d=b.contextTypes,f=(d=null!==d&&void 0!==d)?Yf(a,e):Vf);b=new b(c,f);a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null;b.updater=Ei;a.stateNode=b;b._reactInternals=a;d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=f);return b}\nfunction Hi(a,b,c,d){a=b.state;\"function\"===typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d);\"function\"===typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d);b.state!==a&&Ei.enqueueReplaceState(b,b.state,null)}\nfunction Ii(a,b,c,d){var e=a.stateNode;e.props=c;e.state=a.memoizedState;e.refs={};kh(a);var f=b.contextType;\"object\"===typeof f&&null!==f?e.context=eh(f):(f=Zf(b)?Xf:H.current,e.context=Yf(a,f));e.state=a.memoizedState;f=b.getDerivedStateFromProps;\"function\"===typeof f&&(Di(a,b,f,c),e.state=a.memoizedState);\"function\"===typeof b.getDerivedStateFromProps||\"function\"===typeof e.getSnapshotBeforeUpdate||\"function\"!==typeof e.UNSAFE_componentWillMount&&\"function\"!==typeof e.componentWillMount||(b=e.state,\n\"function\"===typeof e.componentWillMount&&e.componentWillMount(),\"function\"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&Ei.enqueueReplaceState(e,e.state,null),qh(a,c,e,d),e.state=a.memoizedState);\"function\"===typeof e.componentDidMount&&(a.flags|=4194308)}function Ji(a,b){try{var c=\"\",d=b;do c+=Pa(d),d=d.return;while(d);var e=c}catch(f){e=\"\\nError generating stack: \"+f.message+\"\\n\"+f.stack}return{value:a,source:b,stack:e,digest:null}}\nfunction Ki(a,b,c){return{value:a,source:null,stack:null!=c?c:null,digest:null!=b?b:null}}function Li(a,b){try{console.error(b.value)}catch(c){setTimeout(function(){throw c;})}}var Mi=\"function\"===typeof WeakMap?WeakMap:Map;function Ni(a,b,c){c=mh(-1,c);c.tag=3;c.payload={element:null};var d=b.value;c.callback=function(){Oi||(Oi=!0,Pi=d);Li(a,b)};return c}\nfunction Qi(a,b,c){c=mh(-1,c);c.tag=3;var d=a.type.getDerivedStateFromError;if(\"function\"===typeof d){var e=b.value;c.payload=function(){return d(e)};c.callback=function(){Li(a,b)}}var f=a.stateNode;null!==f&&\"function\"===typeof f.componentDidCatch&&(c.callback=function(){Li(a,b);\"function\"!==typeof d&&(null===Ri?Ri=new Set([this]):Ri.add(this));var c=b.stack;this.componentDidCatch(b.value,{componentStack:null!==c?c:\"\"})});return c}\nfunction Si(a,b,c){var d=a.pingCache;if(null===d){d=a.pingCache=new Mi;var e=new Set;d.set(b,e)}else e=d.get(b),void 0===e&&(e=new Set,d.set(b,e));e.has(c)||(e.add(c),a=Ti.bind(null,a,b,c),b.then(a,a))}function Ui(a){do{var b;if(b=13===a.tag)b=a.memoizedState,b=null!==b?null!==b.dehydrated?!0:!1:!0;if(b)return a;a=a.return}while(null!==a);return null}\nfunction Vi(a,b,c,d,e){if(0===(a.mode&1))return a===b?a.flags|=65536:(a.flags|=128,c.flags|=131072,c.flags&=-52805,1===c.tag&&(null===c.alternate?c.tag=17:(b=mh(-1,1),b.tag=2,nh(c,b,1))),c.lanes|=1),a;a.flags|=65536;a.lanes=e;return a}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(a,b,c,d){b.child=null===a?Vg(b,null,c,d):Ug(b,a.child,c,d)}\nfunction Yi(a,b,c,d,e){c=c.render;var f=b.ref;ch(b,e);d=Nh(a,b,c,d,f,e);c=Sh();if(null!==a&&!dh)return b.updateQueue=a.updateQueue,b.flags&=-2053,a.lanes&=~e,Zi(a,b,e);I&&c&&vg(b);b.flags|=1;Xi(a,b,d,e);return b.child}\nfunction $i(a,b,c,d,e){if(null===a){var f=c.type;if(\"function\"===typeof f&&!aj(f)&&void 0===f.defaultProps&&null===c.compare&&void 0===c.defaultProps)return b.tag=15,b.type=f,bj(a,b,f,d,e);a=Rg(c.type,null,d,b,b.mode,e);a.ref=b.ref;a.return=b;return b.child=a}f=a.child;if(0===(a.lanes&e)){var g=f.memoizedProps;c=c.compare;c=null!==c?c:Ie;if(c(g,d)&&a.ref===b.ref)return Zi(a,b,e)}b.flags|=1;a=Pg(f,d);a.ref=b.ref;a.return=b;return b.child=a}\nfunction bj(a,b,c,d,e){if(null!==a){var f=a.memoizedProps;if(Ie(f,d)&&a.ref===b.ref)if(dh=!1,b.pendingProps=d=f,0!==(a.lanes&e))0!==(a.flags&131072)&&(dh=!0);else return b.lanes=a.lanes,Zi(a,b,e)}return cj(a,b,c,d,e)}\nfunction dj(a,b,c){var d=b.pendingProps,e=d.children,f=null!==a?a.memoizedState:null;if(\"hidden\"===d.mode)if(0===(b.mode&1))b.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=c;else{if(0===(c&1073741824))return a=null!==f?f.baseLanes|c:c,b.lanes=b.childLanes=1073741824,b.memoizedState={baseLanes:a,cachePool:null,transitions:null},b.updateQueue=null,G(ej,fj),fj|=a,null;b.memoizedState={baseLanes:0,cachePool:null,transitions:null};d=null!==f?f.baseLanes:c;G(ej,fj);fj|=d}else null!==\nf?(d=f.baseLanes|c,b.memoizedState=null):d=c,G(ej,fj),fj|=d;Xi(a,b,e,c);return b.child}function gj(a,b){var c=b.ref;if(null===a&&null!==c||null!==a&&a.ref!==c)b.flags|=512,b.flags|=2097152}function cj(a,b,c,d,e){var f=Zf(c)?Xf:H.current;f=Yf(b,f);ch(b,e);c=Nh(a,b,c,d,f,e);d=Sh();if(null!==a&&!dh)return b.updateQueue=a.updateQueue,b.flags&=-2053,a.lanes&=~e,Zi(a,b,e);I&&d&&vg(b);b.flags|=1;Xi(a,b,c,e);return b.child}\nfunction hj(a,b,c,d,e){if(Zf(c)){var f=!0;cg(b)}else f=!1;ch(b,e);if(null===b.stateNode)ij(a,b),Gi(b,c,d),Ii(b,c,d,e),d=!0;else if(null===a){var g=b.stateNode,h=b.memoizedProps;g.props=h;var k=g.context,l=c.contextType;\"object\"===typeof l&&null!==l?l=eh(l):(l=Zf(c)?Xf:H.current,l=Yf(b,l));var m=c.getDerivedStateFromProps,q=\"function\"===typeof m||\"function\"===typeof g.getSnapshotBeforeUpdate;q||\"function\"!==typeof g.UNSAFE_componentWillReceiveProps&&\"function\"!==typeof g.componentWillReceiveProps||\n(h!==d||k!==l)&&Hi(b,g,d,l);jh=!1;var r=b.memoizedState;g.state=r;qh(b,d,g,e);k=b.memoizedState;h!==d||r!==k||Wf.current||jh?(\"function\"===typeof m&&(Di(b,c,m,d),k=b.memoizedState),(h=jh||Fi(b,c,h,d,r,k,l))?(q||\"function\"!==typeof g.UNSAFE_componentWillMount&&\"function\"!==typeof g.componentWillMount||(\"function\"===typeof g.componentWillMount&&g.componentWillMount(),\"function\"===typeof g.UNSAFE_componentWillMount&&g.UNSAFE_componentWillMount()),\"function\"===typeof g.componentDidMount&&(b.flags|=4194308)):\n(\"function\"===typeof g.componentDidMount&&(b.flags|=4194308),b.memoizedProps=d,b.memoizedState=k),g.props=d,g.state=k,g.context=l,d=h):(\"function\"===typeof g.componentDidMount&&(b.flags|=4194308),d=!1)}else{g=b.stateNode;lh(a,b);h=b.memoizedProps;l=b.type===b.elementType?h:Ci(b.type,h);g.props=l;q=b.pendingProps;r=g.context;k=c.contextType;\"object\"===typeof k&&null!==k?k=eh(k):(k=Zf(c)?Xf:H.current,k=Yf(b,k));var y=c.getDerivedStateFromProps;(m=\"function\"===typeof y||\"function\"===typeof g.getSnapshotBeforeUpdate)||\n\"function\"!==typeof g.UNSAFE_componentWillReceiveProps&&\"function\"!==typeof g.componentWillReceiveProps||(h!==q||r!==k)&&Hi(b,g,d,k);jh=!1;r=b.memoizedState;g.state=r;qh(b,d,g,e);var n=b.memoizedState;h!==q||r!==n||Wf.current||jh?(\"function\"===typeof y&&(Di(b,c,y,d),n=b.memoizedState),(l=jh||Fi(b,c,l,d,r,n,k)||!1)?(m||\"function\"!==typeof g.UNSAFE_componentWillUpdate&&\"function\"!==typeof g.componentWillUpdate||(\"function\"===typeof g.componentWillUpdate&&g.componentWillUpdate(d,n,k),\"function\"===typeof g.UNSAFE_componentWillUpdate&&\ng.UNSAFE_componentWillUpdate(d,n,k)),\"function\"===typeof g.componentDidUpdate&&(b.flags|=4),\"function\"===typeof g.getSnapshotBeforeUpdate&&(b.flags|=1024)):(\"function\"!==typeof g.componentDidUpdate||h===a.memoizedProps&&r===a.memoizedState||(b.flags|=4),\"function\"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&r===a.memoizedState||(b.flags|=1024),b.memoizedProps=d,b.memoizedState=n),g.props=d,g.state=n,g.context=k,d=l):(\"function\"!==typeof g.componentDidUpdate||h===a.memoizedProps&&r===\na.memoizedState||(b.flags|=4),\"function\"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&r===a.memoizedState||(b.flags|=1024),d=!1)}return jj(a,b,c,d,f,e)}\nfunction jj(a,b,c,d,e,f){gj(a,b);var g=0!==(b.flags&128);if(!d&&!g)return e&&dg(b,c,!1),Zi(a,b,f);d=b.stateNode;Wi.current=b;var h=g&&\"function\"!==typeof c.getDerivedStateFromError?null:d.render();b.flags|=1;null!==a&&g?(b.child=Ug(b,a.child,null,f),b.child=Ug(b,null,h,f)):Xi(a,b,h,f);b.memoizedState=d.state;e&&dg(b,c,!0);return b.child}function kj(a){var b=a.stateNode;b.pendingContext?ag(a,b.pendingContext,b.pendingContext!==b.context):b.context&&ag(a,b.context,!1);yh(a,b.containerInfo)}\nfunction lj(a,b,c,d,e){Ig();Jg(e);b.flags|=256;Xi(a,b,c,d);return b.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(a){return{baseLanes:a,cachePool:null,transitions:null}}\nfunction oj(a,b,c){var d=b.pendingProps,e=L.current,f=!1,g=0!==(b.flags&128),h;(h=g)||(h=null!==a&&null===a.memoizedState?!1:0!==(e&2));if(h)f=!0,b.flags&=-129;else if(null===a||null!==a.memoizedState)e|=1;G(L,e&1);if(null===a){Eg(b);a=b.memoizedState;if(null!==a&&(a=a.dehydrated,null!==a))return 0===(b.mode&1)?b.lanes=1:\"$!\"===a.data?b.lanes=8:b.lanes=1073741824,null;g=d.children;a=d.fallback;return f?(d=b.mode,f=b.child,g={mode:\"hidden\",children:g},0===(d&1)&&null!==f?(f.childLanes=0,f.pendingProps=\ng):f=pj(g,d,0,null),a=Tg(a,d,c,null),f.return=b,a.return=b,f.sibling=a,b.child=f,b.child.memoizedState=nj(c),b.memoizedState=mj,a):qj(b,g)}e=a.memoizedState;if(null!==e&&(h=e.dehydrated,null!==h))return rj(a,b,g,d,h,e,c);if(f){f=d.fallback;g=b.mode;e=a.child;h=e.sibling;var k={mode:\"hidden\",children:d.children};0===(g&1)&&b.child!==e?(d=b.child,d.childLanes=0,d.pendingProps=k,b.deletions=null):(d=Pg(e,k),d.subtreeFlags=e.subtreeFlags&14680064);null!==h?f=Pg(h,f):(f=Tg(f,g,c,null),f.flags|=2);f.return=\nb;d.return=b;d.sibling=f;b.child=d;d=f;f=b.child;g=a.child.memoizedState;g=null===g?nj(c):{baseLanes:g.baseLanes|c,cachePool:null,transitions:g.transitions};f.memoizedState=g;f.childLanes=a.childLanes&~c;b.memoizedState=mj;return d}f=a.child;a=f.sibling;d=Pg(f,{mode:\"visible\",children:d.children});0===(b.mode&1)&&(d.lanes=c);d.return=b;d.sibling=null;null!==a&&(c=b.deletions,null===c?(b.deletions=[a],b.flags|=16):c.push(a));b.child=d;b.memoizedState=null;return d}\nfunction qj(a,b){b=pj({mode:\"visible\",children:b},a.mode,0,null);b.return=a;return a.child=b}function sj(a,b,c,d){null!==d&&Jg(d);Ug(b,a.child,null,c);a=qj(b,b.pendingProps.children);a.flags|=2;b.memoizedState=null;return a}\nfunction rj(a,b,c,d,e,f,g){if(c){if(b.flags&256)return b.flags&=-257,d=Ki(Error(p(422))),sj(a,b,g,d);if(null!==b.memoizedState)return b.child=a.child,b.flags|=128,null;f=d.fallback;e=b.mode;d=pj({mode:\"visible\",children:d.children},e,0,null);f=Tg(f,e,g,null);f.flags|=2;d.return=b;f.return=b;d.sibling=f;b.child=d;0!==(b.mode&1)&&Ug(b,a.child,null,g);b.child.memoizedState=nj(g);b.memoizedState=mj;return f}if(0===(b.mode&1))return sj(a,b,g,null);if(\"$!\"===e.data){d=e.nextSibling&&e.nextSibling.dataset;\nif(d)var h=d.dgst;d=h;f=Error(p(419));d=Ki(f,d,void 0);return sj(a,b,g,d)}h=0!==(g&a.childLanes);if(dh||h){d=Q;if(null!==d){switch(g&-g){case 4:e=2;break;case 16:e=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:e=32;break;case 536870912:e=268435456;break;default:e=0}e=0!==(e&(d.suspendedLanes|g))?0:e;\n0!==e&&e!==f.retryLane&&(f.retryLane=e,ih(a,e),gi(d,a,e,-1))}tj();d=Ki(Error(p(421)));return sj(a,b,g,d)}if(\"$?\"===e.data)return b.flags|=128,b.child=a.child,b=uj.bind(null,a),e._reactRetry=b,null;a=f.treeContext;yg=Lf(e.nextSibling);xg=b;I=!0;zg=null;null!==a&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=a.id,sg=a.overflow,qg=b);b=qj(b,d.children);b.flags|=4096;return b}function vj(a,b,c){a.lanes|=b;var d=a.alternate;null!==d&&(d.lanes|=b);bh(a.return,b,c)}\nfunction wj(a,b,c,d,e){var f=a.memoizedState;null===f?a.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:e}:(f.isBackwards=b,f.rendering=null,f.renderingStartTime=0,f.last=d,f.tail=c,f.tailMode=e)}\nfunction xj(a,b,c){var d=b.pendingProps,e=d.revealOrder,f=d.tail;Xi(a,b,d.children,c);d=L.current;if(0!==(d&2))d=d&1|2,b.flags|=128;else{if(null!==a&&0!==(a.flags&128))a:for(a=b.child;null!==a;){if(13===a.tag)null!==a.memoizedState&&vj(a,c,b);else if(19===a.tag)vj(a,c,b);else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===b)break a;for(;null===a.sibling;){if(null===a.return||a.return===b)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}d&=1}G(L,d);if(0===(b.mode&1))b.memoizedState=\nnull;else switch(e){case \"forwards\":c=b.child;for(e=null;null!==c;)a=c.alternate,null!==a&&null===Ch(a)&&(e=c),c=c.sibling;c=e;null===c?(e=b.child,b.child=null):(e=c.sibling,c.sibling=null);wj(b,!1,e,c,f);break;case \"backwards\":c=null;e=b.child;for(b.child=null;null!==e;){a=e.alternate;if(null!==a&&null===Ch(a)){b.child=e;break}a=e.sibling;e.sibling=c;c=e;e=a}wj(b,!0,c,null,f);break;case \"together\":wj(b,!1,null,null,void 0);break;default:b.memoizedState=null}return b.child}\nfunction ij(a,b){0===(b.mode&1)&&null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2)}function Zi(a,b,c){null!==a&&(b.dependencies=a.dependencies);rh|=b.lanes;if(0===(c&b.childLanes))return null;if(null!==a&&b.child!==a.child)throw Error(p(153));if(null!==b.child){a=b.child;c=Pg(a,a.pendingProps);b.child=c;for(c.return=b;null!==a.sibling;)a=a.sibling,c=c.sibling=Pg(a,a.pendingProps),c.return=b;c.sibling=null}return b.child}\nfunction yj(a,b,c){switch(b.tag){case 3:kj(b);Ig();break;case 5:Ah(b);break;case 1:Zf(b.type)&&cg(b);break;case 4:yh(b,b.stateNode.containerInfo);break;case 10:var d=b.type._context,e=b.memoizedProps.value;G(Wg,d._currentValue);d._currentValue=e;break;case 13:d=b.memoizedState;if(null!==d){if(null!==d.dehydrated)return G(L,L.current&1),b.flags|=128,null;if(0!==(c&b.child.childLanes))return oj(a,b,c);G(L,L.current&1);a=Zi(a,b,c);return null!==a?a.sibling:null}G(L,L.current&1);break;case 19:d=0!==(c&\nb.childLanes);if(0!==(a.flags&128)){if(d)return xj(a,b,c);b.flags|=128}e=b.memoizedState;null!==e&&(e.rendering=null,e.tail=null,e.lastEffect=null);G(L,L.current);if(d)break;else return null;case 22:case 23:return b.lanes=0,dj(a,b,c)}return Zi(a,b,c)}var zj,Aj,Bj,Cj;\nzj=function(a,b){for(var c=b.child;null!==c;){if(5===c.tag||6===c.tag)a.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return;c=c.sibling}};Aj=function(){};\nBj=function(a,b,c,d){var e=a.memoizedProps;if(e!==d){a=b.stateNode;xh(uh.current);var f=null;switch(c){case \"input\":e=Ya(a,e);d=Ya(a,d);f=[];break;case \"select\":e=A({},e,{value:void 0});d=A({},d,{value:void 0});f=[];break;case \"textarea\":e=gb(a,e);d=gb(a,d);f=[];break;default:\"function\"!==typeof e.onClick&&\"function\"===typeof d.onClick&&(a.onclick=Bf)}ub(c,d);var g;c=null;for(l in e)if(!d.hasOwnProperty(l)&&e.hasOwnProperty(l)&&null!=e[l])if(\"style\"===l){var h=e[l];for(g in h)h.hasOwnProperty(g)&&\n(c||(c={}),c[g]=\"\")}else\"dangerouslySetInnerHTML\"!==l&&\"children\"!==l&&\"suppressContentEditableWarning\"!==l&&\"suppressHydrationWarning\"!==l&&\"autoFocus\"!==l&&(ea.hasOwnProperty(l)?f||(f=[]):(f=f||[]).push(l,null));for(l in d){var k=d[l];h=null!=e?e[l]:void 0;if(d.hasOwnProperty(l)&&k!==h&&(null!=k||null!=h))if(\"style\"===l)if(h){for(g in h)!h.hasOwnProperty(g)||k&&k.hasOwnProperty(g)||(c||(c={}),c[g]=\"\");for(g in k)k.hasOwnProperty(g)&&h[g]!==k[g]&&(c||(c={}),c[g]=k[g])}else c||(f||(f=[]),f.push(l,\nc)),c=k;else\"dangerouslySetInnerHTML\"===l?(k=k?k.__html:void 0,h=h?h.__html:void 0,null!=k&&h!==k&&(f=f||[]).push(l,k)):\"children\"===l?\"string\"!==typeof k&&\"number\"!==typeof k||(f=f||[]).push(l,\"\"+k):\"suppressContentEditableWarning\"!==l&&\"suppressHydrationWarning\"!==l&&(ea.hasOwnProperty(l)?(null!=k&&\"onScroll\"===l&&D(\"scroll\",a),f||h===k||(f=[])):(f=f||[]).push(l,k))}c&&(f=f||[]).push(\"style\",c);var l=f;if(b.updateQueue=l)b.flags|=4}};Cj=function(a,b,c,d){c!==d&&(b.flags|=4)};\nfunction Dj(a,b){if(!I)switch(a.tailMode){case \"hidden\":b=a.tail;for(var c=null;null!==b;)null!==b.alternate&&(c=b),b=b.sibling;null===c?a.tail=null:c.sibling=null;break;case \"collapsed\":c=a.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?b||null===a.tail?a.tail=null:a.tail.sibling=null:d.sibling=null}}\nfunction S(a){var b=null!==a.alternate&&a.alternate.child===a.child,c=0,d=0;if(b)for(var e=a.child;null!==e;)c|=e.lanes|e.childLanes,d|=e.subtreeFlags&14680064,d|=e.flags&14680064,e.return=a,e=e.sibling;else for(e=a.child;null!==e;)c|=e.lanes|e.childLanes,d|=e.subtreeFlags,d|=e.flags,e.return=a,e=e.sibling;a.subtreeFlags|=d;a.childLanes=c;return b}\nfunction Ej(a,b,c){var d=b.pendingProps;wg(b);switch(b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(b),null;case 1:return Zf(b.type)&&$f(),S(b),null;case 3:d=b.stateNode;zh();E(Wf);E(H);Eh();d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null);if(null===a||null===a.child)Gg(b)?b.flags|=4:null===a||a.memoizedState.isDehydrated&&0===(b.flags&256)||(b.flags|=1024,null!==zg&&(Fj(zg),zg=null));Aj(a,b);S(b);return null;case 5:Bh(b);var e=xh(wh.current);\nc=b.type;if(null!==a&&null!=b.stateNode)Bj(a,b,c,d,e),a.ref!==b.ref&&(b.flags|=512,b.flags|=2097152);else{if(!d){if(null===b.stateNode)throw Error(p(166));S(b);return null}a=xh(uh.current);if(Gg(b)){d=b.stateNode;c=b.type;var f=b.memoizedProps;d[Of]=b;d[Pf]=f;a=0!==(b.mode&1);switch(c){case \"dialog\":D(\"cancel\",d);D(\"close\",d);break;case \"iframe\":case \"object\":case \"embed\":D(\"load\",d);break;case \"video\":case \"audio\":for(e=0;e<lf.length;e++)D(lf[e],d);break;case \"source\":D(\"error\",d);break;case \"img\":case \"image\":case \"link\":D(\"error\",\nd);D(\"load\",d);break;case \"details\":D(\"toggle\",d);break;case \"input\":Za(d,f);D(\"invalid\",d);break;case \"select\":d._wrapperState={wasMultiple:!!f.multiple};D(\"invalid\",d);break;case \"textarea\":hb(d,f),D(\"invalid\",d)}ub(c,f);e=null;for(var g in f)if(f.hasOwnProperty(g)){var h=f[g];\"children\"===g?\"string\"===typeof h?d.textContent!==h&&(!0!==f.suppressHydrationWarning&&Af(d.textContent,h,a),e=[\"children\",h]):\"number\"===typeof h&&d.textContent!==\"\"+h&&(!0!==f.suppressHydrationWarning&&Af(d.textContent,\nh,a),e=[\"children\",\"\"+h]):ea.hasOwnProperty(g)&&null!=h&&\"onScroll\"===g&&D(\"scroll\",d)}switch(c){case \"input\":Va(d);db(d,f,!0);break;case \"textarea\":Va(d);jb(d);break;case \"select\":case \"option\":break;default:\"function\"===typeof f.onClick&&(d.onclick=Bf)}d=e;b.updateQueue=d;null!==d&&(b.flags|=4)}else{g=9===e.nodeType?e:e.ownerDocument;\"http://www.w3.org/1999/xhtml\"===a&&(a=kb(c));\"http://www.w3.org/1999/xhtml\"===a?\"script\"===c?(a=g.createElement(\"div\"),a.innerHTML=\"<script>\\x3c/script>\",a=a.removeChild(a.firstChild)):\n\"string\"===typeof d.is?a=g.createElement(c,{is:d.is}):(a=g.createElement(c),\"select\"===c&&(g=a,d.multiple?g.multiple=!0:d.size&&(g.size=d.size))):a=g.createElementNS(a,c);a[Of]=b;a[Pf]=d;zj(a,b,!1,!1);b.stateNode=a;a:{g=vb(c,d);switch(c){case \"dialog\":D(\"cancel\",a);D(\"close\",a);e=d;break;case \"iframe\":case \"object\":case \"embed\":D(\"load\",a);e=d;break;case \"video\":case \"audio\":for(e=0;e<lf.length;e++)D(lf[e],a);e=d;break;case \"source\":D(\"error\",a);e=d;break;case \"img\":case \"image\":case \"link\":D(\"error\",\na);D(\"load\",a);e=d;break;case \"details\":D(\"toggle\",a);e=d;break;case \"input\":Za(a,d);e=Ya(a,d);D(\"invalid\",a);break;case \"option\":e=d;break;case \"select\":a._wrapperState={wasMultiple:!!d.multiple};e=A({},d,{value:void 0});D(\"invalid\",a);break;case \"textarea\":hb(a,d);e=gb(a,d);D(\"invalid\",a);break;default:e=d}ub(c,e);h=e;for(f in h)if(h.hasOwnProperty(f)){var k=h[f];\"style\"===f?sb(a,k):\"dangerouslySetInnerHTML\"===f?(k=k?k.__html:void 0,null!=k&&nb(a,k)):\"children\"===f?\"string\"===typeof k?(\"textarea\"!==\nc||\"\"!==k)&&ob(a,k):\"number\"===typeof k&&ob(a,\"\"+k):\"suppressContentEditableWarning\"!==f&&\"suppressHydrationWarning\"!==f&&\"autoFocus\"!==f&&(ea.hasOwnProperty(f)?null!=k&&\"onScroll\"===f&&D(\"scroll\",a):null!=k&&ta(a,f,k,g))}switch(c){case \"input\":Va(a);db(a,d,!1);break;case \"textarea\":Va(a);jb(a);break;case \"option\":null!=d.value&&a.setAttribute(\"value\",\"\"+Sa(d.value));break;case \"select\":a.multiple=!!d.multiple;f=d.value;null!=f?fb(a,!!d.multiple,f,!1):null!=d.defaultValue&&fb(a,!!d.multiple,d.defaultValue,\n!0);break;default:\"function\"===typeof e.onClick&&(a.onclick=Bf)}switch(c){case \"button\":case \"input\":case \"select\":case \"textarea\":d=!!d.autoFocus;break a;case \"img\":d=!0;break a;default:d=!1}}d&&(b.flags|=4)}null!==b.ref&&(b.flags|=512,b.flags|=2097152)}S(b);return null;case 6:if(a&&null!=b.stateNode)Cj(a,b,a.memoizedProps,d);else{if(\"string\"!==typeof d&&null===b.stateNode)throw Error(p(166));c=xh(wh.current);xh(uh.current);if(Gg(b)){d=b.stateNode;c=b.memoizedProps;d[Of]=b;if(f=d.nodeValue!==c)if(a=\nxg,null!==a)switch(a.tag){case 3:Af(d.nodeValue,c,0!==(a.mode&1));break;case 5:!0!==a.memoizedProps.suppressHydrationWarning&&Af(d.nodeValue,c,0!==(a.mode&1))}f&&(b.flags|=4)}else d=(9===c.nodeType?c:c.ownerDocument).createTextNode(d),d[Of]=b,b.stateNode=d}S(b);return null;case 13:E(L);d=b.memoizedState;if(null===a||null!==a.memoizedState&&null!==a.memoizedState.dehydrated){if(I&&null!==yg&&0!==(b.mode&1)&&0===(b.flags&128))Hg(),Ig(),b.flags|=98560,f=!1;else if(f=Gg(b),null!==d&&null!==d.dehydrated){if(null===\na){if(!f)throw Error(p(318));f=b.memoizedState;f=null!==f?f.dehydrated:null;if(!f)throw Error(p(317));f[Of]=b}else Ig(),0===(b.flags&128)&&(b.memoizedState=null),b.flags|=4;S(b);f=!1}else null!==zg&&(Fj(zg),zg=null),f=!0;if(!f)return b.flags&65536?b:null}if(0!==(b.flags&128))return b.lanes=c,b;d=null!==d;d!==(null!==a&&null!==a.memoizedState)&&d&&(b.child.flags|=8192,0!==(b.mode&1)&&(null===a||0!==(L.current&1)?0===T&&(T=3):tj()));null!==b.updateQueue&&(b.flags|=4);S(b);return null;case 4:return zh(),\nAj(a,b),null===a&&sf(b.stateNode.containerInfo),S(b),null;case 10:return ah(b.type._context),S(b),null;case 17:return Zf(b.type)&&$f(),S(b),null;case 19:E(L);f=b.memoizedState;if(null===f)return S(b),null;d=0!==(b.flags&128);g=f.rendering;if(null===g)if(d)Dj(f,!1);else{if(0!==T||null!==a&&0!==(a.flags&128))for(a=b.child;null!==a;){g=Ch(a);if(null!==g){b.flags|=128;Dj(f,!1);d=g.updateQueue;null!==d&&(b.updateQueue=d,b.flags|=4);b.subtreeFlags=0;d=c;for(c=b.child;null!==c;)f=c,a=d,f.flags&=14680066,\ng=f.alternate,null===g?(f.childLanes=0,f.lanes=a,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=g.childLanes,f.lanes=g.lanes,f.child=g.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=g.memoizedProps,f.memoizedState=g.memoizedState,f.updateQueue=g.updateQueue,f.type=g.type,a=g.dependencies,f.dependencies=null===a?null:{lanes:a.lanes,firstContext:a.firstContext}),c=c.sibling;G(L,L.current&1|2);return b.child}a=\na.sibling}null!==f.tail&&B()>Gj&&(b.flags|=128,d=!0,Dj(f,!1),b.lanes=4194304)}else{if(!d)if(a=Ch(g),null!==a){if(b.flags|=128,d=!0,c=a.updateQueue,null!==c&&(b.updateQueue=c,b.flags|=4),Dj(f,!0),null===f.tail&&\"hidden\"===f.tailMode&&!g.alternate&&!I)return S(b),null}else 2*B()-f.renderingStartTime>Gj&&1073741824!==c&&(b.flags|=128,d=!0,Dj(f,!1),b.lanes=4194304);f.isBackwards?(g.sibling=b.child,b.child=g):(c=f.last,null!==c?c.sibling=g:b.child=g,f.last=g)}if(null!==f.tail)return b=f.tail,f.rendering=\nb,f.tail=b.sibling,f.renderingStartTime=B(),b.sibling=null,c=L.current,G(L,d?c&1|2:c&1),b;S(b);return null;case 22:case 23:return Hj(),d=null!==b.memoizedState,null!==a&&null!==a.memoizedState!==d&&(b.flags|=8192),d&&0!==(b.mode&1)?0!==(fj&1073741824)&&(S(b),b.subtreeFlags&6&&(b.flags|=8192)):S(b),null;case 24:return null;case 25:return null}throw Error(p(156,b.tag));}\nfunction Ij(a,b){wg(b);switch(b.tag){case 1:return Zf(b.type)&&$f(),a=b.flags,a&65536?(b.flags=a&-65537|128,b):null;case 3:return zh(),E(Wf),E(H),Eh(),a=b.flags,0!==(a&65536)&&0===(a&128)?(b.flags=a&-65537|128,b):null;case 5:return Bh(b),null;case 13:E(L);a=b.memoizedState;if(null!==a&&null!==a.dehydrated){if(null===b.alternate)throw Error(p(340));Ig()}a=b.flags;return a&65536?(b.flags=a&-65537|128,b):null;case 19:return E(L),null;case 4:return zh(),null;case 10:return ah(b.type._context),null;case 22:case 23:return Hj(),\nnull;case 24:return null;default:return null}}var Jj=!1,U=!1,Kj=\"function\"===typeof WeakSet?WeakSet:Set,V=null;function Lj(a,b){var c=a.ref;if(null!==c)if(\"function\"===typeof c)try{c(null)}catch(d){W(a,b,d)}else c.current=null}function Mj(a,b,c){try{c()}catch(d){W(a,b,d)}}var Nj=!1;\nfunction Oj(a,b){Cf=dd;a=Me();if(Ne(a)){if(\"selectionStart\"in a)var c={start:a.selectionStart,end:a.selectionEnd};else a:{c=(c=a.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&0!==d.rangeCount){c=d.anchorNode;var e=d.anchorOffset,f=d.focusNode;d=d.focusOffset;try{c.nodeType,f.nodeType}catch(F){c=null;break a}var g=0,h=-1,k=-1,l=0,m=0,q=a,r=null;b:for(;;){for(var y;;){q!==c||0!==e&&3!==q.nodeType||(h=g+e);q!==f||0!==d&&3!==q.nodeType||(k=g+d);3===q.nodeType&&(g+=\nq.nodeValue.length);if(null===(y=q.firstChild))break;r=q;q=y}for(;;){if(q===a)break b;r===c&&++l===e&&(h=g);r===f&&++m===d&&(k=g);if(null!==(y=q.nextSibling))break;q=r;r=q.parentNode}q=y}c=-1===h||-1===k?null:{start:h,end:k}}else c=null}c=c||{start:0,end:0}}else c=null;Df={focusedElem:a,selectionRange:c};dd=!1;for(V=b;null!==V;)if(b=V,a=b.child,0!==(b.subtreeFlags&1028)&&null!==a)a.return=b,V=a;else for(;null!==V;){b=V;try{var n=b.alternate;if(0!==(b.flags&1024))switch(b.tag){case 0:case 11:case 15:break;\ncase 1:if(null!==n){var t=n.memoizedProps,J=n.memoizedState,x=b.stateNode,w=x.getSnapshotBeforeUpdate(b.elementType===b.type?t:Ci(b.type,t),J);x.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var u=b.stateNode.containerInfo;1===u.nodeType?u.textContent=\"\":9===u.nodeType&&u.documentElement&&u.removeChild(u.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163));}}catch(F){W(b,b.return,F)}a=b.sibling;if(null!==a){a.return=b.return;V=a;break}V=b.return}n=Nj;Nj=!1;return n}\nfunction Pj(a,b,c){var d=b.updateQueue;d=null!==d?d.lastEffect:null;if(null!==d){var e=d=d.next;do{if((e.tag&a)===a){var f=e.destroy;e.destroy=void 0;void 0!==f&&Mj(b,c,f)}e=e.next}while(e!==d)}}function Qj(a,b){b=b.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){var c=b=b.next;do{if((c.tag&a)===a){var d=c.create;c.destroy=d()}c=c.next}while(c!==b)}}function Rj(a){var b=a.ref;if(null!==b){var c=a.stateNode;switch(a.tag){case 5:a=c;break;default:a=c}\"function\"===typeof b?b(a):b.current=a}}\nfunction Sj(a){var b=a.alternate;null!==b&&(a.alternate=null,Sj(b));a.child=null;a.deletions=null;a.sibling=null;5===a.tag&&(b=a.stateNode,null!==b&&(delete b[Of],delete b[Pf],delete b[of],delete b[Qf],delete b[Rf]));a.stateNode=null;a.return=null;a.dependencies=null;a.memoizedProps=null;a.memoizedState=null;a.pendingProps=null;a.stateNode=null;a.updateQueue=null}function Tj(a){return 5===a.tag||3===a.tag||4===a.tag}\nfunction Uj(a){a:for(;;){for(;null===a.sibling;){if(null===a.return||Tj(a.return))return null;a=a.return}a.sibling.return=a.return;for(a=a.sibling;5!==a.tag&&6!==a.tag&&18!==a.tag;){if(a.flags&2)continue a;if(null===a.child||4===a.tag)continue a;else a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}\nfunction Vj(a,b,c){var d=a.tag;if(5===d||6===d)a=a.stateNode,b?8===c.nodeType?c.parentNode.insertBefore(a,b):c.insertBefore(a,b):(8===c.nodeType?(b=c.parentNode,b.insertBefore(a,c)):(b=c,b.appendChild(a)),c=c._reactRootContainer,null!==c&&void 0!==c||null!==b.onclick||(b.onclick=Bf));else if(4!==d&&(a=a.child,null!==a))for(Vj(a,b,c),a=a.sibling;null!==a;)Vj(a,b,c),a=a.sibling}\nfunction Wj(a,b,c){var d=a.tag;if(5===d||6===d)a=a.stateNode,b?c.insertBefore(a,b):c.appendChild(a);else if(4!==d&&(a=a.child,null!==a))for(Wj(a,b,c),a=a.sibling;null!==a;)Wj(a,b,c),a=a.sibling}var X=null,Xj=!1;function Yj(a,b,c){for(c=c.child;null!==c;)Zj(a,b,c),c=c.sibling}\nfunction Zj(a,b,c){if(lc&&\"function\"===typeof lc.onCommitFiberUnmount)try{lc.onCommitFiberUnmount(kc,c)}catch(h){}switch(c.tag){case 5:U||Lj(c,b);case 6:var d=X,e=Xj;X=null;Yj(a,b,c);X=d;Xj=e;null!==X&&(Xj?(a=X,c=c.stateNode,8===a.nodeType?a.parentNode.removeChild(c):a.removeChild(c)):X.removeChild(c.stateNode));break;case 18:null!==X&&(Xj?(a=X,c=c.stateNode,8===a.nodeType?Kf(a.parentNode,c):1===a.nodeType&&Kf(a,c),bd(a)):Kf(X,c.stateNode));break;case 4:d=X;e=Xj;X=c.stateNode.containerInfo;Xj=!0;\nYj(a,b,c);X=d;Xj=e;break;case 0:case 11:case 14:case 15:if(!U&&(d=c.updateQueue,null!==d&&(d=d.lastEffect,null!==d))){e=d=d.next;do{var f=e,g=f.destroy;f=f.tag;void 0!==g&&(0!==(f&2)?Mj(c,b,g):0!==(f&4)&&Mj(c,b,g));e=e.next}while(e!==d)}Yj(a,b,c);break;case 1:if(!U&&(Lj(c,b),d=c.stateNode,\"function\"===typeof d.componentWillUnmount))try{d.props=c.memoizedProps,d.state=c.memoizedState,d.componentWillUnmount()}catch(h){W(c,b,h)}Yj(a,b,c);break;case 21:Yj(a,b,c);break;case 22:c.mode&1?(U=(d=U)||null!==\nc.memoizedState,Yj(a,b,c),U=d):Yj(a,b,c);break;default:Yj(a,b,c)}}function ak(a){var b=a.updateQueue;if(null!==b){a.updateQueue=null;var c=a.stateNode;null===c&&(c=a.stateNode=new Kj);b.forEach(function(b){var d=bk.bind(null,a,b);c.has(b)||(c.add(b),b.then(d,d))})}}\nfunction ck(a,b){var c=b.deletions;if(null!==c)for(var d=0;d<c.length;d++){var e=c[d];try{var f=a,g=b,h=g;a:for(;null!==h;){switch(h.tag){case 5:X=h.stateNode;Xj=!1;break a;case 3:X=h.stateNode.containerInfo;Xj=!0;break a;case 4:X=h.stateNode.containerInfo;Xj=!0;break a}h=h.return}if(null===X)throw Error(p(160));Zj(f,g,e);X=null;Xj=!1;var k=e.alternate;null!==k&&(k.return=null);e.return=null}catch(l){W(e,b,l)}}if(b.subtreeFlags&12854)for(b=b.child;null!==b;)dk(b,a),b=b.sibling}\nfunction dk(a,b){var c=a.alternate,d=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:ck(b,a);ek(a);if(d&4){try{Pj(3,a,a.return),Qj(3,a)}catch(t){W(a,a.return,t)}try{Pj(5,a,a.return)}catch(t){W(a,a.return,t)}}break;case 1:ck(b,a);ek(a);d&512&&null!==c&&Lj(c,c.return);break;case 5:ck(b,a);ek(a);d&512&&null!==c&&Lj(c,c.return);if(a.flags&32){var e=a.stateNode;try{ob(e,\"\")}catch(t){W(a,a.return,t)}}if(d&4&&(e=a.stateNode,null!=e)){var f=a.memoizedProps,g=null!==c?c.memoizedProps:f,h=a.type,k=a.updateQueue;\na.updateQueue=null;if(null!==k)try{\"input\"===h&&\"radio\"===f.type&&null!=f.name&&ab(e,f);vb(h,g);var l=vb(h,f);for(g=0;g<k.length;g+=2){var m=k[g],q=k[g+1];\"style\"===m?sb(e,q):\"dangerouslySetInnerHTML\"===m?nb(e,q):\"children\"===m?ob(e,q):ta(e,m,q,l)}switch(h){case \"input\":bb(e,f);break;case \"textarea\":ib(e,f);break;case \"select\":var r=e._wrapperState.wasMultiple;e._wrapperState.wasMultiple=!!f.multiple;var y=f.value;null!=y?fb(e,!!f.multiple,y,!1):r!==!!f.multiple&&(null!=f.defaultValue?fb(e,!!f.multiple,\nf.defaultValue,!0):fb(e,!!f.multiple,f.multiple?[]:\"\",!1))}e[Pf]=f}catch(t){W(a,a.return,t)}}break;case 6:ck(b,a);ek(a);if(d&4){if(null===a.stateNode)throw Error(p(162));e=a.stateNode;f=a.memoizedProps;try{e.nodeValue=f}catch(t){W(a,a.return,t)}}break;case 3:ck(b,a);ek(a);if(d&4&&null!==c&&c.memoizedState.isDehydrated)try{bd(b.containerInfo)}catch(t){W(a,a.return,t)}break;case 4:ck(b,a);ek(a);break;case 13:ck(b,a);ek(a);e=a.child;e.flags&8192&&(f=null!==e.memoizedState,e.stateNode.isHidden=f,!f||\nnull!==e.alternate&&null!==e.alternate.memoizedState||(fk=B()));d&4&&ak(a);break;case 22:m=null!==c&&null!==c.memoizedState;a.mode&1?(U=(l=U)||m,ck(b,a),U=l):ck(b,a);ek(a);if(d&8192){l=null!==a.memoizedState;if((a.stateNode.isHidden=l)&&!m&&0!==(a.mode&1))for(V=a,m=a.child;null!==m;){for(q=V=m;null!==V;){r=V;y=r.child;switch(r.tag){case 0:case 11:case 14:case 15:Pj(4,r,r.return);break;case 1:Lj(r,r.return);var n=r.stateNode;if(\"function\"===typeof n.componentWillUnmount){d=r;c=r.return;try{b=d,n.props=\nb.memoizedProps,n.state=b.memoizedState,n.componentWillUnmount()}catch(t){W(d,c,t)}}break;case 5:Lj(r,r.return);break;case 22:if(null!==r.memoizedState){gk(q);continue}}null!==y?(y.return=r,V=y):gk(q)}m=m.sibling}a:for(m=null,q=a;;){if(5===q.tag){if(null===m){m=q;try{e=q.stateNode,l?(f=e.style,\"function\"===typeof f.setProperty?f.setProperty(\"display\",\"none\",\"important\"):f.display=\"none\"):(h=q.stateNode,k=q.memoizedProps.style,g=void 0!==k&&null!==k&&k.hasOwnProperty(\"display\")?k.display:null,h.style.display=\nrb(\"display\",g))}catch(t){W(a,a.return,t)}}}else if(6===q.tag){if(null===m)try{q.stateNode.nodeValue=l?\"\":q.memoizedProps}catch(t){W(a,a.return,t)}}else if((22!==q.tag&&23!==q.tag||null===q.memoizedState||q===a)&&null!==q.child){q.child.return=q;q=q.child;continue}if(q===a)break a;for(;null===q.sibling;){if(null===q.return||q.return===a)break a;m===q&&(m=null);q=q.return}m===q&&(m=null);q.sibling.return=q.return;q=q.sibling}}break;case 19:ck(b,a);ek(a);d&4&&ak(a);break;case 21:break;default:ck(b,\na),ek(a)}}function ek(a){var b=a.flags;if(b&2){try{a:{for(var c=a.return;null!==c;){if(Tj(c)){var d=c;break a}c=c.return}throw Error(p(160));}switch(d.tag){case 5:var e=d.stateNode;d.flags&32&&(ob(e,\"\"),d.flags&=-33);var f=Uj(a);Wj(a,f,e);break;case 3:case 4:var g=d.stateNode.containerInfo,h=Uj(a);Vj(a,h,g);break;default:throw Error(p(161));}}catch(k){W(a,a.return,k)}a.flags&=-3}b&4096&&(a.flags&=-4097)}function hk(a,b,c){V=a;ik(a,b,c)}\nfunction ik(a,b,c){for(var d=0!==(a.mode&1);null!==V;){var e=V,f=e.child;if(22===e.tag&&d){var g=null!==e.memoizedState||Jj;if(!g){var h=e.alternate,k=null!==h&&null!==h.memoizedState||U;h=Jj;var l=U;Jj=g;if((U=k)&&!l)for(V=e;null!==V;)g=V,k=g.child,22===g.tag&&null!==g.memoizedState?jk(e):null!==k?(k.return=g,V=k):jk(e);for(;null!==f;)V=f,ik(f,b,c),f=f.sibling;V=e;Jj=h;U=l}kk(a,b,c)}else 0!==(e.subtreeFlags&8772)&&null!==f?(f.return=e,V=f):kk(a,b,c)}}\nfunction kk(a){for(;null!==V;){var b=V;if(0!==(b.flags&8772)){var c=b.alternate;try{if(0!==(b.flags&8772))switch(b.tag){case 0:case 11:case 15:U||Qj(5,b);break;case 1:var d=b.stateNode;if(b.flags&4&&!U)if(null===c)d.componentDidMount();else{var e=b.elementType===b.type?c.memoizedProps:Ci(b.type,c.memoizedProps);d.componentDidUpdate(e,c.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var f=b.updateQueue;null!==f&&sh(b,f,d);break;case 3:var g=b.updateQueue;if(null!==g){c=null;if(null!==b.child)switch(b.child.tag){case 5:c=\nb.child.stateNode;break;case 1:c=b.child.stateNode}sh(b,g,c)}break;case 5:var h=b.stateNode;if(null===c&&b.flags&4){c=h;var k=b.memoizedProps;switch(b.type){case \"button\":case \"input\":case \"select\":case \"textarea\":k.autoFocus&&c.focus();break;case \"img\":k.src&&(c.src=k.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(null===b.memoizedState){var l=b.alternate;if(null!==l){var m=l.memoizedState;if(null!==m){var q=m.dehydrated;null!==q&&bd(q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;\ndefault:throw Error(p(163));}U||b.flags&512&&Rj(b)}catch(r){W(b,b.return,r)}}if(b===a){V=null;break}c=b.sibling;if(null!==c){c.return=b.return;V=c;break}V=b.return}}function gk(a){for(;null!==V;){var b=V;if(b===a){V=null;break}var c=b.sibling;if(null!==c){c.return=b.return;V=c;break}V=b.return}}\nfunction jk(a){for(;null!==V;){var b=V;try{switch(b.tag){case 0:case 11:case 15:var c=b.return;try{Qj(4,b)}catch(k){W(b,c,k)}break;case 1:var d=b.stateNode;if(\"function\"===typeof d.componentDidMount){var e=b.return;try{d.componentDidMount()}catch(k){W(b,e,k)}}var f=b.return;try{Rj(b)}catch(k){W(b,f,k)}break;case 5:var g=b.return;try{Rj(b)}catch(k){W(b,g,k)}}}catch(k){W(b,b.return,k)}if(b===a){V=null;break}var h=b.sibling;if(null!==h){h.return=b.return;V=h;break}V=b.return}}\nvar lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K=0,Q=null,Y=null,Z=0,fj=0,ej=Uf(0),T=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=Infinity,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R(){return 0!==(K&6)?B():-1!==Ak?Ak:Ak=B()}\nfunction yi(a){if(0===(a.mode&1))return 1;if(0!==(K&2)&&0!==Z)return Z&-Z;if(null!==Kg.transition)return 0===Bk&&(Bk=yc()),Bk;a=C;if(0!==a)return a;a=window.event;a=void 0===a?16:jd(a.type);return a}function gi(a,b,c,d){if(50<yk)throw yk=0,zk=null,Error(p(185));Ac(a,c,d);if(0===(K&2)||a!==Q)a===Q&&(0===(K&2)&&(qk|=c),4===T&&Ck(a,Z)),Dk(a,d),1===c&&0===K&&0===(b.mode&1)&&(Gj=B()+500,fg&&jg())}\nfunction Dk(a,b){var c=a.callbackNode;wc(a,b);var d=uc(a,a===Q?Z:0);if(0===d)null!==c&&bc(c),a.callbackNode=null,a.callbackPriority=0;else if(b=d&-d,a.callbackPriority!==b){null!=c&&bc(c);if(1===b)0===a.tag?ig(Ek.bind(null,a)):hg(Ek.bind(null,a)),Jf(function(){0===(K&6)&&jg()}),c=null;else{switch(Dc(d)){case 1:c=fc;break;case 4:c=gc;break;case 16:c=hc;break;case 536870912:c=jc;break;default:c=hc}c=Fk(c,Gk.bind(null,a))}a.callbackPriority=b;a.callbackNode=c}}\nfunction Gk(a,b){Ak=-1;Bk=0;if(0!==(K&6))throw Error(p(327));var c=a.callbackNode;if(Hk()&&a.callbackNode!==c)return null;var d=uc(a,a===Q?Z:0);if(0===d)return null;if(0!==(d&30)||0!==(d&a.expiredLanes)||b)b=Ik(a,d);else{b=d;var e=K;K|=2;var f=Jk();if(Q!==a||Z!==b)uk=null,Gj=B()+500,Kk(a,b);do try{Lk();break}catch(h){Mk(a,h)}while(1);$g();mk.current=f;K=e;null!==Y?b=0:(Q=null,Z=0,b=T)}if(0!==b){2===b&&(e=xc(a),0!==e&&(d=e,b=Nk(a,e)));if(1===b)throw c=pk,Kk(a,0),Ck(a,d),Dk(a,B()),c;if(6===b)Ck(a,d);\nelse{e=a.current.alternate;if(0===(d&30)&&!Ok(e)&&(b=Ik(a,d),2===b&&(f=xc(a),0!==f&&(d=f,b=Nk(a,f))),1===b))throw c=pk,Kk(a,0),Ck(a,d),Dk(a,B()),c;a.finishedWork=e;a.finishedLanes=d;switch(b){case 0:case 1:throw Error(p(345));case 2:Pk(a,tk,uk);break;case 3:Ck(a,d);if((d&130023424)===d&&(b=fk+500-B(),10<b)){if(0!==uc(a,0))break;e=a.suspendedLanes;if((e&d)!==d){R();a.pingedLanes|=a.suspendedLanes&e;break}a.timeoutHandle=Ff(Pk.bind(null,a,tk,uk),b);break}Pk(a,tk,uk);break;case 4:Ck(a,d);if((d&4194240)===\nd)break;b=a.eventTimes;for(e=-1;0<d;){var g=31-oc(d);f=1<<g;g=b[g];g>e&&(e=g);d&=~f}d=e;d=B()-d;d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3E3>d?3E3:4320>d?4320:1960*lk(d/1960))-d;if(10<d){a.timeoutHandle=Ff(Pk.bind(null,a,tk,uk),d);break}Pk(a,tk,uk);break;case 5:Pk(a,tk,uk);break;default:throw Error(p(329));}}}Dk(a,B());return a.callbackNode===c?Gk.bind(null,a):null}\nfunction Nk(a,b){var c=sk;a.current.memoizedState.isDehydrated&&(Kk(a,b).flags|=256);a=Ik(a,b);2!==a&&(b=tk,tk=c,null!==b&&Fj(b));return a}function Fj(a){null===tk?tk=a:tk.push.apply(tk,a)}\nfunction Ok(a){for(var b=a;;){if(b.flags&16384){var c=b.updateQueue;if(null!==c&&(c=c.stores,null!==c))for(var d=0;d<c.length;d++){var e=c[d],f=e.getSnapshot;e=e.value;try{if(!He(f(),e))return!1}catch(g){return!1}}}c=b.child;if(b.subtreeFlags&16384&&null!==c)c.return=b,b=c;else{if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return!0;b=b.return}b.sibling.return=b.return;b=b.sibling}}return!0}\nfunction Ck(a,b){b&=~rk;b&=~qk;a.suspendedLanes|=b;a.pingedLanes&=~b;for(a=a.expirationTimes;0<b;){var c=31-oc(b),d=1<<c;a[c]=-1;b&=~d}}function Ek(a){if(0!==(K&6))throw Error(p(327));Hk();var b=uc(a,0);if(0===(b&1))return Dk(a,B()),null;var c=Ik(a,b);if(0!==a.tag&&2===c){var d=xc(a);0!==d&&(b=d,c=Nk(a,d))}if(1===c)throw c=pk,Kk(a,0),Ck(a,b),Dk(a,B()),c;if(6===c)throw Error(p(345));a.finishedWork=a.current.alternate;a.finishedLanes=b;Pk(a,tk,uk);Dk(a,B());return null}\nfunction Qk(a,b){var c=K;K|=1;try{return a(b)}finally{K=c,0===K&&(Gj=B()+500,fg&&jg())}}function Rk(a){null!==wk&&0===wk.tag&&0===(K&6)&&Hk();var b=K;K|=1;var c=ok.transition,d=C;try{if(ok.transition=null,C=1,a)return a()}finally{C=d,ok.transition=c,K=b,0===(K&6)&&jg()}}function Hj(){fj=ej.current;E(ej)}\nfunction Kk(a,b){a.finishedWork=null;a.finishedLanes=0;var c=a.timeoutHandle;-1!==c&&(a.timeoutHandle=-1,Gf(c));if(null!==Y)for(c=Y.return;null!==c;){var d=c;wg(d);switch(d.tag){case 1:d=d.type.childContextTypes;null!==d&&void 0!==d&&$f();break;case 3:zh();E(Wf);E(H);Eh();break;case 5:Bh(d);break;case 4:zh();break;case 13:E(L);break;case 19:E(L);break;case 10:ah(d.type._context);break;case 22:case 23:Hj()}c=c.return}Q=a;Y=a=Pg(a.current,null);Z=fj=b;T=0;pk=null;rk=qk=rh=0;tk=sk=null;if(null!==fh){for(b=\n0;b<fh.length;b++)if(c=fh[b],d=c.interleaved,null!==d){c.interleaved=null;var e=d.next,f=c.pending;if(null!==f){var g=f.next;f.next=e;d.next=g}c.pending=d}fh=null}return a}\nfunction Mk(a,b){do{var c=Y;try{$g();Fh.current=Rh;if(Ih){for(var d=M.memoizedState;null!==d;){var e=d.queue;null!==e&&(e.pending=null);d=d.next}Ih=!1}Hh=0;O=N=M=null;Jh=!1;Kh=0;nk.current=null;if(null===c||null===c.return){T=1;pk=b;Y=null;break}a:{var f=a,g=c.return,h=c,k=b;b=Z;h.flags|=32768;if(null!==k&&\"object\"===typeof k&&\"function\"===typeof k.then){var l=k,m=h,q=m.tag;if(0===(m.mode&1)&&(0===q||11===q||15===q)){var r=m.alternate;r?(m.updateQueue=r.updateQueue,m.memoizedState=r.memoizedState,\nm.lanes=r.lanes):(m.updateQueue=null,m.memoizedState=null)}var y=Ui(g);if(null!==y){y.flags&=-257;Vi(y,g,h,f,b);y.mode&1&&Si(f,l,b);b=y;k=l;var n=b.updateQueue;if(null===n){var t=new Set;t.add(k);b.updateQueue=t}else n.add(k);break a}else{if(0===(b&1)){Si(f,l,b);tj();break a}k=Error(p(426))}}else if(I&&h.mode&1){var J=Ui(g);if(null!==J){0===(J.flags&65536)&&(J.flags|=256);Vi(J,g,h,f,b);Jg(Ji(k,h));break a}}f=k=Ji(k,h);4!==T&&(T=2);null===sk?sk=[f]:sk.push(f);f=g;do{switch(f.tag){case 3:f.flags|=65536;\nb&=-b;f.lanes|=b;var x=Ni(f,k,b);ph(f,x);break a;case 1:h=k;var w=f.type,u=f.stateNode;if(0===(f.flags&128)&&(\"function\"===typeof w.getDerivedStateFromError||null!==u&&\"function\"===typeof u.componentDidCatch&&(null===Ri||!Ri.has(u)))){f.flags|=65536;b&=-b;f.lanes|=b;var F=Qi(f,h,b);ph(f,F);break a}}f=f.return}while(null!==f)}Sk(c)}catch(na){b=na;Y===c&&null!==c&&(Y=c=c.return);continue}break}while(1)}function Jk(){var a=mk.current;mk.current=Rh;return null===a?Rh:a}\nfunction tj(){if(0===T||3===T||2===T)T=4;null===Q||0===(rh&268435455)&&0===(qk&268435455)||Ck(Q,Z)}function Ik(a,b){var c=K;K|=2;var d=Jk();if(Q!==a||Z!==b)uk=null,Kk(a,b);do try{Tk();break}catch(e){Mk(a,e)}while(1);$g();K=c;mk.current=d;if(null!==Y)throw Error(p(261));Q=null;Z=0;return T}function Tk(){for(;null!==Y;)Uk(Y)}function Lk(){for(;null!==Y&&!cc();)Uk(Y)}function Uk(a){var b=Vk(a.alternate,a,fj);a.memoizedProps=a.pendingProps;null===b?Sk(a):Y=b;nk.current=null}\nfunction Sk(a){var b=a;do{var c=b.alternate;a=b.return;if(0===(b.flags&32768)){if(c=Ej(c,b,fj),null!==c){Y=c;return}}else{c=Ij(c,b);if(null!==c){c.flags&=32767;Y=c;return}if(null!==a)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{T=6;Y=null;return}}b=b.sibling;if(null!==b){Y=b;return}Y=b=a}while(null!==b);0===T&&(T=5)}function Pk(a,b,c){var d=C,e=ok.transition;try{ok.transition=null,C=1,Wk(a,b,c,d)}finally{ok.transition=e,C=d}return null}\nfunction Wk(a,b,c,d){do Hk();while(null!==wk);if(0!==(K&6))throw Error(p(327));c=a.finishedWork;var e=a.finishedLanes;if(null===c)return null;a.finishedWork=null;a.finishedLanes=0;if(c===a.current)throw Error(p(177));a.callbackNode=null;a.callbackPriority=0;var f=c.lanes|c.childLanes;Bc(a,f);a===Q&&(Y=Q=null,Z=0);0===(c.subtreeFlags&2064)&&0===(c.flags&2064)||vk||(vk=!0,Fk(hc,function(){Hk();return null}));f=0!==(c.flags&15990);if(0!==(c.subtreeFlags&15990)||f){f=ok.transition;ok.transition=null;\nvar g=C;C=1;var h=K;K|=4;nk.current=null;Oj(a,c);dk(c,a);Oe(Df);dd=!!Cf;Df=Cf=null;a.current=c;hk(c,a,e);dc();K=h;C=g;ok.transition=f}else a.current=c;vk&&(vk=!1,wk=a,xk=e);f=a.pendingLanes;0===f&&(Ri=null);mc(c.stateNode,d);Dk(a,B());if(null!==b)for(d=a.onRecoverableError,c=0;c<b.length;c++)e=b[c],d(e.value,{componentStack:e.stack,digest:e.digest});if(Oi)throw Oi=!1,a=Pi,Pi=null,a;0!==(xk&1)&&0!==a.tag&&Hk();f=a.pendingLanes;0!==(f&1)?a===zk?yk++:(yk=0,zk=a):yk=0;jg();return null}\nfunction Hk(){if(null!==wk){var a=Dc(xk),b=ok.transition,c=C;try{ok.transition=null;C=16>a?16:a;if(null===wk)var d=!1;else{a=wk;wk=null;xk=0;if(0!==(K&6))throw Error(p(331));var e=K;K|=4;for(V=a.current;null!==V;){var f=V,g=f.child;if(0!==(V.flags&16)){var h=f.deletions;if(null!==h){for(var k=0;k<h.length;k++){var l=h[k];for(V=l;null!==V;){var m=V;switch(m.tag){case 0:case 11:case 15:Pj(8,m,f)}var q=m.child;if(null!==q)q.return=m,V=q;else for(;null!==V;){m=V;var r=m.sibling,y=m.return;Sj(m);if(m===\nl){V=null;break}if(null!==r){r.return=y;V=r;break}V=y}}}var n=f.alternate;if(null!==n){var t=n.child;if(null!==t){n.child=null;do{var J=t.sibling;t.sibling=null;t=J}while(null!==t)}}V=f}}if(0!==(f.subtreeFlags&2064)&&null!==g)g.return=f,V=g;else b:for(;null!==V;){f=V;if(0!==(f.flags&2048))switch(f.tag){case 0:case 11:case 15:Pj(9,f,f.return)}var x=f.sibling;if(null!==x){x.return=f.return;V=x;break b}V=f.return}}var w=a.current;for(V=w;null!==V;){g=V;var u=g.child;if(0!==(g.subtreeFlags&2064)&&null!==\nu)u.return=g,V=u;else b:for(g=w;null!==V;){h=V;if(0!==(h.flags&2048))try{switch(h.tag){case 0:case 11:case 15:Qj(9,h)}}catch(na){W(h,h.return,na)}if(h===g){V=null;break b}var F=h.sibling;if(null!==F){F.return=h.return;V=F;break b}V=h.return}}K=e;jg();if(lc&&\"function\"===typeof lc.onPostCommitFiberRoot)try{lc.onPostCommitFiberRoot(kc,a)}catch(na){}d=!0}return d}finally{C=c,ok.transition=b}}return!1}function Xk(a,b,c){b=Ji(c,b);b=Ni(a,b,1);a=nh(a,b,1);b=R();null!==a&&(Ac(a,1,b),Dk(a,b))}\nfunction W(a,b,c){if(3===a.tag)Xk(a,a,c);else for(;null!==b;){if(3===b.tag){Xk(b,a,c);break}else if(1===b.tag){var d=b.stateNode;if(\"function\"===typeof b.type.getDerivedStateFromError||\"function\"===typeof d.componentDidCatch&&(null===Ri||!Ri.has(d))){a=Ji(c,a);a=Qi(b,a,1);b=nh(b,a,1);a=R();null!==b&&(Ac(b,1,a),Dk(b,a));break}}b=b.return}}\nfunction Ti(a,b,c){var d=a.pingCache;null!==d&&d.delete(b);b=R();a.pingedLanes|=a.suspendedLanes&c;Q===a&&(Z&c)===c&&(4===T||3===T&&(Z&130023424)===Z&&500>B()-fk?Kk(a,0):rk|=c);Dk(a,b)}function Yk(a,b){0===b&&(0===(a.mode&1)?b=1:(b=sc,sc<<=1,0===(sc&130023424)&&(sc=4194304)));var c=R();a=ih(a,b);null!==a&&(Ac(a,b,c),Dk(a,c))}function uj(a){var b=a.memoizedState,c=0;null!==b&&(c=b.retryLane);Yk(a,c)}\nfunction bk(a,b){var c=0;switch(a.tag){case 13:var d=a.stateNode;var e=a.memoizedState;null!==e&&(c=e.retryLane);break;case 19:d=a.stateNode;break;default:throw Error(p(314));}null!==d&&d.delete(b);Yk(a,c)}var Vk;\nVk=function(a,b,c){if(null!==a)if(a.memoizedProps!==b.pendingProps||Wf.current)dh=!0;else{if(0===(a.lanes&c)&&0===(b.flags&128))return dh=!1,yj(a,b,c);dh=0!==(a.flags&131072)?!0:!1}else dh=!1,I&&0!==(b.flags&1048576)&&ug(b,ng,b.index);b.lanes=0;switch(b.tag){case 2:var d=b.type;ij(a,b);a=b.pendingProps;var e=Yf(b,H.current);ch(b,c);e=Nh(null,b,d,a,e,c);var f=Sh();b.flags|=1;\"object\"===typeof e&&null!==e&&\"function\"===typeof e.render&&void 0===e.$$typeof?(b.tag=1,b.memoizedState=null,b.updateQueue=\nnull,Zf(d)?(f=!0,cg(b)):f=!1,b.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,kh(b),e.updater=Ei,b.stateNode=e,e._reactInternals=b,Ii(b,d,a,c),b=jj(null,b,d,!0,f,c)):(b.tag=0,I&&f&&vg(b),Xi(null,b,e,c),b=b.child);return b;case 16:d=b.elementType;a:{ij(a,b);a=b.pendingProps;e=d._init;d=e(d._payload);b.type=d;e=b.tag=Zk(d);a=Ci(d,a);switch(e){case 0:b=cj(null,b,d,a,c);break a;case 1:b=hj(null,b,d,a,c);break a;case 11:b=Yi(null,b,d,a,c);break a;case 14:b=$i(null,b,d,Ci(d.type,a),c);break a}throw Error(p(306,\nd,\"\"));}return b;case 0:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Ci(d,e),cj(a,b,d,e,c);case 1:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Ci(d,e),hj(a,b,d,e,c);case 3:a:{kj(b);if(null===a)throw Error(p(387));d=b.pendingProps;f=b.memoizedState;e=f.element;lh(a,b);qh(b,d,null,c);var g=b.memoizedState;d=g.element;if(f.isDehydrated)if(f={element:d,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},b.updateQueue.baseState=\nf,b.memoizedState=f,b.flags&256){e=Ji(Error(p(423)),b);b=lj(a,b,d,c,e);break a}else if(d!==e){e=Ji(Error(p(424)),b);b=lj(a,b,d,c,e);break a}else for(yg=Lf(b.stateNode.containerInfo.firstChild),xg=b,I=!0,zg=null,c=Vg(b,null,d,c),b.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{Ig();if(d===e){b=Zi(a,b,c);break a}Xi(a,b,d,c)}b=b.child}return b;case 5:return Ah(b),null===a&&Eg(b),d=b.type,e=b.pendingProps,f=null!==a?a.memoizedProps:null,g=e.children,Ef(d,e)?g=null:null!==f&&Ef(d,f)&&(b.flags|=32),\ngj(a,b),Xi(a,b,g,c),b.child;case 6:return null===a&&Eg(b),null;case 13:return oj(a,b,c);case 4:return yh(b,b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=Ug(b,null,d,c):Xi(a,b,d,c),b.child;case 11:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Ci(d,e),Yi(a,b,d,e,c);case 7:return Xi(a,b,b.pendingProps,c),b.child;case 8:return Xi(a,b,b.pendingProps.children,c),b.child;case 12:return Xi(a,b,b.pendingProps.children,c),b.child;case 10:a:{d=b.type._context;e=b.pendingProps;f=b.memoizedProps;\ng=e.value;G(Wg,d._currentValue);d._currentValue=g;if(null!==f)if(He(f.value,g)){if(f.children===e.children&&!Wf.current){b=Zi(a,b,c);break a}}else for(f=b.child,null!==f&&(f.return=b);null!==f;){var h=f.dependencies;if(null!==h){g=f.child;for(var k=h.firstContext;null!==k;){if(k.context===d){if(1===f.tag){k=mh(-1,c&-c);k.tag=2;var l=f.updateQueue;if(null!==l){l=l.shared;var m=l.pending;null===m?k.next=k:(k.next=m.next,m.next=k);l.pending=k}}f.lanes|=c;k=f.alternate;null!==k&&(k.lanes|=c);bh(f.return,\nc,b);h.lanes|=c;break}k=k.next}}else if(10===f.tag)g=f.type===b.type?null:f.child;else if(18===f.tag){g=f.return;if(null===g)throw Error(p(341));g.lanes|=c;h=g.alternate;null!==h&&(h.lanes|=c);bh(g,c,b);g=f.sibling}else g=f.child;if(null!==g)g.return=f;else for(g=f;null!==g;){if(g===b){g=null;break}f=g.sibling;if(null!==f){f.return=g.return;g=f;break}g=g.return}f=g}Xi(a,b,e.children,c);b=b.child}return b;case 9:return e=b.type,d=b.pendingProps.children,ch(b,c),e=eh(e),d=d(e),b.flags|=1,Xi(a,b,d,c),\nb.child;case 14:return d=b.type,e=Ci(d,b.pendingProps),e=Ci(d.type,e),$i(a,b,d,e,c);case 15:return bj(a,b,b.type,b.pendingProps,c);case 17:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Ci(d,e),ij(a,b),b.tag=1,Zf(d)?(a=!0,cg(b)):a=!1,ch(b,c),Gi(b,d,e),Ii(b,d,e,c),jj(null,b,d,!0,a,c);case 19:return xj(a,b,c);case 22:return dj(a,b,c)}throw Error(p(156,b.tag));};function Fk(a,b){return ac(a,b)}\nfunction $k(a,b,c,d){this.tag=a;this.key=c;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=b;this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=d;this.subtreeFlags=this.flags=0;this.deletions=null;this.childLanes=this.lanes=0;this.alternate=null}function Bg(a,b,c,d){return new $k(a,b,c,d)}function aj(a){a=a.prototype;return!(!a||!a.isReactComponent)}\nfunction Zk(a){if(\"function\"===typeof a)return aj(a)?1:0;if(void 0!==a&&null!==a){a=a.$$typeof;if(a===Da)return 11;if(a===Ga)return 14}return 2}\nfunction Pg(a,b){var c=a.alternate;null===c?(c=Bg(a.tag,b,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.type=a.type,c.flags=0,c.subtreeFlags=0,c.deletions=null);c.flags=a.flags&14680064;c.childLanes=a.childLanes;c.lanes=a.lanes;c.child=a.child;c.memoizedProps=a.memoizedProps;c.memoizedState=a.memoizedState;c.updateQueue=a.updateQueue;b=a.dependencies;c.dependencies=null===b?null:{lanes:b.lanes,firstContext:b.firstContext};\nc.sibling=a.sibling;c.index=a.index;c.ref=a.ref;return c}\nfunction Rg(a,b,c,d,e,f){var g=2;d=a;if(\"function\"===typeof a)aj(a)&&(g=1);else if(\"string\"===typeof a)g=5;else a:switch(a){case ya:return Tg(c.children,e,f,b);case za:g=8;e|=8;break;case Aa:return a=Bg(12,c,b,e|2),a.elementType=Aa,a.lanes=f,a;case Ea:return a=Bg(13,c,b,e),a.elementType=Ea,a.lanes=f,a;case Fa:return a=Bg(19,c,b,e),a.elementType=Fa,a.lanes=f,a;case Ia:return pj(c,e,f,b);default:if(\"object\"===typeof a&&null!==a)switch(a.$$typeof){case Ba:g=10;break a;case Ca:g=9;break a;case Da:g=11;\nbreak a;case Ga:g=14;break a;case Ha:g=16;d=null;break a}throw Error(p(130,null==a?a:typeof a,\"\"));}b=Bg(g,c,b,e);b.elementType=a;b.type=d;b.lanes=f;return b}function Tg(a,b,c,d){a=Bg(7,a,d,b);a.lanes=c;return a}function pj(a,b,c,d){a=Bg(22,a,d,b);a.elementType=Ia;a.lanes=c;a.stateNode={isHidden:!1};return a}function Qg(a,b,c){a=Bg(6,a,null,b);a.lanes=c;return a}\nfunction Sg(a,b,c){b=Bg(4,null!==a.children?a.children:[],a.key,b);b.lanes=c;b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation};return b}\nfunction al(a,b,c,d,e){this.tag=b;this.containerInfo=a;this.finishedWork=this.pingCache=this.current=this.pendingChildren=null;this.timeoutHandle=-1;this.callbackNode=this.pendingContext=this.context=null;this.callbackPriority=0;this.eventTimes=zc(0);this.expirationTimes=zc(-1);this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0;this.entanglements=zc(0);this.identifierPrefix=d;this.onRecoverableError=e;this.mutableSourceEagerHydrationData=\nnull}function bl(a,b,c,d,e,f,g,h,k){a=new al(a,b,c,h,k);1===b?(b=1,!0===f&&(b|=8)):b=0;f=Bg(3,null,null,b);a.current=f;f.stateNode=a;f.memoizedState={element:d,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null};kh(f);return a}function cl(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:wa,key:null==d?null:\"\"+d,children:a,containerInfo:b,implementation:c}}\nfunction dl(a){if(!a)return Vf;a=a._reactInternals;a:{if(Vb(a)!==a||1!==a.tag)throw Error(p(170));var b=a;do{switch(b.tag){case 3:b=b.stateNode.context;break a;case 1:if(Zf(b.type)){b=b.stateNode.__reactInternalMemoizedMergedChildContext;break a}}b=b.return}while(null!==b);throw Error(p(171));}if(1===a.tag){var c=a.type;if(Zf(c))return bg(a,c,b)}return b}\nfunction el(a,b,c,d,e,f,g,h,k){a=bl(c,d,!0,a,e,f,g,h,k);a.context=dl(null);c=a.current;d=R();e=yi(c);f=mh(d,e);f.callback=void 0!==b&&null!==b?b:null;nh(c,f,e);a.current.lanes=e;Ac(a,e,d);Dk(a,d);return a}function fl(a,b,c,d){var e=b.current,f=R(),g=yi(e);c=dl(c);null===b.context?b.context=c:b.pendingContext=c;b=mh(f,g);b.payload={element:a};d=void 0===d?null:d;null!==d&&(b.callback=d);a=nh(e,b,g);null!==a&&(gi(a,e,g,f),oh(a,e,g));return g}\nfunction gl(a){a=a.current;if(!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function hl(a,b){a=a.memoizedState;if(null!==a&&null!==a.dehydrated){var c=a.retryLane;a.retryLane=0!==c&&c<b?c:b}}function il(a,b){hl(a,b);(a=a.alternate)&&hl(a,b)}function jl(){return null}var kl=\"function\"===typeof reportError?reportError:function(a){console.error(a)};function ll(a){this._internalRoot=a}\nml.prototype.render=ll.prototype.render=function(a){var b=this._internalRoot;if(null===b)throw Error(p(409));fl(a,b,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var a=this._internalRoot;if(null!==a){this._internalRoot=null;var b=a.containerInfo;Rk(function(){fl(null,a,null,null)});b[uf]=null}};function ml(a){this._internalRoot=a}\nml.prototype.unstable_scheduleHydration=function(a){if(a){var b=Hc();a={blockedOn:null,target:a,priority:b};for(var c=0;c<Qc.length&&0!==b&&b<Qc[c].priority;c++);Qc.splice(c,0,a);0===c&&Vc(a)}};function nl(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType)}function ol(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||\" react-mount-point-unstable \"!==a.nodeValue))}function pl(){}\nfunction ql(a,b,c,d,e){if(e){if(\"function\"===typeof d){var f=d;d=function(){var a=gl(g);f.call(a)}}var g=el(b,d,a,0,null,!1,!1,\"\",pl);a._reactRootContainer=g;a[uf]=g.current;sf(8===a.nodeType?a.parentNode:a);Rk();return g}for(;e=a.lastChild;)a.removeChild(e);if(\"function\"===typeof d){var h=d;d=function(){var a=gl(k);h.call(a)}}var k=bl(a,0,!1,null,null,!1,!1,\"\",pl);a._reactRootContainer=k;a[uf]=k.current;sf(8===a.nodeType?a.parentNode:a);Rk(function(){fl(b,k,c,d)});return k}\nfunction rl(a,b,c,d,e){var f=c._reactRootContainer;if(f){var g=f;if(\"function\"===typeof e){var h=e;e=function(){var a=gl(g);h.call(a)}}fl(b,g,a,e)}else g=ql(c,b,a,e,d);return gl(g)}Ec=function(a){switch(a.tag){case 3:var b=a.stateNode;if(b.current.memoizedState.isDehydrated){var c=tc(b.pendingLanes);0!==c&&(Cc(b,c|1),Dk(b,B()),0===(K&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var b=ih(a,1);if(null!==b){var c=R();gi(b,a,1,c)}}),il(a,1)}};\nFc=function(a){if(13===a.tag){var b=ih(a,134217728);if(null!==b){var c=R();gi(b,a,134217728,c)}il(a,134217728)}};Gc=function(a){if(13===a.tag){var b=yi(a),c=ih(a,b);if(null!==c){var d=R();gi(c,a,b,d)}il(a,b)}};Hc=function(){return C};Ic=function(a,b){var c=C;try{return C=a,b()}finally{C=c}};\nyb=function(a,b,c){switch(b){case \"input\":bb(a,c);b=c.name;if(\"radio\"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;c=c.querySelectorAll(\"input[name=\"+JSON.stringify(\"\"+b)+'][type=\"radio\"]');for(b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=Db(d);if(!e)throw Error(p(90));Wa(d);bb(d,e)}}}break;case \"textarea\":ib(a,c);break;case \"select\":b=c.value,null!=b&&fb(a,!!c.multiple,b,!1)}};Gb=Qk;Hb=Rk;\nvar sl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:\"18.3.1\",rendererPackageName:\"react-dom\"};\nvar ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){a=Zb(a);return null===a?null:a.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||\njl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:\"18.3.1-next-f1338f8080-20240426\"};if(\"undefined\"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch(a){}}exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;\nexports.createPortal=function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!nl(b))throw Error(p(200));return cl(a,b,null,c)};exports.createRoot=function(a,b){if(!nl(a))throw Error(p(299));var c=!1,d=\"\",e=kl;null!==b&&void 0!==b&&(!0===b.unstable_strictMode&&(c=!0),void 0!==b.identifierPrefix&&(d=b.identifierPrefix),void 0!==b.onRecoverableError&&(e=b.onRecoverableError));b=bl(a,1,!1,null,null,c,!1,d,e);a[uf]=b.current;sf(8===a.nodeType?a.parentNode:a);return new ll(b)};\nexports.findDOMNode=function(a){if(null==a)return null;if(1===a.nodeType)return a;var b=a._reactInternals;if(void 0===b){if(\"function\"===typeof a.render)throw Error(p(188));a=Object.keys(a).join(\",\");throw Error(p(268,a));}a=Zb(b);a=null===a?null:a.stateNode;return a};exports.flushSync=function(a){return Rk(a)};exports.hydrate=function(a,b,c){if(!ol(b))throw Error(p(200));return rl(null,a,b,!0,c)};\nexports.hydrateRoot=function(a,b,c){if(!nl(a))throw Error(p(405));var d=null!=c&&c.hydratedSources||null,e=!1,f=\"\",g=kl;null!==c&&void 0!==c&&(!0===c.unstable_strictMode&&(e=!0),void 0!==c.identifierPrefix&&(f=c.identifierPrefix),void 0!==c.onRecoverableError&&(g=c.onRecoverableError));b=el(b,null,a,1,null!=c?c:null,e,!1,f,g);a[uf]=b.current;sf(a);if(d)for(a=0;a<d.length;a++)c=d[a],e=c._getVersion,e=e(c._source),null==b.mutableSourceEagerHydrationData?b.mutableSourceEagerHydrationData=[c,e]:b.mutableSourceEagerHydrationData.push(c,\ne);return new ml(b)};exports.render=function(a,b,c){if(!ol(b))throw Error(p(200));return rl(null,a,b,!1,c)};exports.unmountComponentAtNode=function(a){if(!ol(a))throw Error(p(40));return a._reactRootContainer?(Rk(function(){rl(null,null,a,!1,function(){a._reactRootContainer=null;a[uf]=null})}),!0):!1};exports.unstable_batchedUpdates=Qk;\nexports.unstable_renderSubtreeIntoContainer=function(a,b,c,d){if(!ol(c))throw Error(p(200));if(null==a||void 0===a._reactInternals)throw Error(p(38));return rl(a,b,c,!1,d)};exports.version=\"18.3.1-next-f1338f8080-20240426\";\n","'use strict';\n\nfunction checkDCE() {\n  /* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */\n  if (\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === 'undefined' ||\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE !== 'function'\n  ) {\n    return;\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    // This branch is unreachable because this function is only called\n    // in production, but the condition is true only in development.\n    // Therefore if the branch is still here, dead code elimination wasn't\n    // properly applied.\n    // Don't change the message. React DevTools relies on it. Also make sure\n    // this message doesn't occur elsewhere in this function, or it will cause\n    // a false positive.\n    throw new Error('^_^');\n  }\n  try {\n    // Verify that the code above has been dead code eliminated (DCE'd).\n    __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE);\n  } catch (err) {\n    // DevTools shouldn't crash React, no matter what.\n    // We should still report in case we break this code.\n    console.error(err);\n  }\n}\n\nif (process.env.NODE_ENV === 'production') {\n  // DCE check should happen before ReactDOM bundle executes so that\n  // DevTools can report bad minification during injection.\n  checkDCE();\n  module.exports = require('./cjs/react-dom.production.min.js');\n} else {\n  module.exports = require('./cjs/react-dom.development.js');\n}\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","// --- Crypto Service for E2E Encryption and Digital Signatures ---\n\n// --- Symmetric Encryption (AES-GCM) ---\nconst SYMMETRIC_ALGORITHM = 'AES-GCM';\nconst SYMMETRIC_KEY_OPTIONS: AesKeyGenParams = { name: SYMMETRIC_ALGORITHM, length: 256 };\nconst SYMMETRIC_KEY_EXTRACTABLE = true;\nconst SYMMETRIC_KEY_USAGES: KeyUsage[] = ['encrypt', 'decrypt'];\n\n// --- Asymmetric Signing (ECDSA) ---\nconst SIGNING_ALGORITHM: EcdsaParams = { name: 'ECDSA', hash: 'SHA-384' };\nconst SIGNING_KEY_OPTIONS: EcKeyGenParams = { name: 'ECDSA', namedCurve: 'P-384' };\nconst SIGNING_KEY_EXTRACTABLE = true; // Allow exporting the public key\nconst SIGNING_KEY_USAGES: KeyUsage[] = ['sign', 'verify'];\n\n/**\n * Converts a Uint8Array to a \"binary string\" (a string where each character's char code is a byte value),\n * which is the format required by the btoa function. This is a robust way to handle Unicode.\n * @param arr The Uint8Array to convert.\n */\nconst uint8ArrayToBinaryString = (arr: Uint8Array): string => {\n  let binary = '';\n  // This loop is more robust than `String.fromCharCode.apply` for large inputs on some JS engines.\n  for (let i = 0; i < arr.length; i++) {\n    binary += String.fromCharCode(arr[i]);\n  }\n  return binary;\n};\n\n/**\n * Decodes a standard or URL-safe Base64 string into a Uint8Array, with robust error handling.\n * @param base64Input The Base64 string (standard or URL-safe).\n * @throws An error with a specific message if decoding fails.\n */\nfunction decodeBase64(base64Input: string): Uint8Array {\n    // 1. Handle URL-safe characters by replacing them with standard Base64 equivalents.\n    let base64 = base64Input.replace(/-/g, '+').replace(/_/g, '/');\n\n    // 2. Add padding if it was stripped. Base64 strings should have a length divisible by 4.\n    const padding = base64.length % 4;\n    if (padding) {\n        if (padding === 2) base64 += '==';\n        else if (padding === 3) base64 += '=';\n        // If padding is 1, the string is malformed anyway, and atob will throw.\n    }\n\n    try {\n        const binaryString = atob(base64);\n        const bytes = new Uint8Array(binaryString.length);\n        for (let i = 0; i < binaryString.length; i++) {\n            bytes[i] = binaryString.charCodeAt(i);\n        }\n        return bytes;\n    } catch (e: any) {\n        // This provides a much clearer error than the default 'atob' failure.\n        if (e instanceof DOMException && e.name === 'InvalidCharacterError') {\n            throw new Error(\"Failed to decode data. The Base64 string is corrupted or contains invalid characters.\");\n        }\n        // Rethrow other errors with more context.\n        throw new Error(`An unexpected error occurred during Base64 decoding: ${e.message}`);\n    }\n}\n\n\n/**\n * Generates a new AES-GCM cryptographic key for symmetric encryption.\n */\nexport const generateEncryptionKey = async (): Promise<CryptoKey> => {\n  return crypto.subtle.generateKey(SYMMETRIC_KEY_OPTIONS, SYMMETRIC_KEY_EXTRACTABLE, SYMMETRIC_KEY_USAGES);\n};\n\n/**\n * Exports a CryptoKey to a JSON Web Key (JWK) format for transmission.\n * @param key The CryptoKey to export.\n */\nexport const exportKey = async (key: CryptoKey): Promise<JsonWebKey> => {\n  return crypto.subtle.exportKey('jwk', key);\n};\n\n/**\n * Imports a JSON Web Key (JWK) into a CryptoKey object for symmetric encryption.\n * @param jwk The JWK object to import.\n */\nexport const importEncryptionKey = async (jwk: JsonWebKey): Promise<CryptoKey> => {\n  return crypto.subtle.importKey('jwk', jwk, { name: SYMMETRIC_ALGORITHM }, SYMMETRIC_KEY_EXTRACTABLE, SYMMETRIC_KEY_USAGES);\n};\n\n/**\n * Encrypts a string of data using a given CryptoKey.\n * @param data The string or Uint8Array data to encrypt.\n * @param key The CryptoKey for encryption.\n * @returns A base64 encoded string containing the IV and the encrypted data.\n */\nexport const encrypt = async (data: string | Uint8Array, key: CryptoKey): Promise<string> => {\n  const iv = crypto.getRandomValues(new Uint8Array(12)); // IV for GCM should be 12 bytes\n  const encodedData = typeof data === 'string' ? new TextEncoder().encode(data) : data;\n\n  const encryptedContent = await crypto.subtle.encrypt(\n    { name: SYMMETRIC_ALGORITHM, iv },\n    key,\n    encodedData.slice()\n  );\n\n  const encryptedBytes = new Uint8Array(encryptedContent);\n  // Prepend the IV to the ciphertext for use in decryption\n  const combined = new Uint8Array(iv.length + encryptedBytes.length);\n  combined.set(iv);\n  combined.set(encryptedBytes, iv.length);\n\n  // Convert the combined ArrayBuffer to a base64 string for easy transport\n  return btoa(uint8ArrayToBinaryString(combined));\n};\n\n/**\n * Decrypts a base64 encoded string using a given CryptoKey.\n * @param encryptedData The base64 string containing the IV and ciphertext.\n * @param key The CryptoKey for decryption.\n * @returns The original decrypted data as a Uint8Array.\n */\nexport const decrypt = async (encryptedData: string, key: CryptoKey): Promise<Uint8Array> => {\n  // Decode the base64 string back to an ArrayBuffer using the robust helper\n  const combined = decodeBase64(encryptedData);\n  \n  const iv = combined.slice(0, 12);\n  const ciphertext = combined.slice(12);\n\n  const decryptedContent = await crypto.subtle.decrypt(\n    { name: SYMMETRIC_ALGORITHM, iv },\n    key,\n    ciphertext.slice()\n  );\n\n  return new Uint8Array(decryptedContent);\n};\n\n// --- Digital Signature Functions ---\n\n/**\n * Generates a new ECDSA key pair for digital signatures.\n */\nexport const generateSigningKeyPair = async (): Promise<CryptoKeyPair> => {\n  return crypto.subtle.generateKey(SIGNING_KEY_OPTIONS, SYMMETRIC_KEY_EXTRACTABLE, SIGNING_KEY_USAGES);\n};\n\n/**\n * Imports a public key from JWK format for verification.\n * @param jwk The public key in JWK format.\n */\nexport const importPublicKey = async (jwk: JsonWebKey): Promise<CryptoKey> => {\n    return crypto.subtle.importKey('jwk', jwk, SIGNING_KEY_OPTIONS, true, ['verify']);\n};\n\n\n/**\n * Creates a digital signature for a given data string.\n * @param data The data to sign.\n * @param privateKey The private key to sign with.\n * @returns A base64 encoded signature string.\n */\nexport const sign = async (data: string, privateKey: CryptoKey): Promise<string> => {\n  const encodedData = new TextEncoder().encode(data);\n  const signatureBuffer = await crypto.subtle.sign(SIGNING_ALGORITHM, privateKey, encodedData.slice());\n  return btoa(uint8ArrayToBinaryString(new Uint8Array(signatureBuffer)));\n};\n\n/**\n * Verifies a digital signature against the original data.\n * @param data The original data that was signed.\n * @param signature The base64 encoded signature.\n * @param publicKey The public key to verify with.\n * @returns A boolean indicating if the signature is valid.\n */\nexport const verify = async (data: string, signature: string, publicKey: CryptoKey): Promise<boolean> => {\n  const encodedData = new TextEncoder().encode(data);\n  // Decode the signature using the robust helper\n  const signatureBytes = decodeBase64(signature);\n\n  return crypto.subtle.verify(\n    SIGNING_ALGORITHM,\n    publicKey,\n    signatureBytes.slice(),\n    encodedData.slice()\n  );\n};","import { useEffect, useRef } from 'react';\nimport { getCommunicationKeyPair } from './db';\nimport { sign, verify } from './cryptoService';\n\n\nconst CHANNEL_NAME = 'smart-bill-splitter-sync';\n\n// Create a single BroadcastChannel instance to be used throughout the app.\n// Check for browser support.\nconst channel = typeof BroadcastChannel !== 'undefined' ? new BroadcastChannel(CHANNEL_NAME) : null;\n\nif (!channel) {\n    console.warn(\"BroadcastChannel API not supported in this browser. Cross-tab sync will not be available.\");\n}\n\nexport type BroadcastMessageType = \n    | 'bills-updated' \n    | 'imported-bills-updated' \n    | 'recurring-bills-updated' \n    | 'settings-updated' \n    | 'theme-updated' \n    | 'db-close-request' \n    | 'db-migration-complete'\n    | 'groups-updated'\n    | 'categories-updated';\n\nexport interface BroadcastMessage {\n  type: BroadcastMessageType;\n  // Optional payload for future use, not needed for simple reload triggers.\n  payload?: any; \n}\n\ninterface SignedBroadcastMessage {\n  payload: BroadcastMessage;\n  signature: string;\n}\n\n/**\n * Posts a signed message to all other tabs of this application.\n * @param message The message to send.\n */\nexport const postMessage = async (message: BroadcastMessage) => {\n  if (!channel) return;\n\n  try {\n    const keyPair = await getCommunicationKeyPair();\n    if (!keyPair?.privateKey) {\n        console.error(\"Broadcast: Communication private key not found. Cannot sign message.\");\n        return;\n    }\n\n    const payloadString = JSON.stringify(message);\n    const signature = await sign(payloadString, keyPair.privateKey);\n\n    const signedMessage: SignedBroadcastMessage = {\n        payload: message,\n        signature: signature,\n    };\n\n    channel.postMessage(signedMessage);\n  } catch (error) {\n    console.error(\"Failed to sign and post broadcast message:\", error);\n  }\n};\n\n/**\n * A React hook to listen for verified messages from other tabs.\n * @param onMessage A memoized callback function to execute when a valid message is received.\n */\nexport const useBroadcastListener = (onMessage: (message: BroadcastMessage) => void) => {\n  const onMessageRef = useRef(onMessage);\n\n  // Always keep the ref updated with the latest callback from the parent component.\n  useEffect(() => {\n    onMessageRef.current = onMessage;\n  }, [onMessage]);\n\n  useEffect(() => {\n    if (!channel) {\n        return;\n    }\n    \n    // The event handler is now async to handle key retrieval and verification\n    const handleMessage = async (event: MessageEvent<any>) => {\n        const signedMessage = event.data;\n\n        if (!signedMessage || typeof signedMessage.payload !== 'object' || typeof signedMessage.signature !== 'string') {\n            console.warn(\"Broadcast: Received a malformed or unsigned message. Ignoring.\", signedMessage);\n            return;\n        }\n\n        try {\n            const keyPair = await getCommunicationKeyPair();\n            if (!keyPair?.publicKey) {\n                console.error(\"Broadcast: Communication public key not found. Cannot verify message.\");\n                return;\n            }\n\n            const payloadString = JSON.stringify(signedMessage.payload);\n            const isVerified = await verify(payloadString, signedMessage.signature, keyPair.publicKey);\n\n            if (isVerified) {\n                onMessageRef.current(signedMessage.payload);\n            } else {\n                console.warn(\"Broadcast: Received a message with an INVALID signature. Ignoring. This could be a security issue or a key mismatch between tabs.\", signedMessage);\n            }\n        } catch (error) {\n            console.error(\"Error during broadcast message verification:\", error);\n        }\n    };\n\n    channel.addEventListener('message', handleMessage);\n\n    // The cleanup function removes the single, consistent event handler.\n    return () => {\n      channel.removeEventListener('message', handleMessage);\n    };\n  }, []);\n};","import type { Bill, Settings, Theme, RecurringBill, ImportedBill, PayPalSubscriptionDetails, Group, Category } from '../types';\nimport type { SubscriptionStatus } from '../hooks/useAuth';\nimport { postMessage } from './broadcastService';\n\nconst DB_NAME = 'SmartBillSplitterDB';\nconst DB_VERSION = 18; // Incremented for summary recalculation flag\n\n// Object Store Names\nconst STORES = {\n  BILLS: 'bills',\n  RECURRING_BILLS: 'recurring_bills',\n  IMPORTED_BILLS: 'imported_bills',\n  GROUPS: 'groups',\n  CATEGORIES: 'categories',\n  SETTINGS: 'settings',\n  THEME: 'theme',\n  SUBSCRIPTION: 'subscription',\n  SUBSCRIPTION_DETAILS: 'subscription_details',\n  CRYPTO_KEYS: 'crypto_keys', // Note: This is now legacy and unused.\n  BILL_SIGNING_KEYS: 'bill_signing_keys',\n  MANAGED_PAYPAL_SUBSCRIPTIONS: 'managed_paypal_subscriptions',\n  COMMUNICATION_KEYS: 'communication_keys',\n};\n\n// Singleton key for settings, theme, subscription stores\nconst SINGLE_KEY = 'current';\n\nlet db: IDBDatabase | null = null;\n\nexport interface SubscriptionDetails {\n  provider: 'stripe' | 'paypal';\n  customerId: string; // Stripe Customer ID or PayPal Payer ID\n  subscriptionId: string; // Stripe Subscription ID or PayPal Subscription ID\n  startDate: string;\n  duration: 'monthly' | 'yearly';\n}\n\n/**\n * Closes the database connection. Called by other tabs when an upgrade is needed.\n */\nexport const closeDB = (): void => {\n    if (db) {\n        db.close();\n        db = null;\n        console.log(\"Database connection closed on request from another tab.\");\n    }\n};\n\n/**\n * Gets the current DB connection. Throws an error if it's not initialized or has been closed.\n */\nconst getDB = (): IDBDatabase => {\n    if (!db) {\n        throw new Error(\"Database not initialized or has been closed. Call initDB first.\");\n    }\n    return db;\n};\n\n\n// --- Promise Wrapper for IDBRequest ---\nfunction promisifyRequest<T>(request: IDBRequest<T>): Promise<T> {\n  return new Promise((resolve, reject) => {\n    request.onsuccess = () => resolve(request.result);\n    request.onerror = () => reject(request.error);\n  });\n}\n\n// --- DB Initialization ---\nexport function initDB(): Promise<void> {\n  return new Promise((resolve, reject) => {\n    if (db) {\n      return resolve();\n    }\n    \n    const request = indexedDB.open(DB_NAME, DB_VERSION);\n\n    request.onupgradeneeded = (event) => {\n      const dbInstance = (event.target as IDBOpenDBRequest).result;\n      const transaction = (event.target as IDBOpenDBRequest).transaction!;\n\n      const storesToCreate = [\n        { name: STORES.BILLS, options: { keyPath: 'id' } },\n        { name: STORES.RECURRING_BILLS, options: { keyPath: 'id' } },\n        { name: STORES.IMPORTED_BILLS, options: { keyPath: 'id' } },\n        { name: STORES.GROUPS, options: { keyPath: 'id' } },\n        { name: STORES.CATEGORIES, options: { keyPath: 'id' } },\n        { name: STORES.SETTINGS },\n        { name: STORES.THEME },\n        { name: STORES.SUBSCRIPTION },\n        { name: STORES.SUBSCRIPTION_DETAILS },\n        { name: STORES.BILL_SIGNING_KEYS, options: { keyPath: 'billId' } },\n        { name: STORES.MANAGED_PAYPAL_SUBSCRIPTIONS },\n        { name: STORES.COMMUNICATION_KEYS },\n      ];\n\n      storesToCreate.forEach(storeInfo => {\n        if (!dbInstance.objectStoreNames.contains(storeInfo.name)) {\n          dbInstance.createObjectStore(storeInfo.name, storeInfo.options);\n        }\n      });\n      \n      // Migration for V15: Add popularity to groups\n      if (event.oldVersion < 15) {\n          if (dbInstance.objectStoreNames.contains(STORES.GROUPS)) {\n              console.log(\"Migrating groups for v15: adding popularity field.\");\n              const groupStore = transaction.objectStore(STORES.GROUPS);\n              groupStore.openCursor().onsuccess = (e) => {\n                  const cursor = (e.target as IDBRequest<IDBCursorWithValue>).result;\n                  if (cursor) {\n                      const group = cursor.value;\n                      if (group.popularity === undefined) {\n                          group.popularity = 0;\n                          cursor.update(group);\n                      }\n                      cursor.continue();\n                  }\n              };\n          }\n      }\n      \n      // Migration for V16: Add categoryId to bills\n      if (event.oldVersion < 16) {\n          console.log(\"Migrating for v16: ensuring bills and recurring_bills stores exist.\");\n          // The store creation logic above already handles this.\n      }\n      \n      // Migration for V17: Add dashboardLayoutMode to settings\n      if (event.oldVersion < 17) {\n          console.log(\"Migrating for v17: adding dashboardLayoutMode to settings.\");\n          if (dbInstance.objectStoreNames.contains(STORES.SETTINGS)) {\n              const settingsStore = transaction.objectStore(STORES.SETTINGS);\n              settingsStore.get(SINGLE_KEY).onsuccess = (e) => {\n                  const settings = (e.target as IDBRequest<Settings>).result;\n                  if (settings && settings.dashboardLayoutMode === undefined) {\n                      settings.dashboardLayoutMode = 'card'; // Default to card view\n                      settingsStore.put(settings, SINGLE_KEY);\n                  }\n              };\n          }\n      }\n\n      // Migration for V18: Add summaryRecalculated flag support to imported bills.\n      if (event.oldVersion < 18) {\n          // No actual schema changes are needed for the ImportedBill store,\n          // as IndexedDB is schemaless. The new 'summaryRecalculated' property will be added\n          // dynamically by the application logic upon first load to fix stale summary data.\n          console.log(\"Migrating for v18: Preparing for summary bill recalculation flag.\");\n      }\n    };\n    \n    request.onblocked = () => {\n      console.warn(\"Database upgrade is blocked. Broadcasting close request to other tabs.\");\n      postMessage({ type: 'db-close-request' });\n      reject(new Error(\"Waiting for other tabs to apply the update. If this message persists, please close all other tabs for this site.\"));\n    };\n\n    request.onsuccess = (event) => {\n      const dbInstance = (event.target as IDBOpenDBRequest).result;\n      db = dbInstance;\n\n      db.onversionchange = () => {\n        console.warn(\"Database version change detected from another tab. Closing connection.\");\n        closeDB();\n        window.dispatchEvent(new CustomEvent('db-versionchange'));\n      };\n      \n      const eventWithVersions = event as IDBVersionChangeEvent;\n      if (eventWithVersions.oldVersion > 0 && eventWithVersions.newVersion !== eventWithVersions.oldVersion) {\n          console.log(`Database migration from v${eventWithVersions.oldVersion} to v${eventWithVersions.newVersion} was successful. Notifying other tabs.`);\n          postMessage({ type: 'db-migration-complete' });\n      }\n\n      resolve();\n    };\n\n    request.onerror = (event) => {\n      const error = (event.target as IDBOpenDBRequest).error;\n      console.error('Database error:', error);\n      reject(new Error(`Error opening database: ${error?.message}`));\n    };\n  });\n}\n\n// --- Generic Store Operations ---\nasync function getStore(storeName: string, mode: IDBTransactionMode) {\n    const currentDb = getDB();\n    return currentDb.transaction(storeName, mode).objectStore(storeName);\n}\n\nasync function getAll<T>(storeName: string): Promise<T[]> {\n    const store = await getStore(storeName, 'readonly');\n    return promisifyRequest(store.getAll());\n}\n\nasync function get<T>(storeName: string, key: string): Promise<T | undefined> {\n    const store = await getStore(storeName, 'readonly');\n    return promisifyRequest(store.get(key));\n}\n\nasync function set<T>(storeName: string, value: T, key?: string): Promise<void> {\n    const store = await getStore(storeName, 'readwrite');\n    await promisifyRequest(store.put(value, key));\n}\n\nasync function del(storeName: string, key: string): Promise<void> {\n    const store = await getStore(storeName, 'readwrite');\n    await promisifyRequest(store.delete(key));\n}\n\n// --- Bill Operations ---\nexport const getBills = () => getAll<Bill>(STORES.BILLS);\nexport const addBill = (bill: Bill) => set(STORES.BILLS, bill);\nexport const updateBill = (bill: Bill) => set(STORES.BILLS, bill);\nexport const deleteBillDB = (billId: string) => del(STORES.BILLS, billId);\n\nexport const addMultipleBillsDB = async (bills: Bill[]): Promise<void> => {\n    const store = await getStore(STORES.BILLS, 'readwrite');\n    const tx = store.transaction;\n    bills.forEach(bill => store.put(bill));\n    return new Promise<void>((resolve, reject) => {\n        tx.oncomplete = () => resolve();\n        tx.onerror = () => reject(tx.error);\n    });\n};\n\nexport const mergeBillsDB = async (billsToAdd: Bill[], billsToUpdate: Bill[]): Promise<void> => {\n    const store = await getStore(STORES.BILLS, 'readwrite');\n    const tx = store.transaction;\n    billsToAdd.forEach(bill => store.put(bill));\n    billsToUpdate.forEach(bill => store.put(bill));\n    return new Promise<void>((resolve, reject) => {\n        tx.oncomplete = () => resolve();\n        tx.onerror = () => reject(tx.error);\n    });\n};\n\n// --- Recurring Bill Operations ---\nexport const getRecurringBills = () => getAll<RecurringBill>(STORES.RECURRING_BILLS);\nexport const addRecurringBill = (bill: RecurringBill) => set(STORES.RECURRING_BILLS, bill);\nexport const updateRecurringBill = (bill: RecurringBill) => set(STORES.RECURRING_BILLS, bill);\nexport const deleteRecurringBillDB = (billId: string) => del(STORES.RECURRING_BILLS, billId);\n\n// --- Imported Bill Operations ---\nexport const getImportedBills = () => getAll<ImportedBill>(STORES.IMPORTED_BILLS);\nexport const addImportedBill = (bill: ImportedBill) => set(STORES.IMPORTED_BILLS, bill);\nexport const updateImportedBill = (bill: ImportedBill) => set(STORES.IMPORTED_BILLS, bill);\nexport const deleteImportedBillDB = (billId: string) => del(STORES.IMPORTED_BILLS, billId);\n\nexport const addMultipleImportedBillsDB = async (bills: ImportedBill[]): Promise<void> => {\n    const store = await getStore(STORES.IMPORTED_BILLS, 'readwrite');\n    const tx = store.transaction;\n    bills.forEach(bill => store.put(bill));\n    return new Promise<void>((resolve, reject) => {\n        tx.oncomplete = () => resolve();\n        tx.onerror = () => reject(tx.error);\n    });\n};\n\nexport const mergeImportedBillsDB = async (billsToAdd: ImportedBill[], billsToUpdate: ImportedBill[]): Promise<void> => {\n    const store = await getStore(STORES.IMPORTED_BILLS, 'readwrite');\n    const tx = store.transaction;\n    billsToAdd.forEach(bill => store.put(bill));\n    billsToUpdate.forEach(bill => store.put(bill));\n    return new Promise<void>((resolve, reject) => {\n        tx.oncomplete = () => resolve();\n        tx.onerror = () => reject(tx.error);\n    });\n};\n\n// --- Group Operations ---\nexport const getGroups = () => getAll<Group>(STORES.GROUPS);\nexport const addGroup = (group: Group) => set(STORES.GROUPS, group);\nexport const updateGroup = (group: Group) => set(STORES.GROUPS, group);\nexport const deleteGroupDB = (groupId: string) => del(STORES.GROUPS, groupId);\n\n// --- Category Operations ---\nexport const getCategories = () => getAll<Category>(STORES.CATEGORIES);\nexport const addCategory = (category: Category) => set(STORES.CATEGORIES, category);\nexport const updateCategory = (category: Category) => set(STORES.CATEGORIES, category);\nexport const deleteCategoryDB = (categoryId: string) => del(STORES.CATEGORIES, categoryId);\nexport const saveMultipleCategories = async (categories: Category[]): Promise<void> => {\n    const store = await getStore(STORES.CATEGORIES, 'readwrite');\n    const tx = store.transaction;\n    categories.forEach(cat => store.put(cat));\n    return new Promise<void>((resolve, reject) => {\n        tx.oncomplete = () => resolve();\n        tx.onerror = () => reject(tx.error);\n    });\n};\n\n\n// --- Settings Operations ---\nexport const getSettings = () => get<Settings>(STORES.SETTINGS, SINGLE_KEY);\nexport const saveSettings = (settings: Settings) => set(STORES.SETTINGS, settings, SINGLE_KEY);\n\n// --- Theme Operations ---\nexport const getTheme = () => get<Theme>(STORES.THEME, SINGLE_KEY);\nexport const saveTheme = (theme: Theme) => set(STORES.THEME, theme, SINGLE_KEY);\n\n// --- Subscription Operations ---\nexport const getSubscriptionStatus = async (): Promise<SubscriptionStatus> => {\n    const status = await get<SubscriptionStatus>(STORES.SUBSCRIPTION, SINGLE_KEY);\n    const details = await get<SubscriptionDetails>(STORES.SUBSCRIPTION_DETAILS, SINGLE_KEY);\n\n    if (status === 'subscribed' && details) {\n        const startDate = new Date(details.startDate);\n        const now = new Date();\n        const durationDays = details.duration === 'yearly' ? 366 : 31; // Add a grace day\n        const expiryDate = new Date(startDate.getTime());\n        expiryDate.setDate(expiryDate.getDate() + durationDays);\n\n        if (now > expiryDate) {\n            console.log(\"Subscription has expired.\");\n            await deleteSubscriptionDetails();\n            await saveSubscriptionStatus(null);\n            return null;\n        }\n    }\n    return status || null;\n};\nexport const getSubscriptionDetails = () => get<SubscriptionDetails>(STORES.SUBSCRIPTION_DETAILS, SINGLE_KEY);\nexport const saveSubscriptionStatus = (status: SubscriptionStatus | null) => set(STORES.SUBSCRIPTION, status, SINGLE_KEY);\nexport const saveSubscriptionDetails = (details: SubscriptionDetails) => set(STORES.SUBSCRIPTION_DETAILS, details, SINGLE_KEY);\nexport const deleteSubscriptionDetails = async () => {\n    await del(STORES.SUBSCRIPTION_DETAILS, SINGLE_KEY);\n    await del(STORES.SUBSCRIPTION, SINGLE_KEY);\n}\n\n// --- Crypto Key Operations ---\ninterface BillSigningKeyRecord {\n    billId: string;\n    privateKey: CryptoKey;\n}\nexport const getBillSigningKey = (billId: string) => get<BillSigningKeyRecord>(STORES.BILL_SIGNING_KEYS, billId);\nexport const saveBillSigningKey = (billId: string, privateKey: CryptoKey) => set(STORES.BILL_SIGNING_KEYS, { billId, privateKey });\nexport const deleteBillSigningKeyDB = (billId: string) => del(STORES.BILL_SIGNING_KEYS, billId);\n\n// --- Communication Key Operations ---\nconst COMM_KEY_ID = 'user_comm_key';\n\nexport const getCommunicationKeyPair = async (): Promise<CryptoKeyPair | null> => {\n    const keyPair = await get<CryptoKeyPair>(STORES.COMMUNICATION_KEYS, COMM_KEY_ID);\n\n    if (keyPair && keyPair.publicKey instanceof CryptoKey && keyPair.privateKey instanceof CryptoKey) {\n        return keyPair;\n    }\n\n    if (keyPair) {\n        console.warn(\"Found invalid or old format for communication keys in DB. A new key pair will be generated on next load.\");\n        await del(STORES.COMMUNICATION_KEYS, COMM_KEY_ID);\n    }\n    \n    return null;\n};\n\nexport const saveCommunicationKeyPair = async (keyPair: CryptoKeyPair): Promise<void> => {\n    await set(STORES.COMMUNICATION_KEYS, keyPair, COMM_KEY_ID);\n};\n\n\n// --- PayPal Subscription Management ---\nexport const getManagedPayPalSubscriptions = () => get<PayPalSubscriptionDetails[]>(STORES.MANAGED_PAYPAL_SUBSCRIPTIONS, SINGLE_KEY).then(res => res || []);\nexport const saveManagedPayPalSubscriptions = (subscriptions: PayPalSubscriptionDetails[]) => set(STORES.MANAGED_PAYPAL_SUBSCRIPTIONS, subscriptions, SINGLE_KEY);\n\n// --- Data Import/Export ---\nexport const exportData = async () => {\n    const bills = await getBills();\n    const recurringBills = await getRecurringBills();\n    const importedBills = await getImportedBills();\n    const groups = await getGroups();\n    const categories = await getCategories();\n    const settings = await getSettings();\n    const theme = await getTheme();\n    const subscription = await getSubscriptionStatus();\n    const subscriptionDetails = await getSubscriptionDetails();\n    const managedPayPalSubscriptions = await getManagedPayPalSubscriptions();\n\n    return {\n        bills,\n        recurringBills,\n        importedBills,\n        groups,\n        categories,\n        settings,\n        theme,\n        subscription,\n        subscriptionDetails,\n        managedPayPalSubscriptions,\n    };\n};\n\nexport const importData = async (data: any): Promise<void> => {\n    const db = getDB();\n    const tx = db.transaction(Object.values(STORES), 'readwrite');\n    const txPromise = new Promise<void>((resolve, reject) => {\n        tx.oncomplete = () => resolve();\n        tx.onerror = () => reject(tx.error);\n    });\n\n    Object.values(STORES).forEach(storeName => {\n        tx.objectStore(storeName).clear();\n    });\n\n    if (data.bills) {\n        const store = tx.objectStore(STORES.BILLS);\n        data.bills.forEach((b: Bill) => store.put(b));\n    }\n    if (data.recurringBills) {\n        const store = tx.objectStore(STORES.RECURRING_BILLS);\n        data.recurringBills.forEach((rb: RecurringBill) => store.put(rb));\n    }\n    if (data.importedBills) {\n        const store = tx.objectStore(STORES.IMPORTED_BILLS);\n        data.importedBills.forEach((ib: ImportedBill) => store.put(ib));\n    }\n     if (data.groups) {\n        const store = tx.objectStore(STORES.GROUPS);\n        data.groups.forEach((g: Group) => store.put(g));\n    }\n    if (data.categories) {\n        const store = tx.objectStore(STORES.CATEGORIES);\n        data.categories.forEach((c: Category) => store.put(c));\n    }\n    if (data.settings) {\n        tx.objectStore(STORES.SETTINGS).put(data.settings, SINGLE_KEY);\n    }\n    if (data.theme) {\n        tx.objectStore(STORES.THEME).put(data.theme, SINGLE_KEY);\n    }\n    if (data.subscription) {\n        tx.objectStore(STORES.SUBSCRIPTION).put(data.subscription, SINGLE_KEY);\n    }\n    if (data.subscriptionDetails) {\n        tx.objectStore(STORES.SUBSCRIPTION_DETAILS).put(data.subscriptionDetails, SINGLE_KEY);\n    }\n    if (data.managedPayPalSubscriptions) {\n        tx.objectStore(STORES.MANAGED_PAYPAL_SUBSCRIPTIONS).put(data.managedPayPalSubscriptions, SINGLE_KEY);\n    }\n\n    await txPromise;\n};\n\n// --- DB Explorer Function ---\nexport const getAllStoreData = async (): Promise<Record<string, any[]>> => {\n    const db = getDB();\n    const storeNames = Array.from(db.objectStoreNames);\n    const data: Record<string, any[]> = {};\n\n    if (storeNames.length === 0) {\n        return data;\n    }\n\n    const tx = db.transaction(storeNames, 'readonly');\n    const promises = storeNames.map(name => {\n        return new Promise<void>((resolve, reject) => {\n            try {\n                const store = tx.objectStore(name);\n                const request = store.getAll();\n                request.onsuccess = () => {\n                    data[name] = request.result;\n                    resolve();\n                };\n                request.onerror = () => {\n                    reject(request.error);\n                };\n            } catch (e) {\n                reject(e);\n            }\n        });\n    });\n\n    await Promise.all(promises);\n    return data;\n};","import React, { createContext, useContext, useState, useEffect, useCallback, ReactNode } from 'react';\nimport { getSubscriptionStatus, getSubscriptionDetails, saveSubscriptionStatus, saveSubscriptionDetails, deleteSubscriptionDetails, SubscriptionDetails } from '../services/db';\n\nexport type SubscriptionStatus = 'subscribed' | 'free' | null;\nexport type SubscriptionDuration = 'monthly' | 'yearly';\n\nexport interface AuthContextType {\n  subscriptionStatus: SubscriptionStatus;\n  subscriptionDetails: SubscriptionDetails | null;\n  isLoading: boolean;\n  login: (details: Omit<SubscriptionDetails, 'startDate'>) => void;\n  selectFreeTier: () => void;\n  logout: () => void;\n  startTrial: () => void;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport const AuthProvider: React.FC<{ children: ReactNode }> = ({ children }) => {\n  const [subscriptionStatus, setSubscriptionStatus] = useState<SubscriptionStatus>(null);\n  const [subscriptionDetails, setSubscriptionDetails] = useState<SubscriptionDetails | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  // Define logout first to break potential dependency cycle with loadStatus\n  const logout = useCallback(async () => {\n    // On logout, clear both the simple status and the detailed subscription info.\n    await deleteSubscriptionDetails();\n    setSubscriptionDetails(null);\n    setSubscriptionStatus(null);\n  }, []);\n\n  const loadStatus = useCallback(async () => {\n    try {\n      setIsLoading(true);\n      const storedStatus = await getSubscriptionStatus();\n      \n      if (storedStatus) { // User has a real subscription or chose free tier\n        setSubscriptionStatus(storedStatus);\n        if (storedStatus === 'subscribed') {\n          const details = await getSubscriptionDetails();\n          \n          if (details && details.customerId === 'trial-user') {\n            // This is a trial subscription, check for expiry\n            const trialStartTime = new Date(details.startDate).getTime();\n            const trialDuration = 24 * 60 * 60 * 1000; // 24 hours\n            const now = Date.now();\n\n            if (now < trialStartTime + trialDuration) {\n              // Trial is active\n              setSubscriptionDetails(details);\n              // Re-check status when the trial is supposed to expire\n              const timeRemaining = (trialStartTime + trialDuration) - now;\n              setTimeout(() => {\n                loadStatus();\n              }, timeRemaining + 500); // add 500ms buffer\n            } else {\n              // Trial expired, log the user out\n              await logout();\n              return; // Stop further execution\n            }\n          } else if (details) {\n            setSubscriptionDetails(details);\n          } else {\n            // Subscribed status without details? Anomaly. Log out.\n            await logout();\n            return;\n          }\n        }\n      } else {\n        // No subscription status set\n        setSubscriptionStatus(null);\n        setSubscriptionDetails(null);\n      }\n    } catch (error) {\n      console.error(\"Failed to load subscription status from DB:\", error);\n      setSubscriptionStatus(null);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [logout]);\n\n  useEffect(() => {\n    loadStatus();\n  }, [loadStatus]);\n\n  const login = useCallback(async (details: Omit<SubscriptionDetails, 'startDate'>) => {\n    const fullDetails: SubscriptionDetails = {\n        ...details,\n        startDate: new Date().toISOString(),\n    };\n    await saveSubscriptionDetails(fullDetails);\n    await saveSubscriptionStatus('subscribed');\n    setSubscriptionDetails(fullDetails);\n    setSubscriptionStatus('subscribed');\n  }, []);\n\n  const selectFreeTier = useCallback(async () => {\n    // When selecting the free tier, ensure any paid subscription details are cleared.\n    await deleteSubscriptionDetails();\n    await saveSubscriptionStatus('free');\n    setSubscriptionDetails(null);\n    setSubscriptionStatus('free');\n  }, []);\n  \n  const startTrial = useCallback(async () => {\n    const storedStatus = await getSubscriptionStatus();\n    const storedDetails = await getSubscriptionDetails();\n    if (!storedStatus && !storedDetails) {\n        const trialDetails: SubscriptionDetails = {\n            provider: 'paypal', // placeholder\n            customerId: 'trial-user',\n            subscriptionId: 'trial-active',\n            startDate: new Date().toISOString(),\n            duration: 'yearly', // placeholder\n        };\n        await saveSubscriptionDetails(trialDetails);\n        await saveSubscriptionStatus('subscribed');\n        await loadStatus(); // This will set state and schedule expiry check\n    }\n  }, [loadStatus]);\n\n  const value = { subscriptionStatus, subscriptionDetails, isLoading, login, selectFreeTier, logout, startTrial };\n\n  return React.createElement(AuthContext.Provider, { value: value }, children);\n};\n\nexport const useAuth = (): AuthContextType => {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};","\n\ndeclare var pako: any;\n\nexport interface Participant {\n  id: string;\n  name: string;\n  amountOwed: number;\n  paid: boolean;\n  splitValue?: number;\n  phone?: string;\n  email?: string;\n}\n\nexport interface ReceiptItem {\n  id: string;\n  name: string;\n  price: number;\n  assignedTo: string[];\n  originalBillData?: Bill;\n}\n\nexport type SplitMode = 'equally' | 'amount' | 'percentage' | 'item';\n\nexport interface ShareInfo {\n  shareId: string;\n  encryptionKey: JsonWebKey;\n  signingPublicKey: JsonWebKey;\n  updateToken?: string;\n}\n\nexport interface ParticipantShareInfo {\n  keyId: string;\n  fragmentKey: JsonWebKey;\n  expires: number;\n}\n\nexport interface Bill {\n  id: string;\n  description: string;\n  totalAmount: number;\n  date: string; // ISO 8601 format\n  participants: Participant[];\n  status: 'active' | 'archived';\n  items?: ReceiptItem[];\n  receiptImage?: string;\n  additionalInfo?: Record<string, string>;\n  lastUpdatedAt?: number;\n  shareInfo?: ShareInfo;\n  participantShareInfo?: Record<string, ParticipantShareInfo>;\n  shareStatus?: 'live' | 'expired' | 'error';\n  shareHistory?: Record<string, Partial<Record<'sms' | 'email' | 'copy' | 'share', number>>>;\n  groupId?: string; // Link to a group\n  categoryId?: string;\n}\n\nexport interface RecurrenceRule {\n    frequency: 'daily' | 'weekly' | 'monthly' | 'yearly';\n    interval: number;\n    dayOfWeek?: number; // 0 (Sun) to 6 (Sat)\n    dayOfMonth?: number; // 1 to 31\n}\n\nexport interface RecurringBill extends Omit<Bill, 'id' | 'status' | 'date'> {\n    id: string;\n    status: 'active' | 'archived';\n    nextDueDate: string; // ISO 8601 format\n    recurrenceRule: RecurrenceRule;\n    splitMode: SplitMode;\n}\n\nexport interface Group {\n    id: string;\n    name: string;\n    participants: Participant[];\n    defaultSplit: {\n        mode: SplitMode;\n        // splitValues can store amounts or percentages based on the mode\n        splitValues?: Record<string, number>; // participant.id -> value\n    };\n    lastUpdatedAt: number;\n    popularity: number;\n}\n\nexport interface Category {\n  id: string;\n  name: string;\n  budget?: number;\n  isDefault?: boolean;\n}\n\nexport interface PaymentDetails {\n    venmo: string;\n    paypal: string;\n\n    cashApp: string;\n    zelle: string;\n    customMessage: string;\n}\n\nexport interface Settings {\n  paymentDetails: PaymentDetails;\n  myDisplayName: string;\n  shareTemplate: string;\n  notificationsEnabled: boolean;\n  notificationDays: number;\n  hidePaymentMethodWarning?: boolean;\n  totalBudget?: number;\n  dashboardLayoutMode?: DashboardLayoutMode;\n}\n\nexport type Theme = 'light' | 'dark' | 'system';\n\nexport enum View {\n  Dashboard = 'dashboard',\n  CreateBill = 'create-bill',\n  BillDetails = 'bill-details',\n  Settings = 'settings',\n  Sync = 'sync',\n  Disclaimer = 'disclaimer',\n  ViewShared = 'view-bill',\n  RecurringBills = 'recurring-bills',\n  ImportedBillDetails = 'imported-bill-details',\n  ManageSubscription = 'manage-subscription',\n  CreateGroup = 'create-group',\n  GroupDetails = 'group-details',\n}\n\nexport type SummaryFilter = 'total' | 'othersOweMe' | 'iOwe';\n\nexport type DashboardView = 'bills' | 'participants' | 'upcoming' | 'templates' | 'groups' | 'budget';\nexport type DashboardLayoutMode = 'card' | 'list';\n\nexport interface ConstituentShareInfo {\n    originalBillId: string;\n    shareId: string;\n    publicKey: JsonWebKey;\n    encryptionKey: JsonWebKey;\n}\n\nexport interface SharedBillPayload {\n    bill: Bill;\n    creatorName: string;\n    publicKey: JsonWebKey;\n    signature: string;\n    paymentDetails: PaymentDetails;\n    constituentShares?: ConstituentShareInfo[];\n}\n\nexport interface ImportedBill {\n    id: string;\n    creatorName: string;\n    status: 'active' | 'archived';\n    sharedData: {\n        bill: Bill;\n        creatorPublicKey: JsonWebKey;\n        signature: string;\n        paymentDetails: PaymentDetails;\n    };\n    shareId: string;\n    shareEncryptionKey: JsonWebKey;\n    constituentShares?: ConstituentShareInfo[];\n    lastUpdatedAt: number;\n    myParticipantId: string;\n    localStatus: {\n        myPortionPaid: boolean;\n        paidItems?: Record<string, boolean>; // key is item.id\n    };\n    liveStatus?: 'live' | 'stale' | 'error';\n    isOwnBill?: boolean;\n    summaryRecalculated?: boolean; // Flag for one-time migration\n}\n\nexport interface RequestConfirmationFn {\n  (\n    title: string,\n    message: string,\n    onConfirm: () => void,\n    options?: {\n      confirmText?: string;\n      cancelText?: string;\n      confirmVariant?: 'danger' | 'primary';\n      onCancel?: () => void;\n    }\n  ): void;\n}\n\nexport interface PayPalSubscriptionDetails {\n    id: string;\n    status: 'ACTIVE' | 'INACTIVE' | 'CANCELLED' | 'SUSPENDED' | 'EXPIRED';\n    plan: 'monthly' | 'yearly' | 'unknown';\n    startTime: string; // ISO 8601\n    isCurrentDevice: boolean;\n}\n\nexport type SettingsSection = 'personalization' | 'payments' | 'reminders' | 'data' | 'sync' | 'subscription' | 'danger' | 'about' | 'disclaimer' | 'budgeting';\n\nexport interface ManageImageStorageState {\n  onProceed: () => void;\n  billsToDowngrade: Bill[];\n}","\n\nimport { useState, useEffect, useCallback } from 'react';\nimport type { Bill, Participant } from '../types';\nimport { getBills, addBill as addBillDB, updateBill as updateBillDB, deleteBillDB, addMultipleBillsDB, mergeBillsDB } from '../services/db';\nimport { postMessage, useBroadcastListener } from '../services/broadcastService';\n\nconst createDefaultBills = (): Bill[] => {\n    const today = new Date();\n    const yesterday = new Date();\n    yesterday.setDate(today.getDate() - 1);\n\n    const defaultBills: Bill[] = [\n        {\n            id: `bill-${Date.now() - 1000}`,\n            description: \"Morning Coffee Run\",\n            totalAmount: 12.75,\n            date: yesterday.toISOString(),\n            status: 'active',\n            participants: [\n                { id: 'p1', name: 'Myself', amountOwed: 4.25, paid: true },\n                { id: 'p2', name: 'Alex', amountOwed: 4.25, paid: false },\n                { id: 'p3', name: 'Casey', amountOwed: 4.25, paid: false },\n            ],\n            lastUpdatedAt: Date.now(),\n        },\n        {\n            id: `bill-${Date.now() - 2000}`,\n            description: \"Movie Night Tickets\",\n            totalAmount: 30.00,\n            date: new Date(today.setDate(today.getDate() - 7)).toISOString(),\n            status: 'archived',\n            participants: [\n                { id: 'p1', name: 'Myself', amountOwed: 15.00, paid: true },\n                { id: 'p2', name: 'Jordan', amountOwed: 15.00, paid: true },\n            ],\n            lastUpdatedAt: Date.now() - 10000,\n        }\n    ];\n    return defaultBills;\n};\n\nconst sortBills = (b: Bill[]) => b.sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());\n\nexport const useBills = () => {\n  const [bills, setBills] = useState<Bill[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const loadBills = useCallback(async (isInitialLoad: boolean = false) => {\n    if (isInitialLoad) setIsLoading(true);\n    try {\n      let dbBills = await getBills();\n\n      if (isInitialLoad && dbBills.length === 0 && !localStorage.getItem('sharedbills.defaultDataLoaded')) {\n          console.log(\"First launch: creating default example bills.\");\n          const defaultBills = createDefaultBills();\n          await addMultipleBillsDB(defaultBills);\n          dbBills.push(...defaultBills);\n          localStorage.setItem('sharedbills.defaultDataLoaded', 'true');\n      }\n      \n      setBills(sortBills(dbBills));\n    } catch (error) {\n      console.error(\"Failed to load bills from IndexedDB:\", error);\n    } finally {\n      if (isInitialLoad) setIsLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    loadBills(true);\n  }, [loadBills]);\n\n  useBroadcastListener(useCallback(message => {\n    if (message.type === 'bills-updated') {\n      loadBills(false);\n    }\n  }, [loadBills]));\n\n  const addBill = useCallback(async (newBillData: Omit<Bill, 'id' | 'status'>) => {\n    const newBill: Bill = {\n      ...newBillData,\n      id: `bill-${Date.now()}`,\n      status: 'active',\n      lastUpdatedAt: Date.now(),\n    };\n    await addBillDB(newBill);\n    setBills(prev => sortBills([newBill, ...prev]));\n    postMessage({ type: 'bills-updated' });\n  }, []);\n\n  const updateBill = useCallback(async (updatedBill: Bill): Promise<Bill> => {\n    const billWithTimestamp = { ...updatedBill, lastUpdatedAt: Date.now() };\n    await updateBillDB(billWithTimestamp);\n    setBills(prev => sortBills(prev.map(b => b.id === billWithTimestamp.id ? billWithTimestamp : b)));\n    // postMessage({ type: 'bills-updated' }); // Broadcasting moved to useDataHandlers\n    return billWithTimestamp;\n  }, []);\n  \n  const updateMultipleBills = useCallback(async (billsToUpdate: Bill[]): Promise<Bill[]> => {\n      const now = Date.now();\n      const billsWithTimestamp = billsToUpdate.map(b => ({ ...b, lastUpdatedAt: now }));\n      await mergeBillsDB([], billsWithTimestamp);\n      const updatedMap = new Map(billsWithTimestamp.map(b => [b.id, b]));\n      setBills(prev => sortBills(prev.map(b => updatedMap.get(b.id) || b)));\n      // postMessage({ type: 'bills-updated' }); // Broadcasting moved to useDataHandlers\n      return billsWithTimestamp;\n  }, []);\n\n  const deleteBill = useCallback(async (billId: string) => {\n    await deleteBillDB(billId);\n    setBills(prev => prev.filter(b => b.id !== billId));\n    postMessage({ type: 'bills-updated' });\n  }, []);\n\n  const archiveBill = useCallback(async (billId: string) => {\n    const billToUpdate = bills.find(b => b.id === billId);\n    if (billToUpdate) {\n      await updateBill({ ...billToUpdate, status: 'archived' });\n    }\n  }, [bills, updateBill]);\n\n  const unarchiveBill = useCallback(async (billId: string) => {\n    const billToUpdate = bills.find(b => b.id === billId);\n    if (billToUpdate) {\n      await updateBill({ ...billToUpdate, status: 'active' });\n    }\n  }, [bills, updateBill]);\n\n  const mergeBills = useCallback(async (billsToMerge: (Omit<Bill, 'status'>)[]) => {\n      // FIX: Explicitly type Map to resolve type inference issues.\n      const existingBillMap = new Map<string, Bill>(bills.map(b => [b.id, b]));\n      const billsToAdd: Bill[] = [];\n      const billsToUpdate: Bill[] = [];\n      let skippedCount = 0;\n\n      // FIX: Replaced forEach with for...of loop to resolve TypeScript inference issues.\n      for (const billToProcess of billsToMerge) {\n          const existingBill = existingBillMap.get(billToProcess.id);\n\n          if (existingBill) {\n              if ((billToProcess.lastUpdatedAt ?? 0) > (existingBill.lastUpdatedAt ?? 0)) {\n                  billsToUpdate.push({ ...existingBill, ...billToProcess, status: existingBill.status });\n              } else {\n                  skippedCount++;\n              }\n          } else {\n              billsToAdd.push({ ...billToProcess, status: 'active' });\n          }\n      }\n\n      if (billsToAdd.length > 0 || billsToUpdate.length > 0) {\n          await mergeBillsDB(billsToAdd, billsToUpdate);\n          setBills(prev => {\n              // FIX: Explicitly type Map to resolve type inference issues.\n              const prevMap = new Map<string, Bill>(prev.map(b => [b.id, b]));\n              billsToUpdate.forEach(b => prevMap.set(b.id, b));\n              billsToAdd.forEach(b => prevMap.set(b.id, b));\n              return sortBills(Array.from(prevMap.values()));\n          });\n          postMessage({ type: 'bills-updated' });\n      }\n\n      return { added: billsToAdd.length, updated: billsToUpdate.length, skipped: skippedCount };\n  }, [bills]);\n\n  return { bills, isLoading, addBill, updateBill, deleteBill, archiveBill, unarchiveBill, updateMultipleBills, mergeBills };\n};","\n\nimport { useState, useEffect, useCallback } from 'react';\nimport type { ImportedBill } from '../types';\nimport { \n    getImportedBills, \n    addImportedBill as addDB, \n    updateImportedBill as updateDB, \n    deleteImportedBillDB,\n    mergeImportedBillsDB\n} from '../services/db';\nimport { postMessage, useBroadcastListener } from '../services/broadcastService';\n\nconst sortImportedBills = (bills: ImportedBill[]) => bills.sort((a, b) => new Date(b.sharedData.bill.date).getTime() - new Date(a.sharedData.bill.date).getTime());\n\nexport const useImportedBills = () => {\n  const [importedBills, setImportedBills] = useState<ImportedBill[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const loadImportedBills = useCallback(async (isInitialLoad: boolean = false) => {\n    if (isInitialLoad) setIsLoading(true);\n    try {\n      let dbBills = await getImportedBills();\n      \n      const billsToUpdate: ImportedBill[] = [];\n      const billsAfterMigration = dbBills.map(bill => {\n          if (bill.id.startsWith('summary-') && !bill.summaryRecalculated) {\n              console.log(`Performing one-time recalculation for summary bill: ${bill.id}`);\n              const migratedBill: ImportedBill = JSON.parse(JSON.stringify(bill)); \n\n              const myNameInSummary = migratedBill.sharedData.bill.participants.find(p => p.id === migratedBill.myParticipantId)?.name;\n              \n              if (myNameInSummary) {\n                  let totalOwedByMe = 0;\n                  let totalPortion = 0;\n                  let allConstituentsPaid = true;\n                  const paidItems = { ...(migratedBill.localStatus.paidItems || {}) };\n                  \n                  if (migratedBill.sharedData.bill.items) {\n                      for (const item of migratedBill.sharedData.bill.items) {\n                          totalPortion += item.price;\n                          \n                          let isConsideredPaid = false;\n                          const originalBill = item.originalBillData;\n                          if (originalBill) {\n                              const myParticipantInOriginal = originalBill.participants.find(p => p.name.toLowerCase().trim() === myNameInSummary.toLowerCase().trim());\n                              if (myParticipantInOriginal?.paid) {\n                                  paidItems[item.id] = true;\n                              }\n                          }\n                          \n                          if (paidItems[item.id]) {\n                              isConsideredPaid = true;\n                          }\n\n                          if (!isConsideredPaid) {\n                              totalOwedByMe += item.price;\n                              allConstituentsPaid = false;\n                          }\n                      }\n                  }\n\n                  migratedBill.sharedData.bill.totalAmount = totalPortion;\n                  if (migratedBill.sharedData.bill.participants[0]) {\n                      migratedBill.sharedData.bill.participants[0].amountOwed = totalOwedByMe;\n                  }\n                  migratedBill.localStatus.paidItems = paidItems;\n                  migratedBill.localStatus.myPortionPaid = allConstituentsPaid;\n                  migratedBill.summaryRecalculated = true;\n\n                  billsToUpdate.push(migratedBill);\n                  return migratedBill;\n              }\n          }\n          return bill;\n      });\n\n      if (billsToUpdate.length > 0) {\n          console.log(`Saving ${billsToUpdate.length} migrated summary bills.`);\n          await mergeImportedBillsDB([], billsToUpdate);\n      }\n      \n      setImportedBills(sortImportedBills(billsAfterMigration));\n    } catch (err) {\n      console.error(\"Failed to load imported bills:\", err);\n    } finally {\n      if (isInitialLoad) setIsLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    loadImportedBills(true);\n  }, [loadImportedBills]);\n\n  useBroadcastListener(useCallback(message => {\n    if (message.type === 'imported-bills-updated') {\n      loadImportedBills(false);\n    }\n  }, [loadImportedBills]));\n\n  const addImportedBill = useCallback(async (newBill: ImportedBill) => {\n    await addDB(newBill);\n    setImportedBills(prev => sortImportedBills([newBill, ...prev]));\n    postMessage({ type: 'imported-bills-updated' });\n  }, []);\n\n  const updateImportedBill = useCallback(async (updatedBill: ImportedBill) => {\n    await updateDB(updatedBill);\n    setImportedBills(prev => sortImportedBills(prev.map(b => b.id === updatedBill.id ? updatedBill : b)));\n    postMessage({ type: 'imported-bills-updated' });\n  }, []);\n\n  const updateMultipleImportedBills = useCallback(async (billsToUpdate: ImportedBill[]) => {\n      if (billsToUpdate.length === 0) return;\n      \n      // The `billsToUpdate` array coming from the polling service now has pre-calculated statuses\n      // for both regular and summary bills. We can trust it directly.\n      await mergeImportedBillsDB([], billsToUpdate);\n      const updatedMap = new Map(billsToUpdate.map(b => [b.id, b]));\n      setImportedBills(prev => sortImportedBills(prev.map(b => updatedMap.get(b.id) || b)));\n      postMessage({ type: 'imported-bills-updated' });\n  }, []);\n\n  const deleteImportedBill = useCallback(async (billId: string) => {\n    await deleteImportedBillDB(billId);\n    setImportedBills(prev => prev.filter(b => b.id !== billId));\n    postMessage({ type: 'imported-bills-updated' });\n  }, []);\n\n  const archiveImportedBill = useCallback(async (billId: string) => {\n    const billToUpdate = importedBills.find(b => b.id === billId);\n    if (billToUpdate) {\n      const updatedBill = { ...billToUpdate, status: 'archived' as const };\n      await updateImportedBill(updatedBill);\n    }\n  }, [importedBills, updateImportedBill]);\n\n  const unarchiveImportedBill = useCallback(async (billId: string) => {\n    const billToUpdate = importedBills.find(b => b.id === billId);\n    if (billToUpdate) {\n      const updatedBill = { ...billToUpdate, status: 'active' as const };\n      await updateImportedBill(updatedBill);\n    }\n  }, [importedBills, updateImportedBill]);\n\n  const mergeImportedBills = useCallback(async (billsToMerge: (Omit<ImportedBill, 'status' | 'liveStatus'>)[]) => {\n      // FIX: Explicitly type Map to resolve type inference issues.\n      const existingBillMap = new Map<string, ImportedBill>(importedBills.map(b => [b.id, b]));\n      const billsToAdd: ImportedBill[] = [];\n      const billsToUpdate: ImportedBill[] = [];\n      let skippedCount = 0;\n\n      // FIX: Replaced forEach with for...of loop to resolve TypeScript inference issues.\n      for (const billToProcess of billsToMerge) {\n          const existingBill = existingBillMap.get(billToProcess.id);\n          if (existingBill) {\n              if ((billToProcess.lastUpdatedAt ?? 0) > (existingBill.lastUpdatedAt ?? 0)) {\n                  billsToUpdate.push({ ...existingBill, ...billToProcess, status: existingBill.status, liveStatus: 'live' });\n              } else {\n                  skippedCount++;\n              }\n          } else {\n              billsToAdd.push({ ...billToProcess, status: 'active', liveStatus: 'live' });\n          }\n      }\n\n      if (billsToAdd.length > 0 || billsToUpdate.length > 0) {\n          await mergeImportedBillsDB(billsToAdd, billsToUpdate);\n          setImportedBills(prev => {\n              // FIX: Explicitly type Map to resolve type inference issues.\n              const prevMap = new Map<string, ImportedBill>(prev.map(b => [b.id, b]));\n              billsToUpdate.forEach(b => prevMap.set(b.id, b));\n              billsToAdd.forEach(b => prevMap.set(b.id, b));\n              return sortImportedBills(Array.from(prevMap.values()));\n          });\n          postMessage({ type: 'imported-bills-updated' });\n      }\n\n      return { added: billsToAdd.length, updated: billsToUpdate.length, skipped: skippedCount };\n  }, [importedBills]);\n  \n  return { importedBills, isLoading, addImportedBill, updateImportedBill, deleteImportedBill, archiveImportedBill, unarchiveImportedBill, mergeImportedBills, updateMultipleImportedBills };\n};","import { useState, useEffect, useCallback } from 'react';\nimport type { RecurringBill, RecurrenceRule } from '../types';\nimport { getRecurringBills, addRecurringBill as addDB, updateRecurringBill as updateDB, deleteRecurringBillDB } from '../services/db';\nimport { postMessage, useBroadcastListener } from '../services/broadcastService';\n\n/**\n * Calculates the *first* upcoming due date for a *new* recurring bill template.\n * It finds the next valid date after today that matches the rule's constraints.\n * @param rule The recurrence rule.\n * @param fromDate The date to start searching from (typically today).\n * @returns An ISO string of the first due date.\n */\nconst calculateFirstDueDate = (rule: RecurrenceRule, fromDate: Date): string => {\n    const today = new Date(fromDate);\n    today.setHours(0, 0, 0, 0);\n    let dt = new Date(today);\n\n    switch (rule.frequency) {\n        case 'daily':\n            dt.setDate(today.getDate() + 1);\n            break;\n        case 'weekly':\n            const dayOfWeek = rule.dayOfWeek ?? 0;\n            // Start searching from tomorrow to ensure the date is in the future\n            dt.setDate(today.getDate() + 1);\n            while (dt.getDay() !== dayOfWeek) {\n                dt.setDate(dt.getDate() + 1);\n            }\n            break;\n        case 'monthly':\n            const dayOfMonth = rule.dayOfMonth ?? 1;\n            // Check if the target day is still upcoming in the current month\n            if (today.getDate() < dayOfMonth) {\n                const lastDayCurrentMonth = new Date(today.getFullYear(), today.getMonth() + 1, 0).getDate();\n                if (dayOfMonth <= lastDayCurrentMonth) {\n                    dt.setDate(dayOfMonth); // Valid date found this month\n                    break; // Exit switch\n                }\n            }\n            // If not, find the next valid day in a future month\n            dt.setMonth(today.getMonth() + 1, 1);\n            const lastDayNextMonth = new Date(dt.getFullYear(), dt.getMonth() + 1, 0).getDate();\n            dt.setDate(Math.min(dayOfMonth, lastDayNextMonth));\n            break;\n        case 'yearly':\n            // Simple approach: jump one year. Assumes same month/day.\n            dt.setFullYear(today.getFullYear() + 1);\n            break;\n    }\n    return dt.toISOString();\n};\n\n\n/**\n * Calculates the next due date based on the *previous* due date and the rule's interval.\n * @param rule The recurrence rule, including the interval.\n * @param fromDate The last due date.\n * @returns An ISO string of the next due date in the sequence.\n */\nexport const calculateNextDueDate = (rule: RecurrenceRule, fromDate: string | Date): string => {\n    const dt = new Date(fromDate);\n    const interval = rule.interval || 1;\n    \n    switch (rule.frequency) {\n        case 'daily':\n            dt.setDate(dt.getDate() + interval);\n            break;\n        case 'weekly':\n            dt.setDate(dt.getDate() + 7 * interval);\n            break;\n        case 'monthly':\n            // Get target day before changing month, in case it was adjusted for a short month\n            const dayOfMonth = rule.dayOfMonth ?? new Date(fromDate).getDate();\n            // Move to the target month\n            dt.setMonth(dt.getMonth() + interval, 1);\n            // Get the last day of the new target month\n            const lastDayOfNextMonth = new Date(dt.getFullYear(), dt.getMonth() + 1, 0).getDate();\n            // Set the day, capped at the last day of the month\n            dt.setDate(Math.min(dayOfMonth, lastDayOfNextMonth));\n            break;\n        case 'yearly':\n            dt.setFullYear(dt.getFullYear() + interval);\n            break;\n    }\n    return dt.toISOString();\n};\n\nconst sortRecurringBills = (bills: RecurringBill[]) => bills.sort((a, b) => new Date(a.nextDueDate).getTime() - new Date(b.nextDueDate).getTime());\n\nexport const useRecurringBills = () => {\n  const [recurringBills, setRecurringBills] = useState<RecurringBill[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const loadRecurringBills = useCallback(async (isInitialLoad: boolean = false) => {\n      if (isInitialLoad) setIsLoading(true);\n      try {\n        let dbBills = await getRecurringBills();\n        setRecurringBills(sortRecurringBills(dbBills));\n      } catch (err) {\n        console.error(\"Failed to load recurring bills:\", err);\n      } finally {\n        if (isInitialLoad) setIsLoading(false);\n      }\n  }, []);\n\n  useEffect(() => {\n    loadRecurringBills(true);\n  }, [loadRecurringBills]);\n\n  useBroadcastListener(useCallback(message => {\n    if (message.type === 'recurring-bills-updated') {\n        loadRecurringBills(false);\n    }\n  }, [loadRecurringBills]));\n  \n  const addRecurringBill = useCallback(async (newBillData: Omit<RecurringBill, 'id' | 'status' | 'nextDueDate'>) => {\n    const newBill: RecurringBill = {\n      ...newBillData,\n      id: `rb-${Date.now()}`,\n      status: 'active',\n      nextDueDate: calculateFirstDueDate(newBillData.recurrenceRule, new Date()),\n    };\n    await addDB(newBill);\n    setRecurringBills(prev => sortRecurringBills([newBill, ...prev]));\n    postMessage({ type: 'recurring-bills-updated' });\n    return newBill;\n  }, []);\n\n  const updateRecurringBill = useCallback(async (updatedBill: RecurringBill) => {\n    const originalBill = recurringBills.find(b => b.id === updatedBill.id);\n    if (originalBill && JSON.stringify(originalBill.recurrenceRule) !== JSON.stringify(updatedBill.recurrenceRule)) {\n        updatedBill.nextDueDate = calculateFirstDueDate(updatedBill.recurrenceRule, new Date());\n    }\n    await updateDB(updatedBill);\n    setRecurringBills(prev => sortRecurringBills(prev.map(b => b.id === updatedBill.id ? updatedBill : b)));\n    postMessage({ type: 'recurring-bills-updated' });\n  }, [recurringBills]);\n  \n  const updateRecurringBillDueDate = useCallback(async (billId: string) => {\n    const billToUpdate = recurringBills.find(b => b.id === billId);\n    if (billToUpdate) {\n        const updatedBill = {\n            ...billToUpdate,\n            nextDueDate: calculateNextDueDate(billToUpdate.recurrenceRule, billToUpdate.nextDueDate)\n        };\n        await updateDB(updatedBill);\n        setRecurringBills(prev => sortRecurringBills(prev.map(b => b.id === billId ? updatedBill : b)));\n        postMessage({ type: 'recurring-bills-updated' });\n    }\n  }, [recurringBills]);\n\n  const archiveRecurringBill = useCallback(async (billId: string) => {\n    const billToUpdate = recurringBills.find(b => b.id === billId);\n    if (billToUpdate) {\n      const updatedBill = { ...billToUpdate, status: 'archived' as const };\n      await updateDB(updatedBill);\n      setRecurringBills(prev => sortRecurringBills(prev.map(b => b.id === billId ? updatedBill : b)));\n      postMessage({ type: 'recurring-bills-updated' });\n    }\n  }, [recurringBills]);\n  \n  const unarchiveRecurringBill = useCallback(async (billId: string) => {\n    const billToUpdate = recurringBills.find(b => b.id === billId);\n    if (billToUpdate) {\n      const updatedBill = { ...billToUpdate, status: 'active' as const, nextDueDate: calculateFirstDueDate(billToUpdate.recurrenceRule, new Date()) };\n      await updateDB(updatedBill);\n      setRecurringBills(prev => sortRecurringBills(prev.map(b => b.id === billId ? updatedBill : b)));\n      postMessage({ type: 'recurring-bills-updated' });\n    }\n  }, [recurringBills]);\n\n  const deleteRecurringBill = useCallback(async (billId: string) => {\n    await deleteRecurringBillDB(billId);\n    setRecurringBills(prev => prev.filter(b => b.id !== billId));\n    postMessage({ type: 'recurring-bills-updated' });\n  }, []);\n\n  return { recurringBills, addRecurringBill, updateRecurringBill, archiveRecurringBill, unarchiveRecurringBill, deleteRecurringBill, updateRecurringBillDueDate, isLoading };\n};","import { useState, useEffect, useCallback } from 'react';\nimport type { Group } from '../types';\nimport { getGroups, addGroup as addDB, updateGroup as updateDB, deleteGroupDB } from '../services/db';\nimport { postMessage, useBroadcastListener } from '../services/broadcastService';\n\nconst sortGroups = (groups: Group[]) => groups.sort((a, b) => b.lastUpdatedAt - a.lastUpdatedAt);\n\nexport const useGroups = () => {\n    const [groups, setGroups] = useState<Group[]>([]);\n    const [isLoading, setIsLoading] = useState(true);\n\n    const loadGroups = useCallback(async (isInitialLoad: boolean = false) => {\n        if (isInitialLoad) setIsLoading(true);\n        try {\n            const dbGroups = await getGroups();\n            setGroups(sortGroups(dbGroups));\n        } catch (err) {\n            console.error(\"Failed to load groups:\", err);\n        } finally {\n            if (isInitialLoad) setIsLoading(false);\n        }\n    }, []);\n\n    useEffect(() => {\n        loadGroups(true);\n    }, [loadGroups]);\n\n    useBroadcastListener(useCallback(message => {\n        if (message.type === 'groups-updated') {\n            loadGroups(false);\n        }\n    }, [loadGroups]));\n\n    const addGroup = useCallback(async (newGroupData: Omit<Group, 'id' | 'lastUpdatedAt' | 'popularity'>) => {\n        const newGroup: Group = {\n            ...newGroupData,\n            id: `group-${Date.now()}`,\n            lastUpdatedAt: Date.now(),\n            popularity: 0,\n        };\n        await addDB(newGroup);\n        setGroups(prev => sortGroups([newGroup, ...prev]));\n        postMessage({ type: 'groups-updated' });\n        return newGroup;\n    }, []);\n\n    const updateGroup = useCallback(async (updatedGroup: Group) => {\n        const groupWithTimestamp = { ...updatedGroup, lastUpdatedAt: Date.now() };\n        await updateDB(groupWithTimestamp);\n        setGroups(prev => sortGroups(prev.map(g => g.id === groupWithTimestamp.id ? groupWithTimestamp : g)));\n        postMessage({ type: 'groups-updated' });\n    }, []);\n\n    const deleteGroup = useCallback(async (groupId: string) => {\n        await deleteGroupDB(groupId);\n        setGroups(prev => prev.filter(g => g.id !== groupId));\n        postMessage({ type: 'groups-updated' });\n    }, []);\n    \n    const incrementGroupPopularity = useCallback(async (groupId: string) => {\n        const groupToUpdate = groups.find(g => g.id === groupId);\n        if (groupToUpdate) {\n            const updatedGroup = { ...groupToUpdate, popularity: (groupToUpdate.popularity || 0) + 1 };\n            await updateDB(updatedGroup);\n            setGroups(prev => sortGroups(prev.map(g => g.id === groupId ? updatedGroup : g)));\n            postMessage({ type: 'groups-updated' });\n        }\n    }, [groups]);\n\n    return { groups, addGroup, updateGroup, deleteGroup, incrementGroupPopularity, isLoading };\n};","import { useState, useEffect, useCallback } from 'react';\nimport type { Category } from '../types';\nimport { getCategories, saveMultipleCategories, deleteCategoryDB } from '../services/db';\nimport { postMessage, useBroadcastListener } from '../services/broadcastService';\n\nconst createDefaultCategories = (): Category[] => {\n    const now = Date.now();\n    return [\n        { id: `cat-${now}-1`, name: 'Groceries', isDefault: true },\n        { id: `cat-${now}-2`, name: 'Dining', isDefault: true },\n        { id: `cat-${now}-3`, name: 'Transportation', isDefault: true },\n        { id: `cat-${now}-4`, name: 'Utilities', isDefault: true },\n        { id: `cat-${now}-5`, name: 'Entertainment', isDefault: true },\n        { id: `cat-${now}-6`, name: 'Shopping', isDefault: true },\n        { id: `cat-${now}-7`, name: 'Health', isDefault: true },\n        { id: `cat-${now}-8`, name: 'Travel', isDefault: true },\n        { id: `cat-${now}-9`, name: 'Home', isDefault: true },\n        { id: `cat-${now}-10`, name: 'Other', isDefault: true },\n    ];\n};\n\nconst sortCategories = (categories: Category[]) => categories.sort((a, b) => a.name.localeCompare(b.name));\n\nexport const useCategories = () => {\n    const [categories, setCategories] = useState<Category[]>([]);\n    const [isLoading, setIsLoading] = useState(true);\n\n    const loadCategories = useCallback(async (isInitialLoad: boolean = false) => {\n        if (isInitialLoad) setIsLoading(true);\n        try {\n            let dbCategories = await getCategories();\n\n            if (isInitialLoad && dbCategories.length === 0 && !localStorage.getItem('sharedbills.defaultCategoriesLoaded')) {\n                console.log(\"First launch: creating default example categories.\");\n                const defaultCategories = createDefaultCategories();\n                await saveMultipleCategories(defaultCategories);\n                dbCategories.push(...defaultCategories);\n                localStorage.setItem('sharedbills.defaultCategoriesLoaded', 'true');\n            }\n            \n            setCategories(sortCategories(dbCategories));\n        } catch (error) {\n            console.error(\"Failed to load categories from IndexedDB:\", error);\n        } finally {\n            if (isInitialLoad) setIsLoading(false);\n        }\n    }, []);\n\n    useEffect(() => {\n        loadCategories(true);\n    }, [loadCategories]);\n\n    useBroadcastListener(useCallback(message => {\n        if (message.type === 'categories-updated') {\n            loadCategories(false);\n        }\n    }, [loadCategories]));\n\n    const saveCategories = useCallback(async (updatedCategories: Category[]) => {\n        await saveMultipleCategories(updatedCategories);\n        setCategories(sortCategories(updatedCategories));\n        postMessage({ type: 'categories-updated' });\n    }, []);\n    \n    const deleteCategory = useCallback(async (categoryId: string) => {\n        await deleteCategoryDB(categoryId);\n        setCategories(prev => prev.filter(c => c.id !== categoryId));\n        postMessage({ type: 'categories-updated' });\n    }, []);\n\n    return { categories, isLoading, saveCategories, deleteCategory };\n};\n","import { useState, useEffect, useCallback } from 'react';\nimport type { Settings } from '../types';\nimport { getSettings, saveSettings, getCommunicationKeyPair, saveCommunicationKeyPair } from '../services/db';\nimport { generateSigningKeyPair } from '../services/cryptoService';\nimport { postMessage, useBroadcastListener } from '../services/broadcastService';\n\nconst initialSettings: Settings = {\n  paymentDetails: {\n    venmo: '',\n    paypal: '',\n    cashApp: '',\n    zelle: '',\n    customMessage: '',\n  },\n  myDisplayName: '',\n  shareTemplate: 'Hi {participantName}, this is a reminder for your outstanding bill(s). You owe a total of {totalOwed}.\\n\\nBreakdown:\\n{billList}{paymentInfo}{promoText}',\n  notificationsEnabled: false,\n  notificationDays: 3,\n  hidePaymentMethodWarning: false,\n  totalBudget: undefined,\n  dashboardLayoutMode: 'card',\n};\n\nexport const useSettings = () => {\n  const [settings, setSettings] = useState<Settings>(initialSettings);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const loadSettings = useCallback(async (isInitialLoad: boolean = false) => {\n    if (isInitialLoad) setIsLoading(true);\n    try {\n      let dbSettings = await getSettings();\n      if (!dbSettings) {\n        if (isInitialLoad) {\n          await saveSettings(initialSettings);\n        }\n        dbSettings = initialSettings;\n      } else {\n        dbSettings = { ...initialSettings, ...dbSettings, paymentDetails: {...initialSettings.paymentDetails, ...dbSettings.paymentDetails} };\n      }\n      \n      if (isInitialLoad) {\n          let commKeyPair = await getCommunicationKeyPair();\n          if (!commKeyPair) {\n              console.log(\"Communication key pair not found, generating a new one.\");\n              commKeyPair = await generateSigningKeyPair();\n              await saveCommunicationKeyPair(commKeyPair);\n          }\n      }\n\n      setSettings(dbSettings);\n    } catch (error) {\n      console.error(\"Failed to load settings from IndexedDB:\", error);\n      setSettings(initialSettings);\n    } finally {\n      if (isInitialLoad) setIsLoading(false);\n    }\n  }, []);\n  \n  useEffect(() => {\n    loadSettings(true);\n  }, [loadSettings]);\n\n  useBroadcastListener(useCallback(message => {\n    if (message.type === 'settings-updated') {\n      loadSettings(false);\n    }\n  }, [loadSettings]));\n\n  const updateSettings = useCallback(async (newSettings: Partial<Settings>) => {\n    const updatedSettings: Settings = {\n      ...settings,\n      ...newSettings,\n      paymentDetails: {\n        ...settings.paymentDetails,\n        ...(newSettings.paymentDetails || {}),\n      }\n    };\n    await saveSettings(updatedSettings);\n    // Use the async postMessage but don't wait for it\n    postMessage({ type: 'settings-updated' });\n    // Also update local state immediately for the current tab\n    setSettings(updatedSettings);\n  }, [settings]);\n\n  return { settings, updateSettings, isLoading };\n};","import { useState, useEffect, useCallback } from 'react';\nimport type { Theme } from '../types';\nimport { getTheme, saveTheme } from '../services/db';\nimport { postMessage, useBroadcastListener } from '../services/broadcastService';\n\nexport const useTheme = () => {\n  const [theme, setThemeState] = useState<Theme>('system');\n  const [isLoading, setIsLoading] = useState(true);\n\n  const applyTheme = useCallback((themeToApply: Theme) => {\n    if (typeof window === 'undefined') return;\n    \n    const root = document.documentElement;\n    const isDark =\n      themeToApply === 'dark' ||\n      (themeToApply === 'system' &&\n        window.matchMedia('(prefers-color-scheme: dark)').matches);\n        \n    root.classList.toggle('dark', isDark);\n  }, []);\n\n  const loadTheme = useCallback(async (isInitialLoad: boolean = false) => {\n    if (isInitialLoad) setIsLoading(true);\n    const dbTheme = await getTheme() || 'system';\n    setThemeState(dbTheme);\n    applyTheme(dbTheme);\n    if (isInitialLoad) setIsLoading(false);\n  }, [applyTheme]);\n\n  useEffect(() => {\n    loadTheme(true);\n  }, [loadTheme]);\n\n  useBroadcastListener(useCallback(message => {\n      if (message.type === 'theme-updated') {\n          loadTheme(false);\n      }\n  }, [loadTheme]));\n\n  useEffect(() => {\n    const systemThemeQuery = window.matchMedia('(prefers-color-scheme: dark)');\n    const handleSystemThemeChange = async () => {\n      const currentTheme = await getTheme();\n      if (currentTheme === 'system') {\n        applyTheme('system');\n      }\n    };\n    systemThemeQuery.addEventListener('change', handleSystemThemeChange);\n    return () => {\n      systemThemeQuery.removeEventListener('change', handleSystemThemeChange);\n    };\n  }, [applyTheme]);\n\n  const setTheme = async (newTheme: Theme) => {\n    await saveTheme(newTheme);\n    postMessage({ type: 'theme-updated' });\n    // Apply theme immediately for the current tab\n    setThemeState(newTheme);\n    applyTheme(newTheme);\n  };\n\n  return { theme, setTheme, isLoading };\n};","import { useState, useEffect, useCallback } from 'react';\n\n// The BeforeInstallPromptEvent is not in standard TS libs yet.\ninterface BeforeInstallPromptEvent extends Event {\n  readonly platforms: string[];\n  readonly userChoice: Promise<{\n    outcome: 'accepted' | 'dismissed';\n    platform: string;\n  }>;\n  prompt(): Promise<void>;\n}\n\nexport const usePwaInstall = () => {\n  const [installPromptEvent, setInstallPromptEvent] = useState<BeforeInstallPromptEvent | null>(null);\n  \n  const canInstall = !!installPromptEvent;\n\n  useEffect(() => {\n    const handleBeforeInstallPrompt = (e: Event) => {\n      e.preventDefault();\n      setInstallPromptEvent(e as BeforeInstallPromptEvent);\n    };\n\n    window.addEventListener('beforeinstallprompt', handleBeforeInstallPrompt);\n\n    return () => {\n      window.removeEventListener('beforeinstallprompt', handleBeforeInstallPrompt);\n    };\n  }, []);\n\n  useEffect(() => {\n    const handleAppInstalled = () => {\n      setInstallPromptEvent(null);\n    };\n\n    window.addEventListener('appinstalled', handleAppInstalled);\n\n    return () => {\n      window.removeEventListener('appinstalled', handleAppInstalled);\n    };\n  }, []);\n\n  const promptInstall = useCallback(async () => {\n    if (!installPromptEvent) {\n      return;\n    }\n    installPromptEvent.prompt();\n    const { outcome } = await installPromptEvent.userChoice;\n    if (outcome === 'accepted') {\n      console.log('User accepted the PWA installation');\n    } else {\n      console.log('User dismissed the PWA installation');\n    }\n    // The prompt can only be used once.\n    setInstallPromptEvent(null);\n  }, [installPromptEvent]);\n\n  return { canInstall, promptInstall };\n};","import { createContext, useContext } from 'react';\n\ninterface AppControlContextType {\n  reloadApp: () => void;\n  showNotification: (message: string, type?: 'success' | 'info' | 'error') => void;\n}\n\nexport const AppControlContext = createContext<AppControlContextType>({\n  reloadApp: () => {\n    console.error(\"reloadApp called outside of AppControlProvider\");\n  },\n  showNotification: (message: string, type?: 'success' | 'info' | 'error') => {\n    console.error(\"showNotification called outside of AppControlProvider\", { message, type });\n  }\n});\n\nexport const useAppControl = () => useContext(AppControlContext);","import { useState, useCallback, useEffect } from 'react';\nimport { View, Bill, RecurringBill, Group } from '../../types';\n\ninterface RoutingDependencies {\n    bills: Bill[];\n    recurringBills: RecurringBill[];\n    groups: Group[];\n}\n\nexport const useRouting = ({ bills, recurringBills, groups }: RoutingDependencies) => {\n    const [routerState, setRouterState] = useState({\n        view: View.Dashboard,\n        params: {} as Record<string, any>,\n        billConversionSource: undefined as Bill | undefined,\n        recurringBillToEdit: undefined as RecurringBill | undefined,\n        fromTemplate: undefined as RecurringBill | undefined,\n        groupToEdit: undefined as Group | undefined,\n        currentGroup: undefined as Group | undefined,\n    });\n\n    const navigate = useCallback((view: View, params: Record<string, any> = {}) => {\n        let hash = `#/${view}`;\n        const urlParams = new URLSearchParams();\n        const newParams = {...params};\n\n        if (newParams.recurringBillToEdit) { urlParams.set('editTemplateId', newParams.recurringBillToEdit.id); delete newParams.recurringBillToEdit; }\n        if (newParams.fromTemplate) { urlParams.set('fromTemplateId', newParams.fromTemplate.id); delete newParams.fromTemplate; }\n        if (newParams.convertFromBill) { urlParams.set('convertFromBillId', newParams.convertFromBill); delete newParams.convertFromBill; }\n        if (newParams.groupToEdit) { urlParams.set('editGroupId', newParams.groupToEdit.id); delete newParams.groupToEdit; }\n        if (newParams.groupToView) { urlParams.set('groupId', newParams.groupToView.id); delete newParams.groupToView; }\n        if (newParams.billId) { urlParams.set('billId', newParams.billId); }\n        if (newParams.importedBillId) { urlParams.set('importedBillId', newParams.importedBillId); }\n        \n        Object.keys(newParams).forEach(key => {\n            if (newParams[key] !== undefined && newParams[key] !== null) {\n               urlParams.set(key, String(newParams[key]));\n            }\n        });\n    \n        const queryString = urlParams.toString();\n        if (queryString) {\n            hash += `?${queryString}`;\n        }\n        \n        window.location.hash = hash;\n    }, []);\n\n    useEffect(() => {\n        const parseHash = () => {\n            const hash = window.location.hash;\n            const pathWithQuery = hash.substring(1);\n            const [path, queryString] = pathWithQuery.split('?');\n            const viewPath = path.startsWith('/') ? path.substring(1) : path;\n            const view = Object.values(View).find(v => v === viewPath) || View.Dashboard;\n            const query = new URLSearchParams(queryString || '');\n            \n            const params: Record<string, any> = {};\n            query.forEach((value, key) => { params[key] = value; });\n        \n            const convertFromBillId = query.get('convertFromBillId');\n            const billConversionSource = bills.find(b => b.id === convertFromBillId);\n        \n            const editTemplateId = query.get('editTemplateId');\n            const recurringBillToEdit = recurringBills.find(b => b.id === editTemplateId);\n        \n            const fromTemplateId = query.get('fromTemplateId');\n            const fromTemplate = recurringBills.find(b => b.id === fromTemplateId);\n\n            const editGroupId = query.get('editGroupId');\n            const groupToEdit = groups.find(g => g.id === editGroupId);\n\n            const groupId = query.get('groupId');\n            const currentGroup = groups.find(g => g.id === groupId);\n            \n            setRouterState({ view, params, billConversionSource, recurringBillToEdit, fromTemplate, groupToEdit, currentGroup });\n        };\n\n        parseHash();\n        window.addEventListener('hashchange', parseHash);\n        return () => window.removeEventListener('hashchange', parseHash);\n    }, [bills, recurringBills, groups]);\n\n    return { ...routerState, navigate };\n};\n","import { useState, useCallback } from 'react';\nimport type { RequestConfirmationFn, SettingsSection } from '../../types';\nimport { useAppControl } from '../../contexts/AppControlContext';\n\nexport const useModalStates = () => {\n    const [confirmation, setConfirmation] = useState<{ title: string; message: string; onConfirm: () => void; options?: any } | null>(null);\n    const [settingsSection, setSettingsSection] = useState<SettingsSection | null>(null);\n    const [isCsvImporterOpen, setIsCsvImporterOpen] = useState(false);\n    const [isQrImporterOpen, setIsQrImporterOpen] = useState(false);\n    const [showDebugConsole, setShowDebugConsole] = useState(() => sessionStorage.getItem('debugConsoleEnabled') === 'true');\n    const { showNotification } = useAppControl();\n\n    const requestConfirmation: RequestConfirmationFn = useCallback((title, message, onConfirm, options) => {\n        setConfirmation({ title, message, onConfirm, options });\n    }, []);\n\n    const toggleDebugConsole = useCallback((enabled: boolean) => {\n        sessionStorage.setItem('debugConsoleEnabled', String(enabled));\n        setShowDebugConsole(enabled);\n        showNotification(`Debug console ${enabled ? 'enabled' : 'disabled'} for this session.`);\n    }, [showNotification]);\n\n    return {\n        confirmation,\n        setConfirmation,\n        settingsSection,\n        setSettingsSection,\n        isCsvImporterOpen,\n        setIsCsvImporterOpen,\n        isQrImporterOpen,\n        setIsQrImporterOpen,\n        showDebugConsole,\n        toggleDebugConsole,\n        requestConfirmation\n    };\n};\n","import { useState, useCallback, useEffect } from 'react';\nimport type { DashboardView, SummaryFilter, DashboardLayoutMode, Settings } from '../../types';\n\nexport const useDashboardState = (settings: Settings, updateSettings: (newSettings: Partial<Settings>) => Promise<void>) => {\n    const [dashboardView, setDashboardView] = useState<DashboardView>('bills');\n    const [selectedParticipant, setSelectedParticipant] = useState<string | null>(null);\n    const [dashboardStatusFilter, setDashboardStatusFilter] = useState<'active' | 'archived'>('active');\n    const [dashboardSummaryFilter, setDashboardSummaryFilter] = useState<SummaryFilter>('total');\n    const [budgetDate, setBudgetDate] = useState<{ year: number; month: number } | 'last30days'>('last30days');\n    const [dashboardLayoutMode, setDashboardLayoutMode] = useState<DashboardLayoutMode>(settings.dashboardLayoutMode || 'card');\n\n    useEffect(() => {\n        setDashboardLayoutMode(settings.dashboardLayoutMode || 'card');\n    }, [settings.dashboardLayoutMode]);\n\n    const onSetDashboardLayoutMode = useCallback((mode: DashboardLayoutMode) => {\n        setDashboardLayoutMode(mode);\n        updateSettings({ dashboardLayoutMode: mode });\n    }, [updateSettings]);\n\n    const onSelectParticipant = useCallback((name: string | null) => {\n        if (name) {\n            setDashboardView('participants');\n        }\n        setSelectedParticipant(name);\n    }, []);\n\n    const onClearParticipant = useCallback(() => {\n        setSelectedParticipant(null);\n    }, []);\n    \n    // FIX: Renamed state setters to 'onSet...' to align with prop naming conventions in AppRouter and Dashboard components.\n    return {\n        dashboardView,\n        onSetDashboardView: setDashboardView,\n        selectedParticipant,\n        setSelectedParticipant,\n        dashboardStatusFilter,\n        onSetDashboardStatusFilter: setDashboardStatusFilter,\n        dashboardSummaryFilter,\n        onSetDashboardSummaryFilter: setDashboardSummaryFilter,\n        budgetDate,\n        setBudgetDate,\n        dashboardLayoutMode,\n        onSetDashboardLayoutMode: onSetDashboardLayoutMode,\n        onSelectParticipant,\n        onClearParticipant,\n    };\n};","import { useMemo } from 'react';\nimport type { Bill, ImportedBill, RecurringBill, Settings, Group, Category } from '../../types';\nimport type { ParticipantData } from '../../components/dashboard/ParticipantList';\n\ninterface DerivedDataDependencies {\n    bills: Bill[];\n    importedBills: ImportedBill[];\n    recurringBills: RecurringBill[];\n    groups: Group[];\n    categories: Category[];\n    settings: Settings;\n    isBillsLoading: boolean;\n    isImportedLoading: boolean;\n    isRecurringLoading: boolean;\n    isSettingsLoading: boolean;\n    isGroupsLoading: boolean;\n    isCategoriesLoading: boolean;\n    dashboardStatusFilter: 'active' | 'archived';\n    budgetDate: { year: number; month: number } | 'last30days';\n}\n\nexport const useDerivedData = ({\n    bills, importedBills, recurringBills, groups, categories, settings,\n    isBillsLoading, isImportedLoading, isRecurringLoading, isSettingsLoading, isGroupsLoading, isCategoriesLoading,\n    dashboardStatusFilter, budgetDate\n}: DerivedDataDependencies) => {\n    const isLoading = isBillsLoading || isImportedLoading || isRecurringLoading || isSettingsLoading || isGroupsLoading || isCategoriesLoading;\n\n    const participantsData = useMemo((): ParticipantData[] => {\n        const myDisplayNameLower = settings.myDisplayName.trim().toLowerCase();\n        const participantContactInfo = new Map<string, { phone?: string; email?: string }>();\n        bills.forEach(bill => {\n            bill.participants.forEach(p => {\n                if (p.name.trim().toLowerCase() === myDisplayNameLower) return;\n                const existing = participantContactInfo.get(p.name) || {};\n                if ((p.phone && !existing.phone) || (p.email && !existing.email)) {\n                    participantContactInfo.set(p.name, { phone: p.phone || existing.phone, email: p.email || existing.email });\n                }\n            });\n        });\n\n        if (dashboardStatusFilter === 'active') {\n            const debtMap = new Map<string, number>();\n            bills.forEach(bill => {\n                if (bill.status !== 'active') return;\n                bill.participants.forEach(p => {\n                    if (!p.paid && p.amountOwed > 0.005 && p.name.trim().toLowerCase() !== myDisplayNameLower) {\n                        debtMap.set(p.name, (debtMap.get(p.name) || 0) + p.amountOwed);\n                    }\n                });\n            });\n            return Array.from(debtMap.entries())\n                .map(([name, amount]) => ({ name, amount, type: 'owed' as const, ...participantContactInfo.get(name) }))\n                .sort((a, b) => b.amount - a.amount);\n        } else {\n            const participantStats = new Map<string, { outstandingDebt: number; totalBilled: number }>();\n            bills.forEach(bill => {\n                bill.participants.forEach(p => {\n                    const stats = participantStats.get(p.name) || { outstandingDebt: 0, totalBilled: 0 };\n                    stats.totalBilled += p.amountOwed;\n                    if (!p.paid) stats.outstandingDebt += p.amountOwed;\n                    participantStats.set(p.name, stats);\n                });\n            });\n            return Array.from(participantStats.entries())\n                .filter(([name, stats]) => stats.outstandingDebt < 0.01 && stats.totalBilled > 0 && name.trim().toLowerCase() !== myDisplayNameLower)\n                .map(([name, stats]) => ({ name, amount: stats.totalBilled, type: 'paid' as const, ...participantContactInfo.get(name) }))\n                .sort((a, b) => b.amount - a.amount);\n        }\n    }, [bills, dashboardStatusFilter, settings.myDisplayName]);\n\n    const budgetData = useMemo(() => {\n        const myNameLower = settings.myDisplayName.trim().toLowerCase();\n        if (!myNameLower || isSettingsLoading || isCategoriesLoading || isBillsLoading || isImportedLoading) {\n            return { totalBudget: 0, totalSpending: 0, spendingByCategory: {}, hasBudgetData: false };\n        }\n\n        let startDate: Date;\n        let endDate = new Date();\n        if (budgetDate === 'last30days') {\n            startDate = new Date();\n            startDate.setDate(endDate.getDate() - 30);\n            startDate.setHours(0,0,0,0);\n        } else {\n            startDate = new Date(budgetDate.year, budgetDate.month, 1);\n            endDate = new Date(budgetDate.year, budgetDate.month + 1, 0);\n            endDate.setHours(23, 59, 59, 999);\n        }\n\n        const relevantUserBills: { billId: string; description: string; userPortion: number; date: string; categoryId?: string; isImported: boolean }[] = [];\n        \n        bills.forEach(bill => {\n            const billDate = new Date(bill.date);\n            if (bill.status === 'active' && billDate >= startDate && billDate <= endDate) {\n                const myParticipant = bill.participants.find(p => p.name.trim().toLowerCase() === myNameLower);\n                if (myParticipant) {\n                    const userPortion = bill.participants.length === 1 && bill.participants[0].name.trim().toLowerCase() === myNameLower ? bill.totalAmount : myParticipant.amountOwed;\n                    if (userPortion > 0) {\n                        relevantUserBills.push({\n                            billId: bill.id, description: bill.description, userPortion, date: bill.date, categoryId: bill.categoryId, isImported: false\n                        });\n                    }\n                }\n            }\n        });\n\n        importedBills.forEach(iBill => {\n            const bill = iBill.sharedData.bill;\n            const billDate = new Date(bill.date);\n            if (iBill.status === 'active' && billDate >= startDate && billDate <= endDate && iBill.myParticipantId) {\n                const myParticipant = bill.participants.find(p => p.id === iBill.myParticipantId);\n                if (myParticipant) {\n                    const userPortion = myParticipant.amountOwed;\n                    if (userPortion > 0) {\n                        relevantUserBills.push({\n                            billId: iBill.id, description: bill.description, userPortion, date: bill.date, categoryId: bill.categoryId, isImported: true\n                        });\n                    }\n                }\n            }\n        });\n        \n        const spendingByCategory: Record<string, any> = {};\n        let totalSpending = 0;\n\n        relevantUserBills.forEach(bill => {\n            totalSpending += bill.userPortion;\n            const categoryId = bill.categoryId;\n            const category = categories.find(c => c.id === categoryId);\n            \n            const targetId = category ? category.id : 'uncategorized';\n\n            if (!spendingByCategory[targetId]) {\n                spendingByCategory[targetId] = {\n                    category: category || { id: 'uncategorized', name: 'Uncategorized' },\n                    spent: 0,\n                    bills: []\n                };\n            }\n            spendingByCategory[targetId].spent += bill.userPortion;\n            spendingByCategory[targetId].bills.push(bill);\n        });\n\n        let totalBudget = settings.totalBudget || 0;\n        if (!settings.totalBudget || settings.totalBudget === 0) {\n            totalBudget = categories.reduce((sum, cat) => sum + (cat.budget || 0), 0);\n        }\n\n        const hasAnyBillsWithCategory = bills.some(b => b.categoryId) || importedBills.some(b => b.sharedData.bill.categoryId);\n        const hasAnyBudgetSet = totalBudget > 0 || categories.some(c => c.budget && c.budget > 0);\n\n        return {\n            totalBudget,\n            totalSpending,\n            spendingByCategory,\n            hasBudgetData: hasAnyBillsWithCategory || hasAnyBudgetSet\n        };\n    }, [bills, importedBills, categories, settings, budgetDate, isSettingsLoading, isCategoriesLoading, isBillsLoading, isImportedLoading]);\n    \n    return { isLoading, participantsData, budgetData };\n};\n","import type { Settings, Bill, Participant, ReceiptItem, SharedBillPayload, ConstituentShareInfo } from '../../types';\nimport type { SubscriptionStatus } from '../../hooks/useAuth';\nimport * as cryptoService from '../cryptoService';\n\ndeclare var pako: any;\n\n/**\n * Converts a UTF-8 string to a \"binary string\" (where each character's char code is a byte value),\n * which is the format required by the btoa function.\n * @param str The UTF-8 string to convert.\n */\nfunction utf8ToBinaryString(str: string): string {\n  const encoder = new TextEncoder();\n  const uint8Array = encoder.encode(str);\n  let binaryString = '';\n  // This loop is more robust than `String.fromCharCode.apply` for large inputs.\n  for (let i = 0; i < uint8Array.length; i++) {\n    binaryString += String.fromCharCode(uint8Array[i]);\n  }\n  return binaryString;\n}\n\n\n// Helper to Base64URL encode a string, making it safe for URLs\nexport function base64UrlEncode(str: string): string {\n    return btoa(utf8ToBinaryString(str))\n        .replace(/\\+/g, '-')\n        .replace(/\\//g, '_')\n        .replace(/=/g, '');\n}\n\n\ninterface ShareBillInfo {\n    description: string;\n    amountOwed: number;\n}\n\nexport const generateShareText = (\n    participantName: string,\n    totalOwed: number,\n    billsInfo: ShareBillInfo[],\n    settings: Settings,\n    subscriptionStatus: SubscriptionStatus\n): string => {\n    const billList = billsInfo.map(b => `- \"${b.description}\": $${b.amountOwed.toFixed(2)}`).join('\\n');\n\n    const { paymentDetails, shareTemplate } = settings;\n    let paymentInfo = '';\n    const paymentMethods = [];\n    if (paymentDetails.venmo) paymentMethods.push(`Venmo: @${paymentDetails.venmo}`);\n    if (paymentDetails.paypal) paymentMethods.push(`PayPal: ${paymentDetails.paypal}`);\n    if (paymentDetails.cashApp) paymentMethods.push(`Cash App: $${paymentDetails.cashApp}`);\n    if (paymentDetails.zelle) paymentMethods.push(`Zelle: ${paymentDetails.zelle}`);\n    \n    if (paymentMethods.length > 0) {\n        paymentInfo = `\\n\\nYou can pay me via ${paymentMethods.join(' or ')}.`;\n    }\n    if (paymentDetails.customMessage) {\n        paymentInfo += paymentInfo ? `\\n\\n${paymentDetails.customMessage}` : `\\n\\n${paymentDetails.customMessage}`;\n    }\n\n    let promoText = '';\n    if (subscriptionStatus === 'free') {\n        let appUrl = 'https://sharedbills.app';\n        try {\n            const constructedUrl = new URL('/', window.location.href).href;\n            appUrl = constructedUrl.endsWith('/') ? constructedUrl.slice(0, -1) : constructedUrl;\n        } catch (e) { console.warn(\"Could not determine app URL from context.\"); }\n        promoText = `\\n\\nCreated with SharedBills: ${appUrl}`;\n    }\n    \n    return shareTemplate\n        .replace('{participantName}', participantName)\n        .replace('{totalOwed}', `$${totalOwed.toFixed(2)}`)\n        .replace('{billList}', billList)\n        .replace('{paymentInfo}', paymentInfo)\n        .replace('{promoText}', promoText);\n};\n\n\nexport async function encryptAndSignPayload(\n    bill: Bill, \n    settings: Settings, \n    privateKey: CryptoKey, \n    publicKeyJwk: JsonWebKey,\n    encryptionKey: CryptoKey,\n    constituentShares?: ConstituentShareInfo[]\n): Promise<string> {\n    // 1. Create a sanitized version of the bill for sharing\n    const { participantShareInfo, ...billData } = bill;\n\n    // Sanitize participants in the main bill by removing contact info\n    const sanitizedParticipants = billData.participants.map(({ phone, email, ...p }) => p);\n\n    // Sanitize participants in nested originalBillData within items (for summary bills)\n    const sanitizedItems = billData.items?.map(item => {\n        if (item.originalBillData) {\n            const sanitizedOriginalParticipants = item.originalBillData.participants.map(({ phone, email, ...p }) => p);\n            // Create a new item with sanitized originalBillData\n            return {\n                ...item,\n                originalBillData: {\n                    ...item.originalBillData,\n                    participants: sanitizedOriginalParticipants\n                }\n            };\n        }\n        return item;\n    });\n\n    // Construct the final bill object for the payload\n    const billForPayload = {\n        ...billData,\n        participants: sanitizedParticipants,\n        items: sanitizedItems,\n    };\n    \n    // 2. Sign and create the payload with the sanitized bill\n    const signature = await cryptoService.sign(JSON.stringify(billForPayload), privateKey);\n    const payload: SharedBillPayload = {\n        bill: billForPayload as Bill,\n        creatorName: settings.myDisplayName,\n        publicKey: publicKeyJwk,\n        signature,\n        paymentDetails: (settings && settings.paymentDetails) ? settings.paymentDetails : { venmo: '', paypal: '', cashApp: '', zelle: '', customMessage: '' },\n    };\n    if (constituentShares) {\n        payload.constituentShares = constituentShares;\n    }\n    \n    const payloadString = JSON.stringify(payload);\n    \n    // 3. Compress and encrypt the payload\n    const originalSize = new TextEncoder().encode(payloadString).length;\n    const compressedPayload = pako.deflate(payloadString);\n    const compressedSize = compressedPayload.byteLength;\n    const encryptedData = await cryptoService.encrypt(compressedPayload, encryptionKey);\n    const encryptedSize = encryptedData.length;\n\n    const formatBytes = (bytes: number): string => {\n        if (bytes === 0) return '0 B';\n        const k = 1024;\n        const sizes = ['B', 'KB', 'MB', 'GB'];\n        const i = Math.floor(Math.log(bytes) / Math.log(k));\n        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n    };\n\n    try {\n        const payloadCopy = JSON.parse(payloadString);\n        console.debug(\n            `Sharing payload stats: Original: ${formatBytes(originalSize)}, Compressed: ${formatBytes(compressedSize)}, Encrypted: ${formatBytes(encryptedSize)}`,\n            payloadCopy\n        );\n    } catch (e) {\n        console.warn('Could not log share payload for debugging.');\n    }\n    \n    return encryptedData;\n}","// services/api.ts\nlet API_BASE_URL: string | null = null;\nlet apiInitializationPromise: Promise<void> | null = null;\n\nexport const rateLimitCache = new Map<string, number>();\nconst RATE_LIMIT_MS = 500; // Block identical requests within this timeframe\n\n/**\n * A self-contained helper to check if a backend URL is live.\n * @param url The base URL to check.\n * @returns A promise that resolves to true if the backend is healthy, false otherwise.\n */\nconst checkUrl = async (url: string): Promise<boolean> => {\n    try {\n        // Ping a known, lightweight health check endpoint with a short timeout.\n        // Use URL constructor to safely join paths and avoid double slashes.\n        const healthUrl = new URL('/health', url).toString();\n        const response = await fetch(healthUrl, { method: 'GET', signal: AbortSignal.timeout(2000) });\n        // Ensure the response is OK (status 200-299) and the body is exactly \"OK\".\n        if (response.ok && (await response.text()) === 'OK') {\n            return true;\n        }\n        return false;\n    } catch (error) {\n        // Any failure (network error, CORS, timeout, etc.) is caught here.\n        console.debug(`Health check for ${url} failed.`, error);\n        return false;\n    }\n};\n\n/**\n * A wrapper for `checkUrl` that retries on failure.\n * @param url The base URL to check.\n * @param retries Number of attempts.\n * @param delay Initial delay in ms.\n * @returns True if the URL becomes healthy, false otherwise.\n */\nconst checkUrlWithRetries = async (url: string, retries = 3, delay = 500): Promise<boolean> => {\n    for (let i = 0; i < retries; i++) {\n        if (await checkUrl(url)) {\n            return true;\n        }\n        if (i < retries - 1) {\n            console.log(`Health check for ${url} failed. Retrying in ${delay * Math.pow(2, i)}ms...`);\n            await new Promise(resolve => setTimeout(resolve, delay * Math.pow(2, i)));\n        }\n    }\n    return false;\n};\n\nconst discoverApiBaseUrl = async (): Promise<string> => {\n    // --- Phase 1: Check build-time environment variables first ---\n    const envApiUrls = process.env.VITE_API_BASE_URLS;\n    if (typeof envApiUrls === 'string' && envApiUrls.length > 0) {\n        const candidates = envApiUrls.split(',').map(url => url.trim()).filter(Boolean);\n        console.log(\"Checking for backend API from build-time candidates:\", candidates);\n        for (const url of candidates) {\n            if (await checkUrlWithRetries(url)) {\n                console.log(`Discovered and connected to backend API at: ${url}`);\n                return url; // Success! Return immediately.\n            }\n        }\n    }\n\n    // --- Phase 2: Fallback to dynamic subdomain discovery ONLY in dev environments ---\n    const isDev = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';\n    if (isDev) {\n        console.log(\"No healthy build-time backend found. Falling back to dynamic discovery in dev mode.\");\n        const dynamicCandidates: string[] = [];\n        const { hostname, protocol } = window.location;\n        \n        if (hostname !== 'localhost' && !hostname.startsWith('127.0.0.1')) {\n            const baseHost = hostname.startsWith('www.') ? hostname.substring(4) : hostname;\n            const prefixes = ['k', 'c', 'v', 'n', 'a', 'g', 'm'];\n            prefixes.forEach(prefix => {\n                dynamicCandidates.push(`${protocol}//${prefix}.${baseHost}`);\n            });\n        }\n\n        if (dynamicCandidates.length > 0) {\n            console.log(\"Checking dynamic candidates:\", dynamicCandidates);\n            for (const url of dynamicCandidates) {\n                if (await checkUrlWithRetries(url)) {\n                    console.log(`Discovered backend via dynamic discovery at: ${url}`);\n                    return url; // Success! Return immediately.\n                }\n            }\n        }\n    }\n    \n    // --- Final Fallback ---\n    console.log(\"No backend discovered. Falling back to relative API paths.\");\n    return '';\n};\n\n\n/**\n * Initializes the API service by discovering the backend URL. This should be called once,\n * without `await`, at application startup to allow it to run in the background.\n * @returns A promise that resolves when discovery is complete.\n */\nexport const initializeApi = (): Promise<void> => {\n    if (!apiInitializationPromise) {\n        apiInitializationPromise = (async () => {\n            try {\n                API_BASE_URL = await discoverApiBaseUrl();\n            } catch (e) {\n                console.error(\"API discovery failed:\", e);\n                // Fallback to relative paths on any discovery failure.\n                API_BASE_URL = ''; \n            }\n        })();\n    }\n    return apiInitializationPromise;\n};\n\n/**\n * Asynchronously returns the discovered API base URL after initialization.\n * @returns A promise resolving to the base URL string, an empty string for relative paths, or null if not yet initialized.\n */\nexport const getDiscoveredApiBaseUrl = async (): Promise<string | null> => {\n    if (!apiInitializationPromise) {\n        initializeApi();\n    }\n    await apiInitializationPromise;\n    return API_BASE_URL;\n};\n\n/**\n * Asynchronously constructs a full URL for an API endpoint. It waits for the background\n * API discovery process to complete before resolving.\n * @param path The API endpoint path (e.g., '/scan-receipt').\n * @returns A promise resolving to the full or relative URL for the API endpoint.\n */\nexport const getApiUrl = async (path: string): Promise<string> => {\n    if (!apiInitializationPromise) {\n        // This is a safeguard. `initializeApi` should be called at app startup.\n        console.warn(\"initializeApi() was not called at startup. Calling it now.\");\n        initializeApi();\n    }\n    \n    await apiInitializationPromise;\n\n    if (API_BASE_URL === null) {\n        console.error(\"API base URL is null after initialization. This indicates a discovery failure. Falling back to relative paths.\");\n        API_BASE_URL = '';\n    }\n    \n    // If API_BASE_URL is an empty string, this means we should use relative paths.\n    if (API_BASE_URL === '') {\n        const sanitizedPath = path.startsWith('/') ? path : `/${path}`;\n        return sanitizedPath;\n    }\n\n    // Use the URL constructor for robust joining of the base URL and the path.\n    return new URL(path, API_BASE_URL).toString();\n};\n\n/**\n * A wrapper around the native `fetch` function that adds automatic retries for transient errors.\n * Retries on network failures or specific server error codes (5xx, 405) that might\n * indicate a temporary issue like a serverless function cold start.\n * @param url The URL to fetch.\n * @param options The standard fetch options.\n * @param retries The number of retry attempts. Defaults to 3.\n * @param backoff The initial backoff delay in milliseconds. Defaults to 500ms.\n * @returns A Promise that resolves with the Response object on success.\n * @throws An error if all fetch attempts fail.\n */\nexport const fetchWithRetry = async (\n    url: RequestInfo | URL,\n    options?: RequestInit,\n    retries = 3,\n    backoff = 500\n): Promise<Response> => {\n    // --- Client-Side Rate Limiting ---\n    const urlObject = new URL(url.toString(), window.location.origin);\n    let rateLimitKey: string;\n    const method = options?.method?.toUpperCase() || 'GET';\n\n    if (method === 'POST' || method === 'PUT' || method === 'PATCH') {\n        // For mutating requests, key on path and body content to differentiate them.\n        const bodyKey = typeof options?.body === 'string' ? options.body : '';\n        rateLimitKey = `${method}:${urlObject.pathname}:${bodyKey}`;\n    } else {\n        // For GET and other requests, key on the full URL including query params.\n        rateLimitKey = `${method}:${urlObject.pathname}${urlObject.search}`;\n    }\n\n    const now = Date.now();\n    const lastCall = rateLimitCache.get(rateLimitKey);\n\n    if (lastCall && (now - lastCall) < RATE_LIMIT_MS) {\n        console.warn(`Rate limit exceeded for ${rateLimitKey}. Call blocked.`);\n        throw new Error(`Too many requests. Please wait a moment before trying again.`);\n    }\n    rateLimitCache.set(rateLimitKey, now);\n    // --- End Rate Limiting ---\n\n    let lastError: Error | undefined;\n\n    for (let i = 0; i < retries; i++) {\n        try {\n            const response = await fetch(url, options);\n\n            // If the response is OK, we're done.\n            if (response.ok) {\n                return response;\n            }\n\n            // For specific error codes that suggest a temporary server issue, we treat it as a retryable error.\n            if (response.status >= 500 || response.status === 405) {\n                // Throw an error to trigger the retry logic in the catch block.\n                throw new Error(`Server error: ${response.status} ${response.statusText}`);\n            }\n\n            // For other client errors (4xx), we don't retry and return the response immediately.\n            return response;\n\n        } catch (error: any) {\n            lastError = error;\n            console.warn(`Fetch attempt ${i + 1} for ${url.toString()} failed. Retrying...`, error.message);\n            if (i < retries - 1) {\n                // Wait with exponential backoff before the next retry.\n                await new Promise(resolve => setTimeout(resolve, backoff * Math.pow(2, i)));\n            }\n        }\n    }\n\n    // If all retries have been exhausted, throw the last captured error.\n    throw new Error(`All fetch attempts failed for ${url.toString()}. Last error: ${lastError?.message}`);\n};","import type { Bill, ImportedBill, SharedBillPayload, ConstituentShareInfo, Participant, ReceiptItem } from '../../types';\nimport { getApiUrl, fetchWithRetry } from '../api';\nimport * as cryptoService from '../cryptoService';\n\ndeclare var pako: any;\n\n/**\n * Polls the server for updates on a list of imported bills using an efficient batch request.\n * @param bills An array of imported bills to check.\n * @returns A promise that resolves to an array of bill objects that need to be updated locally.\n */\nexport async function pollImportedBills(bills: ImportedBill[]): Promise<ImportedBill[]> {\n    if (bills.length === 0) return [];\n\n    const constituentToSummaryMap = new Map<string, ImportedBill>();\n    const checkPayload: { shareId: string; lastUpdatedAt: number }[] = [];\n    const regularBillsToCheck = new Map<string, ImportedBill>();\n\n    for (const bill of bills) {\n        if (bill.constituentShares && bill.constituentShares.length > 0) {\n            for (const share of bill.constituentShares) {\n                const item = bill.sharedData.bill.items?.find(i => i.id === share.originalBillId);\n                const lastUpdatedAt = item?.originalBillData?.lastUpdatedAt || bill.lastUpdatedAt;\n                checkPayload.push({ shareId: share.shareId, lastUpdatedAt });\n                constituentToSummaryMap.set(share.shareId, bill);\n            }\n        } else {\n            checkPayload.push({ shareId: bill.shareId, lastUpdatedAt: bill.lastUpdatedAt });\n            regularBillsToCheck.set(bill.shareId, bill);\n        }\n    }\n\n    const uniqueCheckPayload = Array.from(new Map(checkPayload.map(item => [item.shareId, item])).values());\n    const billsNeedingUpdate: ImportedBill[] = [];\n    const updatedSummaries = new Map<string, ImportedBill>();\n\n    try {\n        const response = await fetchWithRetry(await getApiUrl('/share/batch-check'), {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify(uniqueCheckPayload),\n            signal: AbortSignal.timeout(20000)\n        });\n\n        if (response.ok) {\n            const updatedShares: { shareId: string, encryptedData: string, lastUpdatedAt: number }[] = await response.json();\n            const updatedShareIds = new Set(updatedShares.map(s => s.shareId));\n\n            for (const share of updatedShares) {\n                if (constituentToSummaryMap.has(share.shareId)) {\n                    const summaryTemplate = constituentToSummaryMap.get(share.shareId)!;\n                    let summaryToUpdate = updatedSummaries.get(summaryTemplate.id) || JSON.parse(JSON.stringify(summaryTemplate));\n                    const constituentInfo = summaryToUpdate.constituentShares!.find((cs: ConstituentShareInfo) => cs.shareId === share.shareId)!;\n\n                    try {\n                        const key = await cryptoService.importEncryptionKey(constituentInfo.encryptionKey);\n                        const decrypted = await cryptoService.decrypt(share.encryptedData, key);\n                        const json = pako.inflate(decrypted, { to: 'string' });\n                        const payload: SharedBillPayload = JSON.parse(json);\n                        const pubKey = await cryptoService.importPublicKey(payload.publicKey);\n                        if (!await cryptoService.verify(JSON.stringify(payload.bill), payload.signature, pubKey)) throw new Error(\"Signature failed for constituent bill.\");\n\n                        const items = summaryToUpdate.sharedData.bill.items;\n                        if (items) {\n                            const itemIndex = items.findIndex((i: ReceiptItem) => i.id === constituentInfo.originalBillId);\n                            if (itemIndex > -1) {\n                                items[itemIndex].originalBillData = payload.bill;\n                                const myNameInSummary = summaryToUpdate.sharedData.bill.participants.find((p: Participant) => p.id === summaryToUpdate.myParticipantId)?.name;\n                                if(myNameInSummary) {\n                                    const myParticipantInOriginal = payload.bill.participants.find((p: Participant) => p.name.toLowerCase().trim() === myNameInSummary.toLowerCase().trim());\n                                    if (myParticipantInOriginal) {\n                                        items[itemIndex].price = myParticipantInOriginal.amountOwed || 0;\n                                    }\n                                }\n                            }\n                        }\n                        updatedSummaries.set(summaryToUpdate.id, summaryToUpdate);\n                    } catch (e) {\n                        console.error(`Failed to process constituent update for ${share.shareId}`, e);\n                        if (summaryToUpdate.liveStatus !== 'stale') {\n                            summaryToUpdate.liveStatus = 'stale';\n                            updatedSummaries.set(summaryToUpdate.id, summaryToUpdate);\n                        }\n                    }\n                } else if (regularBillsToCheck.has(share.shareId)) {\n                    const originalBill = regularBillsToCheck.get(share.shareId)!;\n                    try {\n                        const symmetricKey = await cryptoService.importEncryptionKey(originalBill.shareEncryptionKey);\n                        const decryptedBytes = await cryptoService.decrypt(share.encryptedData, symmetricKey);\n                        const decryptedJson = pako.inflate(decryptedBytes, { to: 'string' });\n                        const data: SharedBillPayload = JSON.parse(decryptedJson);\n                        const publicKey = await cryptoService.importPublicKey(data.publicKey);\n                        if (!(await cryptoService.verify(JSON.stringify(data.bill), data.signature, publicKey))) {\n                            throw new Error(\"Signature verification failed.\");\n                        }\n\n                        const myParticipant = data.bill.participants.find((p: Participant) => p.id === originalBill.myParticipantId);\n                        const creatorSaysImPaid = myParticipant ? myParticipant.paid : false;\n\n                        const newLocalStatus = {\n                            ...originalBill.localStatus,\n                            myPortionPaid: creatorSaysImPaid,\n                        };\n\n                        billsNeedingUpdate.push({ \n                            ...originalBill, \n                            sharedData: { ...originalBill.sharedData, bill: data.bill }, \n                            lastUpdatedAt: share.lastUpdatedAt, \n                            liveStatus: 'live',\n                            localStatus: newLocalStatus,\n                        });\n                    } catch (decryptionError) {\n                        console.error(`Processing updated bill ${share.shareId} failed:`, decryptionError);\n                        if (originalBill.liveStatus !== 'stale') billsNeedingUpdate.push({ ...originalBill, liveStatus: 'stale' });\n                    }\n                }\n            }\n            \n            for (const summary of updatedSummaries.values()) {\n                const myNameInSummary = summary.sharedData.bill.participants.find((p: Participant) => p.id === summary.myParticipantId)?.name;\n                if (!myNameInSummary) {\n                    console.warn(`Could not find my participant name in summary bill ${summary.id}. Skipping recalculation.`);\n                    billsNeedingUpdate.push(summary);\n                    continue;\n                }\n\n                let totalOwedByMe = 0;\n                let totalPortion = 0;\n                let allConstituentsPaid = true;\n                const paidItems: Record<string, boolean> = { ...(summary.localStatus.paidItems || {}) };\n\n                if (summary.sharedData.bill.items) {\n                    for (const item of summary.sharedData.bill.items) {\n                        totalPortion += item.price;\n                        \n                        let isConsideredPaid = false;\n                        const originalBill = item.originalBillData;\n                        \n                        if (originalBill) {\n                             const myParticipantInOriginal = originalBill.participants.find((p: Participant) => p.name.toLowerCase().trim() === myNameInSummary.toLowerCase().trim());\n                             if (myParticipantInOriginal?.paid) {\n                                paidItems[item.id] = true;\n                             }\n                        }\n                        \n                        if (paidItems[item.id]) {\n                            isConsideredPaid = true;\n                        }\n\n                        if (!isConsideredPaid) {\n                            totalOwedByMe += item.price;\n                            allConstituentsPaid = false;\n                        }\n                    }\n                }\n                \n                summary.sharedData.bill.totalAmount = totalPortion;\n                if (summary.sharedData.bill.participants[0]) {\n                    summary.sharedData.bill.participants[0].amountOwed = totalOwedByMe;\n                }\n                \n                summary.localStatus.paidItems = paidItems;\n                summary.localStatus.myPortionPaid = allConstituentsPaid;\n                summary.liveStatus = 'live';\n                if (summary.sharedData.bill.items) {\n                    summary.lastUpdatedAt = Math.max(...summary.sharedData.bill.items.map((i: ReceiptItem) => i.originalBillData?.lastUpdatedAt || 0), summary.lastUpdatedAt);\n                }\n\n                billsNeedingUpdate.push(summary);\n            }\n            \n            const polledShareIds = new Set(uniqueCheckPayload.map(p => p.shareId));\n            bills.forEach(bill => {\n              if (bill.liveStatus === 'stale') {\n                 if (bill.constituentShares && bill.constituentShares.length > 0) {\n                     const allConstituentsPolled = bill.constituentShares.every((cs: ConstituentShareInfo) => polledShareIds.has(cs.shareId));\n                     if (allConstituentsPolled) billsNeedingUpdate.push({ ...bill, liveStatus: 'live' });\n                 } else {\n                     if (polledShareIds.has(bill.shareId) && !updatedShareIds.has(bill.shareId)) {\n                        billsNeedingUpdate.push({ ...bill, liveStatus: 'live' });\n                     }\n                 }\n              }\n            });\n\n        } else {\n             throw new Error(`Batch check failed with status ${response.status}`);\n        }\n    } catch (error) {\n        console.error(\"Polling for imported bills failed:\", error);\n        for (const bill of bills) {\n            if (bill.liveStatus !== 'stale') billsNeedingUpdate.push({ ...bill, liveStatus: 'stale' as const });\n        }\n    }\n    \n    return Array.from(new Map(billsNeedingUpdate.map(b => [b.id, b])).values());\n}\n\n/**\n * Polls the server to check the status of bills the user has shared.\n * @param bills An array of the user's bills that have shareInfo.\n * @returns A promise that resolves to an array of bill objects that need their status updated locally.\n */\nexport async function pollOwnedSharedBills(bills: Bill[]): Promise<Bill[]> {\n    const billsToUpdate: Bill[] = [];\n    const billsToCheck = bills.filter(b => b.shareInfo?.shareId);\n    if (billsToCheck.length === 0) return [];\n\n    const shareIds = billsToCheck.map(b => b.shareInfo!.shareId);\n\n    try {\n        const response = await fetchWithRetry(await getApiUrl('/share/batch-status'), {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ shareIds }),\n            signal: AbortSignal.timeout(15000)\n        });\n\n        if (response.ok) {\n            const statuses: { shareId: string, status: 'live' | 'expired' }[] = await response.json();\n            const statusMap = new Map(statuses.map(s => [s.shareId, s.status]));\n\n            for (const bill of billsToCheck) {\n                const newStatus = statusMap.get(bill.shareInfo!.shareId);\n                // If a status was returned and it's different from the current one, mark for update.\n                if (newStatus && bill.shareStatus !== newStatus) {\n                    billsToUpdate.push({ ...bill, shareStatus: newStatus });\n                } else if (!newStatus && bill.shareStatus !== 'error') {\n                    // If the server didn't return a status for a known shareId, it's an anomaly/error.\n                    billsToUpdate.push({ ...bill, shareStatus: 'error' as const });\n                }\n            }\n        } else {\n             throw new Error(`Batch status check failed with status ${response.status}`);\n        }\n    } catch (error) {\n        console.error(`Polling failed for owned bills:`, error);\n        // If the entire request fails, mark all polled bills as having an error status if they aren't already.\n        for (const bill of billsToCheck) {\n            if (bill.shareStatus !== 'error') {\n                 billsToUpdate.push({ ...bill, shareStatus: 'error' as const });\n            }\n        }\n    }\n    \n    return billsToUpdate;\n}","import type { Bill, Settings } from '../../types';\nimport { getApiUrl, fetchWithRetry } from '../api';\nimport { getBillSigningKey } from '../db';\nimport { encryptAndSignPayload } from './utils';\nimport * as cryptoService from '../cryptoService';\n\nexport const recreateShareSession = async (\n    bill: Bill,\n    settings: Settings,\n    updateBillCallback: (updatedBill: Bill, options?: { skipSync?: boolean }) => Promise<void>\n): Promise<Bill> => {\n    let updatedBill = JSON.parse(JSON.stringify(bill));\n\n    const existingShareInfo = updatedBill.shareInfo;\n    const keyRecord = await getBillSigningKey(updatedBill.id);\n\n    if (!existingShareInfo?.shareId || !existingShareInfo.encryptionKey || !existingShareInfo.signingPublicKey || !keyRecord) {\n        console.error(\"Cannot recreate share session: Existing keys or shareId are missing.\", { billId: updatedBill.id });\n        throw new Error(\"Cannot re-sync bill because its original sharing keys or ID are missing.\");\n    }\n    \n    const { shareId, encryptionKey: encryptionKeyJwk, signingPublicKey: signingPublicKeyJwk } = existingShareInfo;\n    const { privateKey } = keyRecord;\n\n    const billEncryptionKey = await cryptoService.importEncryptionKey(encryptionKeyJwk);\n    delete updatedBill.participantShareInfo;\n\n    const encryptedData = await encryptAndSignPayload(updatedBill, settings, privateKey, signingPublicKeyJwk, billEncryptionKey);\n\n    const shareResponse = await fetchWithRetry(await getApiUrl(`/share/${shareId}`), {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ encryptedData, updateToken: existingShareInfo.updateToken }),\n    });\n\n    const shareResult = await shareResponse.json();\n    if (!shareResponse.ok) {\n        throw new Error(shareResult.error || `Failed to revive the share session on the server for shareId: ${shareId}.`);\n    }\n\n    if (shareResult.updateToken && updatedBill.shareInfo) {\n        updatedBill.shareInfo.updateToken = shareResult.updateToken;\n    }\n    if (shareResult.lastUpdatedAt) {\n        updatedBill.lastUpdatedAt = shareResult.lastUpdatedAt;\n    }\n\n    await updateBillCallback(updatedBill, { skipSync: true });\n    \n    return updatedBill;\n};\n\n/**\n * Pushes an update for an already-shared bill to the server.\n * @param bill The updated bill object.\n * @param settings The current app settings.\n * @param updateBillCallback Callback to save the bill if the server provides a new update token (migration).\n */\nexport async function syncSharedBillUpdate(\n    bill: Bill,\n    settings: Settings,\n    updateBillCallback: (bill: Bill, options?: { skipSync?: boolean }) => Promise<any>\n): Promise<void> {\n  if (!bill.shareInfo?.shareId) {\n    console.warn(\"Attempted to sync a bill without a shareId.\", bill.id);\n    return;\n  }\n\n  const keyRecord = await getBillSigningKey(bill.id);\n  if (!keyRecord || !keyRecord.privateKey) {\n    throw new Error(`Could not find signing key for shared bill ${bill.id}. Cannot sync update.`);\n  }\n\n  const billEncryptionKey = await cryptoService.importEncryptionKey(bill.shareInfo.encryptionKey);\n  const signingPublicKeyJwk = bill.shareInfo.signingPublicKey;\n  const encryptedData = await encryptAndSignPayload(bill, settings, keyRecord.privateKey, signingPublicKeyJwk, billEncryptionKey);\n  \n  const updateToken = bill.shareInfo.updateToken;\n\n  const response = await fetchWithRetry(await getApiUrl(`/share/${bill.shareInfo.shareId}`), {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify({ encryptedData, updateToken }),\n  });\n  \n  const result = await response.json();\n\n  if (!response.ok) {\n    if (response.status === 403) {\n      throw new Error(result.details || 'Update forbidden. This bill may have been updated from another device. Please refresh.');\n    }\n    throw new Error(result.error || 'Failed to sync bill update to the server.');\n  }\n\n  // Handle server responses that include an update token (e.g., on first update or after migration)\n  if (result.updateToken && bill.shareInfo) {\n    console.log(`Received new/updated token for bill ${bill.id}. Persisting.`);\n    const updatedShareInfo = {\n      ...bill.shareInfo,\n      updateToken: result.updateToken,\n    };\n    const updatedBill: Bill = {\n      ...bill,\n      shareInfo: updatedShareInfo,\n      lastUpdatedAt: result.lastUpdatedAt\n    };\n    // Silently update the bill in the DB with the complete shareInfo object\n    await updateBillCallback(updatedBill, { skipSync: true });\n  }\n\n  console.log(`Successfully synced update for bill ${bill.id}`);\n}\n\n\n/**\n * Reactivates an expired share on the server by re-uploading the encrypted bill data.\n * @param bill The bill with an expired share.\n * @param settings The user's settings.\n * @returns An object containing the new `lastUpdatedAt` timestamp and the new `updateToken`.\n */\nexport async function reactivateShare(bill: Bill, settings: Settings): Promise<{ lastUpdatedAt: number; updateToken: string; }> {\n  if (!bill.shareInfo?.shareId) {\n    throw new Error(\"Cannot reactivate a bill that was never shared.\");\n  }\n\n  const keyRecord = await getBillSigningKey(bill.id);\n  if (!keyRecord || !keyRecord.privateKey) {\n    throw new Error(`Could not find signing key for shared bill ${bill.id}. Cannot reactivate.`);\n  }\n\n  const billEncryptionKey = await cryptoService.importEncryptionKey(bill.shareInfo.encryptionKey);\n  const signingPublicKeyJwk = bill.shareInfo.signingPublicKey;\n  const encryptedData = await encryptAndSignPayload(bill, settings, keyRecord.privateKey, signingPublicKeyJwk, billEncryptionKey);\n  \n  const updateToken = bill.shareInfo.updateToken;\n  \n  const response = await fetchWithRetry(await getApiUrl(`/share/${bill.shareInfo.shareId}`), {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify({ encryptedData, updateToken }),\n  });\n  \n  const result = await response.json();\n  if (!response.ok) {\n    throw new Error(result.error || 'Failed to reactivate share on the server.');\n  }\n  \n  if (!result.updateToken) {\n    throw new Error('Server did not return an update token on reactivation.');\n  }\n\n  console.log(`Successfully reactivated share for bill ${bill.id}`);\n  return { lastUpdatedAt: result.lastUpdatedAt, updateToken: result.updateToken };\n}","import type { Bill, ConstituentShareInfo, Participant, ReceiptItem, Settings } from '../../types';\nimport { getApiUrl, fetchWithRetry } from '../api';\nimport { getBillSigningKey, saveBillSigningKey } from '../db';\nimport * as cryptoService from '../cryptoService';\nimport { encryptAndSignPayload } from './utils';\n\ndeclare var pako: any;\n\n/**\n * Creates a virtual \"summary\" bill from a collection of a participant's real bills.\n * @param participantName The name of the participant.\n * @param unpaidBills The list of bills where the participant has an outstanding balance.\n * @param settings The current app settings, used for the creator's display name.\n * @returns A new Bill object representing the aggregate debt.\n */\nexport const generateAggregateBill = async (\n    participantName: string, \n    unpaidBills: Bill[], \n    settings: Settings,\n    updateMultipleBillsCallback: (billsToUpdate: Bill[]) => Promise<void>,\n    availableSlots: number\n): Promise<{ summaryBill: Bill, constituentShares: ConstituentShareInfo[], imagesDropped: number }> => {\n    \n    const constituentShares: ConstituentShareInfo[] = [];\n    const billsToUpdateMap = new Map<string, Bill>();\n\n    for (const bill of unpaidBills) {\n        let updatedBill = { ...bill };\n        let needsServerUpdate = false;\n        let keyRecord = await getBillSigningKey(updatedBill.id);\n\n        if (!updatedBill.shareInfo || !updatedBill.shareInfo.shareId || !keyRecord) {\n            needsServerUpdate = true;\n            const signingKeyPair = await cryptoService.generateSigningKeyPair();\n            await saveBillSigningKey(updatedBill.id, signingKeyPair.privateKey);\n            keyRecord = { billId: updatedBill.id, privateKey: signingKeyPair.privateKey };\n            const signingPublicKeyJwk = await cryptoService.exportKey(signingKeyPair.publicKey);\n            \n            const billEncryptionKey = await cryptoService.generateEncryptionKey();\n            const billEncryptionKeyJwk = await cryptoService.exportKey(billEncryptionKey);\n            \n            updatedBill.shareInfo = { \n                ...(updatedBill.shareInfo || {}),\n                shareId: updatedBill.shareInfo?.shareId || '', // Keep existing shareId if recreating\n                encryptionKey: billEncryptionKeyJwk, \n                signingPublicKey: signingPublicKeyJwk \n            };\n        } else {\n            // Even if a share exists, we must push the latest data to the server\n            // to ensure the summary reflects any local updates.\n            needsServerUpdate = true;\n        }\n\n        if (needsServerUpdate) {\n            if (!keyRecord || !updatedBill.shareInfo) throw new Error(`Could not find or create signing key for bill ${updatedBill.id}`);\n            const encryptionKey = await cryptoService.importEncryptionKey(updatedBill.shareInfo.encryptionKey);\n            const encryptedData = await encryptAndSignPayload(updatedBill, settings, keyRecord.privateKey, updatedBill.shareInfo.signingPublicKey, encryptionKey);\n            \n            // Use POST with shareId for updates/recreations, or POST to base for new shares\n            const urlPath = updatedBill.shareInfo.shareId ? `/share/${updatedBill.shareInfo.shareId}` : '/share';\n            \n            const shareResponse = await fetchWithRetry(await getApiUrl(urlPath), { \n                method: 'POST', \n                headers: { 'Content-Type': 'application/json' }, \n                body: JSON.stringify({ \n                    encryptedData,\n                    updateToken: updatedBill.shareInfo.updateToken\n                }) \n            });\n\n            const shareResult = await shareResponse.json();\n            if (!shareResponse.ok) throw new Error(shareResult.error || \"Failed to create/update share session for constituent bill.\");\n            \n            // Update local bill with potentially new shareId or updateToken from server\n            updatedBill.shareInfo.shareId = shareResult.shareId;\n            if (shareResult.updateToken) {\n                updatedBill.shareInfo.updateToken = shareResult.updateToken;\n            }\n            if(shareResult.lastUpdatedAt) {\n                updatedBill.lastUpdatedAt = shareResult.lastUpdatedAt;\n            }\n            billsToUpdateMap.set(updatedBill.id, updatedBill);\n        }\n\n        if (updatedBill.shareInfo) {\n            constituentShares.push({\n                originalBillId: updatedBill.id,\n                shareId: updatedBill.shareInfo.shareId,\n                publicKey: updatedBill.shareInfo.signingPublicKey,\n                encryptionKey: updatedBill.shareInfo.encryptionKey\n            });\n        }\n    }\n\n    if (billsToUpdateMap.size > 0) {\n        await updateMultipleBillsCallback(Array.from(billsToUpdateMap.values()));\n    }\n\n    const totalOwed = unpaidBills.reduce((sum, bill) => {\n        const p = bill.participants.find(p => p.name === participantName);\n        return sum + (p?.amountOwed || 0);\n    }, 0);\n\n    let imagesDropped = 0;\n    let slotsRemaining = availableSlots;\n    const sortedUnpaidBills = [...unpaidBills].sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());\n\n    const items: ReceiptItem[] = sortedUnpaidBills.map(bill => {\n        const p = bill.participants.find(p => p.name === participantName);\n        // Ensure we use the version of the bill that has the correct shareInfo if it was just created\n        const billToStore = { ...(billsToUpdateMap.get(bill.id) || bill) };\n    \n        if (billToStore.receiptImage) {\n            if (slotsRemaining > 0) {\n                slotsRemaining--;\n            } else {\n                imagesDropped++;\n                delete billToStore.receiptImage; // Omit the image if no slots are left\n            }\n        }\n    \n        return {\n            id: bill.id,\n            name: bill.description,\n            price: p?.amountOwed || 0,\n            assignedTo: [],\n            originalBillData: JSON.parse(JSON.stringify(billToStore)),\n        };\n    });\n\n    const summaryParticipant: Participant = {\n        id: `p-summary-${participantName.replace(/\\s/g, '')}`,\n        name: participantName,\n        amountOwed: totalOwed,\n        paid: totalOwed < 0.01,\n    };\n\n    const summaryBill = {\n        id: `summary-${Date.now()}`,\n        description: `Summary for ${participantName}`,\n        totalAmount: totalOwed,\n        date: new Date().toISOString(),\n        participants: [summaryParticipant],\n        items,\n        status: 'active' as const,\n    };\n    return { summaryBill, constituentShares, imagesDropped };\n}","import type { Bill, Participant, Settings } from '../../types';\nimport type { SubscriptionStatus } from '../../hooks/useAuth';\nimport * as cryptoService from '../cryptoService';\nimport { getApiUrl, fetchWithRetry } from '../api';\nimport { generateAggregateBill } from './aggregate';\nimport { base64UrlEncode, encryptAndSignPayload } from './utils';\nimport { recreateShareSession } from './session';\nimport { saveBillSigningKey, getBillSigningKey } from '../db';\n\ndeclare var pako: any;\n\nconst FREE_TIER_IMAGE_SHARE_LIMIT = 5;\n\n/**\n * Encrypts a bill and generates a one-time-use shareable URL. This version is for ephemeral\n * bills (like dashboard summaries) and does not persist any share state.\n * @param bill The bill to share.\n * @param settings The current app settings.\n * @returns A promise resolving to the shareable URL string.\n */\nexport const generateOneTimeShareLink = async (\n    unpaidBills: Bill[],\n    participantName: string,\n    settings: Settings,\n    updateMultipleBillsCallback: (bills: Bill[]) => Promise<void>,\n    allUserBills: Bill[],\n    subscriptionStatus: SubscriptionStatus\n): Promise<{ shareUrl: string; imagesDropped: number; }> => {\n    let availableSlots = Infinity;\n    if (subscriptionStatus === 'free') {\n        // Count how many *other* bills are already shared with images.\n        // The summary itself will count as one \"share\", but the constituent parts don't count individually against the limit here.\n        const usedSlots = allUserBills.filter(b => b.status === 'active' && !!b.shareInfo?.shareId && !!b.receiptImage).length;\n        availableSlots = Math.max(0, FREE_TIER_IMAGE_SHARE_LIMIT - usedSlots);\n    }\n    \n    const { summaryBill, constituentShares, imagesDropped } = await generateAggregateBill(participantName, unpaidBills, settings, updateMultipleBillsCallback, availableSlots);\n    const signingKeyPair = await cryptoService.generateSigningKeyPair();\n    const signingPublicKeyJwk = await cryptoService.exportKey(signingKeyPair.publicKey);\n    const billEncryptionKey = await cryptoService.generateEncryptionKey();\n\n    const encryptedData = await encryptAndSignPayload(summaryBill, settings, signingKeyPair.privateKey, signingPublicKeyJwk, billEncryptionKey, constituentShares);\n    const shareResponse = await fetchWithRetry(await getApiUrl('/share'), {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ encryptedData }),\n    });\n    const shareResult = await shareResponse.json();\n    if (!shareResponse.ok) throw new Error(shareResult.error || \"Failed to create share session.\");\n    const { shareId } = shareResult;\n\n    const participantId = summaryBill.participants[0].id;\n    const compressedParticipantId = pako.deflate(participantId);\n    const encryptedParticipantId = await cryptoService.encrypt(compressedParticipantId, billEncryptionKey);\n    const urlSafeEncryptedParticipantId = encryptedParticipantId.replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=/g, '');\n\n    const fragmentKey = await cryptoService.generateEncryptionKey();\n    const billEncryptionKeyJwk = await cryptoService.exportKey(billEncryptionKey);\n    const compressedBillKey = pako.deflate(JSON.stringify(billEncryptionKeyJwk));\n    const encryptedBillKey = await cryptoService.encrypt(compressedBillKey, fragmentKey);\n\n    const keyResponse = await fetchWithRetry(await getApiUrl('/onetime-key'), {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ encryptedBillKey }),\n    });\n    const keyResult = await keyResponse.json();\n    if (!keyResponse.ok) throw new Error(keyResult.error || \"Failed to create one-time key session.\");\n    const { keyId } = keyResult;\n\n    const fragmentKeyJwk = await cryptoService.exportKey(fragmentKey);\n    const encodedFragmentKey = base64UrlEncode(JSON.stringify(fragmentKeyJwk));\n\n    const url = new URL(window.location.href);\n    url.hash = `#/view-bill?shareId=${shareId}&keyId=${keyId}&fragmentKey=${encodedFragmentKey}&p=${urlSafeEncryptedParticipantId}`;\n\n    return { shareUrl: url.toString(), imagesDropped };\n};\n\n/**\n * Generates a shareable URL for a specific participant of a persistent bill.\n * It checks for an existing, unexpired one-time key for that participant. If the key has been\n * consumed on the server, it generates a new one and persists its state.\n * @param bill The bill to share.\n * @param participantId The ID of the participant to generate the link for.\n * @param settings The current app settings.\n * @param updateBillCallback A function to persist the updated bill object.\n * @returns A promise resolving to the shareable URL string and the potentially updated bill.\n */\nexport const generateShareLink = async (\n    bill: Bill,\n    participantId: string,\n    settings: Settings,\n    updateBillCallback: (updatedBill: Bill, options?: { skipSync?: boolean }) => Promise<void>\n): Promise<{ url: string; billWithNewShareInfo: Bill }> => {\n    let updatedBill = JSON.parse(JSON.stringify(bill));\n    let needsDBUpdate = false;\n\n    if (updatedBill.shareInfo && updatedBill.shareInfo.shareId) {\n        try {\n            const res = await fetchWithRetry(await getApiUrl(`/share/${updatedBill.shareInfo.shareId}`), { method: 'GET', signal: AbortSignal.timeout(4000) });\n            if (res.status === 404) {\n                console.warn(`Share session for bill ${updatedBill.id} not found on server. Recreating...`);\n                updatedBill = await recreateShareSession(updatedBill, settings, updateBillCallback);\n            } else if (!res.ok) {\n                const errorData = await res.json().catch(() => ({}));\n                throw new Error(errorData.error || `Failed to verify existing share session. Status: ${res.status}`);\n            }\n        } catch (error: any) {\n            console.error(\"Could not verify share session:\", error);\n            if (error.name === 'AbortError') {\n                throw new Error('Could not connect to the server to verify the share link. Please check your connection and try again.');\n            }\n            throw new Error(error.message || 'An unexpected error occurred while verifying the share link.');\n        }\n    }\n\n\n    if (!updatedBill.shareInfo || !updatedBill.shareInfo.shareId) {\n        needsDBUpdate = true;\n        const signingKeyPair = await cryptoService.generateSigningKeyPair();\n        await saveBillSigningKey(updatedBill.id, signingKeyPair.privateKey);\n        const signingPublicKeyJwk = await cryptoService.exportKey(signingKeyPair.publicKey);\n        \n        const billEncryptionKey = await cryptoService.generateEncryptionKey();\n        const billEncryptionKeyJwk = await cryptoService.exportKey(billEncryptionKey);\n\n        const encryptedData = await encryptAndSignPayload(updatedBill, settings, signingKeyPair.privateKey, signingPublicKeyJwk, billEncryptionKey);\n        const shareResponse = await fetchWithRetry(await getApiUrl('/share'), {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ encryptedData }),\n        });\n        const shareResult = await shareResponse.json();\n        if (!shareResponse.ok) throw new Error(shareResult.error || \"Failed to create share session.\");\n        \n        updatedBill.shareInfo = { \n            shareId: shareResult.shareId, \n            encryptionKey: billEncryptionKeyJwk, \n            signingPublicKey: signingPublicKeyJwk,\n            updateToken: shareResult.updateToken,\n        };\n    }\n    \n    if (!updatedBill.participantShareInfo) {\n        updatedBill.participantShareInfo = {};\n    }\n\n    const existingShareInfo = updatedBill.participantShareInfo[participantId];\n    const now = Date.now();\n    let keyIsAvailableOnServer = false;\n\n    if (existingShareInfo && now < existingShareInfo.expires) {\n        try {\n            const statusResponse = await fetchWithRetry(await getApiUrl(`/onetime-key/${existingShareInfo.keyId}/status`));\n            if (statusResponse.ok) {\n                const { status } = await statusResponse.json();\n                if (status === 'available') {\n                    keyIsAvailableOnServer = true;\n                }\n            }\n        } catch (e) {\n            console.error(\"Failed to check key status, will generate a new one.\", e);\n            keyIsAvailableOnServer = false;\n        }\n    }\n\n    if (!keyIsAvailableOnServer) {\n        needsDBUpdate = true;\n        const billEncryptionKey = await cryptoService.importEncryptionKey(updatedBill.shareInfo.encryptionKey);\n        const fragmentKey = await cryptoService.generateEncryptionKey();\n        const billEncryptionKeyJwk = await cryptoService.exportKey(billEncryptionKey);\n        const compressedBillKey = pako.deflate(JSON.stringify(billEncryptionKeyJwk));\n        const encryptedBillKey = await cryptoService.encrypt(compressedBillKey, fragmentKey);\n\n        const keyResponse = await fetchWithRetry(await getApiUrl('/onetime-key'), {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ encryptedBillKey }),\n        });\n        const keyResult = await keyResponse.json();\n        if (!keyResponse.ok) throw new Error(keyResult.error || \"Failed to create one-time key session.\");\n        \n        const newFragmentKeyJwk = await cryptoService.exportKey(fragmentKey);\n\n        updatedBill.participantShareInfo[participantId] = {\n            keyId: keyResult.keyId,\n            fragmentKey: newFragmentKeyJwk,\n            expires: now + 5 * 60 * 1000,\n        };\n    }\n\n    if (needsDBUpdate) {\n        await updateBillCallback(updatedBill, { skipSync: true });\n    }\n    \n    const billEncryptionKey = await cryptoService.importEncryptionKey(updatedBill.shareInfo.encryptionKey);\n    const compressedParticipantId = pako.deflate(participantId);\n    const encryptedParticipantId = await cryptoService.encrypt(compressedParticipantId, billEncryptionKey);\n    const urlSafeEncryptedParticipantId = encryptedParticipantId.replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=/g, '');\n\n    const finalShareInfo = updatedBill.participantShareInfo[participantId];\n    const encodedFragmentKey = base64UrlEncode(JSON.stringify(finalShareInfo.fragmentKey));\n\n    const url = new URL(window.location.href);\n    url.hash = `#/view-bill?shareId=${updatedBill.shareInfo.shareId}&keyId=${finalShareInfo.keyId}&fragmentKey=${encodedFragmentKey}&p=${urlSafeEncryptedParticipantId}`;\n\n    return { url: url.toString(), billWithNewShareInfo: updatedBill };\n};","import type { RecurringBill } from '../types';\n\n/**\n * Checks if the browser supports basic notifications and service workers.\n */\nexport const isSupported = (): boolean => {\n  return 'Notification' in window && 'serviceWorker' in navigator;\n};\n\n/**\n * Checks if the browser supports reliable, scheduled notifications via Triggers.\n */\nconst hasTriggerSupport = (): boolean => {\n  return isSupported() && 'showTrigger' in Notification.prototype;\n}\n\n/**\n * Requests permission from the user to show notifications.\n * @returns A promise that resolves with the permission status.\n */\nexport const requestPermission = async (): Promise<NotificationPermission> => {\n  if (!isSupported()) {\n    console.warn(\"Notifications are not supported in this browser.\");\n    return 'denied';\n  }\n  return Notification.requestPermission();\n};\n\nconst getNotificationTag = (billId: string) => `bill-reminder-${billId}`;\n\n/**\n * Schedules a notification for a recurring bill, using the best available method.\n * It will first cancel any existing notification for the same bill.\n * @param bill The recurring bill to schedule a reminder for.\n * @param daysBefore The number of days before the due date to show the notification.\n */\nexport const scheduleNotification = async (bill: RecurringBill, daysBefore: number): Promise<void> => {\n  if (!isSupported() || Notification.permission !== 'granted') return;\n\n  const registration = await navigator.serviceWorker.ready;\n  const tag = getNotificationTag(bill.id);\n  const dueDate = new Date(bill.nextDueDate);\n  // Set time to a reasonable hour like 9 AM local time for the notification\n  dueDate.setHours(9, 0, 0, 0); \n  const triggerTimestamp = dueDate.getTime() - (daysBefore * 24 * 60 * 60 * 1000);\n\n  // Don't schedule notifications for dates in the past\n  if (triggerTimestamp < Date.now()) {\n    console.log(`Skipping notification for \"${bill.description}\" as its reminder date is in the past.`);\n    // Ensure any old scheduled notifications are cancelled just in case.\n    await cancelNotification(bill.id);\n    return;\n  }\n\n  const title = 'Upcoming Bill Reminder';\n  const options = {\n    body: `Your \"${bill.description}\" bill is due in ${daysBefore} day${daysBefore > 1 ? 's' : ''}.`,\n    tag: tag,\n    icon: '/icon.svg',\n    // Make notification silent on some platforms\n    silent: true,\n  };\n\n  // Natively scheduled (reliable) path\n  if (hasTriggerSupport()) {\n    console.log(`[App] Scheduling notification for \"${bill.description}\" using TimestampTrigger.`);\n    // Cancel any previously scheduled native notification for this bill before rescheduling.\n    const existingNotifications = await registration.getNotifications({ tag });\n    existingNotifications.forEach(notification => notification.close());\n\n    try {\n      await registration.showNotification(title, {\n        ...options,\n        // @ts-ignore - showTrigger is not yet in the default TS DOM libs\n        showTrigger: new (window as any).TimestampTrigger(triggerTimestamp),\n      });\n    } catch (error) {\n      console.error(\"[App] Error scheduling with TimestampTrigger:\", error);\n    }\n  } \n  // setTimeout fallback (less reliable) path\n  else {\n    console.log(`[App] Scheduling notification for \"${bill.description}\" via SW setTimeout fallback.`);\n    // We still need to cancel any existing *native* scheduled notifications\n    // that might have been created before, just in case.\n    const existingNotifications = await registration.getNotifications({ tag });\n    existingNotifications.forEach(notification => notification.close());\n    \n    // Post a message to the SW to use setTimeout. The SW will handle clearing previous timeouts.\n    if (navigator.serviceWorker.controller) {\n      navigator.serviceWorker.controller.postMessage({\n        type: 'schedule-notification',\n        title,\n        options,\n        triggerTimestamp,\n        tag,\n      });\n    } else {\n        console.warn(\"[App] Service worker controller not available. Cannot schedule fallback notification.\");\n    }\n  }\n};\n\n/**\n * Cancels a scheduled notification for a given bill ID, regardless of the method used.\n * @param billId The ID of the bill whose notification should be canceled.\n */\nexport const cancelNotification = async (billId: string): Promise<void> => {\n  if (!isSupported()) return;\n\n  const registration = await navigator.serviceWorker.ready;\n  const tag = getNotificationTag(billId);\n\n  // 1. Attempt to cancel using the native API. This works for Trigger-based notifications.\n  const notifications = await registration.getNotifications({ tag });\n  if (notifications.length > 0) {\n    notifications.forEach(notification => notification.close());\n    console.log(`[App] Canceled native scheduled notification for bill ID ${billId}`);\n  }\n\n  // 2. Also send a message to the SW to clear any pending setTimeout fallback.\n  if (navigator.serviceWorker.controller) {\n    navigator.serviceWorker.controller.postMessage({\n      type: 'cancel-notification',\n      tag,\n    });\n  }\n};","import { useEffect } from 'react';\nimport { pollImportedBills, pollOwnedSharedBills } from '../../services/shareService';\nimport * as notificationService from '../../services/notificationService';\nimport { View } from '../../types';\nimport type { Bill, ImportedBill, RecurringBill, Settings } from '../../types';\n\ninterface SideEffectsDependencies {\n    bills: Bill[];\n    importedBills: ImportedBill[];\n    recurringBills: RecurringBill[];\n    settings: Settings;\n    updateMultipleImportedBills: (bills: ImportedBill[]) => void;\n    originalUpdateMultipleBills: (bills: Bill[]) => Promise<Bill[]>;\n    view: View;\n}\n\nexport const useSideEffects = ({\n    bills, importedBills, recurringBills, settings,\n    updateMultipleImportedBills, originalUpdateMultipleBills,\n    view\n}: SideEffectsDependencies) => {\n    \n    // Polling for imported bills\n    useEffect(() => {\n        const poll = async () => {\n            // Pause polling on detail views and the share view to prevent request races\n            if (view === View.BillDetails || view === View.ImportedBillDetails || view === View.ViewShared) {\n                return;\n            }\n            const activeImported = importedBills.filter(b => b.status === 'active');\n            if (activeImported.length > 0) {\n                const billsToUpdate = await pollImportedBills(activeImported);\n                if (billsToUpdate.length > 0) await updateMultipleImportedBills(billsToUpdate);\n            }\n        };\n        const intervalId = setInterval(poll, 30 * 1000);\n        poll(); // Initial poll\n        return () => clearInterval(intervalId);\n    }, [importedBills, updateMultipleImportedBills, view]);\n\n    // Polling for owned bills\n    useEffect(() => {\n        const poll = async () => {\n            // Pause polling on detail views and the share view to prevent request races\n            if (view === View.BillDetails || view === View.ImportedBillDetails || view === View.ViewShared) {\n                return;\n            }\n            const ownedShared = bills.filter(b => b.shareInfo?.shareId);\n            if (ownedShared.length > 0) {\n                const billsToUpdate = await pollOwnedSharedBills(ownedShared);\n                if (billsToUpdate.length > 0) await originalUpdateMultipleBills(billsToUpdate);\n            }\n        };\n        const intervalId = setInterval(poll, 5 * 60 * 1000);\n        poll(); // Initial poll\n        return () => clearInterval(intervalId);\n    }, [bills, originalUpdateMultipleBills, view]);\n\n    // Notification syncing\n    useEffect(() => {\n        if (!notificationService.isSupported()) return;\n        const sync = async () => {\n            if (settings.notificationsEnabled && Notification.permission === 'granted') {\n                const active = recurringBills.filter(b => b.status === 'active');\n                for (const bill of active) await notificationService.scheduleNotification(bill, settings.notificationDays);\n                const registration = await navigator.serviceWorker.ready;\n                const scheduled = await registration.getNotifications();\n                for (const n of scheduled) {\n                    const billId = n.tag.replace('bill-reminder-', '');\n                    if (!active.some(b => b.id === billId)) await notificationService.cancelNotification(billId);\n                }\n            } else {\n                for (const bill of recurringBills) await notificationService.cancelNotification(bill.id);\n            }\n        };\n        sync().catch(err => console.error(\"Failed to sync notifications:\", err));\n    }, [settings.notificationsEnabled, settings.notificationDays, recurringBills]);\n};","import { useCallback } from 'react';\nimport { View } from '../../types';\nimport type { Bill, ImportedBill, RecurringBill, RequestConfirmationFn, Settings, Group } from '../../types';\nimport type { SubscriptionStatus } from '../../hooks/useAuth';\nimport { useAppControl } from '../../contexts/AppControlContext';\nimport { syncSharedBillUpdate, reactivateShare } from '../../services/shareService';\nimport { getApiUrl, fetchWithRetry } from '../../services/api';\nimport { postMessage } from '../../services/broadcastService';\n\nconst FREE_TIER_IMAGE_SHARE_LIMIT = 5;\n\n// Define a type for all the data-modifying functions from the base hooks\ninterface DataMutators {\n    originalUpdateBill: (bill: Bill) => Promise<Bill>;\n    originalUpdateMultipleBills: (bills: Bill[]) => Promise<Bill[]>;\n    addBill: (billData: Omit<Bill, 'id' | 'status'>) => Promise<void>;\n    deleteBill: (billId: string) => Promise<void>;\n    addImportedBill: (bill: ImportedBill) => Promise<void>;\n    deleteImportedBill: (billId: string) => Promise<void>;\n    addRecurringBill: (billData: Omit<RecurringBill, 'id' | 'status' | 'nextDueDate'>) => Promise<RecurringBill>;\n    updateRecurringBill: (bill: RecurringBill) => Promise<void>;\n    deleteRecurringBill: (billId: string) => Promise<void>;\n    updateRecurringBillDueDate: (billId: string) => Promise<void>;\n    addGroup: (groupData: Omit<Group, 'id' | 'lastUpdatedAt' | 'popularity'>) => Promise<Group>;\n    updateGroup: (group: Group) => Promise<void>;\n    deleteGroup: (groupId: string) => Promise<void>;\n    incrementGroupPopularity: (groupId: string) => Promise<void>;\n}\n\ninterface HandlerDependencies extends DataMutators {\n    bills: Bill[];\n    recurringBills: RecurringBill[];\n    settings: Settings;\n    subscriptionStatus: SubscriptionStatus;\n    showNotification: (message: string, type?: 'success' | 'info' | 'error') => void;\n    requestConfirmation: RequestConfirmationFn;\n    navigate: (view: View, params?: any) => void;\n}\n\nexport const useDataHandlers = ({\n    bills, recurringBills, settings, subscriptionStatus,\n    showNotification, requestConfirmation, navigate,\n    originalUpdateBill, originalUpdateMultipleBills, addBill, deleteBill,\n    addImportedBill, deleteImportedBill,\n    addRecurringBill, updateRecurringBill, deleteRecurringBill, updateRecurringBillDueDate,\n    addGroup, updateGroup, deleteGroup, incrementGroupPopularity\n}: HandlerDependencies) => {\n    \n    const updateBill = useCallback(async (bill: Bill, options?: { skipSync?: boolean }): Promise<Bill> => {\n        const updatedBill = await originalUpdateBill(bill);\n        \n        if (options?.skipSync) {\n            postMessage({ type: 'bills-updated' }); // Still notify other tabs of the local change\n            return updatedBill;\n        }\n\n        (async () => {\n            try {\n                if (updatedBill.shareInfo?.shareId) {\n                    console.log(`[Sync] Initiating update for shared bill: ${updatedBill.id}`);\n                    const res = await fetchWithRetry(await getApiUrl(`/share/${updatedBill.shareInfo.shareId}`), { \n                        method: 'GET', \n                        signal: AbortSignal.timeout(4000) \n                    });\n                    \n                    if (res.status === 404) {\n                        console.log(`[Sync] Share for bill ${updatedBill.id} not found on server. Re-creating...`);\n                        const { lastUpdatedAt, updateToken } = await reactivateShare(updatedBill, settings);\n                        await originalUpdateBill({ ...updatedBill, shareStatus: 'live', lastUpdatedAt, shareInfo: { ...updatedBill.shareInfo!, updateToken } });\n                        console.log(`[Sync] Successfully re-created share for bill ${updatedBill.id}.`);\n                    } else if (res.ok) {\n                        console.log(`[Sync] Share for bill ${updatedBill.id} is live. Pushing update...`);\n                        await syncSharedBillUpdate(updatedBill, settings, originalUpdateBill);\n                        console.log(`[Sync] Successfully synced update for bill ${updatedBill.id}.`);\n                    } else {\n                        const errorData = await res.json().catch(() => ({}));\n                        throw new Error(errorData.error || `Server returned status ${res.status} during share check.`);\n                    }\n                }\n            } catch (e: any) {\n                console.error(`[Sync] Failed to sync shared bill update for bill ID ${updatedBill.id}:`, e);\n                showNotification(e.message || `Failed to sync update for \"${updatedBill.description}\"`, 'error');\n                await originalUpdateBill({ ...updatedBill, shareStatus: 'error' });\n            } finally {\n                // Broadcast that bills have been updated after the sync attempt completes.\n                postMessage({ type: 'bills-updated' });\n            }\n        })();\n        return updatedBill;\n    }, [originalUpdateBill, settings, showNotification]);\n\n    const updateMultipleBills = useCallback(async (billsToUpdate: Bill[]): Promise<void> => {\n        const updatedBills = await originalUpdateMultipleBills(billsToUpdate);\n        (async () => {\n            try {\n                for (const bill of updatedBills) {\n                    if (bill.shareInfo?.shareId) {\n                        console.log(`[Sync] Initiating update for shared bill in batch: ${bill.id}`);\n                        const res = await fetchWithRetry(await getApiUrl(`/share/${bill.shareInfo.shareId}`), { \n                            method: 'GET', \n                            signal: AbortSignal.timeout(4000) \n                        });\n\n                        if (res.status === 404) {\n                             console.log(`[Sync] Share for bill ${bill.id} not found on server. Re-creating...`);\n                            const { lastUpdatedAt, updateToken } = await reactivateShare(bill, settings);\n                            await originalUpdateBill({ ...bill, shareStatus: 'live', lastUpdatedAt, shareInfo: { ...bill.shareInfo!, updateToken } });\n                        } else if (res.ok) {\n                            await syncSharedBillUpdate(bill, settings, originalUpdateBill);\n                        } else {\n                           throw new Error(`Server returned status ${res.status} during share check.`);\n                        }\n                    }\n                }\n            } catch (e: any) {\n                console.error(`[Sync] Failed to sync a shared bill during batch update:`, e);\n                // Do not throw here, as some bills may have succeeded.\n                // The individual bill that failed will have its status updated to 'error' inside the loop.\n            } finally {\n                // Broadcast once after all sync attempts are complete.\n                postMessage({ type: 'bills-updated' });\n            }\n        })();\n    }, [originalUpdateMultipleBills, settings, showNotification, originalUpdateBill]);\n\n    const checkAndMakeSpaceForImageShare = useCallback(async (billToShare: Bill): Promise<boolean> => {\n        if (subscriptionStatus !== 'free' || !billToShare.receiptImage) {\n            return true;\n        }\n\n        const sharedImageBills = bills.filter(b => \n            b.id !== billToShare.id &&\n            b.status === 'active' && \n            !!b.shareInfo?.shareId && \n            !!b.receiptImage\n        );\n\n        if (sharedImageBills.length < FREE_TIER_IMAGE_SHARE_LIMIT) {\n            return true;\n        }\n\n        const oldestBill = [...sharedImageBills].sort((a, b) => (a.lastUpdatedAt || 0) - (b.lastUpdatedAt || 0))[0];\n        \n        showNotification(`Free image limit reached. Removing image from \"${oldestBill.description}\" to make space.`, 'info');\n        await new Promise(resolve => setTimeout(resolve, 2000));\n\n        try {\n            await updateBill({ ...oldestBill, receiptImage: undefined });\n            showNotification('Space freed. Proceeding with share.', 'success');\n            return true;\n        } catch (error: any) {\n            console.error(\"Failed to automatically downgrade bill:\", error);\n            showNotification(`Error: ${error.message || 'Could not make space for the new image.'}`, 'error');\n            return false;\n        }\n    }, [subscriptionStatus, bills, updateBill, showNotification]);\n\n    const handleSaveBill = useCallback(async (billData: Omit<Bill, 'id' | 'status'>, fromTemplateId?: string) => {\n        await addBill(billData);\n\n        if (billData.groupId) {\n            await incrementGroupPopularity(billData.groupId);\n        }\n\n        if (fromTemplateId) {\n            await updateRecurringBillDueDate(fromTemplateId);\n            const template = recurringBills.find(rb => rb.id === fromTemplateId);\n            showNotification(`Created bill from \"${template?.description || 'template'}\"`);\n        } else {\n            showNotification('Bill created successfully!');\n        }\n    }, [addBill, incrementGroupPopularity, updateRecurringBillDueDate, recurringBills, showNotification]);\n    \n    const handleSelectBillFromBudget = useCallback((billInfo: { billId: string; isImported: boolean }) => {\n        if (billInfo.isImported) {\n            navigate(View.ImportedBillDetails, { importedBillId: billInfo.billId });\n        } else {\n            navigate(View.BillDetails, { billId: billInfo.billId });\n        }\n    }, [navigate]);\n\n    const handleSaveRecurringBill = useCallback(async (billData: Omit<RecurringBill, 'id' | 'status' | 'nextDueDate'>) => {\n        await addRecurringBill(billData);\n        showNotification('Recurring template created!');\n    }, [addRecurringBill, showNotification]);\n    \n    const handleUpdateRecurringBill = useCallback(async (bill: RecurringBill) => {\n        await updateRecurringBill(bill);\n        showNotification('Template updated successfully!');\n    }, [updateRecurringBill, showNotification]);\n\n    const handleSaveGroup = useCallback(async (groupData: Omit<Group, 'id' | 'lastUpdatedAt' | 'popularity'>) => {\n        await addGroup(groupData);\n        showNotification(`Group \"${groupData.name}\" created!`);\n    }, [addGroup, showNotification]);\n\n    const handleUpdateGroup = useCallback(async (group: Group) => {\n        await updateGroup(group);\n        showNotification(`Group \"${group.name}\" updated!`);\n    }, [updateGroup, showNotification]);\n    \n    const handleDeleteBill = useCallback((billId: string) => requestConfirmation('Delete Bill?', 'This action is permanent.', () => { deleteBill(billId); showNotification('Bill deleted.'); }, { confirmText: 'Delete', confirmVariant: 'danger' }), [requestConfirmation, deleteBill, showNotification]);\n    const handleDeleteImportedBill = useCallback((billId: string) => requestConfirmation('Delete Imported Bill?', 'This removes it from your dashboard.', () => { deleteImportedBill(billId); showNotification('Imported bill deleted.'); }, { confirmText: 'Delete', confirmVariant: 'danger' }), [requestConfirmation, deleteImportedBill, showNotification]);\n    const handleDeleteRecurringBill = useCallback((billId: string) => requestConfirmation('Delete Template?', 'This action is permanent.', () => { deleteRecurringBill(billId); showNotification('Template deleted.'); }, { confirmText: 'Delete', confirmVariant: 'danger' }), [requestConfirmation, deleteRecurringBill, showNotification]);\n    const handleDeleteGroup = useCallback((groupId: string) => requestConfirmation('Delete Group?', 'This action is permanent.', () => { deleteGroup(groupId); showNotification('Group deleted.'); }, { confirmText: 'Delete', confirmVariant: 'danger' }), [requestConfirmation, deleteGroup, showNotification]);\n\n    const handleReshareBill = useCallback(async (billId: string) => {\n        const bill = bills.find(b => b.id === billId);\n        if (!bill) { showNotification(\"Bill not found.\", 'error'); return; }\n        try {\n            const { lastUpdatedAt, updateToken } = await reactivateShare(bill, settings);\n            await updateBill({ ...bill, shareStatus: 'live', lastUpdatedAt, shareInfo: { ...bill.shareInfo!, updateToken } });\n            showNotification(\"Bill reshared successfully!\");\n        } catch (e: any) { showNotification(e.message || \"Failed to reshare.\", 'error'); }\n    }, [bills, settings, updateBill, showNotification]);\n    \n    const createFromTemplate = useCallback((template: RecurringBill) => {\n        const newBill: Omit<Bill, 'id' | 'status'> = { ...template, participants: template.participants.map(p => ({ ...p, paid: false })), date: new Date().toISOString(), totalAmount: template.totalAmount || 0 };\n        addBill(newBill);\n        updateRecurringBillDueDate(template.id);\n        showNotification(`Created bill from \"${template.description}\"`);\n    }, [addBill, updateRecurringBillDueDate, showNotification]);\n    \n    return {\n        updateBill,\n        updateMultipleBills,\n        checkAndMakeSpaceForImageShare,\n        handleSaveBill,\n        handleSelectBillFromBudget,\n        handleSaveRecurringBill,\n        handleUpdateRecurringBill,\n        handleSaveGroup,\n        handleUpdateGroup,\n        handleDeleteBill,\n        handleDeleteImportedBill,\n        handleDeleteRecurringBill,\n        handleDeleteGroup,\n        handleReshareBill,\n        createFromTemplate,\n    };\n};","import { useEffect, useMemo } from 'react';\nimport { View } from '../types';\n// Import base hooks\nimport { useBills } from './useBills';\nimport { useImportedBills } from './useImportedBills';\nimport { useRecurringBills } from './useRecurringBills';\nimport { useGroups } from './useGroups';\nimport { useCategories } from './useCategories';\nimport { useSettings } from './useSettings';\nimport { useTheme } from './useTheme';\nimport { useAuth } from './useAuth';\nimport { usePwaInstall } from './usePwaInstall';\nimport { useAppControl } from '../contexts/AppControlContext';\n// Import new refactored hooks\nimport { useRouting } from './appLogic/useRouting';\nimport { useModalStates } from './appLogic/useModalStates';\nimport { useDashboardState } from './appLogic/useDashboardState';\nimport { useDerivedData } from './appLogic/useDerivedData';\nimport { useSideEffects } from './appLogic/useSideEffects';\nimport { useDataHandlers } from './appLogic/useDataHandlers';\n\nexport const useAppLogic = () => {\n    // --- 1. Base Data Hooks ---\n    const settingsHook = useSettings();\n    const billsHook = useBills();\n    const importedBillsHook = useImportedBills();\n    const recurringBillsHook = useRecurringBills();\n    const groupsHook = useGroups();\n    const categoriesHook = useCategories();\n    const themeHook = useTheme();\n    const authHook = useAuth();\n    const pwaInstallHook = usePwaInstall();\n    const appControlHook = useAppControl();\n\n    // --- 2. State & UI Logic Hooks ---\n    const modalStates = useModalStates();\n    const dashboardState = useDashboardState(settingsHook.settings, settingsHook.updateSettings);\n    const routing = useRouting({\n        bills: billsHook.bills,\n        recurringBills: recurringBillsHook.recurringBills,\n        groups: groupsHook.groups\n    });\n    \n    // De-structure for easier access and to manage dependencies\n    const { view, navigate } = routing;\n\n    useEffect(() => {\n        if (view !== View.Dashboard) {\n            dashboardState.setSelectedParticipant(null);\n            // FIX: Updated to use the renamed prop 'onSetDashboardSummaryFilter' from the useDashboardState hook.\n            dashboardState.onSetDashboardSummaryFilter('total');\n        }\n    }, [view, dashboardState.setSelectedParticipant, dashboardState.onSetDashboardSummaryFilter]);\n\n    // --- 3. Derived Data ---\n    const derivedData = useDerivedData({\n        bills: billsHook.bills,\n        importedBills: importedBillsHook.importedBills,\n        recurringBills: recurringBillsHook.recurringBills,\n        groups: groupsHook.groups,\n        categories: categoriesHook.categories,\n        settings: settingsHook.settings,\n        isBillsLoading: billsHook.isLoading,\n        isImportedLoading: importedBillsHook.isLoading,\n        isRecurringLoading: recurringBillsHook.isLoading,\n        isSettingsLoading: settingsHook.isLoading,\n        isGroupsLoading: groupsHook.isLoading,\n        isCategoriesLoading: categoriesHook.isLoading,\n        dashboardStatusFilter: dashboardState.dashboardStatusFilter,\n        budgetDate: dashboardState.budgetDate,\n    });\n\n    // --- 4. Side Effects (Polling, Notifications) ---\n    useSideEffects({\n        bills: billsHook.bills,\n        importedBills: importedBillsHook.importedBills,\n        recurringBills: recurringBillsHook.recurringBills,\n        settings: settingsHook.settings,\n        updateMultipleImportedBills: importedBillsHook.updateMultipleImportedBills,\n        originalUpdateMultipleBills: billsHook.updateMultipleBills,\n        // FIX: The 'view' property was missing but is required by the useSideEffects hook.\n        view,\n    });\n\n    // --- 5. Data Handlers ---\n    const dataHandlers = useDataHandlers({\n        bills: billsHook.bills,\n        recurringBills: recurringBillsHook.recurringBills,\n        settings: settingsHook.settings,\n        subscriptionStatus: authHook.subscriptionStatus,\n        showNotification: appControlHook.showNotification,\n        requestConfirmation: modalStates.requestConfirmation,\n        navigate: routing.navigate,\n        originalUpdateBill: billsHook.updateBill,\n        originalUpdateMultipleBills: billsHook.updateMultipleBills,\n        addBill: billsHook.addBill,\n        deleteBill: billsHook.deleteBill,\n        addImportedBill: importedBillsHook.addImportedBill,\n        deleteImportedBill: importedBillsHook.deleteImportedBill,\n        addRecurringBill: recurringBillsHook.addRecurringBill,\n        updateRecurringBill: recurringBillsHook.updateRecurringBill,\n        deleteRecurringBill: recurringBillsHook.deleteRecurringBill,\n        updateRecurringBillDueDate: recurringBillsHook.updateRecurringBillDueDate,\n        addGroup: groupsHook.addGroup,\n        updateGroup: groupsHook.updateGroup,\n        deleteGroup: groupsHook.deleteGroup,\n        incrementGroupPopularity: groupsHook.incrementGroupPopularity,\n    });\n\n    // --- 6. Compose and Return Final State ---\n    const currentBill = useMemo(() => billsHook.bills.find(b => b.id === routing.params.billId), [billsHook.bills, routing.params.billId]);\n    const currentImportedBill = useMemo(() => importedBillsHook.importedBills.find(b => b.id === routing.params.importedBillId), [importedBillsHook.importedBills, routing.params.importedBillId]);\n\n    return {\n        // Base hook data and setters\n        ...settingsHook,\n        ...billsHook,\n        ...importedBillsHook,\n        ...recurringBillsHook,\n        ...groupsHook,\n        ...categoriesHook,\n        ...themeHook,\n        ...authHook,\n        ...pwaInstallHook,\n        ...appControlHook,\n        // State hooks\n        ...modalStates,\n        ...dashboardState,\n        // Routing\n        ...routing,\n        // Derived data\n        ...derivedData,\n        // Handlers\n        ...dataHandlers,\n        // Specific current items for router\n        currentBill,\n        currentImportedBill,\n    };\n};\n","import React, { useState, useRef, useEffect } from 'react';\nimport { View, SettingsSection } from '../types';\n\ninterface HeaderProps {\n  navigate: (view: View, params?: any) => void;\n  onOpenSettings: (section: SettingsSection) => void;\n  currentView: View;\n  canInstall: boolean;\n  promptInstall: () => void;\n}\n\nconst Header: React.FC<HeaderProps> = ({ navigate, onOpenSettings, currentView, canInstall, promptInstall }) => {\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\n  const menuRef = useRef<HTMLDivElement>(null);\n\n  const sections: { id: SettingsSection; title: string; icon: string; }[] = [\n    { id: 'personalization', title: 'Personalization', icon: '🎨' },\n    { id: 'payments', title: 'Payment Methods', icon: '💳' },\n    { id: 'budgeting', title: 'Budgeting', icon: '📊' },\n    { id: 'reminders', title: 'Bill Reminders', icon: '🔔' },\n    { id: 'subscription', title: 'Subscription', icon: '⭐' },\n    { id: 'about', title: 'About & Support', icon: 'ℹ️' },\n    { id: 'data', title: 'Data & Tools', icon: '🛠️' },\n    { id: 'sync', title: 'Sync Devices', icon: '🔄' },\n    { id: 'disclaimer', title: 'Disclaimer & Privacy', icon: '⚖️' },\n  ];\n\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\n        setIsMenuOpen(false);\n      }\n    };\n    if (isMenuOpen) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [isMenuOpen]);\n\n  const handleMenuAction = (action: () => void) => {\n    action();\n    setIsMenuOpen(false);\n  };\n\n  return (\n    <header className=\"bg-white/80 dark:bg-slate-900/80 backdrop-blur-lg sticky top-0 z-40 w-full border-b border-slate-200 dark:border-slate-700\">\n      <div className=\"container mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"flex items-center h-16\">\n          {/* Left Item */}\n          <div className=\"flex-shrink-0\">\n            <div className=\"flex items-center gap-2 cursor-pointer\" onClick={() => navigate(View.Dashboard)}>\n              <svg className=\"h-8 w-8 text-teal-500\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                  <path d=\"M17 9V7C17 5.89543 16.1046 5 15 5H5C3.89543 5 3 5.89543 3 7V13C3 14.1046 3.89543 15 5 15H7M9 19H19C20.1046 19 21 18.1046 21 17V11C21 9.89543 20.1046 9 19 9H9C7.89543 9 7 9.89543 7 11V17C7 18.1046 7.89543 19 9 19ZM16 14C16 15.1046 15.1046 16 14 16C12.8954 16 12 15.1046 12 14C12 12.8954 12.8954 12 14 12C15.1046 12 16 12.8954 16 14Z\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n              </svg>\n              <h1 className=\"text-xl font-bold text-slate-800 dark:text-slate-100\">SharedBills</h1>\n            </div>\n          </div>\n\n          {/* Spacer/Center Item */}\n          <div className=\"flex-grow flex justify-center\">\n            {currentView === View.Dashboard && (\n              <button\n                id=\"create-new-bill-button\"\n                onClick={() => navigate(View.CreateBill)}\n                className=\"p-2 text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full\"\n                aria-label=\"Create new bill\"\n              >\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-7 w-7\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth=\"2.5\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M12 4v16m8-8H4\" /></svg>\n              </button>\n            )}\n          </div>\n\n          {/* Right Item */}\n          <div ref={menuRef} className=\"relative flex-shrink-0\">\n            <button onClick={() => setIsMenuOpen(prev => !prev)} className=\"p-2 text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg\" aria-label=\"More options\">\n               <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M12 6.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 12.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 18.75a.75.75 0 110-1.5.75.75 0 010 1.5z\" /></svg>\n            </button>\n            {isMenuOpen && (\n              <div className=\"absolute top-full right-0 mt-2 w-64 bg-white dark:bg-slate-800 rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 py-1 z-20\">\n                {sections.map(section => (\n                  <button\n                    key={section.id}\n                    onClick={() => handleMenuAction(() => onOpenSettings(section.id))}\n                    className=\"w-full text-left flex items-center justify-between gap-3 px-4 py-2 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700\"\n                  >\n                    <div className=\"flex items-center gap-3\">\n                      <span>{section.icon}</span>\n                      <span>{section.title}</span>\n                    </div>\n                  </button>\n                ))}\n                {canInstall && (\n                    <>\n                        <div className=\"my-1 h-px bg-slate-100 dark:bg-slate-700\"></div>\n                        <button\n                          onClick={() => handleMenuAction(promptInstall)}\n                          className=\"w-full text-left flex items-center gap-3 px-4 py-2 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700\"\n                        >\n                            <span className=\"text-base\">📥</span>\n                            <span>Install App</span>\n                        </button>\n                    </>\n                )}\n                <div className=\"my-1 h-px bg-slate-100 dark:bg-slate-700\"></div>\n                <button\n                  onClick={() => handleMenuAction(() => navigate(View.Settings))}\n                  className=\"w-full text-left flex items-center gap-3 px-4 py-2 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700\"\n                >\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth=\"2\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z\" /><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" /></svg>\n                    <span>All Settings</span>\n                </button>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </header>\n  );\n};\n\nexport default Header;","import React, { useState } from 'react';\nimport type { Participant } from '../types';\n\ninterface ShareActionSheetProps {\n    participant: Participant;\n    onClose: () => void;\n    shareContext: 'bill' | 'dashboard';\n    // Simple reminder handlers\n    onShareSms: (participant: Participant) => void;\n    onShareEmail: (participant: Participant) => void;\n    onShareGeneric: (participant: Participant) => void;\n    // Aggregate share link handlers\n    onShareLinkSms?: (participant: Participant) => Promise<void>;\n    onShareLinkEmail?: (participant: Participant) => Promise<void>;\n    onShareLinkGeneric?: (participant: Participant) => Promise<void>;\n    // Navigation handler\n    onViewDetails?: () => void;\n}\n\ntype ShareState = 'choose' | 'reminder' | 'link';\n\nconst ActionButton: React.FC<{onClick: () => void; disabled?: boolean; icon: React.ReactNode; text: string; subtext?: string}> = ({ onClick, disabled, icon, text, subtext }) => (\n    <button \n        onClick={onClick}\n        disabled={disabled}\n        className=\"w-full flex items-center gap-4 text-left p-4 bg-white dark:bg-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-600 transition-colors disabled:opacity-50 disabled:cursor-wait cursor-pointer\"\n    >\n        <div className=\"flex-shrink-0 w-8 h-8 flex items-center justify-center\">{icon}</div>\n        <div className=\"flex-grow\">\n            <span className=\"font-semibold text-slate-800 dark:text-slate-100\">{text}</span>\n            {subtext && <p className=\"text-xs text-slate-500 dark:text-slate-400\">{subtext}</p>}\n        </div>\n        {disabled && <svg className=\"animate-spin h-5 w-5 text-teal-500\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\"><circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle><path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path></svg>}\n    </button>\n);\n\n\nconst ShareActionSheet: React.FC<ShareActionSheetProps> = (props) => {\n    const { participant, shareContext, onClose, onShareSms, onShareEmail, onShareGeneric, onShareLinkSms, onShareLinkEmail, onShareLinkGeneric, onViewDetails } = props;\n    const [shareState, setShareState] = useState<ShareState>('choose');\n    const [isGeneratingLink, setIsGeneratingLink] = useState(false);\n    const isShareApiAvailable = typeof navigator !== 'undefined' && !!navigator.share;\n\n    React.useEffect(() => {\n        document.body.style.overflow = 'hidden';\n        return () => { document.body.style.overflow = 'unset'; };\n    }, []);\n\n    const handleShareLink = async (shareFn?: (p: Participant) => Promise<void>) => {\n        if (!shareFn) return;\n        setIsGeneratingLink(true);\n        try {\n            await shareFn(participant);\n        } catch (e) {\n            // Error handling is done in the parent component\n        } finally {\n            setIsGeneratingLink(false);\n            onClose(); // Close sheet after action\n        }\n    };\n\n    const renderChooseState = () => (\n      <div className=\"space-y-4\">\n        <ActionButton \n          onClick={() => setShareState('reminder')}\n          icon={<svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 text-teal-500\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fillRule=\"evenodd\" d=\"M18 5v8a2 2 0 01-2 2h-5l-5 4v-4H4a2 2 0 01-2-2V5a2 2 0 012-2h12a2 2 0 012 2zM7 8H5v2h2V8zm2 0h2v2H9V8zm6 0h-2v2h2V8z\" clipRule=\"evenodd\" /></svg>}\n          text=\"Send Simple Reminder\"\n          subtext=\"A plain text message with amounts owed.\"\n        />\n         <ActionButton \n          onClick={() => setShareState('link')}\n          icon={<svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 text-indigo-500\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path d=\"M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z\" /><path d=\"M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z\" /></svg>}\n          text=\"Send Interactive Bill\"\n          subtext=\"A secure, live-updating link to the bill.\"\n        />\n        {onViewDetails && (\n            <div className=\"pt-3 border-t border-slate-200 dark:border-slate-700\">\n              <ActionButton onClick={onViewDetails} icon={<svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 text-slate-500\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path d=\"M4 3a2 2 0 100 4h12a2 2 0 100-4H4z\" /><path fillRule=\"evenodd\" d=\"M3 8h14v7a2 2 0 01-2 2H5a2 2 0 01-2-2V8zm5 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" clipRule=\"evenodd\" /></svg>} text=\"View All Bills\" />\n            </div>\n        )}\n      </div>\n    );\n    \n    const renderReminderState = () => (\n      <div className=\"space-y-2\">\n        {participant.phone && <ActionButton onClick={() => onShareSms(participant)} icon={<svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 text-teal-500\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fillRule=\"evenodd\" d=\"M18 5v8a2 2 0 01-2 2h-5l-5 4v-4H4a2 2 0 01-2-2V5a2 2 0 012-2h12a2 2 0 012 2zM7 8H5v2h2V8zm2 0h2v2H9V8zm6 0h-2v2h2V8z\" clipRule=\"evenodd\" /></svg>} text=\"Share via Text\" />}\n        {participant.email && <ActionButton onClick={() => onShareEmail(participant)} icon={<svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 text-teal-500\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path d=\"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z\" /><path d=\"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z\" /></svg>} text=\"Share via Email\" />}\n        {isShareApiAvailable ? (\n             <ActionButton onClick={() => onShareGeneric(participant)} icon={<svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 text-teal-500\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path d=\"M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z\" /></svg>} text=\"Share Reminder...\" />\n        ) : (\n             <ActionButton onClick={() => onShareGeneric(participant)} icon={<svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 text-teal-500\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path d=\"M7 9a2 2 0 012-2h6a2 2 0 012 2v6a2 2 0 01-2-2H9a2 2 0 01-2-2V9z\" /><path d=\"M4 3a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H4z\" /></svg>} text=\"Copy Reminder Text\" />\n        )}\n      </div>\n    );\n\n    const renderLinkState = () => (\n         <div className=\"space-y-2\">\n            {participant.phone && onShareLinkSms && <ActionButton onClick={() => handleShareLink(onShareLinkSms)} disabled={isGeneratingLink} icon={<svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 text-indigo-500\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fillRule=\"evenodd\" d=\"M18 5v8a2 2 0 01-2 2h-5l-5 4v-4H4a2 2 0 01-2-2V5a2 2 0 012-2h12a2 2 0 012 2zM7 8H5v2h2V8zm2 0h2v2H9V8zm6 0h-2v2h2V8z\" clipRule=\"evenodd\" /></svg>} text=\"Share Link via Text\" />}\n            {participant.email && onShareLinkEmail && <ActionButton onClick={() => handleShareLink(onShareLinkEmail)} disabled={isGeneratingLink} icon={<svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 text-indigo-500\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path d=\"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z\" /><path d=\"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z\" /></svg>} text=\"Share Link via Email\" />}\n            {onShareLinkGeneric && (isShareApiAvailable ? (\n            <ActionButton onClick={() => handleShareLink(onShareLinkGeneric)} disabled={isGeneratingLink} icon={<svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 text-indigo-500\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path d=\"M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z\" /></svg>} text=\"Share Link...\" />\n            ) : (\n            <ActionButton onClick={() => handleShareLink(onShareLinkGeneric)} disabled={isGeneratingLink} icon={<svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 text-indigo-500\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path d=\"M7 9a2 2 0 012-2h6a2 2 0 012 2v6a2 2 0 01-2-2H9a2 2 0 01-2-2V9z\" /><path d=\"M4 3a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H4z\" /></svg>} text=\"Copy Link\" />\n            ))}\n         </div>\n    );\n    \n    const renderContent = () => {\n        switch (shareState) {\n            case 'reminder': return renderReminderState();\n            case 'link': return renderLinkState();\n            case 'choose':\n            default: return renderChooseState();\n        }\n    };\n    \n    return (\n        <div \n            className=\"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-end backdrop-blur-sm\" \n            onClick={onClose}\n            role=\"dialog\"\n            aria-modal=\"true\"\n            aria-labelledby=\"share-sheet-title\"\n        >\n            <div \n                className=\"w-full bg-slate-100 dark:bg-slate-800 rounded-t-2xl p-4 animate-slide-up shadow-2xl\" \n                onClick={e => e.stopPropagation()}\n            >\n                <div className=\"w-10 h-1.5 bg-slate-300 dark:bg-slate-600 rounded-full mx-auto mb-4\"></div>\n                <div className=\"text-center mb-6\">\n                    <h3 id=\"share-sheet-title\" className=\"text-xl font-bold text-slate-800 dark:text-slate-100 flex items-center justify-center gap-3\">\n                        {shareState !== 'choose' && (\n                            <button onClick={() => setShareState('choose')} className=\"p-1 -ml-2 text-slate-500 hover:bg-slate-200 dark:hover:bg-slate-700 rounded-full\">\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fillRule=\"evenodd\" d=\"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z\" clipRule=\"evenodd\" /></svg>\n                            </button>\n                        )}\n                        <span>Share with {participant.name}</span>\n                    </h3>\n                </div>\n                {renderContent()}\n                <div className=\"mt-6\">\n                    <button \n                        onClick={onClose} \n                        className=\"w-full px-4 py-3 bg-white dark:bg-slate-700 text-teal-600 dark:text-teal-300 font-bold rounded-lg hover:bg-slate-50 dark:hover:bg-slate-600 transition-colors\"\n                    >\n                        Cancel\n                    </button>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default ShareActionSheet;","// services/adProviderService.ts\n\n// The `env` constant using import.meta.env is no longer needed, as variables\n// will be accessed via `process.env` which is defined by Vite at build time.\n\ninterface AdResult {\n    content: string | null;\n    error: string | null;\n}\n\n/**\n * Generates the iframe content for A-ADS (Anonymous Ads).\n * @param unitId The ad unit ID from A-ADS.\n * @returns The HTML content for the ad iframe.\n */\nconst getAAdsContent = (unitId: string): string => {\n  // Use a responsive size and the 'acceptable' ad network for better compatibility and performance.\n  // The outer document ensures the ad iframe can fill its container within the app's ad components.\n  return `\n    <!DOCTYPE html>\n    <html lang=\"en\">\n    <head>\n      <meta charset=\"UTF-8\">\n      <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n      <title>Advertisement</title>\n      <style>\n        html, body { margin: 0; padding: 0; height: 100%; width: 100%; overflow: hidden; display: flex; align-items: center; justify-content: center; background-color: transparent; }\n        iframe { border: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background-color: transparent; }\n      </style>\n    </head>\n    <body>\n      <iframe data-aa=\"${unitId}\" src=\"//acceptable.a-ads.com/${unitId}?size=responsive\"></iframe>\n    </body>\n    </html>\n  `;\n};\n\n/**\n * Decodes Base64 encoded custom ad HTML.\n * @param encodedHtml The Base64 encoded HTML string.\n * @returns An AdResult object with the decoded HTML or an error message.\n */\nconst getCustomAdContent = (encodedHtml: string): AdResult => {\n    try {\n        // Using atob is sufficient here as this runs on the client.\n        const decodedHtml = atob(encodedHtml);\n        if (!decodedHtml.trim()) {\n            const errorMsg = \"Ad provider is 'custom' but VITE_CUSTOM_AD_HTML_BASE64 is an empty string. Ads will not be displayed.\";\n            console.warn(errorMsg);\n            return { content: null, error: errorMsg };\n        }\n        return { content: decodedHtml, error: null };\n    } catch (e) {\n        const errorMsg = \"Ad provider is 'custom' but VITE_CUSTOM_AD_HTML_BASE64 is not valid Base64. Ads will not be displayed.\";\n        console.error(errorMsg, e);\n        return { content: null, error: errorMsg };\n    }\n};\n\n/**\n * Returns the appropriate ad content and any configuration errors.\n * This is the central function for the ad provider system.\n * @returns An AdResult object with the HTML string for the ad iframe, and a potential error message.\n */\nexport const getAdConfig = (): AdResult => {\n    // Read from `process.env` which is replaced by Vite's `define` config.\n    const AD_PROVIDER = process.env.VITE_AD_PROVIDER || 'a-ads';\n    const AADS_ID = process.env.VITE_AADS_ID;\n    const CUSTOM_AD_HTML_BASE64 = process.env.VITE_CUSTOM_AD_HTML_BASE64;\n\n    switch (AD_PROVIDER) {\n        case 'a-ads':\n            if (!AADS_ID || AADS_ID.trim() === '') {\n                const errorMsg = \"Ad provider is 'a-ads' but the required VITE_AADS_ID environment variable is missing. Ads will not be displayed.\";\n                console.warn(errorMsg);\n                return { content: null, error: errorMsg };\n            }\n            return { content: getAAdsContent(AADS_ID), error: null };\n        case 'custom':\n             if (!CUSTOM_AD_HTML_BASE64) {\n                const errorMsg = \"Ad provider is 'custom' but the required VITE_CUSTOM_AD_HTML_BASE64 environment variable is missing. Ads will not be displayed.\";\n                console.warn(errorMsg);\n                return { content: null, error: errorMsg };\n            }\n            return getCustomAdContent(CUSTOM_AD_HTML_BASE64);\n        case 'admob':\n            const errorMsgAdmob = \"Ad provider 'AdMob' is configured but is not yet supported in this version. Ads will not be displayed.\";\n            console.warn(errorMsgAdmob);\n            return { content: null, error: errorMsgAdmob };\n        case 'none':\n            return { content: null, error: null }; // No error if ads are intentionally disabled\n        default:\n            const errorMsg = `Unknown ad provider '${AD_PROVIDER}' is configured in VITE_AD_PROVIDER. Ads will not display. Valid options are 'a-ads', 'custom', or 'none'.`;\n            console.warn(errorMsg);\n            return { content: null, error: errorMsg };\n    }\n};\n","import { getAdConfig } from './adProviderService';\n\nconst adConfig = getAdConfig();\n\n/**\n * The ad content to be displayed in iframes.\n * This is determined at build time by the ad provider service based on environment variables.\n * If no provider is configured or an error occurs, this will be null.\n */\nexport const AD_IFRAME_CONTENT = adConfig.content;\n\n/**\n * A message describing why ads might not be working, if there's a configuration issue.\n * This will be null if ads are working correctly or are intentionally disabled ('none').\n */\nexport const AD_ERROR_MESSAGE = adConfig.error;","import React, { useRef, useEffect, useState } from 'react';\nimport { AD_IFRAME_CONTENT } from '../services/adService';\n\ninterface HalfScreenAdModalProps {\n  onClose: () => void;\n}\n\nconst HalfScreenAdModal: React.FC<HalfScreenAdModalProps> = ({ onClose }) => {\n  const modalRef = useRef<HTMLDivElement>(null);\n  const adContainerRef = useRef<HTMLDivElement>(null);\n  const [loadAd, setLoadAd] = useState(false);\n\n  // Animate in on mount\n  useEffect(() => {\n    const timer = setTimeout(() => {\n        if(modalRef.current) {\n            modalRef.current.classList.remove('translate-y-full');\n        }\n    }, 100); // Small delay to ensure transition is applied\n    return () => clearTimeout(timer);\n  }, []);\n  \n  // Use intersection observer to load the ad only when the container is visible\n  useEffect(() => {\n    const observer = new IntersectionObserver(\n      ([entry]) => {\n        if (entry.isIntersecting) {\n          setLoadAd(true);\n          if (adContainerRef.current) {\n            observer.unobserve(adContainerRef.current);\n          }\n        }\n      },\n      { threshold: 0.5 } // Load when 50% of the ad container is visible\n    );\n\n    if (adContainerRef.current) {\n      observer.observe(adContainerRef.current);\n    }\n\n    return () => {\n      if (adContainerRef.current) {\n        observer.unobserve(adContainerRef.current);\n      }\n    };\n  }, []);\n\n  const handleClose = () => {\n      if(modalRef.current) {\n          modalRef.current.classList.add('translate-y-full');\n          // Wait for animation to finish before calling onClose\n          setTimeout(onClose, 300);\n      } else {\n          onClose();\n      }\n  }\n  \n  // If no ad provider is configured, do not render the modal at all.\n  if (!AD_IFRAME_CONTENT) {\n    return null;\n  }\n\n  return (\n    <div\n      className=\"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-end backdrop-blur-sm\"\n      onClick={handleClose}\n      role=\"dialog\"\n      aria-modal=\"true\"\n      aria-label=\"Advertisement\"\n    >\n      <div\n        ref={modalRef}\n        className=\"w-full h-1/2 bg-white dark:bg-slate-800 rounded-t-2xl shadow-2xl transform translate-y-full transition-transform duration-300 ease-out\"\n        onClick={e => e.stopPropagation()}\n      >\n        <div className=\"relative h-full flex flex-col p-4\">\n           <div className=\"flex items-center justify-between mb-2\">\n            <span className=\"text-xs font-semibold text-slate-400 dark:text-slate-500 uppercase tracking-wider\">\n              Advertisement\n            </span>\n             <button\n              onClick={handleClose}\n              className=\"p-1.5 text-slate-500 dark:text-slate-400 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 rounded-full transition-colors\"\n              aria-label=\"Close ad\"\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M6 18L18 6M6 6l12 12\" />\n              </svg>\n            </button>\n          </div>\n          <div ref={adContainerRef} className=\"flex-grow w-full h-full\">\n            {loadAd && (\n              <iframe\n                srcDoc={AD_IFRAME_CONTENT}\n                title=\"Advertisement\"\n                style={{\n                  width: '100%',\n                  height: '100%',\n                  border: '0',\n                  overflow: 'hidden',\n                }}\n                sandbox=\"allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox\"\n                aria-label=\"Advertisement Content\"\n              ></iframe>\n            )}\n           </div>\n           <p className=\"text-xs text-slate-400 dark:text-slate-500 text-center mt-2\">\n            Upgrade to Pro to remove ads!\n           </p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default HalfScreenAdModal;","import { useEffect, useRef, useCallback } from 'react';\n\ninterface ObserverOptions {\n  onIntersect: () => void;\n  root?: Element | null;\n  rootMargin?: string;\n  threshold?: number | number[];\n}\n\nexport const useIntersectionObserver = <T extends HTMLElement>({\n  onIntersect,\n  root = null,\n  rootMargin = '0px',\n  threshold = 0.1,\n}: ObserverOptions) => {\n  const ref = useRef<T>(null);\n\n  const handleIntersect = useCallback((entries: IntersectionObserverEntry[]) => {\n    entries.forEach(entry => {\n      if (entry.isIntersecting) {\n        onIntersect();\n      }\n    });\n  }, [onIntersect]);\n\n  useEffect(() => {\n    const observer = new IntersectionObserver(handleIntersect, {\n      root,\n      rootMargin,\n      threshold,\n    });\n    \n    const currentRef = ref.current;\n    if (currentRef) {\n      observer.observe(currentRef);\n    }\n\n    return () => {\n      if (currentRef) {\n        observer.unobserve(currentRef);\n      }\n    };\n  }, [ref, root, rootMargin, threshold, handleIntersect]);\n\n  return { ref };\n};","import React, { useState } from 'react';\nimport type { PaymentDetails } from '../types';\n\ninterface PaymentMethodsModalProps {\n  paymentDetails: PaymentDetails;\n  billDescription: string;\n  amountOwed: number;\n  creatorName: string;\n  onClose: () => void;\n}\n\ntype PaymentMethod = 'venmo' | 'paypal' | 'cashApp' | 'zelle';\n\nconst PaymentMethodsModal: React.FC<PaymentMethodsModalProps> = ({ paymentDetails, billDescription, amountOwed, creatorName, onClose }) => {\n  const [activeMethod, setActiveMethod] = useState<PaymentMethod | null>(null);\n\n  const handleLaunchApp = (method: PaymentMethod) => {\n    const amount = amountOwed.toFixed(2);\n    const note = encodeURIComponent(billDescription);\n    let url = '';\n\n    switch(method) {\n        case 'venmo':\n            const venmoID = paymentDetails.venmo.trim();\n            url = `venmo://paycharge?txn=pay&recipients=${venmoID}&amount=${amount}&note=${note}`;\n            window.location.href = url;\n            break;\n        case 'paypal':\n            let paypalIdentifier = paymentDetails.paypal.trim();\n            if (paypalIdentifier.includes('@')) {\n                // It's an email address\n                url = `https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&business=${encodeURIComponent(paypalIdentifier)}&amount=${amount}&item_name=${note}&currency_code=USD`;\n            } else {\n                // Assume it's a PayPal.me username\n                paypalIdentifier = paypalIdentifier.replace(/^(https?:\\/\\/)?(www\\.)?paypal\\.me\\//i, '');\n                url = `https://paypal.me/${paypalIdentifier}/${amount}`;\n            }\n            window.open(url, '_blank', 'noopener,noreferrer');\n            break;\n        case 'cashApp':\n            const cleanCashtag = paymentDetails.cashApp.trim().replace(/^\\$/, '');\n            url = `https://cash.app/$${cleanCashtag}/${amount}?note=${note}`;\n            window.open(url, '_blank', 'noopener,noreferrer');\n            break;\n        case 'zelle':\n            // Zelle does not have a universal deep link, so we don't launch anything.\n            break;\n    }\n  };\n\n  // FIX: Explicitly cast string literals to the `PaymentMethod` type to resolve TypeScript error where 'string' is not assignable to the specific union type.\n  const methods: { id: PaymentMethod; name: string; logo: string; info: string | null }[] = [\n    { id: 'venmo' as PaymentMethod, name: 'Venmo', logo: 'https://cdn.simpleicons.org/venmo/008CFF', info: paymentDetails.venmo },\n    { id: 'paypal' as PaymentMethod, name: 'PayPal', logo: 'https://cdn.simpleicons.org/paypal/00457C', info: paymentDetails.paypal },\n    { id: 'cashApp' as PaymentMethod, name: 'Cash App', logo: 'https://cdn.simpleicons.org/cashapp/00C246', info: paymentDetails.cashApp },\n    { id: 'zelle' as PaymentMethod, name: 'Zelle', logo: 'https://cdn.simpleicons.org/zelle/6D1AD8', info: paymentDetails.zelle }\n  ].filter(method => method.info && method.info.trim() !== '');\n\n  const ActionButton: React.FC<{ logo: string; name: string; onClick: () => void }> = ({ logo, name, onClick }) => (\n    <button onClick={onClick} className=\"w-full flex items-center gap-4 text-left p-4 bg-slate-100 dark:bg-slate-700/50 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors\">\n        <img src={logo} alt={`${name} logo`} className=\"h-8 w-8 object-contain\"/>\n        <span className=\"font-semibold text-slate-800 dark:text-slate-100\">Pay with {name}</span>\n    </button>\n  );\n\n  const renderMainView = () => (\n    <div className=\"space-y-3\">\n        {methods.map(method => (\n            <ActionButton key={method.id} logo={method.logo} name={method.name} onClick={() => setActiveMethod(method.id)} />\n        ))}\n        {paymentDetails.customMessage && (\n             <div className=\"text-left p-4 bg-slate-100 dark:bg-slate-700/50 rounded-lg\">\n                <p className=\"font-semibold text-slate-800 dark:text-slate-100\">A Note from {creatorName}</p>\n                <p className=\"text-sm text-slate-500 dark:text-slate-400 whitespace-pre-wrap mt-1\">{paymentDetails.customMessage}</p>\n            </div>\n        )}\n    </div>\n  );\n  \n  const renderDetailView = () => {\n    const method = methods.find(m => m.id === activeMethod);\n    if (!method) return null;\n\n    return (\n        <div>\n            <button onClick={() => setActiveMethod(null)} className=\"flex items-center gap-2 mb-4 text-teal-600 dark:text-teal-400 font-semibold\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fillRule=\"evenodd\" d=\"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l-4-4a1 1 0 011.414 0z\" clipRule=\"evenodd\" /></svg>\n                Back\n            </button>\n            <div className=\"p-6 bg-slate-100 dark:bg-slate-700/50 rounded-lg text-center\">\n                <img src={method.logo} alt={`${method.name} logo`} className=\"h-12 w-12 object-contain mx-auto mb-4\"/>\n                <p className=\"text-sm text-slate-500 dark:text-slate-400\">\n                    {method.id === 'zelle' ? `Use this email/phone in your banking app to pay with Zelle:` : `You are about to pay ${creatorName} using ${method.name}.`}\n                </p>\n                <p className=\"font-mono text-lg font-semibold my-2 p-2 bg-slate-200 dark:bg-slate-600 rounded break-all\">{method.info}</p>\n                {method.id !== 'zelle' &&\n                    <button onClick={() => handleLaunchApp(method.id)} className=\"w-full mt-4 px-6 py-3 bg-teal-500 text-white font-bold rounded-lg hover:bg-teal-600 transition-colors\">\n                        Launch App\n                    </button>\n                }\n            </div>\n        </div>\n    );\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4 backdrop-blur-sm\" onClick={onClose}>\n      <div className=\"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md flex flex-col max-h-[90vh]\" onClick={e => e.stopPropagation()}>\n        <div className=\"p-6 border-b border-slate-200 dark:border-slate-700 flex-shrink-0\">\n            <h3 className=\"text-xl font-bold text-slate-800 dark:text-slate-100\">Settle up with {creatorName}</h3>\n            <p className=\"text-sm text-slate-500 dark:text-slate-400 mt-1\">You owe <span className=\"font-bold text-slate-700 dark:text-slate-200\">${amountOwed.toFixed(2)}</span> for \"{billDescription}\".</p>\n        </div>\n        <div className=\"p-6 flex-grow overflow-y-auto\">\n            {activeMethod ? renderDetailView() : renderMainView()}\n        </div>\n        <div className=\"p-4 bg-slate-50 dark:bg-slate-800/50 border-t border-slate-200 dark:border-slate-700 flex justify-end flex-shrink-0\">\n            <button onClick={onClose} className=\"px-5 py-2 bg-slate-200 text-slate-800 font-semibold rounded-lg hover:bg-slate-300 dark:bg-slate-700 dark:text-slate-100 dark:hover:bg-slate-600 transition-colors\">\n                Close\n            </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default PaymentMethodsModal;","import React, { useState } from 'react';\nimport type { Settings } from '../types';\n\ninterface PaymentMethodWarningModalProps {\n  onClose: () => void;\n  onContinue: () => void;\n  onAddMethods: () => void;\n  onUpdateSettings: (newSettings: Partial<Settings>) => void;\n}\n\nconst PaymentMethodWarningModal: React.FC<PaymentMethodWarningModalProps> = ({ onClose, onContinue, onAddMethods, onUpdateSettings }) => {\n  const [dontShowAgain, setDontShowAgain] = useState(false);\n\n  const handleContinue = () => {\n    if (dontShowAgain) {\n      onUpdateSettings({ hidePaymentMethodWarning: true });\n    }\n    onContinue();\n  };\n\n  const handleAddMethods = () => {\n    if (dontShowAgain) {\n      onUpdateSettings({ hidePaymentMethodWarning: true });\n    }\n    onAddMethods();\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-slate-900 bg-opacity-80 z-50 flex justify-center items-center p-4 backdrop-blur-sm\" onClick={onClose}>\n      <div className=\"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-lg p-8\" onClick={e => e.stopPropagation()}>\n        <h2 className=\"text-2xl font-bold text-slate-800 dark:text-slate-100 text-center mb-4\">\n          Add Payment Methods?\n        </h2>\n        <p className=\"text-slate-600 dark:text-slate-300 mb-6 text-center\">\n          You haven't set up any payment methods. Adding them makes it easier for others to pay you back.\n        </p>\n        \n        <div className=\"space-y-4\">\n           <button onClick={handleAddMethods} className=\"w-full px-6 py-3 bg-teal-500 text-white font-bold rounded-lg hover:bg-teal-600\">\n            Add Payment Methods\n          </button>\n          <button onClick={handleContinue} className=\"w-full px-6 py-3 bg-slate-100 text-slate-800 font-semibold rounded-lg hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-100 dark:hover:bg-slate-600\">\n            Continue Anyway\n          </button>\n        </div>\n\n        <div className=\"mt-6 flex items-center justify-center\">\n          <input \n            id=\"dontShowAgain\" \n            type=\"checkbox\" \n            checked={dontShowAgain} \n            onChange={e => setDontShowAgain(e.target.checked)}\n            className=\"h-4 w-4 rounded border-slate-300 text-teal-600 focus:ring-teal-500\"\n          />\n          <label htmlFor=\"dontShowAgain\" className=\"ml-2 text-sm text-slate-600 dark:text-slate-300\">\n            Don't show this warning again\n          </label>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default PaymentMethodWarningModal;","import type { Bill, ImportedBill } from '../types';\nimport { getBillSigningKey } from './db';\nimport * as cryptoService from './cryptoService';\n\n// New header to identify our own CSV format\nexport const EXPORT_HEADER_V2 = '# SharedBills CSV Export v2';\n\n// Helper function to trigger a file download in the browser\nconst downloadFile = (filename: string, content: string, mimeType: string) => {\n  const blob = new Blob([content], { type: mimeType });\n  const url = URL.createObjectURL(blob);\n  const a = document.createElement('a');\n  a.href = url;\n  a.download = filename;\n  document.body.appendChild(a);\n  a.click();\n  document.body.removeChild(a);\n  URL.revokeObjectURL(url);\n};\n\nconst CSV_HEADERS_V2 = [\n    'RowType', 'BillID', 'BillType', 'Description', 'Date', 'TotalAmount', \n    'CreatorName', 'ParticipantID', 'ParticipantName', 'AmountOwed', 'PaidStatus', \n    'ShareInfoJSON', 'LastUpdatedAt'\n];\n\n// Helper to safely stringify and quote JSON for CSV, handling nested quotes.\nconst csvJson = (data: any): string => {\n    if (data === null || data === undefined) return '\"\"';\n    try {\n        const json = JSON.stringify(data);\n        return `\"${json.replace(/\"/g, '\"\"')}\"`;\n    } catch {\n        return '\"\"';\n    }\n};\n\nconst sanitize = (str: string | null | undefined): string => `\"${(str || '').replace(/\"/g, '\"\"')}\"`;\n\n/**\n * The primary export function that generates a V2 CSV from provided bills.\n * @param data An object containing optional arrays of owned and imported bills.\n * @param filename The desired name for the downloaded file.\n */\nexport const exportData = async (\n    data: { owned?: Bill[], imported?: ImportedBill[] },\n    filename: string\n) => {\n    const { owned = [], imported = [] } = data;\n    const csvRows: string[] = [];\n    csvRows.push(CSV_HEADERS_V2.join(','));\n\n    // Process owned bills\n    for (const bill of owned) {\n        let shareInfo: Record<string, any> = {};\n        if (bill.shareInfo?.shareId) {\n            const signingKeyRecord = await getBillSigningKey(bill.id);\n            if (signingKeyRecord?.privateKey) {\n                const privateKeyJwk = await cryptoService.exportKey(signingKeyRecord.privateKey);\n                shareInfo = {\n                    shareId: bill.shareInfo.shareId,\n                    encryptionKey: bill.shareInfo.encryptionKey,\n                    signingPublicKey: bill.shareInfo.signingPublicKey,\n                    signingPrivateKey: privateKeyJwk,\n                };\n            }\n        }\n        const shareInfoJson = csvJson(shareInfo);\n        const billRow = ['BILL', bill.id, 'OWNED', sanitize(bill.description), bill.date, bill.totalAmount.toFixed(2),'', '', '', '', '', shareInfoJson, bill.lastUpdatedAt || 0].join(',');\n        csvRows.push(billRow);\n\n        for (const p of bill.participants) {\n            const participantRow = ['PARTICIPANT', bill.id, 'OWNED', '', '', '', '', p.id, sanitize(p.name), p.amountOwed.toFixed(2), p.paid ? 'Paid' : 'Unpaid', '', ''].join(',');\n            csvRows.push(participantRow);\n        }\n    }\n\n    // Process imported bills\n    for (const iBill of imported) {\n        const shareInfoJson = csvJson({\n            shareId: iBill.shareId,\n            shareEncryptionKey: iBill.shareEncryptionKey,\n            creatorPublicKey: iBill.sharedData.creatorPublicKey,\n            myParticipantId: iBill.myParticipantId,\n        });\n        \n        const billRow = ['BILL', iBill.id, 'IMPORTED', sanitize(iBill.sharedData.bill.description), iBill.sharedData.bill.date, iBill.sharedData.bill.totalAmount.toFixed(2), sanitize(iBill.creatorName), '', '', '', '', shareInfoJson, iBill.lastUpdatedAt].join(',');\n        csvRows.push(billRow);\n\n        for (const p of iBill.sharedData.bill.participants) {\n            let paidStatus = p.paid ? 'Paid' : 'Unpaid';\n            if (p.id === iBill.myParticipantId) {\n                paidStatus = iBill.localStatus.myPortionPaid ? 'Paid' : 'Unpaid';\n            }\n            const participantRow = ['PARTICIPANT', iBill.id, 'IMPORTED', '', '', '', sanitize(iBill.creatorName), p.id, sanitize(p.name), p.amountOwed.toFixed(2), paidStatus, '', ''].join(',');\n            csvRows.push(participantRow);\n        }\n    }\n    \n    const csvContent = [EXPORT_HEADER_V2, ...csvRows].join('\\n');\n    downloadFile(filename, csvContent, 'text/csv;charset=utf-8;');\n};","import React from 'react';\nimport type { SummaryFilter } from '../../types';\n\ninterface DashboardSummaryProps {\n  summaryTotals: {\n    totalTracked: number;\n    othersOweMe: number;\n    iOwe: number;\n  };\n  dashboardStatusFilter: 'active' | 'archived';\n  dashboardSummaryFilter: SummaryFilter;\n  onSetDashboardSummaryFilter: (filter: SummaryFilter) => void;\n}\n\nconst DashboardSummary: React.FC<DashboardSummaryProps> = ({\n  summaryTotals,\n  dashboardStatusFilter,\n  dashboardSummaryFilter,\n  onSetDashboardSummaryFilter,\n}) => {\n  const handleSummaryKeyDown = (e: React.KeyboardEvent<HTMLDivElement>, filter: SummaryFilter) => {\n    if ((e.key === 'Enter' || e.key === ' ') && dashboardStatusFilter === 'active') {\n      e.preventDefault();\n      onSetDashboardSummaryFilter(filter);\n    }\n  };\n  \n  const summaryCardBaseClasses = \"p-3 flex-1 rounded-lg transition-all duration-300\";\n  const summaryCardInactiveClasses = \"cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-700/50\";\n  const summaryCardActiveClasses = \"bg-teal-50 dark:bg-teal-900/40 ring-2 ring-teal-500\";\n  const summaryCardDisabledClasses = \"opacity-60 cursor-not-allowed\";\n  \n  return (\n    <div className=\"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-md mb-8\">\n      <h3 className=\"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-3 px-2\">Quick Filters</h3>\n      <div className=\"flex flex-wrap items-stretch text-center gap-4\">\n        <div \n          className={`${summaryCardBaseClasses} ${dashboardSummaryFilter === 'total' ? summaryCardActiveClasses : (dashboardStatusFilter === 'active' ? summaryCardInactiveClasses : '')} ${dashboardStatusFilter === 'archived' ? summaryCardDisabledClasses : ''}`}\n          onClick={() => dashboardStatusFilter === 'active' && onSetDashboardSummaryFilter('total')}\n          onKeyDown={(e) => handleSummaryKeyDown(e, 'total')}\n          role=\"button\"\n          tabIndex={dashboardStatusFilter === 'active' ? 0 : -1}\n          aria-pressed={dashboardSummaryFilter === 'total'}\n          aria-label=\"Filter by Total Tracked\"\n          aria-disabled={dashboardStatusFilter === 'archived'}\n        >\n          <p className=\"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider\">Total Tracked</p>\n          <p className=\"text-2xl lg:text-3xl font-bold text-slate-800 dark:text-slate-100 mt-1\">${summaryTotals.totalTracked.toFixed(2)}</p>\n        </div>\n        <div \n          className={`${summaryCardBaseClasses} ${dashboardSummaryFilter === 'othersOweMe' ? summaryCardActiveClasses : (dashboardStatusFilter === 'active' ? summaryCardInactiveClasses : '')} ${dashboardStatusFilter === 'archived' ? summaryCardDisabledClasses : ''}`}\n          onClick={() => dashboardStatusFilter === 'active' && onSetDashboardSummaryFilter('othersOweMe')}\n          onKeyDown={(e) => handleSummaryKeyDown(e, 'othersOweMe')}\n          role=\"button\"\n          tabIndex={dashboardStatusFilter === 'active' ? 0 : -1}\n          aria-pressed={dashboardSummaryFilter === 'othersOweMe'}\n          aria-label=\"Filter by bills where others owe me\"\n          aria-disabled={dashboardStatusFilter === 'archived'}\n        >\n          <p className=\"text-sm font-semibold text-emerald-600 dark:text-emerald-400 uppercase tracking-wider\">Others Owe Me</p>\n          <p className=\"text-2xl lg:text-3xl font-bold text-emerald-700 dark:text-emerald-300 mt-1\">${summaryTotals.othersOweMe.toFixed(2)}</p>\n        </div>\n        <div \n          className={`${summaryCardBaseClasses} ${dashboardSummaryFilter === 'iOwe' ? summaryCardActiveClasses : (dashboardStatusFilter === 'active' ? summaryCardInactiveClasses : '')} ${dashboardStatusFilter === 'archived' ? summaryCardDisabledClasses : ''}`}\n          onClick={() => dashboardStatusFilter === 'active' && onSetDashboardSummaryFilter('iOwe')}\n          onKeyDown={(e) => handleSummaryKeyDown(e, 'iOwe')}\n          role=\"button\"\n          tabIndex={dashboardStatusFilter === 'active' ? 0 : -1}\n          aria-pressed={dashboardSummaryFilter === 'iOwe'}\n          aria-label=\"Filter by bills where I owe\"\n          aria-disabled={dashboardStatusFilter === 'archived'}\n        >\n          <p className=\"text-sm font-semibold text-amber-600 dark:text-amber-400 uppercase tracking-wider\">I Owe</p>\n          <p className=\"text-2xl lg:text-3xl font-bold text-amber-700 dark:text-amber-300 mt-1\">${summaryTotals.iOwe.toFixed(2)}</p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default DashboardSummary;\n","import React from 'react';\nimport type { DashboardView, DashboardLayoutMode } from '../../types';\n\ninterface DashboardControlsProps {\n  selectedParticipant: string | null;\n  onClearParticipant: () => void;\n  dashboardView: DashboardView;\n  onSetDashboardView: (view: DashboardView) => void;\n  dashboardStatusFilter: 'active' | 'archived';\n  onSetDashboardStatusFilter: (status: 'active' | 'archived') => void;\n  searchQuery: string;\n  setSearchQuery: (query: string) => void;\n  searchMode: 'description' | 'participant';\n  setSearchMode: (mode: 'description' | 'participant') => void;\n  dashboardLayoutMode: DashboardLayoutMode;\n  onSetDashboardLayoutMode: (mode: DashboardLayoutMode) => void;\n  hasRecurringBills: boolean;\n  hasBudgetData: boolean;\n}\n\nconst DashboardControls: React.FC<DashboardControlsProps> = ({\n  selectedParticipant,\n  onClearParticipant,\n  dashboardView,\n  onSetDashboardView,\n  dashboardStatusFilter,\n  onSetDashboardStatusFilter,\n  searchQuery,\n  setSearchQuery,\n  searchMode,\n  setSearchMode,\n  dashboardLayoutMode,\n  onSetDashboardLayoutMode,\n  hasRecurringBills,\n  hasBudgetData,\n}) => {\n  const listViews: DashboardView[] = ['bills', 'participants', 'upcoming', 'templates', 'groups'];\n  const showLayoutToggle = listViews.includes(dashboardView) && !selectedParticipant;\n\n  return (\n    <div className=\"mb-6 space-y-4\">\n      <div className=\"flex flex-col sm:flex-row justify-between sm:items-center gap-4\">\n        <div>\n          {selectedParticipant ? (\n            <div className=\"flex items-center gap-2\">\n              <button onClick={onClearParticipant} className=\"p-2 -ml-2 text-slate-500 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-700 rounded-full\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M10 19l-7-7m0 0l7-7m-7 7h18\" />\n                </svg>\n              </button>\n              <h2 className=\"text-2xl sm:text-3xl font-bold text-slate-700 dark:text-slate-200\">\n                Bills for <span className=\"text-teal-600 dark:text-teal-400\">{selectedParticipant}</span>\n              </h2>\n            </div>\n          ) : (\n             <div className=\"flex items-center space-x-1 bg-slate-200 dark:bg-slate-700 p-1 rounded-lg self-start sm:self-center flex-wrap gap-1 sm:gap-0\">\n                <button onClick={() => onSetDashboardView('bills')} className={`px-3 py-1.5 text-sm font-semibold rounded-md transition-colors ${dashboardView === 'bills' ? 'bg-white dark:bg-slate-800 shadow text-teal-600 dark:text-teal-400' : 'text-slate-600 dark:text-slate-300'}`}>Bills</button>\n                {hasBudgetData && <button onClick={() => onSetDashboardView('budget')} className={`px-3 py-1.5 text-sm font-semibold rounded-md transition-colors ${dashboardView === 'budget' ? 'bg-white dark:bg-slate-800 shadow text-teal-600 dark:text-teal-400' : 'text-slate-600 dark:text-slate-300'}`}>Budget</button>}\n                <button onClick={() => onSetDashboardView('groups')} className={`px-3 py-1.5 text-sm font-semibold rounded-md transition-colors ${dashboardView === 'groups' ? 'bg-white dark:bg-slate-800 shadow text-teal-600 dark:text-teal-400' : 'text-slate-600 dark:text-slate-300'}`}>Groups</button>\n                <button onClick={() => onSetDashboardView('participants')} className={`px-3 py-1.5 text-sm font-semibold rounded-md transition-colors ${dashboardView === 'participants' ? 'bg-white dark:bg-slate-800 shadow text-teal-600 dark:text-teal-400' : 'text-slate-600 dark:text-slate-300'}`}>People</button>\n                {hasRecurringBills && (\n                    <>\n                        <button onClick={() => onSetDashboardView('upcoming')} className={`px-3 py-1.5 text-sm font-semibold rounded-md transition-colors ${dashboardView === 'upcoming' ? 'bg-white dark:bg-slate-800 shadow text-teal-600 dark:text-teal-400' : 'text-slate-600 dark:text-slate-300'}`}>Upcoming</button>\n                        <button onClick={() => onSetDashboardView('templates')} className={`px-3 py-1.5 text-sm font-semibold rounded-md transition-colors ${dashboardView === 'templates' ? 'bg-white dark:bg-slate-800 shadow text-teal-600 dark:text-teal-400' : 'text-slate-600 dark:text-slate-300'}`}>Templates</button>\n                    </>\n                )}\n            </div>\n          )}\n        </div>\n        <div className=\"flex items-center gap-4 justify-end\">\n          {showLayoutToggle && (\n            <div className=\"flex items-center space-x-1 bg-slate-200 dark:bg-slate-700 p-1 rounded-lg\">\n              <button onClick={() => onSetDashboardLayoutMode('card')} title=\"Card View\" className={`p-1.5 rounded-md transition-colors ${dashboardLayoutMode === 'card' ? 'bg-white dark:bg-slate-800 shadow text-teal-600 dark:text-teal-400' : 'text-slate-600 dark:text-slate-300'}`}>\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                  <path d=\"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 11a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z\" />\n                </svg>\n              </button>\n              <button onClick={() => onSetDashboardLayoutMode('list')} title=\"List View\" className={`p-1.5 rounded-md transition-colors ${dashboardLayoutMode === 'list' ? 'bg-white dark:bg-slate-800 shadow text-teal-600 dark:text-teal-400' : 'text-slate-600 dark:text-slate-300'}`}>\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                  <path fillRule=\"evenodd\" d=\"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z\" clipRule=\"evenodd\" />\n                </svg>\n              </button>\n            </div>\n          )}\n          {!['upcoming', 'templates', 'groups', 'budget'].includes(dashboardView) && (\n            <div className=\"flex items-center space-x-1 bg-slate-200 dark:bg-slate-700 p-1 rounded-lg self-start sm:self-center\">\n                <button onClick={() => onSetDashboardStatusFilter('active')} className={`px-3 py-1 text-sm font-semibold rounded-md transition-colors ${dashboardStatusFilter === 'active' ? 'bg-white dark:bg-slate-800 shadow text-teal-600 dark:text-teal-400' : 'text-slate-600 dark:text-slate-300'}`}>Active</button>\n                <button onClick={() => onSetDashboardStatusFilter('archived')} className={`px-3 py-1 text-sm font-semibold rounded-md transition-colors ${dashboardStatusFilter === 'archived' ? 'bg-white dark:bg-slate-800 shadow text-teal-600 dark:text-teal-400' : 'text-slate-600 dark:text-slate-300'}`}>Archived</button>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {(dashboardView !== 'participants' || selectedParticipant) && dashboardView !== 'budget' && (\n        <div className=\"relative\">\n          <div className=\"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" /></svg>\n          </div>\n          <input type=\"text\" value={searchQuery} onChange={(e) => setSearchQuery(e.target.value)} placeholder={searchMode === 'description' ? \"Search by description...\" : \"Search by participant name...\"} className=\"w-full pl-11 pr-24 py-3 border border-slate-300 rounded-lg focus:ring-teal-500 focus:border-teal-500 bg-white dark:bg-slate-700 dark:border-slate-600 text-slate-900 dark:text-slate-100 placeholder:text-slate-400 dark:placeholder:text-slate-500\" aria-label=\"Search bills\"/>\n          <div className=\"absolute right-2 top-1/2 -translate-y-1/2 flex items-center space-x-1 bg-slate-200 dark:bg-slate-600 p-1 rounded-md\">\n            <button onClick={() => setSearchMode('description')} className={`p-1.5 rounded ${searchMode === 'description' ? 'bg-white dark:bg-slate-800 text-teal-600 shadow-sm' : 'text-slate-500 dark:text-slate-300 hover:bg-slate-300/50 dark:hover:bg-slate-500/50'}`} aria-label=\"Search by bill description\" title=\"Search by bill description\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" /></svg>\n            </button>\n            <button onClick={() => setSearchMode('participant')} disabled={['upcoming', 'templates', 'groups'].includes(dashboardView)} className={`p-1.5 rounded ${searchMode === 'participant' ? 'bg-white dark:bg-slate-800 text-teal-600 shadow-sm' : 'text-slate-500 dark:text-slate-300 hover:bg-slate-300/50 dark:hover:bg-slate-500/50'} disabled:opacity-50 disabled:cursor-not-allowed`} aria-label=\"Search by participant name\" title=\"Search by participant name\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" /></svg>\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default DashboardControls;","import React, { useState, useRef, useEffect } from 'react';\nimport type { Bill, DashboardLayoutMode } from '../types';\n\ninterface BillCardProps {\n  bill: Bill;\n  onClick: (e: React.MouseEvent | React.TouchEvent) => void;\n  onArchive: () => void;\n  onUnarchive: () => void;\n  onDelete: () => void;\n  onReshare: () => void;\n  onConvertToTemplate: () => void;\n  onExport: () => void;\n  layoutMode: DashboardLayoutMode;\n  onMenuToggled: (isOpen: boolean) => void;\n}\n\nconst LiveIndicator: React.FC<{ status: Bill['shareStatus'], onClick?: (e: React.MouseEvent) => void }> = ({ status, onClick }) => {\n    if (!status || !['live', 'expired', 'error'].includes(status)) return null;\n\n    const config = {\n        live: { color: 'bg-emerald-500', title: 'Live: This bill is actively shared.' },\n        expired: { color: 'bg-red-500', title: 'Expired: Click to reactivate sharing.' },\n        error: { color: 'bg-amber-500', title: 'Error: Connection issue with share server.' },\n    }[status];\n    \n    if (!config) return null;\n\n    const indicator = (\n        <div className=\"flex-shrink-0\" title={config.title}>\n            <span className={`block h-2.5 w-2.5 rounded-full ${config.color}`}></span>\n        </div>\n    );\n\n    if (status === 'expired' && onClick) {\n        return (\n            <button onClick={onClick} aria-label={config.title} className=\"p-1 -ml-1\">\n                {indicator}\n            </button>\n        );\n    }\n\n    return indicator;\n};\n\nconst BillCard: React.FC<BillCardProps> = ({ bill, onClick, onArchive, onUnarchive, onDelete, onReshare, onConvertToTemplate, onExport, layoutMode, onMenuToggled }) => {\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\n  const menuRef = useRef<HTMLDivElement>(null);\n\n  const totalOwedToMe = bill.participants\n    .filter(p => !p.paid)\n    .reduce((sum, p) => sum + p.amountOwed, 0);\n\n  const allPaid = bill.participants.every(p => p.paid);\n\n  useEffect(() => {\n    onMenuToggled(isMenuOpen);\n  }, [isMenuOpen, onMenuToggled]);\n\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\n        setIsMenuOpen(false);\n      }\n    };\n    if (isMenuOpen) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [isMenuOpen]);\n\n  const handleMenuClick = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    setIsMenuOpen(prev => !prev);\n  };\n  \n  const handleActionClick = (e: React.MouseEvent, action: () => void) => {\n    e.stopPropagation();\n    action();\n    setIsMenuOpen(false);\n  };\n\n  const handleIndicatorClick = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    onReshare();\n  }\n\n  const renderMenu = () => (\n    <div ref={menuRef} className=\"relative flex-shrink-0\">\n        <button onClick={handleMenuClick} onMouseDown={e => e.stopPropagation()} onTouchStart={e => e.stopPropagation()} className=\"p-3 -m-2 text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full\" aria-label=\"More options\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path d=\"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z\" /></svg>\n        </button>\n        {isMenuOpen && (\n            <div \n                onClick={e => e.stopPropagation()}\n                className=\"absolute top-full right-0 mt-2 w-48 bg-white dark:bg-slate-800 rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 py-1 z-20\"\n            >\n                <button onClick={(e) => handleActionClick(e, onConvertToTemplate)} className=\"w-full text-left px-4 py-2 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700\">Convert to Template</button>\n                <button onClick={(e) => handleActionClick(e, onExport)} className=\"w-full text-left px-4 py-2 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700\">Export as CSV</button>\n                <div className=\"my-1 h-px bg-slate-100 dark:bg-slate-700\"></div>\n                <button onClick={(e) => handleActionClick(e, bill.status === 'active' ? onArchive : onUnarchive)} className=\"w-full text-left px-4 py-2 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700\">{bill.status === 'active' ? 'Archive' : 'Unarchive'}</button>\n                <button onClick={(e) => handleActionClick(e, onDelete)} className=\"w-full text-left px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/40\">Delete</button>\n            </div>\n        )}\n    </div>\n  );\n  \n  if (layoutMode === 'list') {\n    return (\n        <div\n        onClick={onClick}\n        className=\"w-full flex items-center p-3 text-sm cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700/50 border-b border-slate-200 dark:border-slate-700 last:border-b-0\"\n        >\n        <div className=\"flex-grow flex items-center gap-3 overflow-hidden\">\n            <LiveIndicator status={bill.shareStatus} onClick={handleIndicatorClick} />\n            <div className=\"flex-grow overflow-hidden\">\n                <p className=\"font-bold text-slate-800 dark:text-slate-100 truncate\">{bill.description}</p>\n                <p className=\"text-xs text-slate-500 dark:text-slate-400\">{new Date(bill.date).toLocaleDateString()}</p>\n            </div>\n        </div>\n        <div className=\"flex-shrink-0 w-24 text-right\">\n            <p className={`font-semibold ${totalOwedToMe > 0 ? 'text-emerald-600 dark:text-emerald-400' : 'text-slate-500 dark:text-slate-400'}`}>\n            Owed\n            </p>\n            <p className=\"font-bold text-slate-800 dark:text-slate-100\">\n            ${totalOwedToMe.toFixed(2)}\n            </p>\n        </div>\n        <div className=\"flex-shrink-0 w-24 text-right\">\n            <p className=\"font-semibold text-slate-500 dark:text-slate-400\">Total</p>\n            <p className=\"font-bold text-slate-800 dark:text-slate-100\">${bill.totalAmount.toFixed(2)}</p>\n        </div>\n        {renderMenu()}\n        </div>\n    );\n  }\n\n  return (\n    <div\n      onClick={onClick}\n      className=\"bg-white dark:bg-slate-800 rounded-lg shadow-lg hover:shadow-xl dark:hover:shadow-teal-900/40 transition-shadow duration-300 cursor-pointer overflow-hidden transform hover:-translate-y-1 flex flex-col\"\n    >\n      <div className=\"p-5 flex-grow\">\n        <div className=\"flex justify-between items-start gap-2\">\n            <div className=\"flex-grow\">\n                 <div className=\"flex items-center gap-2\">\n                    <LiveIndicator status={bill.shareStatus} onClick={handleIndicatorClick} />\n                    <p className=\"text-lg font-bold text-slate-800 dark:text-slate-100 break-words\">{bill.description}</p>\n                </div>\n                <p className=\"text-sm text-slate-500 dark:text-slate-400 mt-1\">{new Date(bill.date).toLocaleDateString()}</p>\n            </div>\n            <div className=\"flex-shrink-0 flex items-center gap-2\">\n                {allPaid && (\n                    <span className=\"px-3 py-1 text-xs font-semibold rounded-full bg-emerald-100 text-emerald-800 dark:bg-emerald-900/50 dark:text-emerald-300\">\n                    Settled\n                    </span>\n                )}\n                {renderMenu()}\n            </div>\n        </div>\n        <div className=\"mt-4 flex justify-between items-end\">\n          <div>\n            <p className={`text-sm font-semibold ${totalOwedToMe > 0 ? 'text-emerald-600 dark:text-emerald-400' : 'text-slate-500 dark:text-slate-400'}`}>\n              {totalOwedToMe > 0 ? 'Owed to you' : 'No outstanding'}\n            </p>\n            <p className={`text-3xl font-extrabold ${totalOwedToMe > 0 ? 'text-emerald-700 dark:text-emerald-300' : 'text-slate-800 dark:text-slate-100'}`}>\n              ${totalOwedToMe.toFixed(2)}\n            </p>\n          </div>\n          <div className=\"text-right\">\n            <p className=\"text-sm font-semibold text-slate-500 dark:text-slate-400\">Bill Total</p>\n            <p className=\"text-2xl font-bold text-slate-800 dark:text-slate-100\">${bill.totalAmount.toFixed(2)}</p>\n          </div>\n        </div>\n      </div>\n      <div className=\"bg-slate-50 dark:bg-slate-700/50 px-5 py-3\">\n        <div className=\"flex items-center justify-between text-sm\">\n          <div className=\"flex -space-x-2 overflow-hidden\">\n            {bill.participants.slice(0, 4).map(p => (\n              <div key={p.id} className=\"inline-block h-8 w-8 rounded-full ring-2 ring-white dark:ring-slate-800 bg-teal-500 flex items-center justify-center text-white font-bold text-xs\">\n                {p.name.charAt(0)}\n              </div>\n            ))}\n            {bill.participants.length > 4 && (\n              <div className=\"inline-block h-8 w-8 rounded-full ring-2 ring-white dark:ring-slate-800 bg-slate-300 dark:bg-slate-600 flex items-center justify-center text-slate-700 dark:text-slate-200 font-bold text-xs\">\n                +{bill.participants.length - 4}\n              </div>\n            )}\n          </div>\n          <p className=\"font-medium text-slate-600 dark:text-slate-300\">\n            {bill.participants.length} participant{bill.participants.length !== 1 ? 's' : ''}\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default BillCard;","import React, { useRef, useState, useCallback } from 'react';\nimport type { Bill, DashboardLayoutMode } from '../types';\nimport BillCard from './BillCard';\n\ninterface SwipeableBillCardProps {\n  bill: Bill;\n  onClick: (e: React.MouseEvent | React.TouchEvent) => void;\n  onArchive: () => void;\n  onUnarchive: () => void;\n  onDelete: () => void;\n  onReshare: () => void;\n  onConvertToTemplate: () => void;\n  onExport: () => void;\n  layoutMode: DashboardLayoutMode;\n}\n\nconst ACTION_BUTTON_WIDTH = 70; // Width for each action button\n\nconst SwipeableBillCard: React.FC<SwipeableBillCardProps> = (props) => {\n  const { bill, onClick, onArchive, onUnarchive, onDelete, layoutMode } = props;\n  const [translateX, setTranslateX] = useState(0);\n  const dragStartX = useRef(0);\n  const dragStartY = useRef(0);\n  const dragInitialTranslateX = useRef(0);\n  const cardRef = useRef<HTMLDivElement>(null);\n  const isDragging = useRef(false);\n  const isScrolling = useRef(false);\n  const dragStartTime = useRef(0);\n  \n  const isArchived = bill.status === 'archived';\n  const maxTranslateX = layoutMode === 'card' ? -(ACTION_BUTTON_WIDTH * 2) : 0;\n\n  const handleDragStart = (clientX: number, clientY: number, e: React.TouchEvent | React.MouseEvent) => {\n    const target = e.target as HTMLElement;\n    if (target.closest('button')) {\n        isDragging.current = false;\n        return;\n    }\n    isDragging.current = true;\n    isScrolling.current = false;\n    dragStartX.current = clientX;\n    dragStartY.current = clientY;\n    dragInitialTranslateX.current = translateX;\n    dragStartTime.current = Date.now();\n    if (cardRef.current) {\n      cardRef.current.style.transition = 'none';\n    }\n  };\n\n  const handleDragMove = (clientX: number, clientY: number) => {\n    if (!isDragging.current || isScrolling.current) return;\n\n    const deltaX = clientX - dragStartX.current;\n    const deltaY = clientY - dragStartY.current;\n\n    // Prioritize vertical scroll over horizontal swipe\n    if (Math.abs(deltaY) > Math.abs(deltaX) && Math.abs(deltaY) > 5) {\n      isScrolling.current = true;\n      isDragging.current = false; // Stop tracking as a horizontal drag\n      if (translateX !== 0) {\n        if (cardRef.current) cardRef.current.style.transition = 'transform 0.2s ease-out';\n        setTranslateX(0);\n      }\n      return;\n    }\n    \n    if (Math.abs(deltaX) > 5) {\n      const newTranslateX = dragInitialTranslateX.current + deltaX;\n      // Allow some over-swipe for a natural feel\n      const newClampedTranslateX = Math.min(20, Math.max(maxTranslateX - 20, newTranslateX));\n      setTranslateX(newClampedTranslateX);\n    }\n  };\n\n  const handleDragEnd = (e?: React.TouchEvent | React.MouseEvent) => {\n    const wasDragging = isDragging.current;\n    isDragging.current = false;\n\n    if (isScrolling.current) {\n        isScrolling.current = false;\n        return;\n    }\n    \n    if (!wasDragging) return;\n\n    if (cardRef.current) {\n      cardRef.current.style.transition = 'transform 0.4s cubic-bezier(0.2, 0.8, 0.2, 1)';\n    }\n\n    const dragDuration = Date.now() - dragStartTime.current;\n    const dragDistance = Math.abs(translateX - dragInitialTranslateX.current);\n    \n    // Treat as a click if the drag was short and quick\n    if (dragDuration < 250 && dragDistance < 10) {\n      if (translateX !== 0) {\n        setTranslateX(0); // Close actions on tap\n      } else {\n        if (e) {\n          if (e.type === 'touchend') {\n            e.preventDefault();\n          }\n          onClick(e);\n        }\n      }\n      return;\n    }\n    \n    // Snap to the open or closed position\n    if (translateX < maxTranslateX / 2) {\n      setTranslateX(maxTranslateX);\n    } else {\n      setTranslateX(0);\n    }\n  };\n  \n  const executeAction = (action: () => void) => {\n    action();\n    setTranslateX(0);\n  };\n\n  const handleMenuToggled = useCallback((isOpen: boolean) => {\n    if (cardRef.current) {\n      cardRef.current.style.zIndex = isOpen ? '20' : '10';\n    }\n  }, []);\n\n  return (\n    <div className={`relative w-full ${layoutMode === 'card' ? 'overflow-hidden' : ''}`}>\n      {layoutMode === 'card' && (\n        <div className=\"absolute top-0 right-0 h-full flex items-center z-0\">\n          <button onClick={() => executeAction(isArchived ? onUnarchive : onArchive)} className=\"h-full w-[70px] flex flex-col items-center justify-center bg-blue-500 text-white transition-colors hover:bg-blue-600\" aria-label={isArchived ? 'Unarchive' : 'Archive'}>\n            {isArchived ? <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12\" /></svg> : <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4\" /></svg>}\n            <span className=\"text-xs mt-1\">{isArchived ? 'Unarchive' : 'Archive'}</span>\n          </button>\n          <button onClick={() => executeAction(onDelete)} className=\"h-full w-[70px] flex flex-col items-center justify-center bg-red-500 text-white transition-colors hover:bg-red-600\" aria-label=\"Delete\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" /></svg>\n            <span className=\"text-xs mt-1\">Delete</span>\n          </button>\n        </div>\n      )}\n      <div \n        ref={cardRef} \n        className=\"relative z-10\" \n        style={{ transform: `translateX(${translateX}px)`, touchAction: 'pan-y' }} \n        onTouchStart={e => handleDragStart(e.touches[0].clientX, e.touches[0].clientY, e)} \n        onTouchMove={e => handleDragMove(e.touches[0].clientX, e.touches[0].clientY)} \n        onTouchEnd={e => handleDragEnd(e)} \n        onMouseDown={e => handleDragStart(e.clientX, e.clientY, e)} \n        onMouseMove={e => handleDragMove(e.clientX, e.clientY)} \n        onMouseUp={e => handleDragEnd(e)} \n        onMouseLeave={() => isDragging.current && handleDragEnd()}\n      >\n        <BillCard {...props} onMenuToggled={handleMenuToggled} />\n      </div>\n    </div>\n  );\n};\n\nexport default SwipeableBillCard;","import React, { useState, useRef, useEffect, useMemo } from 'react';\nimport type { ImportedBill, DashboardLayoutMode } from '../types';\n\ninterface ImportedBillCardProps {\n  bill: ImportedBill;\n  onClick: (e: React.MouseEvent) => void;\n  onArchive: () => void;\n  onUnarchive: () => void;\n  onDelete: () => void;\n  onSettleUp: () => void;\n  onShowSummaryDetails: () => void;\n  onExport: () => void;\n  layoutMode: DashboardLayoutMode;\n  onMenuToggled: (isOpen: boolean) => void;\n}\n\nconst LiveIndicator: React.FC<{ status: ImportedBill['liveStatus'] }> = ({ status }) => {\n    if (!status || status === 'error') {\n        return null;\n    }\n\n    const config = {\n        live: { color: 'bg-emerald-500', title: 'Live: Connected and up-to-date' },\n        stale: { color: 'bg-amber-500', title: 'Stale: Connection issue, may be out of date' },\n    }[status];\n\n    if (!config) return null;\n\n    return (\n        <div className=\"flex-shrink-0\" title={config.title}>\n            <span className={`block h-2.5 w-2.5 rounded-full ${config.color}`}></span>\n        </div>\n    );\n};\n\nconst ImportedBillCard: React.FC<ImportedBillCardProps> = ({ bill, onClick, onArchive, onUnarchive, onDelete, onSettleUp, onShowSummaryDetails, onExport, layoutMode, onMenuToggled }) => {\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\n  const menuRef = useRef<HTMLDivElement>(null);\n\n  const myParticipant = bill.sharedData.bill.participants.find(p => p.id === bill.myParticipantId);\n  const amountOwed = myParticipant?.amountOwed || 0;\n  const isPaid = bill.localStatus.myPortionPaid;\n  const isSummary = bill.id.startsWith('summary-');\n\n  const displayDate = useMemo(() => {\n    if (isSummary) {\n      const dates = (bill.sharedData.bill.items || [])\n        .map(item => item.originalBillData?.date)\n        .filter((date): date is string => !!date)\n        .map(dateStr => new Date(dateStr).getTime());\n\n      if (dates.length > 0) {\n        const mostRecentTimestamp = Math.max(...dates);\n        return new Date(mostRecentTimestamp).toLocaleDateString();\n      }\n      // Fallback for summary without items/dates\n      return new Date(bill.sharedData.bill.date).toLocaleDateString();\n    }\n    return new Date(bill.sharedData.bill.date).toLocaleDateString();\n  }, [bill, isSummary]);\n\n  useEffect(() => {\n    onMenuToggled(isMenuOpen);\n  }, [isMenuOpen, onMenuToggled]);\n\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\n        setIsMenuOpen(false);\n      }\n    };\n    if (isMenuOpen) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [isMenuOpen]);\n\n  const handleMenuClick = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    setIsMenuOpen(prev => !prev);\n  };\n  \n  const handleActionClick = (e: React.MouseEvent, action: () => void) => {\n    e.stopPropagation();\n    action();\n    setIsMenuOpen(false);\n  };\n\n  const renderMenu = () => (\n    <div ref={menuRef} className=\"relative flex-shrink-0\">\n        <button onClick={handleMenuClick} onMouseDown={e => e.stopPropagation()} onTouchStart={e => e.stopPropagation()} className=\"p-3 -m-2 text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full\" aria-label=\"More options\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path d=\"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z\" /></svg>\n        </button>\n        {isMenuOpen && (\n            <div \n                onClick={e => e.stopPropagation()}\n                className=\"absolute top-full right-0 mt-2 w-48 bg-white dark:bg-slate-800 rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 py-1 z-20\"\n            >\n                {isSummary && <button onClick={(e) => handleActionClick(e, onShowSummaryDetails)} className=\"w-full text-left px-4 py-2 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700\">View Breakdown</button>}\n                <button onClick={(e) => handleActionClick(e, onExport)} className=\"w-full text-left px-4 py-2 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700\">Export as CSV</button>\n                <div className=\"my-1 h-px bg-slate-100 dark:bg-slate-700\"></div>\n                <button onClick={(e) => handleActionClick(e, bill.status === 'active' ? onArchive : onUnarchive)} className=\"w-full text-left px-4 py-2 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700\">{bill.status === 'active' ? 'Archive' : 'Unarchive'}</button>\n                <button onClick={(e) => handleActionClick(e, onDelete)} className=\"w-full text-left px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/40\">Delete</button>\n            </div>\n        )}\n    </div>\n  );\n  \n  if (layoutMode === 'list') {\n    return (\n        <div\n            onClick={onClick}\n            className=\"w-full flex items-center p-3 text-sm cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700/50 border-b border-slate-200 dark:border-slate-700 last:border-b-0\"\n        >\n            <div className=\"flex-grow flex items-center gap-3 overflow-hidden\">\n                <LiveIndicator status={bill.liveStatus} />\n                <div className=\"flex-grow overflow-hidden\">\n                    <p className=\"font-bold text-slate-800 dark:text-slate-100 truncate\">{bill.sharedData.bill.description}</p>\n                    <p className=\"text-xs text-slate-500 dark:text-slate-400\">From {bill.creatorName} &bull; {displayDate}</p>\n                </div>\n            </div>\n             <div className=\"flex-shrink-0 w-24 text-right\">\n                <p className=\"font-semibold text-slate-500 dark:text-slate-400\">Your Portion</p>\n                <p className={`font-bold ${isPaid ? 'text-emerald-700 dark:text-emerald-300' : 'text-slate-800 dark:text-slate-100'}`}>\n                    ${amountOwed.toFixed(2)}\n                </p>\n            </div>\n            <div className=\"flex-shrink-0 w-24 text-right\">\n                <p className=\"font-semibold text-slate-500 dark:text-slate-400\">Total</p>\n                <p className=\"font-bold text-slate-800 dark:text-slate-100\">${bill.sharedData.bill.totalAmount.toFixed(2)}</p>\n            </div>\n            {renderMenu()}\n        </div>\n    );\n  }\n\n  return (\n    <div\n      onClick={onClick}\n      className=\"bg-white dark:bg-slate-800 rounded-lg shadow-lg hover:shadow-xl dark:hover:shadow-teal-900/40 transition-shadow duration-300 cursor-pointer overflow-hidden transform hover:-translate-y-1 flex flex-col\"\n    >\n      <div className=\"p-5 flex-grow\">\n        <div className=\"flex justify-between items-start gap-2\">\n            <div className=\"flex-grow flex items-center gap-2\">\n                <LiveIndicator status={bill.liveStatus} />\n                {bill.isOwnBill && (\n                  <span title=\"This is one of your own bills that you imported.\" className=\"text-xs font-semibold text-slate-500 dark:text-slate-400 bg-slate-200 dark:bg-slate-600 px-2 py-0.5 rounded-full\">\n                      You\n                  </span>\n                )}\n                <p className=\"text-lg font-bold text-slate-800 dark:text-slate-100 break-words\">{bill.sharedData.bill.description}</p>\n            </div>\n            <div className=\"flex-shrink-0 flex items-center gap-2\">\n                 <span className={`px-3 py-1 text-xs font-semibold rounded-full flex-shrink-0 ${isPaid ? 'bg-emerald-100 text-emerald-800 dark:bg-emerald-900/50 dark:text-emerald-300' : 'bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300'}`}>\n                    {isPaid ? 'Paid' : 'Unpaid'}\n                 </span>\n                 {renderMenu()}\n            </div>\n        </div>\n        <p className=\"text-sm text-slate-500 dark:text-slate-400 mt-1\">From {bill.creatorName} &bull; {displayDate}</p>\n        <div className=\"mt-4 flex justify-between items-end\">\n          <div>\n            <p className=\"text-sm font-semibold text-slate-500 dark:text-slate-400\">Your Portion</p>\n            <p className={`text-3xl font-extrabold ${isPaid ? 'text-emerald-700 dark:text-emerald-300' : 'text-slate-800 dark:text-slate-100'}`}>\n              ${amountOwed.toFixed(2)}\n            </p>\n          </div>\n          <div className=\"text-right\">\n            <p className=\"text-sm font-semibold text-slate-500 dark:text-slate-400\">Bill Total</p>\n            <p className=\"text-2xl font-bold text-slate-800 dark:text-slate-100\">${bill.sharedData.bill.totalAmount.toFixed(2)}</p>\n          </div>\n        </div>\n      </div>\n       <div className=\"bg-slate-50 dark:bg-slate-700/50 px-5 py-3 flex items-center justify-end gap-3\">\n        {isSummary ? (\n            <button onClick={(e) => {e.stopPropagation(); onShowSummaryDetails();}} className=\"px-4 py-1.5 text-xs font-semibold rounded-full bg-slate-200 dark:bg-slate-600 hover:bg-slate-300 dark:hover:bg-slate-500\">\n                View Breakdown\n            </button>\n        ) : (\n            <button onClick={(e) => {e.stopPropagation(); onClick(e);}} className=\"px-4 py-1.5 text-xs font-semibold rounded-full bg-slate-200 dark:bg-slate-600 hover:bg-slate-300 dark:hover:bg-slate-500\">\n                Details\n            </button>\n        )}\n        {!isPaid && (\n            <button onClick={(e) => {e.stopPropagation(); onSettleUp();}} className=\"px-4 py-1.5 text-xs font-semibold rounded-full bg-emerald-500 text-white hover:bg-emerald-600\">\n                Settle Up\n            </button>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ImportedBillCard;\n","import React, { useRef, useState, useCallback } from 'react';\nimport type { ImportedBill, DashboardLayoutMode } from '../types';\nimport ImportedBillCard from './ImportedBillCard';\n\ninterface SwipeableImportedBillCardProps {\n  bill: ImportedBill;\n  onClick: (e: React.MouseEvent) => void;\n  onArchive: () => void;\n  onUnarchive: () => void;\n  onDelete: () => void;\n  onSettleUp: () => void;\n  onShowSummaryDetails: () => void;\n  onExport: () => void;\n  layoutMode: DashboardLayoutMode;\n}\n\nconst ACTION_BUTTON_WIDTH = 70;\n\nconst SwipeableImportedBillCard: React.FC<SwipeableImportedBillCardProps> = (props) => {\n  const { bill, onClick, onArchive, onUnarchive, onDelete, onSettleUp, layoutMode } = props;\n  const [translateX, setTranslateX] = useState(0);\n  const dragStartX = useRef(0);\n  const dragStartY = useRef(0);\n  const dragInitialTranslateX = useRef(0);\n  const cardRef = useRef<HTMLDivElement>(null);\n  const isDragging = useRef(false);\n  const isScrolling = useRef(false);\n  const dragStartTime = useRef(0);\n  \n  const isArchived = bill.status === 'archived';\n  const isPaid = bill.localStatus.myPortionPaid;\n  \n  let buttonCount = 1; // Delete\n  if (!isPaid) buttonCount++; // Settle Up\n  buttonCount++; // Archive/Unarchive\n  \n  const maxTranslateX = layoutMode === 'card' ? -(ACTION_BUTTON_WIDTH * buttonCount) : 0;\n\n  const handleDragStart = (clientX: number, clientY: number, e: React.TouchEvent | React.MouseEvent) => {\n    const target = e.target as HTMLElement;\n    if (target.closest('button')) {\n        isDragging.current = false;\n        return;\n    }\n    isDragging.current = true;\n    isScrolling.current = false;\n    dragStartX.current = clientX;\n    dragStartY.current = clientY;\n    dragInitialTranslateX.current = translateX;\n    dragStartTime.current = Date.now();\n    if (cardRef.current) {\n      cardRef.current.style.transition = 'none';\n    }\n  };\n\n  const handleDragMove = (clientX: number, clientY: number) => {\n    if (!isDragging.current || isScrolling.current) return;\n\n    const deltaX = clientX - dragStartX.current;\n    const deltaY = clientY - dragStartY.current;\n\n    if (Math.abs(deltaY) > Math.abs(deltaX) && Math.abs(deltaY) > 5) {\n      isScrolling.current = true;\n      isDragging.current = false;\n      if (translateX !== 0) {\n        if (cardRef.current) cardRef.current.style.transition = 'transform 0.2s ease-out';\n        setTranslateX(0);\n      }\n      return;\n    }\n    \n    if (Math.abs(deltaX) > 5) {\n      const newTranslateX = dragInitialTranslateX.current + deltaX;\n      const newClampedTranslateX = Math.min(20, Math.max(maxTranslateX - 20, newTranslateX));\n      setTranslateX(newClampedTranslateX);\n    }\n  };\n\n  const handleDragEnd = (e?: React.TouchEvent | React.MouseEvent) => {\n    const wasDragging = isDragging.current;\n    isDragging.current = false;\n\n    if (isScrolling.current) {\n        isScrolling.current = false;\n        return;\n    }\n\n    if (!wasDragging) return;\n\n    if (cardRef.current) {\n      cardRef.current.style.transition = 'transform 0.4s cubic-bezier(0.2, 0.8, 0.2, 1)';\n    }\n\n    const dragDuration = Date.now() - dragStartTime.current;\n    const dragDistance = Math.abs(translateX - dragInitialTranslateX.current);\n    \n    if (dragDuration < 250 && dragDistance < 10) {\n      if (translateX !== 0) {\n        setTranslateX(0);\n      } else {\n        if (e) {\n          if (e.type === 'touchend') {\n            e.preventDefault();\n          }\n          onClick(e as React.MouseEvent);\n        }\n      }\n      return;\n    }\n    \n    if (translateX < maxTranslateX / 2) {\n      setTranslateX(maxTranslateX);\n    } else {\n      setTranslateX(0);\n    }\n  };\n  \n  const executeAction = (action: () => void) => {\n    action();\n    setTranslateX(0);\n  };\n\n  const handleMenuToggled = useCallback((isOpen: boolean) => {\n    if (cardRef.current) {\n      cardRef.current.style.zIndex = isOpen ? '20' : '10';\n    }\n  }, []);\n\n  return (\n    <div className={`relative w-full ${layoutMode === 'card' ? 'overflow-hidden' : ''}`}>\n      {layoutMode === 'card' && (\n        <div className=\"absolute top-0 right-0 h-full flex items-center z-0\">\n          {!isPaid && (\n            <button onClick={() => executeAction(onSettleUp)} className=\"h-full w-[70px] flex flex-col items-center justify-center bg-emerald-500 text-white transition-colors hover:bg-emerald-600\" aria-label='Settle Up'>\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z\" />\n              </svg>\n              <span className=\"text-xs mt-1\">Settle Up</span>\n            </button>\n          )}\n          <button onClick={() => executeAction(isArchived ? onUnarchive : onArchive)} className=\"h-full w-[70px] flex flex-col items-center justify-center bg-blue-500 text-white transition-colors hover:bg-blue-600\" aria-label={isArchived ? 'Unarchive' : 'Archive'}>\n            {isArchived ? <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12\" /></svg> : <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4\" /></svg>}\n            <span className=\"text-xs mt-1\">{isArchived ? 'Unarchive' : 'Archive'}</span>\n          </button>\n          <button onClick={() => executeAction(onDelete)} className=\"h-full w-[70px] flex flex-col items-center justify-center bg-red-500 text-white transition-colors hover:bg-red-600\" aria-label=\"Delete\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" /></svg>\n            <span className=\"text-xs mt-1\">Delete</span>\n          </button>\n        </div>\n      )}\n      <div \n        ref={cardRef} \n        className=\"relative z-10\" \n        style={{ transform: `translateX(${translateX}px)`, touchAction: 'pan-y' }} \n        onTouchStart={e => handleDragStart(e.touches[0].clientX, e.touches[0].clientY, e)} \n        onTouchMove={e => handleDragMove(e.touches[0].clientX, e.touches[0].clientY)} \n        onTouchEnd={e => handleDragEnd(e)} \n        onMouseDown={e => handleDragStart(e.clientX, e.clientY, e)} \n        onMouseMove={e => handleDragMove(e.clientX, e.clientY)} \n        onMouseUp={e => handleDragEnd(e)} \n        onMouseLeave={() => isDragging.current && handleDragEnd()}\n      >\n        <ImportedBillCard {...props} onMenuToggled={handleMenuToggled} />\n      </div>\n    </div>\n  );\n};\n\nexport default SwipeableImportedBillCard;","import React, { useState, useEffect, useRef } from 'react';\nimport { AD_IFRAME_CONTENT } from '../services/adService';\n\nconst AdBillCard: React.FC = () => {\n  const [loadAd, setLoadAd] = useState(false);\n  const adRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    const observer = new IntersectionObserver(\n      ([entry]) => {\n        // When the component is intersecting with the viewport, load the ad.\n        if (entry.isIntersecting) {\n          setLoadAd(true);\n          // Stop observing once the ad is loaded to prevent unnecessary work.\n          if (adRef.current) {\n            observer.unobserve(adRef.current);\n          }\n        }\n      },\n      {\n        rootMargin: '100px', // Start loading when it's 100px away from the viewport\n        threshold: 0.01,    // As soon as a tiny part is visible\n      }\n    );\n\n    if (adRef.current) {\n      observer.observe(adRef.current);\n    }\n\n    return () => {\n      if (adRef.current) {\n        observer.unobserve(adRef.current);\n      }\n    };\n  }, []);\n\n  // If no ad provider is configured, render nothing.\n  if (!AD_IFRAME_CONTENT) {\n    return null;\n  }\n\n  return (\n    <div ref={adRef} className=\"w-full bg-white dark:bg-slate-800 rounded-lg shadow-lg overflow-hidden flex flex-col justify-between p-5 border border-slate-200 dark:border-slate-700 min-h-[150px]\">\n      <div>\n        <span className=\"text-xs font-semibold text-slate-400 dark:text-slate-500 uppercase tracking-wider\">\n          Advertisement\n        </span>\n      </div>\n      <div className=\"flex items-center justify-center min-h-[100px] w-full\">\n        {loadAd && (\n          <iframe\n            srcDoc={AD_IFRAME_CONTENT}\n            title=\"Advertisement\"\n            style={{\n              width: '100%',\n              minHeight: '100px',\n              border: '0',\n              overflow: 'hidden',\n            }}\n            sandbox=\"allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox\"\n            aria-label=\"Advertisement Content\"\n          ></iframe>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default AdBillCard;","import React, { useMemo } from 'react';\nimport type { Bill, ImportedBill, DashboardLayoutMode } from '../../types';\nimport type { SubscriptionStatus } from '../../hooks/useAuth';\nimport SwipeableBillCard from '../SwipeableBillCard';\nimport SwipeableImportedBillCard from '../SwipeableImportedBillCard';\nimport AdBillCard from '../AdBillCard';\nimport { AD_IFRAME_CONTENT } from '../../services/adService';\n\nconst AD_INTERVAL = 10; // Show an ad after every 10 bills\n\nconst AdListItem: React.FC = () => {\n  if (!AD_IFRAME_CONTENT) {\n    return null;\n  }\n  return (\n    <div className=\"p-3 border-b border-slate-200 dark:border-slate-700 last:border-b-0\">\n      <span className=\"text-xs font-semibold text-slate-400 dark:text-slate-500 uppercase tracking-wider\">\n        Advertisement\n      </span>\n      <div className=\"flex items-center justify-center w-full min-h-[100px]\">\n        <iframe\n          srcDoc={AD_IFRAME_CONTENT}\n          title=\"Advertisement\"\n          style={{ width: '100%', minHeight: '100px', border: '0', overflow: 'hidden' }}\n          sandbox=\"allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox\"\n          aria-label=\"Advertisement Content\"\n        ></iframe>\n      </div>\n    </div>\n  );\n};\n\ninterface BillListProps {\n  filteredBills: Bill[];\n  filteredImportedBills: ImportedBill[];\n  visibleCount: number;\n  subscriptionStatus: SubscriptionStatus;\n  archivingBillIds: string[];\n  onSelectBill: (bill: Bill) => void;\n  onArchiveBill: (billId: string) => void;\n  onUnarchiveBill: (billId: string) => void;\n  onDeleteBill: (billId: string) => void;\n  onReshareBill: (billId: string) => void;\n  onSelectImportedBill: (bill: ImportedBill) => void;\n  onUpdateImportedBill: (bill: ImportedBill) => void;\n  onArchiveImportedBill: (billId: string) => void;\n  onUnarchiveImportedBill: (billId: string) => void;\n  onDeleteImportedBill: (billId: string) => void;\n  onShowSummaryDetails: (bill: ImportedBill) => void;\n  onSettleUp: (bill: ImportedBill) => void;\n  loadMoreRef: React.RefObject<HTMLDivElement>;\n  hasMore: boolean;\n  onConvertToTemplate: (bill: Bill) => void;\n  onExportOwnedBill: (bill: Bill) => void;\n  onExportImportedBill: (bill: ImportedBill) => void;\n  dashboardLayoutMode: DashboardLayoutMode;\n}\n\nconst BillList: React.FC<BillListProps> = ({\n  filteredBills,\n  filteredImportedBills,\n  visibleCount,\n  subscriptionStatus,\n  archivingBillIds,\n  onSelectBill,\n  onArchiveBill,\n  onUnarchiveBill,\n  onDeleteBill,\n  onReshareBill,\n  onSelectImportedBill,\n  onUpdateImportedBill,\n  onArchiveImportedBill,\n  onUnarchiveImportedBill,\n  onDeleteImportedBill,\n  onShowSummaryDetails,\n  onSettleUp,\n  loadMoreRef,\n  hasMore,\n  onConvertToTemplate,\n  onExportOwnedBill,\n  onExportImportedBill,\n  dashboardLayoutMode,\n}) => {\n  const itemsWithAds = useMemo(() => {\n    const billsToShow = filteredBills.slice(0, visibleCount);\n    const renderedItems: React.ReactElement[] = [];\n    const isFree = subscriptionStatus === 'free';\n    \n    const AdComponent = dashboardLayoutMode === 'card' ? AdBillCard : AdListItem;\n\n    if (isFree) {\n      renderedItems.push(<AdComponent key=\"ad-first\" />);\n    }\n\n    billsToShow.forEach((bill, index) => {\n      const isArchiving = archivingBillIds.includes(bill.id);\n      renderedItems.push(\n        <div key={bill.id} className={`transition-all duration-500 ease-out ${isArchiving ? 'opacity-0 scale-90 max-h-0' : 'max-h-96'}`}>\n          <SwipeableBillCard\n            bill={bill}\n            onArchive={() => onArchiveBill(bill.id)}\n            onUnarchive={() => onUnarchiveBill(bill.id)}\n            onDelete={() => onDeleteBill(bill.id)}\n            onReshare={() => onReshareBill(bill.id)}\n            onClick={(e) => onSelectBill(bill)}\n            onConvertToTemplate={() => onConvertToTemplate(bill)}\n            onExport={() => onExportOwnedBill(bill)}\n            layoutMode={dashboardLayoutMode}\n          />\n        </div>\n      );\n\n      if (isFree && (index + 1) % AD_INTERVAL === 0) {\n        renderedItems.push(<AdComponent key={`ad-interval-${index}`} />);\n      }\n    });\n    return renderedItems;\n  }, [filteredBills, visibleCount, subscriptionStatus, onArchiveBill, onUnarchiveBill, onDeleteBill, onReshareBill, onSelectBill, archivingBillIds, onConvertToTemplate, onExportOwnedBill, dashboardLayoutMode]);\n\n  const layoutClasses = dashboardLayoutMode === 'card'\n    ? \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\"\n    : \"bg-white dark:bg-slate-800 rounded-lg shadow-md\";\n\n  return (\n    <>\n      {filteredImportedBills.length > 0 && (\n        <div className=\"mb-8\">\n          <h3 className=\"text-2xl font-bold text-slate-700 dark:text-slate-200 mb-4\">Shared With Me</h3>\n          <div className={layoutClasses}>\n            {filteredImportedBills.map(ib => (\n              <SwipeableImportedBillCard \n                key={ib.id} \n                bill={ib}\n                onArchive={() => onArchiveImportedBill(ib.id)}\n                onUnarchive={() => onUnarchiveImportedBill(ib.id)}\n                onDelete={() => onDeleteImportedBill(ib.id)}\n                onClick={(e) => onSelectImportedBill(ib)}\n                onShowSummaryDetails={() => onShowSummaryDetails(ib)}\n                onSettleUp={() => onSettleUp(ib)}\n                onExport={() => onExportImportedBill(ib)}\n                layoutMode={dashboardLayoutMode}\n              />\n            ))}\n          </div>\n        </div>\n      )}\n      {itemsWithAds.length > 0 && (\n        <>\n          <h3 className=\"text-2xl font-bold text-slate-700 dark:text-slate-200 mb-4\">My Bills</h3>\n          <div className={layoutClasses}>\n            {itemsWithAds}\n          </div>\n          {hasMore && (\n            <div ref={loadMoreRef} className=\"flex justify-center items-center p-8\">\n              <svg className=\"animate-spin h-8 w-8 text-teal-500\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n              </svg>\n            </div>\n          )}\n        </>\n      )}\n    </>\n  );\n};\n\nexport default BillList;","import React from 'react';\nimport type { DashboardLayoutMode } from '../types';\n\ninterface ParticipantCardProps {\n  data: { name: string; amount: number; type: 'owed' | 'paid'; phone?: string; email?: string; };\n  onClick: () => void;\n  layoutMode: DashboardLayoutMode;\n}\n\nconst ParticipantCard: React.FC<ParticipantCardProps> = ({ data, onClick, layoutMode }) => {\n  if (layoutMode === 'list') {\n    return (\n      <div\n        onClick={onClick}\n        className=\"w-full flex items-center p-3 text-sm cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700/50 border-b border-slate-200 dark:border-slate-700 last:border-b-0\"\n      >\n        <div className=\"flex-grow flex items-center gap-3 overflow-hidden\">\n          <div className=\"flex-shrink-0 h-8 w-8 rounded-full bg-teal-500 flex items-center justify-center text-white font-bold text-sm\">\n            {data.name.charAt(0).toUpperCase()}\n          </div>\n          <p className=\"font-bold text-slate-800 dark:text-slate-100 truncate\">{data.name}</p>\n        </div>\n        <div className=\"flex-shrink-0 w-28 text-right\">\n          <p className={`font-semibold ${data.type === 'owed' ? 'text-amber-600 dark:text-amber-400' : 'text-emerald-600 dark:text-emerald-400'}`}>\n            {data.type === 'owed' ? 'Owes' : 'Total Paid'}\n          </p>\n          <p className=\"font-bold text-slate-800 dark:text-slate-100\">\n            ${data.amount.toFixed(2)}\n          </p>\n        </div>\n        <div className=\"flex-shrink-0 ml-2\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 text-slate-400 dark:text-slate-500\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n            <path fillRule=\"evenodd\" d=\"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z\" clipRule=\"evenodd\" />\n          </svg>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div\n      onClick={onClick}\n      className=\"bg-white dark:bg-slate-800 rounded-lg shadow-lg hover:shadow-xl dark:hover:shadow-teal-900/40 transition-shadow duration-300 cursor-pointer overflow-hidden transform hover:-translate-y-1 flex flex-col p-5\"\n    >\n      <div className=\"flex justify-between items-start\">\n        <div className=\"flex items-center gap-3\">\n            <div className=\"flex-shrink-0 inline-block h-10 w-10 rounded-full ring-2 ring-white dark:ring-slate-800 bg-teal-500 flex items-center justify-center text-white font-bold text-lg\">\n                {data.name.charAt(0).toUpperCase()}\n            </div>\n            <p className=\"text-lg font-bold text-slate-800 dark:text-slate-100 break-words\">{data.name}</p>\n        </div>\n        <div className=\"flex items-center gap-2\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 text-slate-400 dark:text-slate-500\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                <path fillRule=\"evenodd\" d=\"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z\" clipRule=\"evenodd\" />\n            </svg>\n        </div>\n      </div>\n\n      <div className=\"mt-4 text-right\">\n        <p className={`text-sm font-semibold ${data.type === 'owed' ? 'text-amber-600 dark:text-amber-400' : 'text-emerald-600 dark:text-emerald-400'}`}>\n          {data.type === 'owed' ? 'Owes' : 'Total Paid'}\n        </p>\n        <p className=\"text-3xl font-extrabold text-slate-900 dark:text-slate-50\">\n          ${data.amount.toFixed(2)}\n        </p>\n      </div>\n    </div>\n  );\n};\n\nexport default ParticipantCard;","import React, { useRef, useState } from 'react';\nimport ParticipantCard from './ParticipantCard';\nimport type { DashboardLayoutMode } from '../types';\n\ninterface SwipeableParticipantCardProps {\n  participant: { name: string; amount: number; type: 'owed' | 'paid'; phone?: string; email?: string; };\n  onClick: () => void;\n  onPaidInFull: () => void;\n  layoutMode: DashboardLayoutMode;\n}\n\nconst ACTION_BUTTON_WIDTH = 90; // Width for the \"Paid in Full\" button\n\nconst SwipeableParticipantCard: React.FC<SwipeableParticipantCardProps> = ({ participant, onClick, onPaidInFull, layoutMode }) => {\n  const [translateX, setTranslateX] = useState(0);\n  const [isExiting, setIsExiting] = useState(false);\n  const dragStartX = useRef(0);\n  const dragStartY = useRef(0);\n  const dragInitialTranslateX = useRef(0);\n  const cardRef = useRef<HTMLDivElement>(null);\n  const isDragging = useRef(false);\n  const isScrolling = useRef(false);\n  const dragStartTime = useRef(0);\n\n  const maxTranslateX = layoutMode === 'card' && participant.type === 'owed' ? -ACTION_BUTTON_WIDTH : 0;\n\n  const handleDragStart = (clientX: number, clientY: number) => {\n    // A real drag only happens for owed participants in card view.\n    // For other cases, this logic still runs to capture start coordinates for click detection.\n    isDragging.current = participant.type === 'owed' && layoutMode === 'card';\n    isScrolling.current = false;\n    dragStartX.current = clientX;\n    dragStartY.current = clientY;\n    dragInitialTranslateX.current = translateX;\n    dragStartTime.current = Date.now();\n    if (cardRef.current) {\n      cardRef.current.style.transition = 'none';\n    }\n  };\n\n  const handleDragMove = (clientX: number, clientY: number) => {\n    if (!isDragging.current) return;\n    if (isScrolling.current) return;\n\n    const deltaX = clientX - dragStartX.current;\n    const deltaY = clientY - dragStartY.current;\n\n    // Check for scroll intent once at the beginning of the gesture\n    if (Math.abs(deltaY) > 5 || Math.abs(deltaX) > 5) {\n      if (Math.abs(deltaY) > Math.abs(deltaX)) {\n        isScrolling.current = true;\n        // This is a scroll. Stop tracking it as a drag for the swipeable component.\n        isDragging.current = false;\n        // If we started to drag a bit horizontally, snap back immediately.\n        if (translateX !== 0) {\n            if (cardRef.current) {\n                cardRef.current.style.transition = 'transform 0.2s ease-out';\n            }\n            setTranslateX(0);\n        }\n        return;\n      }\n    }\n\n    // Only runs if it's a horizontal swipe\n    const newTranslateX = dragInitialTranslateX.current + deltaX;\n    const newClampedTranslateX = Math.min(20, Math.max(maxTranslateX - 20, newTranslateX));\n    setTranslateX(newClampedTranslateX);\n  };\n\n  const handleDragEnd = (e?: React.TouchEvent | React.MouseEvent) => {\n    if (!isDragging.current) {\n        // This block handles clicks for non-swipeable cards (like in list view).\n        const endX = e && 'changedTouches' in e && e.changedTouches.length > 0 \n          ? e.changedTouches[0].clientX \n          : (e as React.MouseEvent)?.clientX;\n          \n        if (e && Math.abs(dragStartX.current - endX) < 10 && (Date.now() - dragStartTime.current) < 250) {\n             if (e.type === 'touchend') e.preventDefault();\n             onClick();\n        }\n        return;\n    }\n    \n    const wasScrolling = isScrolling.current;\n    isDragging.current = false;\n    isScrolling.current = false;\n    \n    if (cardRef.current) {\n      cardRef.current.style.transition = 'transform 0.4s cubic-bezier(0.2, 0.8, 0.2, 1)';\n    }\n\n    if (wasScrolling) {\n      setTranslateX(0);\n      return;\n    }\n    \n    const dragDuration = Date.now() - dragStartTime.current;\n    const dragDistance = translateX - dragInitialTranslateX.current;\n    \n    if (dragDuration < 250 && Math.abs(dragDistance) < 10) {\n      if (dragInitialTranslateX.current !== 0) {\n        setTranslateX(0);\n      } else {\n        // This is a tap. Prevent the ghost click for touch events.\n        if (e && e.type === 'touchend') {\n            e.preventDefault();\n        }\n        onClick();\n      }\n      return;\n    }\n    \n    if (translateX < maxTranslateX / 2) { setTranslateX(maxTranslateX); } else { setTranslateX(0); }\n  };\n  \n  const executeAction = (action: () => void) => {\n    setIsExiting(true);\n    // Wait for animation to finish before calling the state-updating function\n    setTimeout(() => {\n      action();\n    }, 300);\n  };\n\n  return (\n    <div className={`relative w-full transition-all duration-300 ease-in-out ${isExiting ? 'opacity-0 max-h-0 scale-95' : 'max-h-96'}`}>\n       {layoutMode === 'card' && participant.type === 'owed' && (\n        <div className=\"absolute top-0 right-0 h-full flex items-center z-0\">\n            <button\n            onClick={() => executeAction(onPaidInFull)}\n            className=\"h-full w-[90px] flex flex-col items-center justify-center bg-emerald-500 text-white transition-colors hover:bg-emerald-600\"\n            aria-label={`Mark all bills for ${participant.name} as paid`}\n            >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M5 13l4 4L19 7\" />\n            </svg>\n            <span className=\"text-xs mt-1 font-semibold\">Paid in Full</span>\n            </button>\n        </div>\n      )}\n\n      <div\n        ref={cardRef}\n        className=\"relative z-10\"\n        style={{ transform: `translateX(${translateX}px)`, touchAction: 'pan-y' }}\n        onTouchStart={e => handleDragStart(e.touches[0].clientX, e.touches[0].clientY)}\n        onTouchMove={e => handleDragMove(e.touches[0].clientX, e.touches[0].clientY)}\n        onTouchEnd={e => handleDragEnd(e)}\n        onMouseDown={e => handleDragStart(e.clientX, e.clientY)}\n        onMouseMove={e => handleDragMove(e.clientX, e.clientY)}\n        onMouseUp={e => handleDragEnd(e)}\n        onMouseLeave={() => isDragging.current && handleDragEnd()}\n      >\n        <ParticipantCard\n          data={participant}\n          onClick={() => { /* Click is now handled in dragEnd */ }}\n          layoutMode={layoutMode}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default SwipeableParticipantCard;\n","import React from 'react';\nimport SwipeableParticipantCard from '../SwipeableParticipantCard';\nimport { DashboardLayoutMode } from '../../types';\n\nexport type ParticipantData = {\n  name: string;\n  amount: number;\n  type: 'owed' | 'paid';\n  phone?: string;\n  email?: string;\n};\n\ninterface ParticipantListProps {\n  participantsData: ParticipantData[];\n  onSetShareSheetParticipant: (participant: ParticipantData) => void;\n  onMarkParticipantAsPaid: (name: string) => void;\n  dashboardLayoutMode: DashboardLayoutMode;\n}\n\nconst ParticipantList: React.FC<ParticipantListProps> = ({\n  participantsData,\n  onSetShareSheetParticipant,\n  onMarkParticipantAsPaid,\n  dashboardLayoutMode,\n}) => {\n  const layoutClasses = dashboardLayoutMode === 'card'\n    ? \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\"\n    : \"bg-white dark:bg-slate-800 rounded-lg shadow-md overflow-hidden\";\n\n  return (\n    <div className={layoutClasses}>\n      {participantsData.map(p => (\n        <SwipeableParticipantCard\n          key={p.name}\n          participant={p}\n          onClick={() => onSetShareSheetParticipant(p)}\n          onPaidInFull={() => onMarkParticipantAsPaid(p.name)}\n          // FIX: Pass the layoutMode prop to the swipeable card.\n          layoutMode={dashboardLayoutMode}\n        />\n      ))}\n    </div>\n  );\n};\n\nexport default ParticipantList;","import React from 'react';\n\ninterface EmptyStateProps {\n  title: string;\n  message: string;\n  isArchiveContext?: boolean;\n}\n\nconst EmptyState: React.FC<EmptyStateProps> = ({ title, message, isArchiveContext = false }) => {\n  const icon = isArchiveContext ? (\n    <svg className=\"mx-auto h-12 w-12 text-slate-400 dark:text-slate-500\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" aria-hidden=\"true\"><path vectorEffect=\"non-scaling-stroke\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4\" /></svg>\n  ) : (\n    <svg className=\"mx-auto h-12 w-12 text-slate-400 dark:text-slate-500\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" aria-hidden=\"true\"><path vectorEffect=\"non-scaling-stroke\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z\" /></svg>\n  );\n\n  return (\n    <div className=\"text-center py-16 px-6 bg-white dark:bg-slate-800 rounded-lg shadow\">\n      {icon}\n      <h3 className=\"mt-2 text-xl font-medium text-slate-900 dark:text-slate-100\">{title}</h3>\n      <p className=\"mt-1 text-slate-500 dark:text-slate-400\">{message}</p>\n    </div>\n  );\n};\n\nexport default EmptyState;\n","import React from 'react';\nimport type { Bill, DashboardLayoutMode } from '../../types';\nimport SwipeableBillCard from '../SwipeableBillCard';\nimport EmptyState from './EmptyState';\n\ninterface ParticipantDetailViewProps {\n  participantBills: {\n    active: Bill[];\n    allArchived: Bill[];\n    unpaidArchived: Bill[];\n  };\n  onSelectBill: (bill: Bill) => void;\n  onArchiveBill: (billId: string) => void;\n  onUnarchiveBill: (billId: string) => void;\n  onDeleteBill: (billId: string) => void;\n  onReshareBill: (billId: string) => void;\n  dashboardStatusFilter: 'active' | 'archived';\n  searchQuery: string;\n  selectedParticipant: string;\n  onExport: () => void;\n  onConvertToTemplate: (bill: Bill) => void;\n  onExportBill: (bill: Bill) => void;\n  dashboardLayoutMode: DashboardLayoutMode;\n}\n\nconst ParticipantDetailView: React.FC<ParticipantDetailViewProps> = ({\n  participantBills,\n  onSelectBill,\n  onArchiveBill,\n  onUnarchiveBill,\n  onDeleteBill,\n  onReshareBill,\n  dashboardStatusFilter,\n  searchQuery,\n  selectedParticipant,\n  onExport,\n  onConvertToTemplate,\n  onExportBill,\n  dashboardLayoutMode,\n}) => {\n  const { active, allArchived, unpaidArchived } = participantBills;\n  const layoutClasses = dashboardLayoutMode === 'card'\n    ? \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\"\n    : \"bg-white dark:bg-slate-800 rounded-lg shadow-md\";\n\n  if (dashboardStatusFilter === 'active') {\n    if (active.length === 0 && unpaidArchived.length === 0) {\n      return (\n        <EmptyState\n          title=\"All Settled\"\n          message={searchQuery ? `Your search for \"${searchQuery}\" did not match any bills.` : `${selectedParticipant} has no active bills or unpaid archived bills.`}\n        />\n      );\n    }\n    return (\n      <div className=\"space-y-8\">\n        <div className=\"flex justify-end -mb-4\">\n             <button\n                onClick={onExport}\n                className=\"p-2 text-slate-500 dark:text-slate-400 hover:text-teal-600 dark:hover:text-teal-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full focus:outline-none focus:ring-2 focus:ring-teal-500\"\n                aria-label={`Export all bills for ${selectedParticipant} as CSV`}\n                title=\"Export CSV\"\n             >\n                <span className=\"text-xl\" role=\"img\" aria-label=\"Download\">📥</span>\n             </button>\n        </div>\n        {active.length > 0 && (\n          <div>\n            <h3 className=\"text-xl font-semibold text-slate-700 dark:text-slate-300 mb-4 pb-2 border-b border-slate-200 dark:border-slate-700\">Active Bills</h3>\n            <div className={layoutClasses}>\n              {active.map(bill => (\n                <SwipeableBillCard key={bill.id} bill={bill} onArchive={() => onArchiveBill(bill.id)} onUnarchive={() => onUnarchiveBill(bill.id)} onDelete={() => onDeleteBill(bill.id)} onClick={(e) => onSelectBill(bill)} onReshare={() => onReshareBill(bill.id)} onConvertToTemplate={() => onConvertToTemplate(bill)} onExport={() => onExportBill(bill)} layoutMode={dashboardLayoutMode} />\n              ))}\n            </div>\n          </div>\n        )}\n        {unpaidArchived.length > 0 && (\n          <div>\n            <h3 className=\"text-xl font-semibold text-red-700 dark:text-red-400 mb-4 pb-2 border-b border-slate-200 dark:border-slate-700\">Unpaid Archived Bills</h3>\n            <div className={layoutClasses}>\n              {unpaidArchived.map(bill => (\n                <SwipeableBillCard key={bill.id} bill={bill} onArchive={() => onArchiveBill(bill.id)} onUnarchive={() => onUnarchiveBill(bill.id)} onDelete={() => onDeleteBill(bill.id)} onClick={(e) => onSelectBill(bill)} onReshare={() => onReshareBill(bill.id)} onConvertToTemplate={() => onConvertToTemplate(bill)} onExport={() => onExportBill(bill)} layoutMode={dashboardLayoutMode} />\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  } else { // dashboardStatusFilter === 'archived'\n    if (allArchived.length === 0) {\n      return (\n        <EmptyState\n          title=\"No Archived Bills\"\n          message={searchQuery ? `Your search for \"${searchQuery}\" did not match any archived bills.` : `${selectedParticipant} has no archived bills.`}\n          isArchiveContext\n        />\n      );\n    }\n    return (\n      <>\n        <div className=\"flex justify-end -mb-4\">\n             <button\n                onClick={onExport}\n                className=\"p-2 text-slate-500 dark:text-slate-400 hover:text-teal-600 dark:hover:text-teal-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full focus:outline-none focus:ring-2 focus:ring-teal-500\"\n                aria-label={`Export all bills for ${selectedParticipant} as CSV`}\n                title=\"Export CSV\"\n             >\n                <span className=\"text-xl\" role=\"img\" aria-label=\"Download\">📥</span>\n             </button>\n        </div>\n        <div className={`${layoutClasses} mt-8`}>\n            {allArchived.map(bill => (\n            <SwipeableBillCard key={bill.id} bill={bill} onArchive={() => onArchiveBill(bill.id)} onUnarchive={() => onUnarchiveBill(bill.id)} onDelete={() => onDeleteBill(bill.id)} onClick={(e) => onSelectBill(bill)} onReshare={() => onReshareBill(bill.id)} onConvertToTemplate={() => onConvertToTemplate(bill)} onExport={() => onExportBill(bill)} layoutMode={dashboardLayoutMode} />\n            ))}\n        </div>\n      </>\n    );\n  }\n};\n\nexport default ParticipantDetailView;","import React from 'react';\nimport type { RecurringBill, Participant, DashboardLayoutMode } from '../types';\n\ninterface RecurringBillCardProps {\n  bill: RecurringBill;\n  onClick: () => void;\n  layoutMode: DashboardLayoutMode;\n}\n\nconst RecurringBillCard: React.FC<RecurringBillCardProps> = ({ bill, onClick, layoutMode }) => {\n\n  const getFrequencyText = () => {\n    const { frequency, dayOfMonth, dayOfWeek, interval } = bill.recurrenceRule;\n    const intervalText = interval > 1 ? `every ${interval}` : '';\n    switch (frequency) {\n        case 'daily': return `Repeats ${interval > 1 ? `every ${interval} days` : 'Daily'}`;\n        case 'weekly':\n            const dayName = new Intl.DateTimeFormat('en-US', { weekday: 'long' }).format(new Date(2023, 0, (dayOfWeek ?? 0) + 1));\n            return `Repeats ${interval > 1 ? `every ${interval} weeks` : 'Weekly'} on ${dayName}`;\n        case 'monthly':\n            const suffix = (d: number) => {\n                if (d > 3 && d < 21) return 'th';\n                switch (d % 10) {\n                    case 1: return \"st\";\n                    case 2: return \"nd\";\n                    case 3: return \"rd\";\n                    default: return \"th\";\n                }\n            };\n            return `Repeats ${interval > 1 ? `every ${interval} months` : 'Monthly'} on the ${dayOfMonth}${suffix(dayOfMonth ?? 1)}`;\n        case 'yearly': return `Repeats ${interval > 1 ? `every ${interval} years` : 'Yearly'}`;\n    }\n  }\n  \n  const formatTimeUntilDue = (dueDateString: string): string => {\n    const now = new Date();\n    const dueDate = new Date(dueDateString);\n\n    const today = new Date(Date.UTC(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate()));\n    const due = new Date(Date.UTC(dueDate.getUTCFullYear(), dueDate.getUTCMonth(), dueDate.getUTCDate()));\n\n    const diffInMs = due.getTime() - today.getTime();\n    \n    if (diffInMs < 0) {\n        return \"Overdue\";\n    }\n    \n    if (diffInMs < 1000) { // Effectively zero\n        return \"Due today\";\n    }\n\n    let current = new Date(today.getTime());\n    let years = 0;\n    let months = 0;\n    let weeks = 0;\n\n    // Calculate years\n    while (true) {\n        let tempDate = new Date(current.getTime());\n        tempDate.setUTCFullYear(tempDate.getUTCFullYear() + 1);\n        if (tempDate <= due) {\n            years++;\n            current = tempDate;\n        } else {\n            break;\n        }\n    }\n    \n    // Calculate months\n    while (true) {\n        let tempDate = new Date(current.getTime());\n        const originalYear = tempDate.getUTCFullYear();\n        const originalMonth = tempDate.getUTCMonth();\n        tempDate.setUTCMonth(originalMonth + 1);\n        \n        // Correct for month overflow (e.g., Jan 31 -> Mar 3 instead of Feb 28/29)\n        if (tempDate.getUTCMonth() !== (originalMonth + 1) % 12) {\n             tempDate = new Date(Date.UTC(originalYear, originalMonth + 2, 0));\n        }\n\n        if (tempDate <= due) {\n            months++;\n            current = tempDate;\n        } else {\n            break;\n        }\n    }\n    \n    // Calculate weeks\n    while (true) {\n        let tempDate = new Date(current.getTime());\n        tempDate.setUTCDate(tempDate.getUTCDate() + 7);\n        if (tempDate <= due) {\n            weeks++;\n            current = tempDate;\n        } else {\n            break;\n        }\n    }\n    \n    const remainingMs = due.getTime() - current.getTime();\n    const days = Math.round(remainingMs / (1000 * 60 * 60 * 24));\n\n    const parts: string[] = [];\n    if (years > 0) parts.push(`${years} year${years > 1 ? 's' : ''}`);\n    if (months > 0) parts.push(`${months} month${months > 1 ? 's' : ''}`);\n    if (weeks > 0) parts.push(`${weeks} week${weeks > 1 ? 's' : ''}`);\n    if (days > 0) parts.push(`${days} day${days > 1 ? 's' : ''}`);\n    \n    if (parts.length === 0) {\n        return \"Due today\";\n    }\n    \n    return parts.join(', ');\n  };\n\n  if (layoutMode === 'list') {\n    return (\n      <div\n        onClick={onClick}\n        className=\"w-full flex items-center p-3 text-sm cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700/50 border-b border-slate-200 dark:border-slate-700 last:border-b-0\"\n      >\n        <div className=\"flex-grow overflow-hidden\">\n          <p className=\"font-bold text-slate-800 dark:text-slate-100 truncate\">{bill.description}</p>\n          <p className=\"text-xs text-slate-500 dark:text-slate-400\">{getFrequencyText()}</p>\n        </div>\n        <div className=\"flex-shrink-0 w-40 text-right\">\n          <p className=\"font-semibold text-teal-600 dark:text-teal-400\">Next due in:</p>\n          <p className=\"font-bold text-slate-800 dark:text-slate-100\">{formatTimeUntilDue(bill.nextDueDate)}</p>\n        </div>\n        <div className=\"flex-shrink-0 ml-2 w-5 text-right\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 text-slate-400 dark:text-slate-500\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fillRule=\"evenodd\" d=\"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z\" clipRule=\"evenodd\" /></svg>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div\n      onClick={onClick}\n      className=\"bg-white dark:bg-slate-800 rounded-lg shadow-lg hover:shadow-xl dark:hover:shadow-teal-900/40 transition-shadow duration-300 cursor-pointer overflow-hidden transform hover:-translate-y-1 flex flex-col\"\n    >\n      <div className=\"p-5 flex-grow\">\n        <div className=\"flex justify-between items-start\">\n          <p className=\"text-lg font-bold text-slate-800 dark:text-slate-100 break-words\">{bill.description}</p>\n          <span className=\"px-3 py-1 text-xs font-semibold rounded-full flex-shrink-0 ml-2 bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-300\">\n            Template\n          </span>\n        </div>\n        <p className=\"text-sm text-slate-500 dark:text-slate-400 mt-1\">\n          {getFrequencyText()}\n        </p>\n        <div className=\"mt-4 flex justify-between items-end\">\n           <div>\n              <p className=\"text-sm font-semibold text-teal-600 dark:text-teal-400\">\n                Next bill due in:\n              </p>\n               <p className=\"text-xl font-bold text-slate-900 dark:text-slate-50\">\n                 {formatTimeUntilDue(bill.nextDueDate)}\n               </p>\n           </div>\n           {bill.totalAmount && bill.totalAmount > 0 && (\n            <div className=\"text-right\">\n                <p className=\"text-sm font-semibold text-slate-500 dark:text-slate-400\">Default Total</p>\n                <p className=\"text-2xl font-bold text-slate-800 dark:text-slate-100\">${bill.totalAmount.toFixed(2)}</p>\n            </div>\n           )}\n        </div>\n      </div>\n      <div className=\"bg-slate-50 dark:bg-slate-700/50 px-5 py-3\">\n        <div className=\"flex items-center justify-between text-sm\">\n          <div className=\"flex -space-x-2 overflow-hidden\">\n            {bill.participants.slice(0, 4).map((p: Participant, i) => (\n              <div key={p.id || i} className=\"inline-block h-8 w-8 rounded-full ring-2 ring-white dark:ring-slate-800 bg-teal-500 flex items-center justify-center text-white font-bold text-xs\">\n                {p.name.charAt(0)}\n              </div>\n            ))}\n            {bill.participants.length > 4 && (\n              <div className=\"inline-block h-8 w-8 rounded-full ring-2 ring-white dark:ring-slate-800 bg-slate-300 dark:bg-slate-600 flex items-center justify-center text-slate-700 dark:text-slate-200 font-bold text-xs\">\n                +{bill.participants.length - 4}\n              </div>\n            )}\n          </div>\n          <p className=\"font-medium text-slate-600 dark:text-slate-300\">\n            {bill.participants.length} participant{bill.participants.length !== 1 ? 's' : ''}\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default RecurringBillCard;","import React, { useState, useRef, useEffect } from 'react';\nimport type { Group, DashboardLayoutMode } from '../../types';\n\ninterface GroupCardProps {\n  group: Group;\n  onClick: (e: React.MouseEvent | React.TouchEvent) => void;\n  onEdit: () => void;\n  layoutMode: DashboardLayoutMode;\n  onMenuToggled: (isOpen: boolean) => void;\n}\n\nconst GroupCard: React.FC<GroupCardProps> = ({ group, onClick, onEdit, layoutMode, onMenuToggled }) => {\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\n  const menuRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    onMenuToggled(isMenuOpen);\n  }, [isMenuOpen, onMenuToggled]);\n\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\n        setIsMenuOpen(false);\n      }\n    };\n    if (isMenuOpen) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [isMenuOpen]);\n\n  const handleMenuClick = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    setIsMenuOpen(prev => !prev);\n  };\n  \n  const handleActionClick = (e: React.MouseEvent, action: () => void) => {\n    e.stopPropagation();\n    action();\n    setIsMenuOpen(false);\n  };\n  \n  const renderMenu = () => (\n    <div ref={menuRef} className=\"relative flex-shrink-0\">\n        <button onClick={handleMenuClick} onMouseDown={e => e.stopPropagation()} onTouchStart={e => e.stopPropagation()} className=\"p-3 -m-2 text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full\" aria-label=\"More options\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path d=\"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z\" /></svg>\n        </button>\n        {isMenuOpen && (\n            <div \n                onClick={e => e.stopPropagation()}\n                className=\"absolute top-full right-0 mt-2 w-48 bg-white dark:bg-slate-800 rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 py-1 z-20\"\n            >\n                <button onClick={(e) => handleActionClick(e, onEdit)} className=\"w-full text-left px-4 py-2 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700\">Edit Group</button>\n            </div>\n        )}\n    </div>\n  );\n\n  if (layoutMode === 'list') {\n    return (\n        <div\n            onClick={onClick}\n            className=\"w-full flex items-center p-3 text-sm cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700/50 border-b border-slate-200 dark:border-slate-700 last:border-b-0\"\n        >\n            <p className=\"font-bold text-slate-800 dark:text-slate-100 truncate flex-grow\">{group.name}</p>\n            <p className=\"flex-shrink-0 w-32 text-right text-slate-500 dark:text-slate-400\">\n                {group.participants.length} member{group.participants.length !== 1 ? 's' : ''}\n            </p>\n            {renderMenu()}\n        </div>\n    );\n  }\n\n  return (\n    <div\n      onClick={onClick}\n      className=\"bg-white dark:bg-slate-800 rounded-lg shadow-lg hover:shadow-xl dark:hover:shadow-teal-900/40 transition-shadow duration-300 cursor-pointer overflow-hidden transform hover:-translate-y-1 flex flex-col\"\n    >\n      <div className=\"p-5 flex-grow\">\n        <div className=\"flex justify-between items-start gap-2\">\n            <div className=\"flex-grow\">\n                <p className=\"text-lg font-bold text-slate-800 dark:text-slate-100 break-words\">{group.name}</p>\n                <p className=\"text-sm text-slate-500 dark:text-slate-400 mt-1\">\n                  {group.participants.length} member{group.participants.length !== 1 ? 's' : ''}\n                </p>\n            </div>\n            <div className=\"-mr-2\">\n              {renderMenu()}\n            </div>\n        </div>\n      </div>\n      <div className=\"bg-slate-50 dark:bg-slate-700/50 px-5 py-3\">\n        <div className=\"flex items-center justify-between text-sm\">\n          <div className=\"flex -space-x-2 overflow-hidden\">\n            {group.participants.slice(0, 5).map(p => (\n              <div key={p.id} className=\"inline-block h-8 w-8 rounded-full ring-2 ring-white dark:ring-slate-800 bg-teal-500 flex items-center justify-center text-white font-bold text-xs\" title={p.name}>\n                {p.name.charAt(0).toUpperCase()}\n              </div>\n            ))}\n            {group.participants.length > 5 && (\n              <div className=\"inline-block h-8 w-8 rounded-full ring-2 ring-white dark:ring-slate-800 bg-slate-300 dark:bg-slate-600 flex items-center justify-center text-slate-700 dark:text-slate-200 font-bold text-xs\">\n                +{group.participants.length - 5}\n              </div>\n            )}\n          </div>\n          <p className=\"font-medium text-slate-600 dark:text-slate-300\">\n            {group.participants.length} member{group.participants.length !== 1 ? 's' : ''}\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default GroupCard;","import React, { useRef, useState, useCallback } from 'react';\nimport type { Group, DashboardLayoutMode } from '../../types';\nimport GroupCard from './GroupCard';\n\ninterface SwipeableGroupCardProps {\n  group: Group;\n  onClick: (e: React.MouseEvent | React.TouchEvent) => void;\n  onEdit: () => void;\n  onDelete: () => void;\n  layoutMode: DashboardLayoutMode;\n}\n\nconst ACTION_BUTTON_WIDTH = 70;\n\nconst SwipeableGroupCard: React.FC<SwipeableGroupCardProps> = ({ group, onClick, onEdit, onDelete, layoutMode }) => {\n  const [translateX, setTranslateX] = useState(0);\n  const dragStartX = useRef(0);\n  const dragStartY = useRef(0);\n  const dragInitialTranslateX = useRef(0);\n  const cardRef = useRef<HTMLDivElement>(null);\n  const isDragging = useRef(false);\n  const isScrolling = useRef(false);\n  const dragStartTime = useRef(0);\n  \n  const maxTranslateX = layoutMode === 'card' ? -ACTION_BUTTON_WIDTH : 0;\n\n  const handleDragStart = (clientX: number, clientY: number, e: React.TouchEvent | React.MouseEvent) => {\n    const target = e.target as HTMLElement;\n    if (target.closest('button')) {\n        isDragging.current = false;\n        return;\n    }\n    isDragging.current = true;\n    isScrolling.current = false;\n    dragStartX.current = clientX;\n    dragStartY.current = clientY;\n    dragInitialTranslateX.current = translateX;\n    dragStartTime.current = Date.now();\n    if (cardRef.current) {\n      cardRef.current.style.transition = 'none';\n    }\n  };\n\n  const handleDragMove = (clientX: number, clientY: number) => {\n    if (!isDragging.current || isScrolling.current) return;\n\n    const deltaX = clientX - dragStartX.current;\n    const deltaY = clientY - dragStartY.current;\n    \n    if (Math.abs(deltaY) > Math.abs(deltaX) && Math.abs(deltaY) > 5) {\n      isScrolling.current = true;\n      isDragging.current = false;\n      if (translateX !== 0) {\n        if (cardRef.current) cardRef.current.style.transition = 'transform 0.2s ease-out';\n        setTranslateX(0);\n      }\n      return;\n    }\n    \n    if (Math.abs(deltaX) > 5) {\n      const newTranslateX = dragInitialTranslateX.current + deltaX;\n      const newClampedTranslateX = Math.min(20, Math.max(maxTranslateX - 20, newTranslateX));\n      setTranslateX(newClampedTranslateX);\n    }\n  };\n\n  const handleDragEnd = (e?: React.TouchEvent | React.MouseEvent) => {\n    const wasDragging = isDragging.current;\n    isDragging.current = false;\n    if (isScrolling.current) {\n        isScrolling.current = false;\n        return;\n    }\n    if (!wasDragging) return;\n\n    if (cardRef.current) {\n      cardRef.current.style.transition = 'transform 0.4s cubic-bezier(0.2, 0.8, 0.2, 1)';\n    }\n\n    const dragDuration = Date.now() - dragStartTime.current;\n    const dragDistance = Math.abs(translateX - dragInitialTranslateX.current);\n    \n    // Treat as a click if the drag was short and quick\n    if (dragDuration < 250 && dragDistance < 10) {\n      if (translateX !== 0) {\n        setTranslateX(0); // Close actions on tap\n      } else {\n        if (e) {\n          if (e.type === 'touchend') e.preventDefault();\n          onClick(e);\n        }\n      }\n      return;\n    }\n    \n    // Snap to the open or closed position\n    if (translateX < maxTranslateX / 2) {\n      setTranslateX(maxTranslateX);\n    } else {\n      setTranslateX(0);\n    }\n  };\n  \n  const executeAction = (action: () => void) => {\n    action();\n    setTranslateX(0);\n  };\n\n  const handleMenuToggled = useCallback((isOpen: boolean) => {\n    if (cardRef.current) {\n      cardRef.current.style.zIndex = isOpen ? '20' : '10';\n    }\n  }, []);\n\n  return (\n    <div className={`relative w-full ${layoutMode === 'card' ? 'overflow-hidden' : ''}`}>\n      {layoutMode === 'card' && (\n        <div className=\"absolute top-0 right-0 h-full flex items-center z-0\">\n          <button onClick={() => executeAction(onDelete)} className=\"h-full w-[70px] flex flex-col items-center justify-center bg-red-500 text-white transition-colors hover:bg-red-600\" aria-label=\"Delete\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" /></svg>\n            <span className=\"text-xs mt-1\">Delete</span>\n          </button>\n        </div>\n      )}\n      <div \n        ref={cardRef} \n        className=\"relative z-10\" \n        style={{ transform: `translateX(${translateX}px)`, touchAction: 'pan-y' }} \n        onTouchStart={e => handleDragStart(e.touches[0].clientX, e.touches[0].clientY, e)} \n        onTouchMove={e => handleDragMove(e.touches[0].clientX, e.touches[0].clientY)} \n        onTouchEnd={e => handleDragEnd(e)} \n        onMouseDown={e => handleDragStart(e.clientX, e.clientY, e)} \n        onMouseMove={e => handleDragMove(e.clientX, e.clientY)} \n        onMouseUp={e => handleDragEnd(e)} \n        onMouseLeave={() => isDragging.current && handleDragEnd()}\n      >\n        <GroupCard group={group} onEdit={onEdit} onClick={onClick} layoutMode={layoutMode} onMenuToggled={handleMenuToggled} />\n      </div>\n    </div>\n  );\n};\n\nexport default SwipeableGroupCard;","import React from 'react';\n\ninterface ProgressBarProps {\n  value: number;\n  max: number;\n  label?: string;\n  variant?: 'primary' | 'success' | 'warning' | 'danger';\n}\n\nconst ProgressBar: React.FC<ProgressBarProps> = ({ value, max, label, variant = 'primary' }) => {\n  const percentage = max > 0 ? Math.min((value / max) * 100, 100) : 0;\n  \n  const colorClasses = {\n    primary: 'bg-teal-500',\n    success: 'bg-emerald-500',\n    warning: 'bg-amber-500',\n    danger: 'bg-red-500',\n  };\n\n  let effectiveVariant = variant;\n  if (variant === 'primary') {\n      if (percentage > 95) effectiveVariant = 'danger';\n      else if (percentage > 80) effectiveVariant = 'warning';\n      else effectiveVariant = 'success';\n  }\n\n  return (\n    <div>\n      {label && <span className=\"text-sm font-medium text-slate-500 dark:text-slate-400\">{label}</span>}\n      <div className=\"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2.5 mt-1\">\n        <div\n          className={`h-2.5 rounded-full transition-all duration-500 ${colorClasses[effectiveVariant]}`}\n          style={{ width: `${percentage}%` }}\n        ></div>\n      </div>\n    </div>\n  );\n};\n\nexport default ProgressBar;\n","import React, { useState } from 'react';\nimport type { Category, View } from '../../types';\nimport ProgressBar from '../ProgressBar';\n\n// Define the shape of the data this component expects\nexport interface BudgetData {\n    totalBudget: number;\n    totalSpending: number;\n    spendingByCategory: Record<string, {\n        category: Category;\n        spent: number;\n        bills: { billId: string; description: string; userPortion: number; date: string; isImported: boolean; }[];\n    }>;\n    hasBudgetData: boolean;\n}\n\ninterface BudgetViewProps {\n  budgetData: BudgetData;\n  date: { year: number; month: number } | 'last30days';\n  setDate: (date: { year: number; month: number } | 'last30days') => void;\n  onSelectBill: (billInfo: { billId: string; isImported: boolean }) => void;\n}\n\nconst months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n\nconst CategorySpendingCard: React.FC<{\n    categoryData: BudgetData['spendingByCategory'][string];\n    onSelectBill: (billInfo: { billId: string; isImported: boolean }) => void;\n}> = ({ categoryData, onSelectBill }) => {\n    const [isExpanded, setIsExpanded] = useState(false);\n    const { category, spent, bills } = categoryData;\n    const budget = category.budget;\n    const hasBudget = typeof budget === 'number' && budget > 0;\n\n    return (\n        <div className=\"bg-white dark:bg-slate-800 rounded-lg shadow-md transition-all duration-300\">\n            <button\n                onClick={() => setIsExpanded(!isExpanded)}\n                className=\"w-full text-left p-4\"\n                aria-expanded={isExpanded}\n            >\n                <div className=\"flex justify-between items-center\">\n                    <h4 className=\"text-lg font-bold text-slate-800 dark:text-slate-100\">{category.name}</h4>\n                    <div className=\"text-right\">\n                        <p className=\"text-xl font-bold text-slate-800 dark:text-slate-100\">${spent.toFixed(2)}</p>\n                        {hasBudget && <p className=\"text-xs text-slate-500 dark:text-slate-400\">of ${budget.toFixed(2)}</p>}\n                    </div>\n                </div>\n                {hasBudget && (\n                    <div className=\"mt-2\">\n                        <ProgressBar value={spent} max={budget} />\n                    </div>\n                )}\n            </button>\n            {isExpanded && (\n                <div className=\"border-t border-slate-200 dark:border-slate-700 px-4 py-2\">\n                    <ul className=\"space-y-2 py-2\">\n                        {bills.sort((a,b) => new Date(b.date).getTime() - new Date(a.date).getTime()).map(bill => (\n                             <li key={bill.billId}>\n                                <button onClick={() => onSelectBill({ billId: bill.billId, isImported: bill.isImported })} className=\"w-full flex justify-between items-center text-sm p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 text-left\">\n                                    <div>\n                                        <p className=\"font-semibold text-slate-700 dark:text-slate-200\">{bill.description}</p>\n                                        <p className=\"text-xs text-slate-500 dark:text-slate-400\">{new Date(bill.date).toLocaleDateString()}</p>\n                                    </div>\n                                    <p className=\"font-semibold text-slate-600 dark:text-slate-300\">${bill.userPortion.toFixed(2)}</p>\n                                </button>\n                            </li>\n                        ))}\n                         {bills.length === 0 && <li className=\"text-center text-sm text-slate-500 dark:text-slate-400 py-2\">No expenses in this period.</li>}\n                    </ul>\n                </div>\n            )}\n        </div>\n    );\n};\n\n\nconst BudgetView: React.FC<BudgetViewProps> = ({ budgetData, date, setDate, onSelectBill }) => {\n    const { totalBudget, totalSpending, spendingByCategory } = budgetData;\n\n    const handleDateChange = (direction: 1 | -1) => {\n        if (date === 'last30days') {\n            const now = new Date();\n            now.setMonth(now.getMonth() + direction);\n            setDate({ year: now.getFullYear(), month: now.getMonth() });\n        } else {\n            const newDate = new Date(date.year, date.month + direction, 1);\n            setDate({ year: newDate.getFullYear(), month: newDate.getMonth() });\n        }\n    };\n    \n    // FIX: Cast Object.values to the correct type to resolve type inference issues where it was returning `unknown[]`. This correctly types the parameters for the sort function.\n    const sortedCategories = (Object.values(spendingByCategory) as BudgetData['spendingByCategory'][string][]).sort((a, b) => b.spent - a.spent);\n\n    const getDateLabel = () => {\n        if (date === 'last30days') return \"Last 30 Days\";\n        return `${months[date.month]} ${date.year}`;\n    }\n\n    return (\n        <div className=\"space-y-6\">\n             <div className=\"flex justify-between items-center bg-white dark:bg-slate-800 p-2 rounded-lg shadow-md\">\n                <button onClick={() => handleDateChange(-1)} title=\"Previous month\" aria-label=\"Previous month\" className=\"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700\"><svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" /></svg></button>\n                <div className=\"text-center\">\n                    <button onClick={() => setDate('last30days')} className=\"text-xl font-bold text-slate-700 dark:text-slate-200 hover:underline\">{getDateLabel()}</button>\n                </div>\n                <button onClick={() => handleDateChange(1)} title=\"Next month\" aria-label=\"Next month\" className=\"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700\"><svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" /></svg></button>\n            </div>\n\n            <div className=\"p-6 bg-white dark:bg-slate-800 rounded-lg shadow-lg\">\n                <h3 className=\"text-lg font-semibold text-slate-700 dark:text-slate-200\">Overall Spending</h3>\n                <div className=\"mt-2 text-center\">\n                    <p className=\"text-4xl font-extrabold text-slate-800 dark:text-slate-100\">${totalSpending.toFixed(2)}</p>\n                    {totalBudget > 0 && <p className=\"text-sm text-slate-500 dark:text-slate-400\">spent of ${totalBudget.toFixed(2)}</p>}\n                </div>\n                {totalBudget > 0 && (\n                    <div className=\"mt-4\">\n                        <ProgressBar value={totalSpending} max={totalBudget} />\n                    </div>\n                )}\n            </div>\n            \n             <div className=\"space-y-4\">\n                <h3 className=\"text-xl font-bold text-slate-700 dark:text-slate-200 px-2\">Spending by Category</h3>\n                {sortedCategories.map(catData => (\n                    <CategorySpendingCard \n                        key={catData.category.id}\n                        categoryData={catData}\n                        onSelectBill={onSelectBill}\n                    />\n                ))}\n            </div>\n        </div>\n    );\n};\n\nexport default BudgetView;","import React, { useState, useMemo, useEffect, useCallback } from 'react';\nimport { View } from '../../types';\n// FIX: Added DashboardLayoutMode to type imports.\nimport type { Bill, Settings, ImportedBill, Participant, SummaryFilter, RecurringBill, DashboardView, SettingsSection, Group, DashboardLayoutMode } from '../../types';\nimport type { SubscriptionStatus } from '../../hooks/useAuth';\nimport type { ParticipantData } from './ParticipantList';\nimport ShareActionSheet from '../ShareActionSheet';\nimport { generateShareText, generateOneTimeShareLink } from '../../services/shareService';\nimport { useAppControl } from '../../contexts/AppControlContext';\nimport HalfScreenAdModal from '../HalfScreenAdModal';\nimport { useIntersectionObserver } from '../../hooks/useIntersectionObserver';\nimport PaymentMethodsModal from '../PaymentMethodsModal';\nimport PaymentMethodWarningModal from '../PaymentMethodWarningModal';\nimport { exportData } from '../../services/exportService';\n\n// New Child Components\nimport DashboardSummary from './DashboardSummary';\nimport DashboardControls from './DashboardControls';\nimport BillList from './BillList';\nimport ParticipantList from './ParticipantList';\nimport ParticipantDetailView from './ParticipantDetailView';\nimport EmptyState from './EmptyState';\nimport RecurringBillCard from '../RecurringBillCard';\nimport SwipeableGroupCard from './SwipeableGroupCard';\nimport BudgetView, { BudgetData } from './BudgetView';\n\n// Import the ad error message\nimport { AD_ERROR_MESSAGE } from '../../services/adService';\n\n\ninterface DashboardProps {\n  bills: Bill[];\n  importedBills: ImportedBill[];\n  recurringBills: RecurringBill[];\n  groups: Group[];\n  participantsData: ParticipantData[];\n  settings: Settings;\n  updateSettings: (newSettings: Partial<Settings>) => Promise<void>;\n  setSettingsSection: (section: SettingsSection) => void;\n  subscriptionStatus: SubscriptionStatus;\n  onSelectBill: (bill: Bill) => void;\n  onSelectImportedBill: (bill: ImportedBill) => void;\n  onArchiveBill: (billId: string) => void;\n  onUnarchiveBill: (billId: string) => void;\n  onDeleteBill: (billId: string) => void;\n  onDeleteGroup: (groupId: string) => void;\n  onReshareBill: (billId: string) => void;\n  onUpdateMultipleBills: (bills: Bill[]) => Promise<void>;\n  onUpdateImportedBill: (bill: ImportedBill) => void;\n  onArchiveImportedBill: (billId: string) => void;\n  onUnarchiveImportedBill: (billId: string) => void;\n  onDeleteImportedBill: (billId: string) => void;\n  onShowSummaryDetails: (bill: ImportedBill) => void;\n  onCreateFromTemplate: (template: RecurringBill) => void;\n  navigate: (view: View, params?: any) => void;\n  // Navigation State & Handlers\n  dashboardView: DashboardView;\n  selectedParticipant: string | null;\n  dashboardStatusFilter: 'active' | 'archived';\n  dashboardSummaryFilter: SummaryFilter;\n  // FIX: Added missing props for layout mode.\n  dashboardLayoutMode: DashboardLayoutMode;\n  onSetDashboardLayoutMode: (mode: DashboardLayoutMode) => void;\n  onSetDashboardView: (view: DashboardView) => void;\n  onSetDashboardStatusFilter: (status: 'active' | 'archived') => void;\n  onSetDashboardSummaryFilter: (filter: SummaryFilter) => void;\n  onSelectParticipant: (name: string | null) => void;\n  onClearParticipant: () => void;\n  // Budget props\n  budgetData: BudgetData;\n  budgetDate: { year: number; month: number } | 'last30days';\n  setBudgetDate: (date: { year: number; month: number } | 'last30days') => void;\n  handleSelectBillFromBudget: (billInfo: { billId: string; isImported: boolean }) => void;\n}\n\nconst BILLS_PER_PAGE = 15;\n\nconst Dashboard: React.FC<DashboardProps> = (props) => {\n  const { \n    bills, importedBills, recurringBills, groups, participantsData, settings, updateSettings, setSettingsSection, subscriptionStatus, \n    onSelectBill, onSelectImportedBill, \n    onArchiveBill, onUnarchiveBill, onDeleteBill, onDeleteGroup, onReshareBill, onUpdateMultipleBills, \n    onUpdateImportedBill, onArchiveImportedBill, onUnarchiveImportedBill, onDeleteImportedBill,\n    onShowSummaryDetails, onCreateFromTemplate,\n    navigate,\n    // FIX: Destructured missing props.\n    dashboardView, selectedParticipant, dashboardStatusFilter, dashboardSummaryFilter, dashboardLayoutMode,\n    onSetDashboardView, onSetDashboardStatusFilter, onSetDashboardSummaryFilter, onSelectParticipant, onClearParticipant, onSetDashboardLayoutMode,\n    budgetData, budgetDate, setBudgetDate, handleSelectBillFromBudget\n  } = props;\n  \n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchMode, setSearchMode] = useState<'description' | 'participant'>('description');\n  const [visibleCount, setVisibleCount] = useState(BILLS_PER_PAGE);\n  const [shareSheetParticipant, setShareSheetParticipant] = useState<ParticipantData | null>(null);\n  const [archivingBillIds, setArchivingBillIds] = useState<string[]>([]);\n  const [isHalfScreenAdOpen, setIsHalfScreenAdOpen] = useState(false);\n  const [settleUpBill, setSettleUpBill] = useState<ImportedBill | null>(null);\n  const [isPaymentWarningOpen, setIsPaymentWarningOpen] = useState(false);\n  const [deferredShareAction, setDeferredShareAction] = useState<(() => void) | null>(null);\n  const { showNotification } = useAppControl();\n\n  const hasRecurringBills = recurringBills.length > 0;\n\n  useEffect(() => {\n    if (!hasRecurringBills && (dashboardView === 'upcoming' || dashboardView === 'templates')) {\n        onSetDashboardView('bills');\n    }\n  }, [hasRecurringBills, dashboardView, onSetDashboardView]);\n\n\n  useEffect(() => {\n    if (['upcoming', 'templates', 'groups', 'budget'].includes(dashboardView)) {\n        setSearchMode('description');\n    }\n  }, [dashboardView]);\n\n  const activeBills = useMemo(() => bills.filter(b => b.status === 'active'), [bills]);\n\n  useEffect(() => {\n    if (dashboardView !== 'bills' || dashboardStatusFilter !== 'active') return;\n    const billsToAutoArchive = activeBills.filter(b => b.participants.length > 0 && b.participants.every(p => p.paid));\n    if (billsToAutoArchive.length > 0) {\n        const idsToArchive = billsToAutoArchive.map(b => b.id);\n        setArchivingBillIds(idsToArchive);\n        const timer = setTimeout(() => {\n            const updatedBills = billsToAutoArchive.map(b => ({ ...b, status: 'archived' as const }));\n            onUpdateMultipleBills(updatedBills);\n        }, 600);\n        return () => clearTimeout(timer);\n    } else {\n        if (archivingBillIds.length > 0) setArchivingBillIds([]);\n    }\n  }, [activeBills, onUpdateMultipleBills, dashboardView, dashboardStatusFilter]);\n\n  useEffect(() => {\n    if (subscriptionStatus === 'free') {\n      const key = 'dashboardViewCount';\n      const count = parseInt(sessionStorage.getItem(key) || '0', 10);\n      const newCount = count + 1;\n      sessionStorage.setItem(key, String(newCount));\n\n      if (newCount > 0 && newCount % 4 === 0) {\n        const timer = setTimeout(() => {\n          setIsHalfScreenAdOpen(true);\n        }, 500);\n        return () => clearTimeout(timer);\n      }\n    }\n  }, [subscriptionStatus]);\n\n  useEffect(() => {\n    if (subscriptionStatus === 'free' && AD_ERROR_MESSAGE) {\n      if (!sessionStorage.getItem('adConfigErrorShown')) {\n        showNotification(AD_ERROR_MESSAGE, 'error');\n        sessionStorage.setItem('adConfigErrorShown', 'true');\n      }\n    }\n  }, [subscriptionStatus, showNotification]);\n\n  const summaryTotals = useMemo(() => {\n    const myDisplayNameLower = settings.myDisplayName.trim().toLowerCase();\n    let totalTracked = 0, othersOweMe = 0, iOwe = 0;\n    activeBills.forEach(bill => {\n      totalTracked += bill.totalAmount;\n      bill.participants.forEach((p: Participant) => {\n        if (!p.paid) {\n          if (p.name.trim().toLowerCase() === myDisplayNameLower) iOwe += p.amountOwed;\n          else othersOweMe += p.amountOwed;\n        }\n      });\n    });\n    importedBills.forEach(imported => {\n        if (imported.status === 'active' && !imported.localStatus.myPortionPaid) {\n            const myPart = imported.sharedData.bill.participants.find((p: Participant) => p.id === imported.myParticipantId);\n            if (myPart && !myPart.paid) iOwe += myPart.amountOwed;\n        }\n    });\n    return { totalTracked, othersOweMe, iOwe };\n  }, [activeBills, importedBills, settings.myDisplayName]);\n\n  const participantBills = useMemo(() => {\n    if (!selectedParticipant) return { active: [], allArchived: [], unpaidArchived: [] };\n    const lowercasedQuery = searchQuery.toLowerCase().trim();\n    const allParticipantBills = bills.filter(b => b.participants.some((p: Participant) => p.name === selectedParticipant));\n    const searchedBills = lowercasedQuery ? allParticipantBills.filter(bill => searchMode === 'description' ? bill.description.toLowerCase().includes(lowercasedQuery) : bill.participants.some((p: Participant) => p.name.toLowerCase().includes(lowercasedQuery))) : allParticipantBills;\n    const active = searchedBills.filter(b => b.status === 'active').sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());\n    const allArchived = searchedBills.filter(b => b.status === 'archived').sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());\n    const unpaidArchived = allArchived.filter(b => b.participants.some((p: Participant) => p.name === selectedParticipant && !p.paid && p.amountOwed > 0.005));\n    return { active, allArchived, unpaidArchived };\n  }, [bills, selectedParticipant, searchQuery, searchMode]);\n\n  const filteredBills = useMemo(() => {\n    if (selectedParticipant || dashboardView !== 'bills') return [];\n    const lowercasedQuery = searchQuery.toLowerCase().trim();\n    const myNameLower = settings.myDisplayName.toLowerCase().trim();\n    let billsToFilter = lowercasedQuery ? bills.filter(bill => searchMode === 'description' ? bill.description.toLowerCase().includes(lowercasedQuery) : bill.participants.some((p: Participant) => p.name.toLowerCase().includes(lowercasedQuery))) : bills;\n    let statusFilteredBills = billsToFilter.filter(bill => bill.status === dashboardStatusFilter);\n    if (dashboardStatusFilter === 'active') {\n        if (dashboardSummaryFilter === 'othersOweMe') {\n            statusFilteredBills = statusFilteredBills.filter(bill => !bill.participants.some((p: Participant) => p.name.toLowerCase().trim() === myNameLower && !p.paid) && bill.participants.some((p: Participant) => p.name.toLowerCase().trim() !== myNameLower && !p.paid));\n        } else if (dashboardSummaryFilter === 'iOwe') {\n            statusFilteredBills = statusFilteredBills.filter(bill => bill.participants.some((p: Participant) => p.name.toLowerCase().trim() === myNameLower && !p.paid));\n        }\n    }\n    return statusFilteredBills;\n  }, [bills, searchQuery, searchMode, dashboardStatusFilter, selectedParticipant, dashboardView, dashboardSummaryFilter, settings.myDisplayName]);\n  \n  const filteredImportedBills = useMemo(() => {\n    if (selectedParticipant || dashboardView !== 'bills') return [];\n    let baseFiltered = importedBills.filter(bill => bill.status === dashboardStatusFilter);\n    if (dashboardStatusFilter === 'active') {\n        if (dashboardSummaryFilter === 'othersOweMe') return [];\n        if (dashboardSummaryFilter === 'iOwe') return baseFiltered.filter(bill => !bill.localStatus.myPortionPaid);\n    }\n    return baseFiltered;\n  }, [importedBills, dashboardStatusFilter, dashboardSummaryFilter, selectedParticipant, dashboardView]);\n  \n  const upcomingRecurringBills = useMemo(() => {\n    const lowercasedQuery = searchQuery.toLowerCase().trim();\n    const thirtyDaysFromNow = new Date();\n    thirtyDaysFromNow.setDate(thirtyDaysFromNow.getDate() + 30);\n\n    const filtered = recurringBills.filter(bill => {\n        if (bill.status !== 'active') return false;\n        \n        const dueDate = new Date(bill.nextDueDate);\n        if (dueDate > thirtyDaysFromNow) return false;\n\n        if (lowercasedQuery && !bill.description.toLowerCase().includes(lowercasedQuery)) {\n            return false;\n        }\n        return true;\n    });\n\n    return filtered.sort((a, b) => new Date(a.nextDueDate).getTime() - new Date(b.nextDueDate).getTime());\n  }, [recurringBills, searchQuery]);\n\n  const allRecurringBills = useMemo(() => {\n      const lowercasedQuery = searchQuery.toLowerCase().trim();\n      \n      const filtered = recurringBills.filter(bill => {\n          if (bill.status !== 'active') return false;\n\n          if (lowercasedQuery && !bill.description.toLowerCase().includes(lowercasedQuery)) {\n              return false;\n          }\n          return true;\n      });\n\n      return filtered.sort((a, b) => a.description.localeCompare(b.description));\n  }, [recurringBills, searchQuery]);\n\n  const filteredGroups = useMemo(() => {\n      const lowercasedQuery = searchQuery.toLowerCase().trim();\n      if (!lowercasedQuery) return groups;\n      return groups.filter(group => group.name.toLowerCase().includes(lowercasedQuery));\n  }, [groups, searchQuery]);\n\n  useEffect(() => {\n    setVisibleCount(BILLS_PER_PAGE);\n  }, [dashboardStatusFilter, searchQuery, searchMode, dashboardView, selectedParticipant, dashboardSummaryFilter]);\n  \n  const hasMore = useMemo(() => {\n      if (dashboardView === 'upcoming') return visibleCount < upcomingRecurringBills.length;\n      if (dashboardView === 'templates') return visibleCount < allRecurringBills.length;\n      if (dashboardView === 'groups') return false; // No pagination for groups for now\n      return visibleCount < filteredBills.length;\n  }, [dashboardView, visibleCount, upcomingRecurringBills.length, allRecurringBills.length, filteredBills.length]);\n  \n  const loadMore = useCallback(() => {\n    if (hasMore) setVisibleCount(prev => prev + BILLS_PER_PAGE);\n  }, [hasMore]);\n  \n  const { ref: loadMoreRef } = useIntersectionObserver<HTMLDivElement>({ onIntersect: loadMore });\n\n  const getShareTextForParticipant = useCallback((participantName: string): string => {\n    const participantData = participantsData.find(p => p.name === participantName && p.type === 'owed');\n    if (!participantData) return \"No outstanding bills found.\";\n    const activeBills = bills.filter(b => b.status === 'active');\n    const billsInfo = activeBills.filter(b => b.participants.some((p: Participant) => p.name === participantName && !p.paid && p.amountOwed > 0)).map(b => ({ description: b.description, amountOwed: b.participants.find((p: Participant) => p.name === participantName)!.amountOwed }));\n    return generateShareText(participantName, participantData.amount, billsInfo, settings, subscriptionStatus);\n  }, [participantsData, bills, settings, subscriptionStatus]);\n\n  const handleShareGeneric = async (participant: ParticipantData) => {\n    const shareText = getShareTextForParticipant(participant.name);\n    try {\n      if (navigator.share) await navigator.share({ title: 'Bill Split Reminder', text: shareText });\n      else {\n        await navigator.clipboard.writeText(shareText);\n        showNotification('Share text copied to clipboard!');\n      }\n    } catch (err: any) {\n      if (err.name !== 'AbortError') {\n        console.error(\"Error sharing or copying:\", err);\n        showNotification('Failed to share', 'error');\n      }\n    } finally {\n      setShareSheetParticipant(null);\n    }\n  };\n  \n  const handleShareSms = (participant: ParticipantData) => {\n    if (!participant.phone) return;\n    window.location.href = `sms:${participant.phone}?&body=${encodeURIComponent(getShareTextForParticipant(participant.name))}`;\n    setShareSheetParticipant(null);\n  };\n    \n  const handleShareEmail = (participant: ParticipantData) => {\n    if (!participant.email) return;\n    window.location.href = `mailto:${participant.email}?subject=${encodeURIComponent(\"Shared Bill Reminder\")}&body=${encodeURIComponent(getShareTextForParticipant(participant.name))}`;\n    setShareSheetParticipant(null);\n  };\n\n  const handleShareLink = useCallback(async (participantName: string, method: 'sms' | 'email' | 'generic') => {\n    const unpaidBills = bills.filter(b => b.participants.some((p: Participant) => p.name === participantName && !p.paid && p.amountOwed > 0));\n    if (unpaidBills.length === 0) {\n        showNotification(`${participantName} has no outstanding bills to share.`, 'info');\n        setShareSheetParticipant(null);\n        return;\n    }\n    const { shareUrl, imagesDropped } = await generateOneTimeShareLink(unpaidBills, participantName, settings, onUpdateMultipleBills, bills, subscriptionStatus);\n    \n    if (imagesDropped > 0) {\n        showNotification(`Free image limit reached. ${imagesDropped} older image(s) omitted from summary.`, 'info');\n    }\n\n    const message = `Here is a link to view a summary of your outstanding bills with me. This link contains a key and should not be shared with others:\\n\\n${shareUrl}`;\n    try {\n        if (method === 'sms') {\n            const phone = participantsData.find(p => p.name === participantName)?.phone;\n            if (phone) window.location.href = `sms:${phone}?&body=${encodeURIComponent(message)}`;\n        } else if (method === 'email') {\n            const email = participantsData.find(p => p.name === participantName)?.email;\n            if (email) window.location.href = `mailto:${email}?subject=${encodeURIComponent(\"Summary of Outstanding Bills\")}&body=${encodeURIComponent(message)}`;\n        } else {\n            if (navigator.share) await navigator.share({ title: 'Summary of Outstanding Bills', text: message });\n            else {\n                await navigator.clipboard.writeText(message);\n                showNotification('Share link copied to clipboard!');\n            }\n        }\n    } catch (err: any) {\n        if (err.name === 'AbortError') showNotification('Share cancelled', 'info');\n        else {\n            console.error(\"Error sharing link:\", err);\n            showNotification('An error occurred while trying to share the link.', 'error');\n        }\n    } finally {\n        setShareSheetParticipant(null);\n    }\n  }, [bills, settings, onUpdateMultipleBills, participantsData, showNotification, subscriptionStatus]);\n\n  const handleMarkParticipantAsPaid = async (participantName: string) => {\n    const billsToUpdate: Bill[] = bills.filter(bill => bill.status === 'active' && bill.participants.some((p: Participant) => p.name === participantName && !p.paid)).map(bill => ({ ...bill, participants: bill.participants.map((p: Participant) => p.name === participantName ? { ...p, paid: true } : p) }));\n    if (billsToUpdate.length > 0) await onUpdateMultipleBills(billsToUpdate);\n  };\n  \n  const handleExportParticipant = async (participantName: string) => {\n    const billsForParticipant = bills.filter(b => b.participants.some((p: Participant) => p.name === participantName));\n    if (billsForParticipant.length === 0) {\n      showNotification(`No bills found for ${participantName}.`, 'info');\n      return;\n    }\n    const filename = `bills_for_${participantName.replace(/[^a-z0-9]/gi, '_').toLowerCase()}.csv`;\n    await exportData({ owned: billsForParticipant }, filename);\n    showNotification(`Bills for ${participantName} exported.`);\n  };\n\n  const getEmptyState = () => {\n    if (dashboardView === 'participants') {\n      return dashboardStatusFilter === 'active' ? { title: \"No outstanding debts\", message: \"Everyone is all paid up!\" } : { title: \"No settled participants\", message: \"Participants who are fully paid up across all bills will appear here.\" };\n    }\n    if (dashboardView === 'upcoming') {\n        return { title: \"No upcoming bills\", message: \"Recurring bills due in the next 30 days will appear here.\" };\n    }\n    if (dashboardView === 'templates') {\n        return { title: \"No recurring bills\", message: \"Create a recurring bill template to get started.\" };\n    }\n     if (dashboardView === 'groups') {\n        return { title: \"No groups yet\", message: \"Create a group to quickly add a set of friends to a new bill.\" };\n    }\n    if (dashboardView === 'budget') {\n        return { title: \"No Budget Data\", message: \"Create bills with categories to see your budget breakdown.\" };\n    }\n    if (dashboardSummaryFilter === 'othersOweMe' && filteredBills.length === 0) {\n      return { title: \"All Caught Up!\", message: \"No one currently owes you money on active bills.\" };\n    }\n    if (dashboardSummaryFilter === 'iOwe' && filteredBills.length === 0 && filteredImportedBills.length === 0) {\n      return { title: \"You're All Paid Up!\", message: \"You don't currently owe money on any active bills.\" };\n    }\n    if (searchQuery) {\n        return { title: \"No results found\", message: `Your search for \"${searchQuery}\" did not match any items.` };\n    }\n    if (dashboardStatusFilter === 'active' && bills.every(b => b.status === 'archived') && importedBills.every(b => b.status === 'archived')) {\n      return { title: \"All bills archived\", message: \"You can view your archived bills or create a new one.\" };\n    }\n    if (dashboardStatusFilter === 'archived') {\n      return { title: \"No archived bills\", message: \"Archived bills will appear here.\" };\n    }\n    return { title: \"No bills found\", message: \"Get started by creating a new bill.\" };\n  };\n\n  const handleSettleUp = (bill: ImportedBill) => {\n    setSettleUpBill(bill);\n  };\n\n  const handleSelectParticipantForShare = (participant: ParticipantData) => {\n      const { paymentDetails, hidePaymentMethodWarning } = settings;\n      const hasPaymentMethods = paymentDetails.venmo || paymentDetails.paypal || paymentDetails.cashApp || paymentDetails.zelle || paymentDetails.customMessage;\n      \n      if (!hasPaymentMethods && !hidePaymentMethodWarning) {\n        setDeferredShareAction(() => () => setShareSheetParticipant(participant));\n        setIsPaymentWarningOpen(true);\n      } else {\n        setShareSheetParticipant(participant);\n      }\n  };\n\n  const myParticipantForSettleUp = settleUpBill ? settleUpBill.sharedData.bill.participants.find((p: Participant) => p.id === settleUpBill.myParticipantId) : null;\n\n  const getActiveFilterTag = () => {\n    if (dashboardSummaryFilter === 'othersOweMe') return 'Others Owe Me';\n    if (dashboardSummaryFilter === 'iOwe') return 'I Owe';\n    return null;\n  };\n  const activeFilterTag = getActiveFilterTag();\n  \n  const handleConvertToTemplate = (bill: Bill) => {\n    navigate(View.CreateBill, { convertFromBill: bill.id });\n  };\n\n  const handleExportOwnedBill = (bill: Bill) => {\n      exportData({ owned: [bill] }, `${bill.description.replace(/[^a-z0-9]/gi, '_').toLowerCase()}.csv`);\n      showNotification(`Exported \"${bill.description}\"`);\n  };\n\n  const handleExportImportedBill = (bill: ImportedBill) => {\n      exportData({ imported: [bill] }, `${bill.sharedData.bill.description.replace(/[^a-z0-9]/gi, '_').toLowerCase()}.csv`);\n      showNotification(`Exported \"${bill.sharedData.bill.description}\"`);\n  };\n\n  const renderContent = () => {\n    if (dashboardView === 'participants' && !selectedParticipant) {\n        if (participantsData.length > 0) {\n            return <ParticipantList \n              participantsData={participantsData} \n              onSetShareSheetParticipant={handleSelectParticipantForShare} \n              onMarkParticipantAsPaid={handleMarkParticipantAsPaid}\n              dashboardLayoutMode={dashboardLayoutMode} \n            />;\n        }\n    } else if (selectedParticipant) {\n        return <ParticipantDetailView \n                  participantBills={participantBills} \n                  onSelectBill={onSelectBill} \n                  onArchiveBill={onArchiveBill} \n                  onUnarchiveBill={onUnarchiveBill} \n                  onDeleteBill={onDeleteBill}\n                  onReshareBill={onReshareBill}\n                  dashboardStatusFilter={dashboardStatusFilter} \n                  searchQuery={searchQuery} \n                  selectedParticipant={selectedParticipant} \n                  onExport={() => handleExportParticipant(selectedParticipant)}\n                  onConvertToTemplate={handleConvertToTemplate}\n                  onExportBill={handleExportOwnedBill}\n                  dashboardLayoutMode={dashboardLayoutMode}\n                />;\n    } else if (dashboardView === 'upcoming' && upcomingRecurringBills.length > 0) {\n        return (\n            <div className={dashboardLayoutMode === 'card' ? \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\" : \"bg-white dark:bg-slate-800 rounded-lg shadow-md\"}>\n                {upcomingRecurringBills.slice(0, visibleCount).map(bill => (\n                    // FIX: Pass dashboardLayoutMode prop to RecurringBillCard.\n                    <RecurringBillCard key={bill.id} bill={bill} onClick={() => navigate(View.CreateBill, { fromTemplate: bill })} layoutMode={dashboardLayoutMode} />\n                ))}\n            </div>\n        );\n    } else if (dashboardView === 'templates' && allRecurringBills.length > 0) {\n        return (\n            <div className={dashboardLayoutMode === 'card' ? \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\" : \"bg-white dark:bg-slate-800 rounded-lg shadow-md\"}>\n                {allRecurringBills.slice(0, visibleCount).map(bill => (\n                    // FIX: Pass dashboardLayoutMode prop to RecurringBillCard.\n                    <RecurringBillCard key={bill.id} bill={bill} onClick={() => navigate(View.CreateBill, { fromTemplate: bill })} layoutMode={dashboardLayoutMode} />\n                ))}\n            </div>\n        );\n    } else if (dashboardView === 'groups') {\n        if (filteredGroups.length > 0) {\n          return (\n            <div className={dashboardLayoutMode === 'card' ? \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\" : \"bg-white dark:bg-slate-800 rounded-lg shadow-md\"}>\n              {filteredGroups.map(group => (\n                <SwipeableGroupCard \n                  key={group.id} \n                  group={group} \n                  onClick={() => navigate(View.GroupDetails, { groupToView: group })} \n                  onEdit={() => navigate(View.CreateGroup, { groupToEdit: group })} \n                  onDelete={() => onDeleteGroup(group.id)}\n// FIX: Pass dashboardLayoutMode prop to SwipeableGroupCard.\n                  layoutMode={dashboardLayoutMode} />\n              ))}\n            </div>\n          );\n        }\n    } else if (dashboardView === 'budget') {\n        if (budgetData.hasBudgetData) {\n            return <BudgetView \n                budgetData={budgetData}\n                date={budgetDate}\n                setDate={setBudgetDate}\n                onSelectBill={handleSelectBillFromBudget}\n            />\n        }\n    } else if (dashboardView === 'bills' && (filteredBills.length > 0 || filteredImportedBills.length > 0 || subscriptionStatus === 'free')) {\n        return <BillList \n            filteredBills={filteredBills} \n            filteredImportedBills={filteredImportedBills} \n            visibleCount={visibleCount} \n            subscriptionStatus={subscriptionStatus} \n            archivingBillIds={archivingBillIds} \n            onSelectBill={onSelectBill} \n            onArchiveBill={onArchiveBill} \n            onUnarchiveBill={onUnarchiveBill} \n            onDeleteBill={onDeleteBill} \n            onReshareBill={onReshareBill}\n            onSelectImportedBill={onSelectImportedBill} \n            onUpdateImportedBill={onUpdateImportedBill} \n            onArchiveImportedBill={onArchiveImportedBill} \n            onUnarchiveImportedBill={onUnarchiveImportedBill} \n            onDeleteImportedBill={onDeleteImportedBill} \n            onShowSummaryDetails={onShowSummaryDetails} \n            onSettleUp={handleSettleUp} \n            loadMoreRef={loadMoreRef} \n            hasMore={hasMore}\n            onConvertToTemplate={handleConvertToTemplate}\n            onExportOwnedBill={handleExportOwnedBill}\n            onExportImportedBill={handleExportImportedBill}\n            dashboardLayoutMode={dashboardLayoutMode}\n        />;\n    }\n    \n    const { title, message } = getEmptyState();\n    return <EmptyState title={title} message={message} isArchiveContext={dashboardStatusFilter === 'archived'} />;\n  };\n\n  return (\n    <div>\n      {['bills', 'participants'].includes(dashboardView) &&\n        <DashboardSummary summaryTotals={summaryTotals} dashboardStatusFilter={dashboardStatusFilter} dashboardSummaryFilter={dashboardSummaryFilter} onSetDashboardSummaryFilter={onSetDashboardSummaryFilter} />\n      }\n      <DashboardControls \n        selectedParticipant={selectedParticipant}\n        onClearParticipant={onClearParticipant}\n        dashboardView={dashboardView}\n        onSetDashboardView={onSetDashboardView}\n        dashboardStatusFilter={dashboardStatusFilter}\n        onSetDashboardStatusFilter={onSetDashboardStatusFilter}\n        searchQuery={searchQuery}\n        setSearchQuery={setSearchQuery}\n        searchMode={searchMode}\n        setSearchMode={setSearchMode}\n        dashboardLayoutMode={dashboardLayoutMode}\n        onSetDashboardLayoutMode={onSetDashboardLayoutMode}\n        hasRecurringBills={hasRecurringBills}\n        hasBudgetData={budgetData.hasBudgetData}\n      />\n      \n      {activeFilterTag && dashboardView === 'bills' && (\n        <div className=\"mb-4\">\n          <span className=\"inline-flex items-center gap-x-1.5 rounded-full bg-slate-100 dark:bg-slate-700 px-2.5 py-1 text-sm font-medium text-slate-700 dark:text-slate-200\">\n            Filtering by: <span className=\"font-semibold\">{activeFilterTag}</span>\n            <button onClick={() => onSetDashboardSummaryFilter('total')} className=\"ml-1 -mr-1 p-0.5 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fillRule=\"evenodd\" d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\" clipRule=\"evenodd\" /></svg>\n            </button>\n          </span>\n        </div>\n      )}\n      \n      {dashboardView === 'groups' && (\n        <div className=\"mb-6\">\n          <button\n            onClick={() => navigate(View.CreateGroup)}\n            className=\"w-full flex items-center justify-center gap-2 px-4 py-3 border-2 border-dashed border-teal-500/50 dark:border-teal-400/50 rounded-lg text-teal-600 dark:text-teal-300 hover:bg-teal-50 dark:hover:bg-teal-900/40 bg-teal-50/50 dark:bg-teal-900/20 transition-colors\"\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M12 4v16m8-8H4\" /></svg>\n            <span className=\"font-bold text-lg\">Add New Group</span>\n          </button>\n        </div>\n      )}\n\n      {renderContent()}\n\n      {hasMore && (\n        <div ref={loadMoreRef} className=\"flex justify-center items-center p-8\">\n          <svg className=\"animate-spin h-8 w-8 text-teal-500\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n            <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n            <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n          </svg>\n        </div>\n      )}\n      \n      {shareSheetParticipant && <ShareActionSheet \n        participant={{ ...shareSheetParticipant, id: shareSheetParticipant.name, amountOwed: shareSheetParticipant.amount, paid: false } as Participant} \n        onClose={() => setShareSheetParticipant(null)} \n        onShareSms={handleShareSms as any}\n        onShareEmail={handleShareEmail as any}\n        onShareGeneric={handleShareGeneric as any}\n        onShareLinkSms={() => handleShareLink(shareSheetParticipant.name, 'sms')} \n        onShareLinkEmail={() => handleShareLink(shareSheetParticipant.name, 'email')} \n        onShareLinkGeneric={() => handleShareLink(shareSheetParticipant.name, 'generic')} \n        onViewDetails={() => { onSelectParticipant(shareSheetParticipant.name); setShareSheetParticipant(null); }} \n        shareContext=\"dashboard\" />}\n      {isHalfScreenAdOpen && <HalfScreenAdModal onClose={() => setIsHalfScreenAdOpen(false)} />}\n      {isPaymentWarningOpen && (\n        <PaymentMethodWarningModal\n            onClose={() => { setIsPaymentWarningOpen(false); setDeferredShareAction(null); }}\n            onContinue={() => {\n                setIsPaymentWarningOpen(false);\n                if(deferredShareAction) deferredShareAction();\n                setDeferredShareAction(null);\n            }}\n            onAddMethods={() => {\n                setIsPaymentWarningOpen(false);\n                setDeferredShareAction(null);\n                setSettingsSection('payments');\n            }}\n            onUpdateSettings={updateSettings}\n        />\n      )}\n      {settleUpBill && myParticipantForSettleUp && (\n        <PaymentMethodsModal\n            paymentDetails={settleUpBill.sharedData.paymentDetails}\n            billDescription={settleUpBill.sharedData.bill.description}\n            amountOwed={myParticipantForSettleUp.amountOwed}\n            creatorName={settleUpBill.creatorName}\n            onClose={() => setSettleUpBill(null)}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default Dashboard;\n","import { GoogleGenAI, Type } from \"@google/genai\";\nimport { getApiUrl, fetchWithRetry } from './api';\nimport type { Bill, ImportedBill, Participant, ReceiptItem } from '../types';\n\n// The expected structure of the response from our serverless function.\ninterface ScannedReceiptData {\n  description: string;\n  date?: string;\n  items: { name: string; price: number }[];\n  total?: number;\n  additionalInfo?: { key: string; value: string }[];\n  category?: string;\n}\n\nexport const parseReceipt = async (base64Image: string, mimeType: string): Promise<ScannedReceiptData> => {\n  try {\n    // The path to our new self-hosted backend endpoint.\n    // The Ingress will route this to the backend service.\n    const response = await fetchWithRetry(await getApiUrl('/scan-receipt'), {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ base64Image, mimeType }),\n    });\n\n    if (!response.ok) {\n        // Try to parse the error message from the function's response.\n        const errorData = await response.json().catch(() => ({})); // Gracefully handle non-JSON error responses\n        const errorMessage = errorData.error || `Failed to analyze receipt. The server responded with status: ${response.status}`;\n        throw new Error(errorMessage);\n    }\n    \n    const parsedJson: ScannedReceiptData = await response.json();\n\n    // Basic validation to ensure the response structure matches expectations\n    if (parsedJson && parsedJson.description && Array.isArray(parsedJson.items)) {\n      return parsedJson;\n    } else {\n      throw new Error(\"Invalid JSON structure received from the server.\");\n    }\n  } catch (error) {\n    console.error(\"Error calling receipt parsing service:\", error);\n    // Re-throw a user-friendly message.\n    // If the error came from our function, it might already be user-friendly.\n    if (error instanceof Error) {\n        // Use the specific message from the server if available, otherwise provide a generic one.\n        throw new Error(error.message || \"Failed to analyze receipt. Please try another image or enter items manually.\");\n    }\n    throw new Error(\"An unknown error occurred while analyzing the receipt.\");\n  }\n};\n\n/**\n * Uses AI to match items from a new scan to a template's itemization rules by calling a secure backend endpoint.\n */\ninterface MatchAndAssignItemsParams {\n  templateItems: ReceiptItem[];\n  scannedItems: { name: string; price: number }[];\n  participants: Participant[];\n}\nexport const matchAndAssignItems = async (params: MatchAndAssignItemsParams): Promise<ReceiptItem[]> => {\n  try {\n    const response = await fetchWithRetry(await getApiUrl('/match-items'), {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(params),\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({}));\n      const errorMessage = errorData.error || `Failed to match items. Server responded with status: ${response.status}`;\n      throw new Error(errorMessage);\n    }\n\n    const parsedJson = await response.json();\n    if (!Array.isArray(parsedJson)) {\n      throw new Error(\"Invalid response structure from the item matching service.\");\n    }\n\n    return parsedJson.map((item: any, index: number) => ({\n      ...item,\n      id: `item-matched-${Date.now()}-${index}`\n    }));\n\n  } catch (error) {\n    console.error(\"Error calling item matching service:\", error);\n    if (error instanceof Error) {\n      throw error; // Re-throw the specific error from the service\n    }\n    throw new Error(\"An unknown error occurred while matching items.\");\n  }\n};\n\n\n// --- CSV Parsing ---\nexport type ParsedBillFromCsv = Omit<Bill, 'status'>;\nexport interface ParsedCsvData {\n  ownedBills: ParsedBillFromCsv[];\n  importedBills: Omit<ImportedBill, 'status' | 'liveStatus'>[];\n}\n\n\n// New signature header from the export service\nconst EXPORT_HEADER = '# SharedBills CSV Export v2';\n\n// Client-side parser for our own CSV format\nexport const parseAppCsv = (csvContent: string): ParsedCsvData => {\n    const lines = csvContent.split(/\\r?\\n/).filter(line => line.trim() && !line.startsWith('#'));\n    if (lines.length < 1) return { ownedBills: [], importedBills: [] };\n\n    const header = lines[0].split(',').map(h => h.trim());\n    const rows = lines.slice(1);\n\n    const requiredCols = ['RowType', 'BillID', 'BillType', 'Description', 'Date', 'TotalAmount', 'CreatorName', 'ParticipantID', 'ParticipantName', 'AmountOwed', 'PaidStatus', 'ShareInfoJSON', 'LastUpdatedAt'];\n    const colIndices: { [key: string]: number } = {};\n    for (const col of requiredCols) {\n        const index = header.indexOf(col);\n        if (index === -1) {\n            console.error(\"CSV parse error: Missing column\", col, \"Header found:\", header);\n            throw new Error(`CSV is missing required V2 column: \"${col}\". Please use the AI importer for custom formats.`);\n        }\n        colIndices[col] = index;\n    }\n\n    const billGroups = new Map<string, { billData: any; participants: any[] }>();\n    \n    // A robust CSV line parser that handles quoted fields, escaped quotes (\"\"), and empty fields.\n    const parseCsvLine = (line: string): string[] => {\n        const fields: string[] = [];\n        let currentField = '';\n        let inQuotes = false;\n        for (let i = 0; i < line.length; i++) {\n            const char = line[i];\n            const nextChar = line[i + 1];\n\n            if (inQuotes) {\n                if (char === '\"' && nextChar === '\"') {\n                    currentField += '\"';\n                    i++; // Skip the next quote\n                } else if (char === '\"') {\n                    inQuotes = false;\n                } else {\n                    currentField += char;\n                }\n            } else {\n                if (char === '\"') {\n                    inQuotes = true;\n                } else if (char === ',') {\n                    fields.push(currentField);\n                    currentField = '';\n                } else {\n                    currentField += char;\n                }\n            }\n        }\n        fields.push(currentField); // Add the last field\n        return fields;\n    };\n\n\n    rows.forEach(row => {\n        if (!row.trim()) return; // Skip empty lines\n        const values = parseCsvLine(row);\n\n        if (values.length !== header.length) {\n            console.warn(`Skipping malformed CSV row. Expected ${header.length} columns, found ${values.length}. Row: \"${row}\"`);\n            return;\n        }\n\n        const billId = values[colIndices['BillID']];\n        if (!billGroups.has(billId)) {\n            billGroups.set(billId, { billData: {}, participants: [] });\n        }\n        const group = billGroups.get(billId)!;\n\n        const rowType = values[colIndices['RowType']];\n        if (rowType === 'BILL') {\n            try {\n                const shareInfoString = values[colIndices['ShareInfoJSON']] || '{}';\n                group.billData = {\n                    billType: values[colIndices['BillType']],\n                    description: values[colIndices['Description']],\n                    date: values[colIndices['Date']],\n                    totalAmount: parseFloat(values[colIndices['TotalAmount']] || '0'),\n                    creatorName: values[colIndices['CreatorName']],\n                    shareInfo: JSON.parse(shareInfoString.trim() ? shareInfoString : '{}'),\n                    lastUpdatedAt: parseInt(values[colIndices['LastUpdatedAt']] || '0', 10),\n                };\n            } catch (e) {\n                console.warn(`Skipping bill due to invalid ShareInfoJSON for BillID ${billId}`, e);\n            }\n        } else if (rowType === 'PARTICIPANT') {\n            group.participants.push({\n                id: values[colIndices['ParticipantID']],\n                name: values[colIndices['ParticipantName']],\n                amountOwed: parseFloat(values[colIndices['AmountOwed']] || '0'),\n                paid: (values[colIndices['PaidStatus']] || '').toLowerCase() === 'paid',\n            });\n        }\n    });\n\n    const result: ParsedCsvData = { ownedBills: [], importedBills: [] };\n    for (const [billId, group] of billGroups.entries()) {\n        if (!group.billData.billType) continue;\n\n        if (group.billData.billType === 'OWNED') {\n            const bill: ParsedBillFromCsv = {\n                id: billId,\n                description: group.billData.description,\n                date: group.billData.date,\n                totalAmount: group.billData.totalAmount,\n                participants: group.participants,\n                lastUpdatedAt: group.billData.lastUpdatedAt,\n                shareInfo: group.billData.shareInfo,\n            };\n            result.ownedBills.push(bill);\n        } else if (group.billData.billType === 'IMPORTED') {\n            const { shareId, shareEncryptionKey, creatorPublicKey, myParticipantId } = group.billData.shareInfo;\n            if (!shareId || !shareEncryptionKey || !creatorPublicKey || !myParticipantId) continue;\n            \n            const importedBill: Omit<ImportedBill, 'status' | 'liveStatus'> = {\n                id: billId,\n                creatorName: group.billData.creatorName,\n                sharedData: {\n                    bill: {\n                        id: billId,\n                        description: group.billData.description,\n                        totalAmount: group.billData.totalAmount,\n                        date: group.billData.date,\n                        participants: group.participants,\n                        status: 'active', // status will be set on import\n                        lastUpdatedAt: group.billData.lastUpdatedAt,\n                    },\n                    creatorPublicKey: creatorPublicKey,\n                    signature: '',\n                    paymentDetails: {\n                        venmo: '',\n                        paypal: '',\n                        cashApp: '',\n                        zelle: '',\n                        customMessage: '',\n                    },\n                },\n                shareId,\n                shareEncryptionKey,\n                lastUpdatedAt: group.billData.lastUpdatedAt,\n                myParticipantId,\n                localStatus: {\n                    myPortionPaid: group.participants.find((p: any) => p.id === myParticipantId)?.paid ?? false,\n                },\n            };\n            result.importedBills.push(importedBill);\n        }\n    }\n    return result;\n};\n\nexport const parseCsv = async (csvContent: string, myDisplayName: string): Promise<ParsedCsvData> => {\n    // Client-side detection logic\n    if (csvContent.trim().startsWith(EXPORT_HEADER)) {\n        try {\n            console.log(\"Detected app-native CSV format. Parsing client-side.\");\n            return parseAppCsv(csvContent);\n        } catch (error) {\n            console.warn(\"Client-side CSV parsing failed, falling back to AI.\", error);\n            // Fallthrough to AI if client-side parsing fails\n        }\n    }\n\n    try {\n        const response = await fetchWithRetry(await getApiUrl('/parse-csv'), {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({ csvContent, myDisplayName }),\n        });\n\n        if (!response.ok) {\n            const errorData = await response.json().catch(() => ({}));\n            const errorMessage = errorData.error || `Failed to analyze CSV. The server responded with status: ${response.status}`;\n            throw new Error(errorMessage);\n        }\n\n        const parsedJson = await response.json();\n\n        // Basic validation\n        if (Array.isArray(parsedJson)) {\n            // Further validation could be added here to check if objects match the Bill structure\n            return {\n                ownedBills: parsedJson as ParsedBillFromCsv[],\n                importedBills: [],\n            };\n        } else {\n            throw new Error(\"Invalid JSON structure received from the AI. Expected an array of bills.\");\n        }\n\n    } catch (error) {\n        console.error(\"Error calling CSV parsing service:\", error);\n        if (error instanceof Error) {\n            throw new Error(`Failed to analyze CSV. The service responded with an error: ${error.message}`);\n        }\n        throw new Error(\"An unknown error occurred while analyzing the CSV.\");\n    }\n};","import React, { useState, useCallback, useRef, useEffect } from 'react';\nimport { parseReceipt } from '../services/geminiService';\n\ninterface ScannedData {\n  description: string;\n  date?: string;\n  items: { name: string; price: number }[];\n}\n\ninterface ReceiptScannerProps {\n  onItemsScanned: (data: ScannedData) => void;\n  onImageSelected: (imageDataUrl: string) => void;\n  onImageCleared: () => void;\n  isForTemplate?: boolean;\n}\n\nconst MAX_DIMENSION = 1280;\nconst JPEG_QUALITY = 0.8;\n\n// Helper to resize and compress an image file\nconst resizeImage = (file: File): Promise<{ dataUrl: string; file: File }> => {\n    return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onload = (event) => {\n            if (!event.target?.result) return reject(new Error(\"FileReader failed to load file.\"));\n\n            const img = new Image();\n            img.onload = () => {\n                let { width, height } = img;\n                if (width > height) {\n                    if (width > MAX_DIMENSION) {\n                        height *= MAX_DIMENSION / width;\n                        width = MAX_DIMENSION;\n                    }\n                } else {\n                    if (height > MAX_DIMENSION) {\n                        width *= MAX_DIMENSION / height;\n                        height = MAX_DIMENSION;\n                    }\n                }\n\n                const canvas = document.createElement('canvas');\n                canvas.width = width;\n                canvas.height = height;\n                const ctx = canvas.getContext('2d');\n                if (!ctx) return reject(new Error('Could not get canvas context'));\n\n                ctx.drawImage(img, 0, 0, width, height);\n                \n                const dataUrl = canvas.toDataURL('image/jpeg', JPEG_QUALITY);\n                \n                canvas.toBlob(\n                    (blob) => {\n                        if (!blob) return reject(new Error('Canvas to Blob conversion failed'));\n                        \n                        // Ensure the new filename has a .jpg extension\n                        const newFileName = file.name.replace(/\\.[^/.]+$/, \"\") + \".jpg\";\n\n                        const resizedFile = new File([blob], newFileName, {\n                            type: 'image/jpeg',\n                            lastModified: Date.now(),\n                        });\n                        resolve({ dataUrl, file: resizedFile });\n                    },\n                    'image/jpeg',\n                    JPEG_QUALITY\n                );\n            };\n            img.onerror = (err) => reject(new Error(`Image load error: ${err}`));\n            img.src = event.target.result as string;\n        };\n        reader.onerror = (err) => reject(new Error(`File read error: ${err}`));\n        reader.readAsDataURL(file);\n    });\n};\n\n\n// --- Flash Icons ---\nconst FlashOnIcon = () => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n    </svg>\n);\n\nconst FlashOffIcon = () => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n        <line x1=\"3\" y1=\"3\" x2=\"21\" y2=\"21\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n    </svg>\n);\n\nconst FlashAutoIcon = () => (\n    <span className=\"relative h-6 w-6 inline-flex items-center justify-center\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n        </svg>\n        <span className=\"absolute -top-1 -right-2.5 text-white font-bold text-[10px] leading-none bg-black/40 rounded-full px-1 py-0.5\">A</span>\n    </span>\n);\n\n\nconst ReceiptScanner: React.FC<ReceiptScannerProps> = ({ onItemsScanned, onImageSelected, onImageCleared, isForTemplate }) => {\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n  const [previewUrl, setPreviewUrl] = useState<string | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isProcessingImage, setIsProcessingImage] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  // Camera State\n  const [isCameraOpen, setIsCameraOpen] = useState(false);\n  const [cameraError, setCameraError] = useState<string | null>(null);\n  const [canControlFlash, setCanControlFlash] = useState(false);\n  const [flashMode, setFlashMode] = useState<'off' | 'on' | 'auto'>('auto');\n\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const streamRef = useRef<MediaStream | null>(null);\n\n  // Effect to handle camera stream initialization and cleanup\n  useEffect(() => {\n    if (!isCameraOpen) {\n      if (streamRef.current) {\n        streamRef.current.getTracks().forEach(track => track.stop());\n        streamRef.current = null;\n      }\n      return;\n    }\n\n    const startCamera = async () => {\n      setCameraError(null);\n      setCanControlFlash(false);\n      try {\n        if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\n          throw new Error(\"Camera access is not supported by your browser.\");\n        }\n        \n        const stream = await navigator.mediaDevices.getUserMedia({\n          video: { facingMode: 'environment' }\n        });\n        \n        streamRef.current = stream;\n        \n        if (videoRef.current) {\n          videoRef.current.srcObject = stream;\n        }\n\n        const videoTrack = stream.getVideoTracks()[0];\n        // The 'torch' capability indicates if the flash can be controlled.\n        const capabilities = videoTrack.getCapabilities();\n        if ((capabilities as any).torch) {\n          setCanControlFlash(true);\n        }\n      } catch (err: any) {\n        console.error(\"Error accessing camera:\", err);\n        let message = \"Could not access the camera. Please ensure you have granted permission.\";\n        if (err.name === 'NotAllowedError') {\n          message = \"Camera access was denied. Please enable it in your browser settings.\";\n        } else if (err.name === 'NotFoundError') {\n          message = \"No suitable camera was found on your device.\";\n        }\n        setCameraError(message);\n        setIsCameraOpen(false); // Close the modal on error\n      }\n    };\n\n    startCamera();\n\n    // Cleanup function to stop the stream when the camera is closed or component unmounts\n    return () => {\n      if (streamRef.current) {\n        streamRef.current.getTracks().forEach(track => track.stop());\n        streamRef.current = null;\n      }\n    };\n  }, [isCameraOpen]);\n\n  // Effect to apply flash constraints when flashMode changes\n  useEffect(() => {\n    if (!isCameraOpen || !canControlFlash || !streamRef.current) return;\n\n    const videoTrack = streamRef.current.getVideoTracks()[0];\n    // The browser API uses a boolean 'torch' property. 'auto' mode is treated as 'off'.\n    const isTorchOn = flashMode === 'on';\n\n    videoTrack.applyConstraints({\n      advanced: [{ torch: isTorchOn } as any]\n    }).catch(err => {\n      console.error('Failed to apply flash constraints:', err);\n      // If this fails, the user just won't have flash. Non-critical error.\n    });\n  }, [flashMode, isCameraOpen, canControlFlash]);\n\n  const handleOpenCamera = () => setIsCameraOpen(true);\n  const handleCloseCamera = () => setIsCameraOpen(false);\n  \n  const handleCapture = useCallback(() => {\n    if (!videoRef.current) return;\n    const canvas = document.createElement('canvas');\n    canvas.width = videoRef.current.videoWidth;\n    canvas.height = videoRef.current.videoHeight;\n    const context = canvas.getContext('2d');\n    if (context) {\n        context.drawImage(videoRef.current, 0, 0, canvas.width, canvas.height);\n        handleCloseCamera();\n        \n        canvas.toBlob(async (blob) => {\n            if (blob) {\n                const capturedFile = new File([blob], `capture-${Date.now()}.jpg`, { type: 'image/jpeg' });\n                setIsProcessingImage(true);\n                setError(null);\n                try {\n                    const { dataUrl, file: resizedFile } = await resizeImage(capturedFile);\n                    setPreviewUrl(dataUrl);\n                    onImageSelected(dataUrl);\n                    setSelectedFile(resizedFile);\n                } catch (err) {\n                    console.error(\"Image resizing failed after capture:\", err);\n                    setError(\"Failed to process captured image.\");\n                    handleClearImage();\n                } finally {\n                    setIsProcessingImage(false);\n                }\n            }\n        }, 'image/jpeg', 1.0);\n    }\n  }, [onImageSelected]);\n\n  const handleFlashToggle = () => {\n    const modes: ('auto' | 'on' | 'off')[] = ['auto', 'on', 'off'];\n    const currentIndex = modes.indexOf(flashMode);\n    const nextIndex = (currentIndex + 1) % modes.length;\n    setFlashMode(modes[nextIndex]);\n  };\n  \n  const FlashIcon = () => {\n    switch(flashMode) {\n      case 'on': return <FlashOnIcon />;\n      case 'off': return <FlashOffIcon />;\n      case 'auto':\n      default:\n        return <FlashAutoIcon />;\n    }\n  };\n\n  const handleFileChange = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      setIsProcessingImage(true);\n      setError(null);\n      try {\n        const { dataUrl, file: resizedFile } = await resizeImage(file);\n        setPreviewUrl(dataUrl);\n        onImageSelected(dataUrl);\n        setSelectedFile(resizedFile);\n      } catch (err) {\n        console.error(\"Image resizing failed:\", err);\n        setError(\"Failed to process image. Please try a different one.\");\n        handleClearImage();\n      } finally {\n        setIsProcessingImage(false);\n      }\n    }\n  };\n\n  const handleClearImage = () => {\n    setSelectedFile(null);\n    setPreviewUrl(null);\n    setError(null);\n    const input = document.getElementById('receipt-upload') as HTMLInputElement;\n    if (input) {\n      input.value = '';\n    }\n    onImageCleared();\n  };\n\n  const fileToBase64 = (file: File): Promise<string> => {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.readAsDataURL(file);\n      reader.onload = () => {\n        const base64String = (reader.result as string).split(',')[1];\n        resolve(base64String);\n      };\n      reader.onerror = error => reject(error);\n    });\n  };\n\n  const handleScan = useCallback(async () => {\n    if (!selectedFile) return;\n\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const base64String = await fileToBase64(selectedFile);\n      const result = await parseReceipt(base64String, selectedFile.type);\n      if(result && result.items) {\n        onItemsScanned(result);\n      } else {\n        throw new Error(\"No items found in the receipt.\");\n      }\n    } catch (e: any) {\n      setError(e.message || \"An unknown error occurred.\");\n    } finally {\n      setIsLoading(false);\n    }\n  }, [selectedFile, onItemsScanned]);\n\n  return (\n    <>\n      {isCameraOpen && (\n        <div className=\"fixed inset-0 bg-black z-50 flex flex-col items-center justify-center\">\n          <video ref={videoRef} autoPlay playsInline className=\"w-full h-full object-cover\" />\n          \n          {canControlFlash && (\n            <div className=\"absolute top-4 right-4\">\n              <button\n                type=\"button\"\n                onClick={handleFlashToggle}\n                className=\"p-3 bg-black bg-opacity-40 text-white rounded-full focus:outline-none focus:ring-2 focus:ring-white\"\n                aria-label={`Set flash to ${flashMode}`}\n              >\n                <FlashIcon />\n              </button>\n            </div>\n          )}\n\n          <div className=\"absolute bottom-0 left-0 right-0 p-4 bg-black bg-opacity-50 flex justify-around items-center\">\n              <button type=\"button\" onClick={handleCloseCamera} className=\"px-6 py-3 bg-gray-600/70 text-white font-semibold rounded-lg text-lg\">Cancel</button>\n              <button type=\"button\" onClick={handleCapture} className=\"w-20 h-20 bg-white rounded-full border-4 border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-white ring-offset-black/50\"></button>\n          </div>\n        </div>\n      )}\n      <div className=\"mb-6 p-6 border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-lg text-center bg-slate-50 dark:bg-slate-700/30\">\n        <h3 className=\"text-lg font-semibold mb-2 text-slate-700 dark:text-slate-200\">Scan a Receipt {isForTemplate ? '(to populate template)' : '(Optional)'}</h3>\n        <p className=\"text-sm text-slate-500 dark:text-slate-400 mb-4\">\n          {isForTemplate\n            ? \"Use an image to quickly fill out the template fields below. The image itself will not be saved.\"\n            : \"Let AI extract the items and prices for you.\"}\n          <br/>\n          <strong className=\"text-slate-600 dark:text-slate-300\">Note: AI scanning uses Google Gemini and requires an internet connection.</strong>\n        </p>\n        \n        {!previewUrl && !isProcessingImage && (\n          <div className=\"flex justify-center gap-4\">\n            <input\n                type=\"file\"\n                id=\"receipt-upload\"\n                className=\"hidden\"\n                accept=\"image/*\"\n                onChange={handleFileChange}\n            />\n            <label\n                htmlFor=\"receipt-upload\"\n                className=\"cursor-pointer inline-flex items-center gap-2 bg-white dark:bg-slate-700 text-teal-600 dark:text-teal-400 font-semibold px-4 py-2 border border-teal-500 rounded-lg hover:bg-teal-50 dark:hover:bg-slate-600\"\n            >\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12\" /></svg>\n                <span>Choose Image</span>\n            </label>\n             <button\n                type=\"button\"\n                onClick={handleOpenCamera}\n                className=\"cursor-pointer inline-flex items-center gap-2 bg-white dark:bg-slate-700 text-teal-600 dark:text-teal-400 font-semibold px-4 py-2 border border-teal-500 rounded-lg hover:bg-teal-50 dark:hover:bg-slate-600\"\n              >\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z\" /><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 13a3 3 0 11-6 0 3 3 0 016 0z\" /></svg>\n                <span>Use Camera</span>\n            </button>\n          </div>\n        )}\n\n        {isProcessingImage && (\n            <div className=\"flex flex-col items-center justify-center gap-4 py-8\">\n                <svg className=\"animate-spin h-8 w-8 text-teal-500\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\"><circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle><path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path></svg>\n                <p className=\"text-slate-500 dark:text-slate-400\">Processing image...</p>\n            </div>\n        )}\n\n        {previewUrl && !isProcessingImage && (\n          <div className=\"mt-4 relative inline-block\">\n            <img src={previewUrl} alt=\"Receipt preview\" className=\"max-h-48 mx-auto rounded-md shadow-sm\" />\n             <button\n              type=\"button\"\n              onClick={handleClearImage}\n              className=\"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 shadow-lg hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-white\"\n              aria-label=\"Clear image\"\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth=\"3\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M6 18L18 6M6 6l12 12\" />\n              </svg>\n            </button>\n          </div>\n        )}\n\n        {selectedFile && !isProcessingImage && (\n          <div className=\"mt-4\">\n            <button\n              type=\"button\"\n              onClick={handleScan}\n              disabled={isLoading}\n              className=\"w-full bg-teal-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-teal-600 disabled:bg-slate-400 dark:disabled:bg-slate-600 flex items-center justify-center gap-2\"\n            >\n              {isLoading ? (\n                <>\n                  <svg className=\"animate-spin h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                    <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                    <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                  </svg>\n                  <span>Scanning...</span>\n                </>\n              ) : (\n                'Scan with AI'\n              )}\n            </button>\n          </div>\n        )}\n\n        {error && <p className=\"mt-4 text-sm text-red-600 bg-red-100 p-3 rounded-md dark:bg-red-900/50 dark:text-red-400\">{error}</p>}\n        {cameraError && <p className=\"mt-4 text-sm text-red-600 bg-red-100 p-3 rounded-md dark:bg-red-900/50 dark:text-red-400\">{cameraError}</p>}\n      </div>\n    </>\n  );\n};\n\nexport default ReceiptScanner;","import React, { useState, useMemo } from 'react';\nimport type { ReceiptItem, Participant } from '../types';\n\ninterface ItemEditorProps {\n  initialItems: ReceiptItem[];\n  participants: Participant[];\n  onSave: (items: ReceiptItem[]) => void;\n  onCancel: () => void;\n  isRecurring?: boolean;\n}\n\nconst ItemEditor: React.FC<ItemEditorProps> = ({ initialItems, participants, onSave, onCancel, isRecurring }) => {\n  const [items, setItems] = useState<ReceiptItem[]>(() => JSON.parse(JSON.stringify(initialItems)));\n\n  const handleItemChange = (id: string, field: 'name' | 'price', value: string) => {\n    setItems(currentItems =>\n      currentItems.map(item => {\n        if (item.id === id) {\n          const newItem = { ...item };\n          if (field === 'name') newItem.name = value;\n          else if (field === 'price') newItem.price = parseFloat(value) || 0;\n          return newItem;\n        }\n        return item;\n      })\n    );\n  };\n  \n  const handleToggleAssignment = (itemId: string, participantId: string) => {\n      setItems(currentItems => currentItems.map(item => {\n          if (item.id === itemId) {\n              const assignedTo = item.assignedTo.includes(participantId)\n                ? item.assignedTo.filter(id => id !== participantId)\n                : [...item.assignedTo, participantId];\n              return { ...item, assignedTo };\n          }\n          return item;\n      }));\n  };\n\n  const handleAddItem = () => {\n    const newItem: ReceiptItem = { id: `item-manual-${Date.now()}`, name: '', price: 0, assignedTo: [] };\n    setItems(currentItems => [...currentItems, newItem]);\n  };\n\n  const handleDeleteItem = (id: string) => setItems(currentItems => currentItems.filter(item => item.id !== id));\n\n  const handleSave = () => {\n    const finalItems = isRecurring\n      ? items.filter(item => item.name.trim() !== '')\n      : items.filter(item => item.name.trim() !== '' || item.price > 0);\n    onSave(finalItems);\n  };\n\n  const currentTotal = useMemo(() => items.reduce((sum, item) => sum + (item.price || 0), 0), [items]);\n\n  return (\n    <div className=\"fixed inset-0 bg-slate-900 bg-opacity-60 z-50 flex justify-center items-center p-4\" role=\"dialog\" aria-modal=\"true\" aria-labelledby=\"item-editor-title\">\n      <div className=\"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-lg flex flex-col max-h-[90vh]\">\n        <div className=\"p-6 border-b border-slate-200 dark:border-slate-700\">\n          <h2 id=\"item-editor-title\" className=\"text-xl font-bold text-slate-800 dark:text-slate-100\">{isRecurring ? 'Edit Default Items' : 'Edit Itemization'}</h2>\n           {!isRecurring && items.some(i => i.assignedTo.length === 0) && (\n             <p className=\"text-sm text-amber-600 dark:text-amber-400 mt-1\">Some items are unassigned. All items must be assigned to at least one person.</p>\n           )}\n        </div>\n\n        <div className=\"p-6 flex-grow overflow-y-auto\">\n          {items.length === 0 ? <p className=\"text-center text-slate-500 dark:text-slate-400\">No items yet. Add one to get started.</p> : (\n            <ul className=\"space-y-4\">\n              {items.map((item) => (\n                <li key={item.id} className={`p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg ring-2 ${item.assignedTo.length === 0 && !isRecurring ? 'ring-red-500/50' : 'ring-transparent'}`}>\n                  <div className=\"flex items-center gap-3\">\n                    <div className=\"flex-grow\">\n                      <label htmlFor={`item-name-${item.id}`} className=\"sr-only\">Item Name</label>\n                      <input id={`item-name-${item.id}`} type=\"text\" value={item.name} onChange={(e) => handleItemChange(item.id, 'name', e.target.value)} placeholder=\"Item Name\" className=\"w-full px-3 py-2 border border-slate-300 rounded-md focus:ring-teal-500 focus:border-teal-500 bg-white dark:bg-slate-700 dark:border-slate-600 text-slate-900 dark:text-slate-100\" />\n                    </div>\n                    {!isRecurring && (\n                      <div className=\"w-28\"><label htmlFor={`item-price-${item.id}`} className=\"sr-only\">Price</label>\n                        <div className=\"relative\"><span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-500\">$</span>\n                          <input id={`item-price-${item.id}`} type=\"number\" step=\"0.01\" value={item.price} onChange={(e) => handleItemChange(item.id, 'price', e.target.value)} placeholder=\"0.00\" className=\"w-full pl-7 pr-2 py-2 border border-slate-300 rounded-md focus:ring-teal-500 focus:border-teal-500 bg-white dark:bg-slate-700 dark:border-slate-600 text-slate-900 dark:text-slate-100\" />\n                        </div>\n                      </div>\n                    )}\n                    <button onClick={() => handleDeleteItem(item.id)} className=\"p-2 text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-500 bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 rounded-full flex-shrink-0\" aria-label={`Delete item ${item.name}`}><svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fillRule=\"evenodd\" d=\"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z\" clipRule=\"evenodd\" /></svg></button>\n                  </div>\n                  {!isRecurring && participants.length > 0 && (\n                      <div className=\"mt-3\">\n                          <p className=\"text-xs font-medium text-slate-500 dark:text-slate-400 mb-1\">Assigned to:</p>\n                          <div className=\"flex flex-wrap gap-2\">\n                              {participants.filter(p => p.name.trim() !== '').map(p => (\n                                  <button type=\"button\" key={p.id} onClick={() => handleToggleAssignment(item.id, p.id)}\n                                    className={`flex items-center justify-center h-8 px-3 rounded-full text-xs font-semibold whitespace-nowrap transition-all ring-2 ring-offset-2 dark:ring-offset-slate-700 ${item.assignedTo.includes(p.id) ? 'bg-teal-500 text-white ring-teal-500' : 'bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 ring-transparent'}`}>\n                                      {p.name}\n                                  </button>\n                              ))}\n                          </div>\n                      </div>\n                  )}\n                </li>\n              ))}\n            </ul>\n          )}\n          <div className=\"mt-6\"><button onClick={handleAddItem} className=\"w-full flex items-center justify-center gap-2 px-4 py-2 border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700\"><svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fillRule=\"evenodd\" d=\"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z\" clipRule=\"evenodd\" /></svg><span>Add Item</span></button></div>\n        </div>\n\n        <div className=\"p-6 border-t border-slate-200 dark:border-slate-700 flex justify-between items-center\">\n          <div>\n            {!isRecurring && <><span className=\"text-sm font-medium text-slate-500 dark:text-slate-400\">New Total:</span><span className=\"ml-2 text-lg font-bold text-slate-800 dark:text-slate-100\">${currentTotal.toFixed(2)}</span></>}\n          </div>\n          <div className=\"flex space-x-4\">\n            <button onClick={onCancel} className=\"px-5 py-2.5 bg-slate-100 text-slate-800 font-semibold rounded-lg hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-100 dark:hover:bg-slate-600 transition-colors\">Cancel</button>\n            <button onClick={handleSave} className=\"px-5 py-2.5 bg-teal-500 text-white font-bold rounded-lg hover:bg-teal-600 transition-colors\">Done</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ItemEditor;","import React, { useState } from 'react';\n\ninterface InfoItem {\n  id: string;\n  key: string;\n  value: string;\n}\n\ninterface AdditionalInfoEditorProps {\n  initialInfo: InfoItem[];\n  onSave: (info: InfoItem[]) => void;\n  onCancel: () => void;\n}\n\nconst AdditionalInfoEditor: React.FC<AdditionalInfoEditorProps> = ({ initialInfo, onSave, onCancel }) => {\n  const [info, setInfo] = useState<InfoItem[]>(() => JSON.parse(JSON.stringify(initialInfo)));\n\n  const handleInfoChange = (id: string, field: 'key' | 'value', value: string) => {\n    setInfo(currentInfo =>\n      currentInfo.map(item => (item.id === id ? { ...item, [field]: value } : item))\n    );\n  };\n\n  const handleAddItem = () => {\n    const newItem: InfoItem = { id: `info-manual-${Date.now()}`, key: '', value: '' };\n    setInfo(currentInfo => [...currentInfo, newItem]);\n  };\n\n  const handleDeleteItem = (id: string) => {\n    setInfo(currentInfo => currentInfo.filter(item => item.id !== id));\n  };\n\n  const handleSave = () => {\n    const finalInfo = info.filter(item => item.key.trim() !== '' || item.value.trim() !== '');\n    onSave(finalInfo);\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-slate-900 bg-opacity-60 z-50 flex justify-center items-center p-4\" role=\"dialog\" aria-modal=\"true\" aria-labelledby=\"info-editor-title\">\n      <div className=\"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-lg flex flex-col max-h-[90vh]\">\n        <div className=\"p-6 border-b border-slate-200 dark:border-slate-700\">\n          <h2 id=\"info-editor-title\" className=\"text-xl font-bold text-slate-800 dark:text-slate-100\">Edit Additional Information</h2>\n        </div>\n\n        <div className=\"p-6 flex-grow overflow-y-auto\">\n          {info.length === 0 ? (\n            <p className=\"text-center text-slate-500 dark:text-slate-400\">No additional details yet. Add one to get started.</p>\n          ) : (\n            <ul className=\"space-y-4\">\n              {info.map((item) => (\n                <li key={item.id} className=\"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg flex items-center gap-3\">\n                  <div className=\"flex-grow space-y-2\">\n                    <input\n                      type=\"text\"\n                      value={item.key}\n                      onChange={(e) => handleInfoChange(item.id, 'key', e.target.value)}\n                      placeholder=\"Key (e.g., Store Address)\"\n                      className=\"w-full px-3 py-2 border border-slate-300 rounded-md focus:ring-teal-500 focus:border-teal-500 bg-white dark:bg-slate-700 dark:border-slate-600 text-slate-900 dark:text-slate-100\"\n                    />\n                    <textarea\n                      value={item.value}\n                      onChange={(e) => handleInfoChange(item.id, 'value', e.target.value)}\n                      placeholder=\"Value (e.g., 123 Main St)\"\n                      rows={2}\n                      className=\"w-full px-3 py-2 border border-slate-300 rounded-md focus:ring-teal-500 focus:border-teal-500 bg-white dark:bg-slate-700 dark:border-slate-600 text-slate-900 dark:text-slate-100\"\n                    />\n                  </div>\n                  <button\n                    onClick={() => handleDeleteItem(item.id)}\n                    className=\"p-2 text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-500 bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 rounded-full flex-shrink-0 self-start\"\n                    aria-label={`Delete item ${item.key}`}\n                  >\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fillRule=\"evenodd\" d=\"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z\" clipRule=\"evenodd\" /></svg>\n                  </button>\n                </li>\n              ))}\n            </ul>\n          )}\n          <div className=\"mt-6\">\n            <button\n              onClick={handleAddItem}\n              className=\"w-full flex items-center justify-center gap-2 px-4 py-2 border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700\"\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fillRule=\"evenodd\" d=\"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z\" clipRule=\"evenodd\" /></svg>\n              <span>Add Detail</span>\n            </button>\n          </div>\n        </div>\n\n        <div className=\"p-6 border-t border-slate-200 dark:border-slate-700 flex justify-end items-center\">\n          <div className=\"flex space-x-4\">\n            <button\n              onClick={onCancel}\n              className=\"px-5 py-2.5 bg-slate-100 text-slate-800 font-semibold rounded-lg hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-100 dark:hover:bg-slate-600 transition-colors\"\n            >\n              Cancel\n            </button>\n            <button\n              onClick={handleSave}\n              className=\"px-5 py-2.5 bg-teal-500 text-white font-bold rounded-lg hover:bg-teal-600 transition-colors\"\n            >\n              Done\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AdditionalInfoEditor;","\nimport React from 'react';\nimport type { RecurrenceRule } from '../types';\n\ninterface RecurrenceSelectorProps {\n  value: RecurrenceRule;\n  onChange: (rule: RecurrenceRule) => void;\n}\n\nconst FREQUENCIES: RecurrenceRule['frequency'][] = ['daily', 'weekly', 'monthly', 'yearly'];\nconst DAYS_OF_WEEK = ['S', 'M', 'T', 'W', 'T', 'F', 'S'];\n\nconst RecurrenceSelector: React.FC<RecurrenceSelectorProps> = ({ value, onChange }) => {\n  const handleFrequencyChange = (frequency: RecurrenceRule['frequency']) => {\n    const newRule: RecurrenceRule = { ...value, frequency };\n    if (!newRule.interval) newRule.interval = 1;\n    // Set sensible defaults when switching frequency\n    if (frequency === 'weekly' && newRule.dayOfWeek === undefined) newRule.dayOfWeek = new Date().getDay();\n    if (frequency === 'monthly' && newRule.dayOfMonth === undefined) newRule.dayOfMonth = new Date().getDate();\n    onChange(newRule);\n  };\n  \n  const handleIntervalChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n      const interval = Math.max(1, parseInt(e.target.value, 10) || 1);\n      onChange({ ...value, interval });\n  };\n\n  const handleDayOfWeekChange = (day: number) => {\n    onChange({ ...value, dayOfWeek: day });\n  };\n\n  const handleDayOfMonthChange = (day: number) => {\n    const dayOfMonth = Math.max(1, Math.min(31, day));\n    onChange({ ...value, dayOfMonth });\n  };\n\n  const frequencyLabel = {\n      daily: 'day(s)',\n      weekly: 'week(s)',\n      monthly: 'month(s)',\n      yearly: 'year(s)',\n  }[value.frequency];\n\n  return (\n    <div className=\"mb-6 p-4 border border-slate-200 dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/30\">\n      <h3 className=\"text-lg font-semibold mb-3 text-slate-700 dark:text-slate-200\">Recurrence</h3>\n      \n      <div className=\"space-y-4\">\n        {/* Frequency & Interval */}\n        <div>\n           <label className=\"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2\">Frequency</label>\n            <div className=\"flex items-center space-x-1 bg-slate-200 dark:bg-slate-700 p-1 rounded-lg\">\n                {FREQUENCIES.map(freq => (\n                <button\n                    key={freq}\n                    type=\"button\"\n                    onClick={() => handleFrequencyChange(freq)}\n                    className={`flex-1 px-3 py-1.5 text-sm font-semibold rounded-md transition-colors capitalize ${\n                    value.frequency === freq\n                        ? 'bg-white dark:bg-slate-800 shadow text-teal-600 dark:text-teal-400'\n                        : 'text-slate-600 dark:text-slate-300 hover:bg-white/50 dark:hover:bg-slate-800/50'\n                    }`}\n                >\n                    {freq}\n                </button>\n                ))}\n            </div>\n            <div className=\"flex items-center gap-3 mt-4\">\n                <label htmlFor=\"interval\" className=\"font-medium text-slate-600 dark:text-slate-300\">Every</label>\n                <input \n                    id=\"interval\"\n                    type=\"number\"\n                    min=\"1\"\n                    value={value.interval || 1}\n                    onChange={handleIntervalChange}\n                    className=\"w-20 px-3 py-1.5 border border-slate-300 rounded-lg focus:ring-teal-500 focus:border-teal-500 bg-white dark:bg-slate-700 dark:border-slate-600 text-slate-900 dark:text-slate-100\"\n                />\n                <span className=\"text-slate-700 dark:text-slate-200\">{frequencyLabel}</span>\n            </div>\n        </div>\n\n        {/* Weekly Options */}\n        {value.frequency === 'weekly' && (\n            <div>\n            <label className=\"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2\">On day</label>\n            <div className=\"flex justify-center gap-1\">\n                {DAYS_OF_WEEK.map((day, index) => (\n                <button\n                    key={index}\n                    type=\"button\"\n                    onClick={() => handleDayOfWeekChange(index)}\n                    className={`w-10 h-10 rounded-full text-sm font-semibold transition-colors ${\n                    value.dayOfWeek === index\n                        ? 'bg-teal-500 text-white'\n                        : 'bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 hover:bg-slate-300 dark:hover:bg-slate-500'\n                    }`}\n                >\n                    {day}\n                </button>\n                ))}\n            </div>\n            </div>\n        )}\n        \n        {/* Monthly Options */}\n        {value.frequency === 'monthly' && (\n            <div>\n            <label htmlFor=\"dayOfMonth\" className=\"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1\">On day of the month</label>\n            <input\n                id=\"dayOfMonth\"\n                type=\"number\"\n                min=\"1\"\n                max=\"31\"\n                value={value.dayOfMonth || ''}\n                onChange={(e) => handleDayOfMonthChange(parseInt(e.target.value, 10))}\n                className=\"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-teal-500 focus:border-teal-500 bg-white dark:bg-slate-700 dark:border-slate-600 text-slate-900 dark:text-slate-100\"\n            />\n            <p className=\"text-xs text-slate-500 dark:text-slate-400 mt-1\">If a month doesn't have this day (e.g., 31st), the last day of the month will be used.</p>\n            </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default RecurrenceSelector;\n","import React, { useState } from 'react';\n\ninterface SetupDisplayNameModalProps {\n  onSave: (name: string) => void;\n  currentName: string;\n}\n\nconst SetupDisplayNameModal: React.FC<SetupDisplayNameModalProps> = ({ onSave, currentName }) => {\n  const [name, setName] = useState(currentName.trim().toLowerCase() === 'myself' ? '' : currentName);\n  const [error, setError] = useState('');\n\n  const handleSave = () => {\n    const trimmedName = name.trim();\n    if (!trimmedName) {\n      setError('Display name cannot be empty.');\n      return;\n    }\n    if (trimmedName.toLowerCase() === 'myself') {\n      setError('Please choose a different name.');\n      return;\n    }\n    setError('');\n    onSave(trimmedName);\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-slate-900 bg-opacity-80 z-50 flex justify-center items-center p-4\">\n      <div className=\"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md p-8 text-center\">\n        <h2 className=\"text-2xl font-bold text-slate-800 dark:text-slate-100 mb-2\">Set Your Name</h2>\n        <p className=\"text-slate-600 dark:text-slate-300 mb-6\">\n          Your name is required before creating a bill. This is how others will see you when you share bills, so please use your real name.\n        </p>\n        <div className=\"mb-4 text-left\">\n          <label htmlFor=\"displayNameSetup\" className=\"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1\">\n            Your Name\n          </label>\n          <input\n            id=\"displayNameSetup\"\n            type=\"text\"\n            value={name}\n            onChange={(e) => setName(e.target.value)}\n            onKeyDown={(e) => e.key === 'Enter' && handleSave()}\n            placeholder=\"e.g., Jane Doe\"\n            className=\"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-teal-500 focus:border-teal-500 bg-white dark:bg-slate-700 dark:border-slate-600 text-slate-900 dark:text-slate-100\"\n            autoFocus\n          />\n          {error && <p className=\"text-sm text-red-500 mt-1\">{error}</p>}\n        </div>\n        <button\n          onClick={handleSave}\n          disabled={!name.trim() || name.trim().toLowerCase() === 'myself'}\n          className=\"w-full px-6 py-3 bg-teal-500 text-white font-bold rounded-lg hover:bg-teal-600 disabled:bg-slate-400 dark:disabled:bg-slate-600 disabled:cursor-not-allowed transition-colors\"\n        >\n          Save and Continue\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default SetupDisplayNameModal;","import React from 'react';\nimport type { SplitMode } from '../types';\n\ninterface BillPrimaryDetailsProps {\n  description: string;\n  setDescription: (value: string) => void;\n  totalAmount: number | undefined;\n  setTotalAmount: (value: number | undefined) => void;\n  date: string;\n  setDate: (value: string) => void;\n  isRecurring: boolean;\n  splitMode: SplitMode;\n  errors: { [key: string]: string };\n}\n\nconst BillPrimaryDetails: React.FC<BillPrimaryDetailsProps> = ({\n  description,\n  setDescription,\n  totalAmount,\n  setTotalAmount,\n  date,\n  setDate,\n  isRecurring,\n  splitMode,\n  errors,\n}) => {\n  return (\n    <>\n      <div>\n        <label htmlFor=\"description\" className=\"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1\">Description</label>\n        <input id=\"description\" type=\"text\" value={description} onChange={e => setDescription(e.target.value)} className=\"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-teal-500 focus:border-teal-500 bg-white dark:bg-slate-700 dark:border-slate-600 text-slate-900 dark:text-slate-100\" />\n        {errors.description && <p className=\"text-sm text-red-500 mt-1\">{errors.description}</p>}\n      </div>\n\n      <div className=\"flex flex-col sm:flex-row gap-4\">\n        <div className={`flex-1 ${isRecurring ? 'w-full' : 'sm:w-1/2'}`}>\n            <label htmlFor=\"totalAmount\" className=\"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1\">Total Amount {isRecurring && '(Optional)'}</label>\n            <div className=\"relative\">\n                <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-500\">$</span>\n                <input id=\"totalAmount\" type=\"number\" step=\"0.01\" value={totalAmount === undefined ? '' : totalAmount} onChange={e => setTotalAmount(e.target.value === '' ? undefined : parseFloat(e.target.value))} disabled={splitMode === 'item'} className=\"w-full pl-7 pr-2 py-2 border border-slate-300 rounded-lg focus:ring-teal-500 focus:border-teal-500 bg-white dark:bg-slate-700 dark:border-slate-600 text-slate-900 dark:text-slate-100 disabled:bg-slate-100 dark:disabled:bg-slate-600\" />\n            </div>\n             {errors.totalAmount && <p className=\"text-sm text-red-500 mt-1\">{errors.totalAmount}</p>}\n        </div>\n        {!isRecurring && (\n            <div className=\"flex-1 sm:w-1/2\">\n                <label htmlFor=\"date\" className=\"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1\">Date</label>\n                <input id=\"date\" type=\"date\" value={date} onChange={e => setDate(e.target.value)} className=\"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-teal-500 focus:border-teal-500 bg-white dark:bg-slate-700 dark:border-slate-600 text-slate-900 dark:text-slate-100\" />\n            </div>\n        )}\n      </div>\n    </>\n  );\n};\n\nexport default BillPrimaryDetails;","import React from 'react';\nimport type { SplitMode } from '../types';\n\ninterface BillSplitMethodProps {\n  splitMode: SplitMode;\n  setSplitMode: (mode: SplitMode) => void;\n  splitError?: string;\n}\n\nconst BillSplitMethod: React.FC<BillSplitMethodProps> = ({ splitMode, setSplitMode, splitError }) => {\n  return (\n    <div>\n      <h3 className=\"text-lg font-semibold mb-3 text-slate-700 dark:text-slate-200\">Split Method</h3>\n      <div className=\"flex items-center space-x-1 bg-slate-200 dark:bg-slate-700 p-1 rounded-lg\">\n          <button type=\"button\" onClick={() => setSplitMode('equally')} className={`flex-1 px-3 py-1.5 text-sm font-semibold rounded-md transition-colors ${splitMode === 'equally' ? 'bg-white dark:bg-slate-800 shadow text-teal-600 dark:text-teal-400' : 'text-slate-600 dark:text-slate-300'}`}>Equally</button>\n          <button type=\"button\" onClick={() => setSplitMode('amount')} className={`flex-1 px-3 py-1.5 text-sm font-semibold rounded-md transition-colors ${splitMode === 'amount' ? 'bg-white dark:bg-slate-800 shadow text-teal-600 dark:text-teal-400' : 'text-slate-600 dark:text-slate-300'}`}>By Amount</button>\n          <button type=\"button\" onClick={() => setSplitMode('percentage')} className={`flex-1 px-3 py-1.5 text-sm font-semibold rounded-md transition-colors ${splitMode === 'percentage' ? 'bg-white dark:bg-slate-800 shadow text-teal-600 dark:text-teal-400' : 'text-slate-600 dark:text-slate-300'}`}>By %</button>\n          <button type=\"button\" onClick={() => setSplitMode('item')} className={`flex-1 px-3 py-1.5 text-sm font-semibold rounded-md transition-colors ${splitMode === 'item' ? 'bg-white dark:bg-slate-800 shadow text-teal-600 dark:text-teal-400' : 'text-slate-600 dark:text-slate-300'}`}>By Item</button>\n      </div>\n      {splitError && <p className=\"text-sm text-red-500 mt-2\">{splitError}</p>}\n    </div>\n  );\n};\n\nexport default BillSplitMethod;","import React, { useState, useEffect } from 'react';\nimport type { Participant, SplitMode } from '../types';\n\ninterface BillParticipantsProps {\n  participants: Participant[];\n  setParticipants: (participants: Participant[]) => void;\n  splitMode: SplitMode;\n  participantsError?: string;\n}\n\nconst BillParticipants: React.FC<BillParticipantsProps> = ({ participants, setParticipants, splitMode, participantsError }) => {\n  const [isContactsApiSupported, setIsContactsApiSupported] = useState(false);\n\n  useEffect(() => {\n    if ('contacts' in navigator && 'select' in (navigator as any).contacts) {\n      setIsContactsApiSupported(true);\n    }\n  }, []);\n  \n  const handleAddParticipant = () => {\n    setParticipants([...participants, { id: `p-${Date.now()}`, name: '', amountOwed: 0, paid: false, splitValue: 0 }]);\n  };\n\n  const handleRemoveParticipant = (id: string) => {\n    if (participants.length > 1) {\n        setParticipants(participants.filter(p => p.id !== id));\n    }\n  };\n  \n  const handleParticipantChange = (id: string, field: 'name' | 'splitValue', value: string) => {\n    const newParticipants = participants.map(p => {\n        if (p.id === id) {\n            if (field === 'name') {\n                return { ...p, name: value };\n            }\n            const numericValue = parseFloat(value) || 0;\n            return { ...p, splitValue: numericValue };\n        }\n        return p;\n    });\n    setParticipants(newParticipants);\n  };\n  \n  const handleAddFromContacts = async () => {\n    try {\n      const contacts = await (navigator as any).contacts.select(['name', 'email', 'tel'], { multiple: true });\n      if (contacts.length === 0) return;\n\n      const existingNamesLower = new Set(participants.map(p => p.name.toLowerCase().trim()));\n      \n      const newParticipantsFromContacts: Participant[] = contacts\n        .map((contact: { name: string[], email: string[], tel: string[] }) => {\n          const name = contact.name && contact.name.length > 0 ? contact.name[0] : null;\n          const email = contact.email && contact.email.length > 0 ? contact.email[0] : null;\n          const phone = contact.tel && contact.tel.length > 0 ? contact.tel[0] : null;\n\n          if (name && name.trim() && !existingNamesLower.has(name.toLowerCase().trim())) {\n            existingNamesLower.add(name.toLowerCase().trim()); // Prevent adding duplicates from the same selection\n            return {\n              id: `p-${Date.now()}-${Math.random()}`,\n              name: name.trim(),\n              amountOwed: 0,\n              paid: false,\n              splitValue: 0,\n              email: email || undefined,\n              phone: phone || undefined,\n            };\n          }\n          return null;\n        })\n        .filter((p: Participant | null): p is Participant => p !== null);\n\n      if (newParticipantsFromContacts.length === 0) return;\n\n      // If there's an empty participant slot, fill it with the first new contact\n      const firstEmptyIndex = participants.findIndex(p => p.name.trim() === '');\n      if (firstEmptyIndex > -1) {\n          const updatedParticipants = [...participants];\n          const firstNew = newParticipantsFromContacts.shift();\n          if (firstNew) {\n              updatedParticipants[firstEmptyIndex] = firstNew;\n          }\n          setParticipants([...updatedParticipants, ...newParticipantsFromContacts]);\n      } else {\n          setParticipants([...participants, ...newParticipantsFromContacts]);\n      }\n    } catch (ex) {\n      console.error('Error fetching contacts:', ex);\n    }\n  };\n  \n  return (\n    <div>\n      <h3 className=\"text-lg font-semibold mb-3 text-slate-700 dark:text-slate-200\">Participants</h3>\n      <div className=\"space-y-3\">\n          {participants.map((p, index) => (\n              <div key={p.id} className=\"flex items-center gap-2\">\n                  <input type=\"text\" value={p.name} onChange={e => handleParticipantChange(p.id, 'name', e.target.value)} placeholder={`Participant ${index + 1}`} className=\"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-teal-500 focus:border-teal-500 bg-white dark:bg-slate-700 dark:border-slate-600 text-slate-900 dark:text-slate-100\" />\n                  {(splitMode === 'amount' || splitMode === 'percentage') && (\n                      <div className=\"relative w-32\">\n                          <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-500\">{splitMode === 'amount' ? '$' : '%'}</span>\n                          <input type=\"number\" step=\"0.01\" value={p.splitValue || ''} onChange={e => handleParticipantChange(p.id, 'splitValue', e.target.value)} className=\"w-full pl-7 pr-2 py-2 border border-slate-300 rounded-lg focus:ring-teal-500 focus:border-teal-500 bg-white dark:bg-slate-700 dark:border-slate-600 text-slate-900 dark:text-slate-100\" />\n                      </div>\n                  )}\n                  <button onClick={() => handleRemoveParticipant(p.id)} disabled={participants.length <= 1} className=\"p-2 text-red-500 hover:bg-red-100 dark:hover:bg-red-900/50 rounded-full disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-transparent\" aria-label={`Remove participant ${p.name || `Participant ${index + 1}`}`}>\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 000 2h6a1 1 0 100-2H7z\" clipRule=\"evenodd\" /></svg>\n                  </button>\n              </div>\n          ))}\n          <div className=\"mt-3 flex flex-col sm:flex-row gap-3\">\n              <button type=\"button\" onClick={handleAddParticipant} className=\"w-full sm:flex-1 flex items-center justify-center gap-2 px-4 py-2 border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors\">\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"http://www.w3.org/2000/svg\" fill=\"currentColor\"><path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z\" clipRule=\"evenodd\" /></svg>\n                  <span>Add Manually</span>\n              </button>\n              {isContactsApiSupported && (\n                  <button type=\"button\" onClick={handleAddFromContacts} className=\"w-full sm:flex-1 flex items-center justify-center gap-2 px-4 py-2 border-2 border-dashed border-teal-500/50 dark:border-teal-400/50 rounded-lg text-teal-600 dark:text-teal-300 hover:bg-teal-50 dark:hover:bg-teal-900/40 bg-teal-50/50 dark:bg-teal-900/20 transition-colors\">\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"http://www.w3.org/2000/svg\" fill=\"currentColor\">\n                        <path d=\"M8 9a3 3 0 100-6 3 3 0 000 6z\" />\n                        <path fillRule=\"evenodd\" d=\"M1.5 14.5a3 3 0 013-3h7a3 3 0 013 3v1a2 2 0 01-2 2H3.5a2 2 0 01-2-2v-1zM5 14a1 1 0 00-1 1v1a1 1 0 001 1h7a1 1 0 001-1v-1a1 1 0 00-1-1H5z\" clipRule=\"evenodd\" />\n                      </svg>\n                      <span>Add from Contacts</span>\n                  </button>\n              )}\n          </div>\n          {participantsError && <p className=\"text-sm text-red-500\">{participantsError}</p>}\n      </div>\n    </div>\n  );\n};\n\nexport default BillParticipants;","import React, { useState, useCallback, useRef, useEffect } from 'react';\nimport type { ReceiptItem } from '../types';\n\nconst MAX_DIMENSION = 1280;\nconst JPEG_QUALITY = 0.8;\n\n// Helper to resize and compress an image file\nconst resizeImage = (file: File): Promise<{ dataUrl: string; file: File }> => {\n    return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onload = (event) => {\n            if (!event.target?.result) return reject(new Error(\"FileReader failed to load file.\"));\n\n            const img = new Image();\n            img.onload = () => {\n                let { width, height } = img;\n                if (width > height) {\n                    if (width > MAX_DIMENSION) {\n                        height *= MAX_DIMENSION / width;\n                        width = MAX_DIMENSION;\n                    }\n                } else {\n                    if (height > MAX_DIMENSION) {\n                        width *= MAX_DIMENSION / height;\n                        height = MAX_DIMENSION;\n                    }\n                }\n\n                const canvas = document.createElement('canvas');\n                canvas.width = width;\n                canvas.height = height;\n                const ctx = canvas.getContext('2d');\n                if (!ctx) return reject(new Error('Could not get canvas context'));\n\n                ctx.drawImage(img, 0, 0, width, height);\n                \n                const dataUrl = canvas.toDataURL('image/jpeg', JPEG_QUALITY);\n                \n                canvas.toBlob(\n                    (blob) => {\n                        if (!blob) return reject(new Error('Canvas to Blob conversion failed'));\n                        \n                        const newFileName = file.name.replace(/\\.[^/.]+$/, \"\") + \".jpg\";\n\n                        const resizedFile = new File([blob], newFileName, {\n                            type: 'image/jpeg',\n                            lastModified: Date.now(),\n                        });\n                        resolve({ dataUrl, file: resizedFile });\n                    },\n                    'image/jpeg',\n                    JPEG_QUALITY\n                );\n            };\n            img.onerror = (err) => reject(new Error(`Image load error: ${err}`));\n            img.src = event.target.result as string;\n        };\n        reader.onerror = (err) => reject(new Error(`File read error: ${err}`));\n        reader.readAsDataURL(file);\n    });\n};\n\n// --- Image Attachment Component ---\ninterface ImageAttachmentProps {\n    receiptImage?: string;\n    onReceiptImageChange: (dataUrl: string | undefined) => void;\n}\nconst ImageAttachment: React.FC<ImageAttachmentProps> = ({ receiptImage, onReceiptImageChange }) => {\n    const [isProcessing, setIsProcessing] = useState(false);\n    const [error, setError] = useState<string | null>(null);\n    const [isCameraOpen, setIsCameraOpen] = useState(false);\n    const videoRef = useRef<HTMLVideoElement>(null);\n    const streamRef = useRef<MediaStream | null>(null);\n\n    useEffect(() => {\n        if (!isCameraOpen) {\n          if (streamRef.current) {\n            streamRef.current.getTracks().forEach(track => track.stop());\n            streamRef.current = null;\n          }\n          return;\n        }\n    \n        const startCamera = async () => {\n          setError(null);\n          try {\n            if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\n              throw new Error(\"Camera access is not supported by your browser.\");\n            }\n            const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' } });\n            streamRef.current = stream;\n            if (videoRef.current) videoRef.current.srcObject = stream;\n          } catch (err: any) {\n            setError(err.message || \"Could not access camera.\");\n            setIsCameraOpen(false);\n          }\n        };\n    \n        startCamera();\n        return () => { if (streamRef.current) streamRef.current.getTracks().forEach(track => track.stop()); };\n      }, [isCameraOpen]);\n    \n    const handleFileChange = async (event: React.ChangeEvent<HTMLInputElement>) => {\n        const file = event.target.files?.[0];\n        if (file) {\n          setIsProcessing(true);\n          setError(null);\n          try {\n            const { dataUrl } = await resizeImage(file);\n            onReceiptImageChange(dataUrl);\n          } catch (err) {\n            setError(\"Failed to process image.\");\n          } finally {\n            setIsProcessing(false);\n          }\n        }\n    };\n\n    const handleCapture = useCallback(() => {\n        if (!videoRef.current) return;\n        const canvas = document.createElement('canvas');\n        canvas.width = videoRef.current.videoWidth;\n        canvas.height = videoRef.current.videoHeight;\n        const context = canvas.getContext('2d');\n        if (context) {\n            context.drawImage(videoRef.current, 0, 0, canvas.width, canvas.height);\n            setIsCameraOpen(false);\n            const dataUrl = canvas.toDataURL('image/jpeg', JPEG_QUALITY);\n            onReceiptImageChange(dataUrl);\n        }\n      }, [onReceiptImageChange]);\n\n    return (\n        <div className=\"flex-1 p-4 border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-lg text-center hover:border-teal-500 dark:hover:border-teal-400 transition-colors duration-200\">\n            {isCameraOpen && (\n                <div className=\"fixed inset-0 bg-black z-50 flex flex-col items-center justify-center\">\n                    <video ref={videoRef} autoPlay playsInline className=\"w-full h-full object-cover\" />\n                    <div className=\"absolute bottom-0 left-0 right-0 p-4 bg-black bg-opacity-50 flex justify-around items-center\">\n                        <button type=\"button\" onClick={() => setIsCameraOpen(false)} className=\"px-6 py-3 bg-gray-600/70 text-white font-semibold rounded-lg text-lg\">Cancel</button>\n                        <button type=\"button\" onClick={handleCapture} className=\"w-20 h-20 bg-white rounded-full border-4 border-gray-400\"></button>\n                    </div>\n                </div>\n            )}\n            \n            <h4 className=\"font-semibold text-slate-700 dark:text-slate-200\">Receipt Image</h4>\n\n            {receiptImage ? (\n                <div className=\"mt-2 relative inline-block\">\n                    <img src={receiptImage} alt=\"Receipt preview\" className=\"max-h-24 mx-auto rounded-md shadow-sm\" />\n                    <button type=\"button\" onClick={() => onReceiptImageChange(undefined)} className=\"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 shadow-lg hover:bg-red-600\"><svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth=\"3\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M6 18L18 6M6 6l12 12\" /></svg></button>\n                </div>\n            ) : isProcessing ? (\n                 <p className=\"text-sm text-slate-500 dark:text-slate-400 mt-2\">Processing...</p>\n            ) : (\n                <div className=\"mt-2 space-y-2\">\n                     <p className=\"text-sm text-slate-500 dark:text-slate-400\">(Optional)</p>\n                     <div className=\"flex justify-center gap-2\">\n                        <input type=\"file\" id=\"image-upload\" className=\"hidden\" accept=\"image/*\" onChange={handleFileChange} />\n                        <label htmlFor=\"image-upload\" className=\"cursor-pointer text-xs font-semibold px-3 py-1.5 border border-slate-300 dark:border-slate-600 rounded-md hover:bg-slate-50 dark:hover:bg-slate-700\">Choose</label>\n                        <button type=\"button\" onClick={() => setIsCameraOpen(true)} className=\"cursor-pointer text-xs font-semibold px-3 py-1.5 border border-slate-300 dark:border-slate-600 rounded-md hover:bg-slate-50 dark:hover:bg-slate-700\">Camera</button>\n                     </div>\n                </div>\n            )}\n            {error && <p className=\"text-xs text-red-500 mt-1\">{error}</p>}\n        </div>\n    );\n};\n\n\ninterface BillExtraDetailsProps {\n  items: ReceiptItem[];\n  additionalInfo: { id: string, key: string, value: string }[];\n  onEditItems: () => void;\n  onEditInfo: () => void;\n  isRecurring: boolean;\n  receiptImage?: string;\n  onReceiptImageChange: (dataUrl: string | undefined) => void;\n}\n\nconst BillExtraDetails: React.FC<BillExtraDetailsProps> = ({ items, additionalInfo, onEditItems, onEditInfo, isRecurring, receiptImage, onReceiptImageChange }) => {\n  return (\n    <div className=\"space-y-4\">\n        <div className=\"flex flex-col sm:flex-row gap-4\">\n            <button\n                type=\"button\"\n                onClick={onEditItems}\n                className=\"flex-1 p-4 border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-lg text-center cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700/50 hover:border-teal-500 dark:hover:border-teal-400 transition-all duration-200\"\n            >\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-8 w-8 mx-auto text-slate-500 dark:text-slate-400 mb-2\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={1.5}>\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                </svg>\n                <h4 className=\"font-semibold text-slate-700 dark:text-slate-200\">{isRecurring ? 'Default Items' : 'Itemization'}</h4>\n                <p className=\"text-sm text-slate-500 dark:text-slate-400\">({items.length} items)</p>\n            </button>\n\n            <button\n                type=\"button\"\n                onClick={onEditInfo}\n                className=\"flex-1 p-4 border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-lg text-center cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700/50 hover:border-teal-500 dark:hover:border-teal-400 transition-all duration-200\"\n            >\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-8 w-8 mx-auto text-slate-500 dark:text-slate-400 mb-2\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={1.5}>\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                </svg>\n                <h4 className=\"font-semibold text-slate-700 dark:text-slate-200\">Additional Details</h4>\n                <p className=\"text-sm text-slate-500 dark:text-slate-400\">({additionalInfo.length} details)</p>\n            </button>\n        </div>\n         <div className=\"flex flex-col sm:flex-row gap-4\">\n             <ImageAttachment receiptImage={receiptImage} onReceiptImageChange={onReceiptImageChange} />\n        </div>\n    </div>\n  );\n};\n\nexport default BillExtraDetails;","import React, { useState, useMemo, useCallback } from 'react';\nimport type { Group } from '../../types';\nimport { useIntersectionObserver } from '../../hooks/useIntersectionObserver';\n\nconst GROUPS_PER_PAGE = 5;\n\ninterface SelectGroupModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    groups: Group[];\n    onSelect: (groupId: string) => void;\n}\n\nconst SelectGroupModal: React.FC<SelectGroupModalProps> = ({ isOpen, onClose, groups, onSelect }) => {\n    const [searchQuery, setSearchQuery] = useState('');\n    const [visibleCount, setVisibleCount] = useState(GROUPS_PER_PAGE);\n\n    const sortedAndFilteredGroups = useMemo(() => {\n        const lowercasedQuery = searchQuery.toLowerCase();\n        return [...groups]\n            .sort((a, b) => (b.popularity ?? 0) - (a.popularity ?? 0) || a.name.localeCompare(b.name))\n            .filter(group => group.name.toLowerCase().includes(lowercasedQuery));\n    }, [groups, searchQuery]);\n\n    const visibleGroups = useMemo(() => {\n        return sortedAndFilteredGroups.slice(0, visibleCount);\n    }, [sortedAndFilteredGroups, visibleCount]);\n\n    const hasMore = visibleCount < sortedAndFilteredGroups.length;\n\n    const loadMore = useCallback(() => {\n        if (hasMore) {\n            setVisibleCount(prev => prev + GROUPS_PER_PAGE);\n        }\n    }, [hasMore]);\n\n    const { ref: loadMoreRef } = useIntersectionObserver<HTMLLIElement>({ onIntersect: loadMore });\n\n    if (!isOpen) return null;\n\n    return (\n        <div \n            className=\"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4 backdrop-blur-sm\"\n            onClick={onClose}\n            role=\"dialog\"\n            aria-modal=\"true\"\n            aria-labelledby=\"select-group-title\"\n        >\n            <div \n                className=\"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-lg flex flex-col max-h-[80vh]\"\n                onClick={e => e.stopPropagation()}\n            >\n                <div className=\"p-4 border-b border-slate-200 dark:border-slate-700 flex-shrink-0\">\n                    <h2 id=\"select-group-title\" className=\"sr-only\">Select a Group</h2>\n                    <input \n                        type=\"text\"\n                        placeholder=\"Search groups...\"\n                        value={searchQuery}\n                        onChange={e => setSearchQuery(e.target.value)}\n                        className=\"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-teal-500 focus:border-teal-500 bg-white dark:bg-slate-700 dark:border-slate-600 text-slate-900 dark:text-slate-100\"\n                        autoFocus\n                    />\n                </div>\n                <ul className=\"flex-grow overflow-y-auto p-4 space-y-2\">\n                    {visibleGroups.map((group, index) => {\n                        const isLastElement = index === visibleGroups.length - 1;\n                        return (\n                            <li key={group.id} ref={isLastElement && hasMore ? loadMoreRef : null}>\n                                <button \n                                    onClick={() => onSelect(group.id)}\n                                    className=\"w-full text-left p-4 border-2 border-slate-200 dark:border-slate-700 rounded-lg hover:border-teal-500 dark:hover:border-teal-400 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors\"\n                                >\n                                    <p className=\"font-bold text-lg text-slate-800 dark:text-slate-100\">{group.name}</p>\n                                    <p className=\"text-sm text-slate-500 dark:text-slate-400\">{group.participants.length} members</p>\n                                </button>\n                            </li>\n                        );\n                    })}\n                    {hasMore && (\n                        <li className=\"text-center p-4 text-slate-500 dark:text-slate-400\">Loading more...</li>\n                    )}\n                     {!sortedAndFilteredGroups.length && (\n                        <li className=\"text-center p-8 text-slate-500 dark:text-slate-400\">\n                            {searchQuery ? 'No groups match your search.' : 'No groups found.'}\n                        </li>\n                    )}\n                </ul>\n            </div>\n        </div>\n    );\n};\n\nexport default SelectGroupModal;","import React, { useState, useEffect, useMemo, useCallback } from 'react';\nimport type { Bill, Participant, ReceiptItem, SplitMode, Settings, RecurringBill, RecurrenceRule, Group, Category } from '../types';\nimport ReceiptScanner from './ReceiptScanner';\nimport ItemEditor from './ItemEditor';\nimport AdditionalInfoEditor from './AdditionalInfoEditor';\nimport RecurrenceSelector from './RecurrenceSelector';\nimport SetupDisplayNameModal from './SetupDisplayNameModal';\nimport { useAppControl } from '../contexts/AppControlContext';\nimport { matchAndAssignItems } from '../services/geminiService';\nimport BillPrimaryDetails from './BillPrimaryDetails';\nimport BillSplitMethod from './BillSplitMethod';\nimport BillParticipants from './BillParticipants';\nimport BillExtraDetails from './BillExtraDetails';\nimport SelectGroupModal from './modals/SelectGroupModal';\n\nconst getTodayDateString = () => new Date().toISOString().split('T')[0];\n\nconst getStepFromHash = () => {\n    const params = new URLSearchParams(window.location.hash.split('?')[1] || '');\n    const stepParam = params.get('step');\n    if (stepParam === '1.5') return 1.5;\n    return parseFloat(stepParam || '0');\n};\n\ninterface CreateBillProps {\n  onSaveBill: (bill: Omit<Bill, 'id' | 'status'>, fromTemplateId?: string) => void;\n  onSaveRecurringBill: (bill: Omit<RecurringBill, 'id' | 'status' | 'nextDueDate'>) => void;\n  onUpdateRecurringBill: (bill: RecurringBill) => void;\n  onBack: () => void;\n  settings: Settings;\n  updateSettings: (newSettings: Partial<Settings>) => Promise<void>;\n  recurringBillToEdit?: RecurringBill;\n  fromTemplate?: RecurringBill;\n  billConversionSource?: Bill;\n  groups: Group[];\n  categories: Category[];\n}\n\nconst CreateBill: React.FC<CreateBillProps> = ({\n  onSaveBill, onSaveRecurringBill, onUpdateRecurringBill, onBack,\n  settings, updateSettings, recurringBillToEdit, fromTemplate, billConversionSource, groups, categories\n}) => {\n  const initialState = recurringBillToEdit || fromTemplate || billConversionSource;\n  const isEditingTemplate = !!recurringBillToEdit;\n  const isFromTemplate = !!fromTemplate;\n  const isConverting = !!billConversionSource;\n  const isRecurring = isEditingTemplate || isConverting;\n\n  const [step, setStepState] = useState(isEditingTemplate || isConverting ? 2 : (groups.length > 0 ? 0 : 1));\n  const [isProcessingAI, setIsProcessingAI] = useState(false);\n  const { showNotification } = useAppControl();\n  \n  const [selectedGroupId, setSelectedGroupId] = useState<string | null>(null);\n  const [isSelectGroupModalOpen, setIsSelectGroupModalOpen] = useState(false);\n\n  const setStep = (newStep: number | string) => {\n    setStepState(parseFloat(String(newStep)));\n    const params = new URLSearchParams(window.location.hash.split('?')[1] || '');\n    const baseHash = window.location.hash.split('?')[0];\n    if (newStep === 1 || newStep === 0) params.delete('step');\n    else params.set('step', String(newStep));\n    const newQuery = params.toString();\n    window.history.replaceState(null, '', newQuery ? `${baseHash}?${newQuery}` : baseHash);\n  };\n\n  useEffect(() => {\n    const handleHashChange = () => {\n        const stepFromHash = getStepFromHash();\n        if (step !== stepFromHash) setStepState(stepFromHash);\n    };\n    window.addEventListener('hashchange', handleHashChange);\n    return () => window.removeEventListener('hashchange', handleHashChange);\n  }, [step]);\n\n  const [description, setDescription] = useState(initialState?.description || '');\n  const [totalAmount, setTotalAmount] = useState<number | undefined>(initialState?.totalAmount);\n  const [date, setDate] = useState(billConversionSource?.date ? billConversionSource.date.split('T')[0] : getTodayDateString());\n  const [participants, setParticipants] = useState<Participant[]>(initialState?.participants || [{ id: 'p1', name: settings.myDisplayName, amountOwed: 0, paid: true, splitValue: 0 }]);\n  const [splitMode, setSplitMode] = useState<SplitMode>( (initialState as RecurringBill)?.splitMode || (initialState?.items && initialState.items.length > 0 ? 'item' : 'equally'));\n  const [items, setItems] = useState<ReceiptItem[]>(initialState?.items || []);\n  const [receiptImage, setReceiptImage] = useState<string | undefined>(initialState?.receiptImage);\n  const [additionalInfo, setAdditionalInfo] = useState<{ id: string, key: string, value: string }[]>(\n    initialState?.additionalInfo ? Object.entries(initialState.additionalInfo).map(([key, value], i) => ({ id: `info-${i}`, key, value })) : []\n  );\n  const [categoryId, setCategoryId] = useState<string | undefined>(initialState?.categoryId);\n  \n  const [recurrenceRule, setRecurrenceRule] = useState<RecurrenceRule>(\n    (initialState as RecurringBill)?.recurrenceRule || { frequency: 'monthly', interval: 1, dayOfMonth: new Date().getDate() }\n  );\n\n  const [errors, setErrors] = useState<{ [key: string]: string }>({});\n  \n  const [isItemEditorOpen, setIsItemEditorOpen] = useState(false);\n  const [isInfoEditorOpen, setIsInfoEditorOpen] = useState(false);\n  const [isSetupModalOpen, setIsSetupModalOpen] = useState(false);\n\n  useEffect(() => {\n    const activeParticipants = participants.filter(p => p.name.trim() !== '');\n    if (activeParticipants.length === 0) return;\n    let newParticipants = [...participants];\n    switch (splitMode) {\n      case 'equally': {\n        const amount = (totalAmount || 0) / activeParticipants.length;\n        newParticipants = participants.map(p => ({ ...p, amountOwed: p.name.trim() ? parseFloat(amount.toFixed(2)) : 0 }));\n        break;\n      }\n      case 'amount':\n        newParticipants = participants.map(p => ({ ...p, amountOwed: p.splitValue || 0 }));\n        break;\n      case 'percentage': {\n        const totalPercentage = participants.reduce((sum, p) => sum + (p.splitValue || 0), 0);\n        newParticipants = participants.map(p => ({ ...p, amountOwed: totalPercentage > 0 ? parseFloat(((totalAmount || 0) * ((p.splitValue || 0) / totalPercentage)).toFixed(2)) : 0 }));\n        break;\n      }\n      case 'item': {\n        newParticipants = participants.map(p => {\n          let total = items.reduce((sum, item) => sum + (item.assignedTo.includes(p.id) ? (item.price / (item.assignedTo.length || 1)) : 0), 0);\n          return { ...p, amountOwed: parseFloat(total.toFixed(2)) };\n        });\n        break;\n      }\n    }\n    if (splitMode !== 'item') {\n        const totalOwed = newParticipants.reduce((sum, p) => sum + p.amountOwed, 0);\n        const diff = (totalAmount || 0) - totalOwed;\n        if (Math.abs(diff) > 0.001 && newParticipants.length > 0) {\n            const firstActive = newParticipants.findIndex(p => p.name.trim());\n            if (firstActive !== -1) newParticipants[firstActive].amountOwed = parseFloat((newParticipants[firstActive].amountOwed + diff).toFixed(2));\n        }\n    }\n    if (JSON.stringify(newParticipants) !== JSON.stringify(participants)) setParticipants(newParticipants);\n  }, [totalAmount, splitMode, items, participants]);\n\n  useEffect(() => {\n    if (isFromTemplate && fromTemplate) setParticipants(fromTemplate.participants.map(p => ({ ...p, paid: false })));\n  }, [isFromTemplate, fromTemplate]);\n\n  useEffect(() => {\n    if (!settings.myDisplayName || settings.myDisplayName.trim().toLowerCase() === 'myself') setIsSetupModalOpen(true);\n    else setIsSetupModalOpen(false);\n  }, [settings.myDisplayName]);\n\n  const handleSaveDisplayName = async (name: string) => {\n    const oldName = settings.myDisplayName.trim().toLowerCase();\n    await updateSettings({ myDisplayName: name });\n    setParticipants(prev => prev.map(p => p.name.trim().toLowerCase() === oldName ? { ...p, name } : p));\n  };\n  \n  const validateAndSave = () => {\n    if (splitMode === 'item' && items.some(item => item.assignedTo.length === 0)) {\n        showNotification('Please assign all items to a participant before saving.', 'error');\n        setIsItemEditorOpen(true);\n        return;\n    }\n    if (!validateStep(4)) return;\n    const finalParticipants = participants.map(p => ({...p, name: p.name.trim()}));\n    const additionalInfoRecord = additionalInfo.reduce((acc, item) => {\n        if (item.key.trim()) acc[item.key.trim()] = item.value;\n        return acc;\n    }, {} as Record<string, string>);\n    if (isRecurring) {\n        const recurringData = { description, totalAmount: totalAmount || 0, participants: finalParticipants, items, receiptImage, additionalInfo: additionalInfoRecord, splitMode, recurrenceRule, groupId: selectedGroupId || undefined, categoryId };\n        if (isEditingTemplate && recurringBillToEdit) {\n            onUpdateRecurringBill({ ...recurringBillToEdit, ...recurringData });\n        } else {\n            onSaveRecurringBill(recurringData);\n        }\n    } else {\n        const data = { description, totalAmount: totalAmount || 0, date, participants: finalParticipants, items, receiptImage, additionalInfo: additionalInfoRecord, groupId: selectedGroupId || undefined, categoryId };\n        onSaveBill(data, fromTemplate?.id);\n    }\n    onBack();\n  };\n\n  const handleItemsScanned = async (data: any) => {\n    setDescription(data.description || '');\n    if (data.date && !isRecurring) setDate(data.date);\n    if (data.additionalInfo) setAdditionalInfo(data.additionalInfo.map((info: any, i: number) => ({ id: `info-scan-${i}`, ...info })));\n    const scannedItems: { name: string; price: number }[] = data.items.map((item: any) => ({ name: item.name, price: item.price }));\n    setTotalAmount(scannedItems.reduce((sum, item) => sum + (item.price || 0), 0));\n    const newItems = (items: { name: string; price: number }[], assignments: string[]): ReceiptItem[] => items.map((item, i) => ({ ...item, id: `item-scan-${i}`, assignedTo: assignments }));\n    \n    if (isFromTemplate && fromTemplate) {\n        if (fromTemplate.splitMode !== 'item') {\n            setItems(newItems(scannedItems, []));\n            setSplitMode(fromTemplate.splitMode);\n        } else {\n            setIsProcessingAI(true);\n            try {\n                const assigned = await matchAndAssignItems({ templateItems: fromTemplate.items || [], scannedItems, participants });\n                setItems(assigned);\n                setSplitMode('item');\n            } catch (e: any) {\n                showNotification(`AI item matching failed: ${e.message}. Assign manually.`, 'error');\n                setItems(newItems(scannedItems, []));\n                setSplitMode('item');\n            } finally { setIsProcessingAI(false); }\n        }\n    } else {\n        const self = participants.find(p => p.name.toLowerCase().trim() === settings.myDisplayName.toLowerCase().trim());\n        const assignTo = selectedGroupId ? [] : (self ? [self.id] : []);\n        setItems(newItems(scannedItems, assignTo));\n        setSplitMode('item');\n    }\n    setStep(2);\n  };\n\n  const totalFromItems = useMemo(() => items.reduce((sum, item) => sum + (item.price || 0), 0), [items]);\n  useEffect(() => { if (splitMode === 'item') setTotalAmount(totalFromItems); }, [items, splitMode, totalFromItems]);\n\n  const validateStep = (currentStep: number) => {\n    const newErrors: { [key: string]: string } = {};\n    if (currentStep >= 2) {\n      if (!description.trim()) newErrors.description = \"Description is required.\";\n      if (!isRecurring && (!totalAmount || totalAmount <= 0) && splitMode !== 'item') newErrors.totalAmount = \"Total amount must be greater than zero.\";\n    }\n    if (currentStep >= 3) {\n      if (participants.some(p => !p.name.trim())) newErrors.participants = \"All participants must have a name.\";\n    }\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n  \n  const handleNext = (nextStep: number) => { if (validateStep(step)) setStep(nextStep); };\n\n  const handleGroupSelect = (groupId: string) => {\n    const group = groups.find(g => g.id === groupId);\n    if (group) {\n        setSelectedGroupId(group.id);\n        setParticipants(group.participants.map(p => ({ ...p, paid: false, amountOwed: 0 })));\n        setSplitMode(group.defaultSplit.mode);\n        if (group.defaultSplit.splitValues) {\n            setParticipants(group.participants.map(p => ({\n                ...p,\n                paid: false,\n                amountOwed: 0,\n                splitValue: group.defaultSplit.splitValues![p.id] || 0\n            })));\n        }\n    }\n    setIsSelectGroupModalOpen(false);\n    setStep(1);\n  };\n\n  const renderGroupSelectionStep = () => {\n    if (groups.length > 5) {\n        return (\n            <div className=\"text-center\">\n                <h3 className=\"text-2xl font-bold text-slate-700 dark:text-slate-200 mb-6\">Start with a Group?</h3>\n                <button \n                    type=\"button\" \n                    onClick={() => setIsSelectGroupModalOpen(true)} \n                    className=\"w-full px-6 py-4 bg-teal-500 text-white font-bold rounded-lg hover:bg-teal-600 mb-4 text-lg\"\n                >\n                    Select Group\n                </button>\n                <button \n                    type=\"button\" \n                    onClick={() => setStep(1)} \n                    className=\"w-full px-6 py-3 bg-slate-100 text-slate-800 font-semibold rounded-lg hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-100 dark:hover:bg-slate-600\"\n                >\n                    Continue without a Group\n                </button>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"text-center\">\n          <h3 className=\"text-2xl font-bold text-slate-700 dark:text-slate-200 mb-6\">Start with a Group?</h3>\n          <div className=\"space-y-4 mb-6\">\n            {groups.map(group => (\n                <button key={group.id} type=\"button\" onClick={() => handleGroupSelect(group.id)} className=\"w-full text-left p-4 border-2 border-slate-200 dark:border-slate-700 rounded-lg hover:border-teal-500 dark:hover:border-teal-400 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors\">\n                    <p className=\"font-bold text-lg\">{group.name}</p>\n                    <p className=\"text-sm text-slate-500\">{group.participants.length} members</p>\n                </button>\n            ))}\n          </div>\n          <button type=\"button\" onClick={() => setStep(1)} className=\"w-full px-6 py-3 bg-slate-100 text-slate-800 font-semibold rounded-lg hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-100 dark:hover:bg-slate-600\">\n            Continue without a Group\n          </button>\n        </div>\n    );\n  };\n\n  const renderStartModeStep = () => ( <div className=\"text-center\"> <h3 className=\"text-2xl font-bold text-slate-700 dark:text-slate-200 mb-6\">How do you want to start?</h3> <div className=\"flex flex-col sm:flex-row gap-6\"> <button type=\"button\" onClick={() => setStep(1.5) } className=\"flex-1 p-8 border-2 border-slate-200 dark:border-slate-700 rounded-lg hover:border-teal-500 dark:hover:border-teal-400 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-all transform hover:-translate-y-1\"> <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-16 w-16 mx-auto text-teal-500\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={1.5}> <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z\" /><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M15 13a3 3 0 11-6 0 3 3 0 016 0z\" /> </svg> <h4 className=\"text-xl font-bold mt-4 text-slate-800 dark:text-slate-100\">Scan a Receipt</h4> <p className=\"mt-1 text-slate-500 dark:text-slate-400\">Use AI to automatically add items.</p> </button> <button type=\"button\" onClick={() => setStep(2) } className=\"flex-1 p-8 border-2 border-slate-200 dark:border-slate-700 rounded-lg hover:border-teal-500 dark:hover:border-teal-400 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-all transform hover:-translate-y-1\"> <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-16 w-16 mx-auto text-teal-500\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={1.5}> <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\" /> </svg> <h4 className=\"text-xl font-bold mt-4 text-slate-800 dark:text-slate-100\">Enter Manually</h4> <p className=\"mt-1 text-slate-500 dark:text-slate-400\">Add the bill details yourself.</p> </button> </div> </div> );\n  const renderScanStep = () => <ReceiptScanner onItemsScanned={handleItemsScanned} onImageSelected={setReceiptImage} onImageCleared={() => setReceiptImage(undefined)} isForTemplate={isRecurring} />;\n  const renderPrimaryDetailsStep = () => ( <div className=\"space-y-6\"> <BillPrimaryDetails description={description} setDescription={setDescription} totalAmount={totalAmount} setTotalAmount={setTotalAmount} date={date} setDate={setDate} isRecurring={isRecurring} splitMode={splitMode} errors={errors} /> \n    <div>\n        <label htmlFor=\"category\" className=\"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1\">Category (Optional)</label>\n        <select\n            id=\"category\"\n            value={categoryId || ''}\n            onChange={e => setCategoryId(e.target.value || undefined)}\n            className=\"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-teal-500 focus:border-teal-500 bg-white dark:bg-slate-700 dark:border-slate-600 text-slate-900 dark:text-slate-100\"\n        >\n            <option value=\"\">Uncategorized</option>\n            {categories.map(cat => <option key={cat.id} value={cat.id}>{cat.name}</option>)}\n        </select>\n    </div>\n  <div className=\"mt-8 flex justify-end space-x-4\"> <button type=\"button\" onClick={() => setStep(selectedGroupId ? 0 : 1)} className=\"px-6 py-3 bg-slate-100 text-slate-800 font-semibold rounded-lg hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-100 dark:hover:bg-slate-600 transition-colors\">Back</button> <button type=\"button\" onClick={() => handleNext(3)} className=\"px-6 py-3 bg-teal-500 text-white font-bold rounded-lg hover:bg-teal-600 transition-colors\">Next</button> </div> </div> );\n  const renderParticipantsStep = () => ( <div className=\"space-y-6\"> <BillSplitMethod splitMode={splitMode} setSplitMode={setSplitMode} /> <BillParticipants participants={participants} setParticipants={setParticipants} splitMode={splitMode} participantsError={errors.participants} /> <div className=\"mt-8 flex justify-between space-x-4\"> <button type=\"button\" onClick={() => window.history.back()} className=\"px-6 py-3 bg-slate-100 text-slate-800 font-semibold rounded-lg hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-100 dark:hover:bg-slate-600 transition-colors\">Back</button> <button type=\"button\" onClick={() => handleNext(4)} className=\"px-6 py-3 bg-teal-500 text-white font-bold rounded-lg hover:bg-teal-600 transition-colors\">Next</button> </div> </div> );\n  const renderExtrasStep = () => ( <div className=\"space-y-6\"> {isRecurring && <RecurrenceSelector value={recurrenceRule} onChange={setRecurrenceRule} />} <BillExtraDetails items={items} additionalInfo={additionalInfo} onEditItems={() => setIsItemEditorOpen(true)} onEditInfo={() => setIsInfoEditorOpen(true)} isRecurring={isRecurring} receiptImage={receiptImage} onReceiptImageChange={setReceiptImage} /> <div className=\"mt-8 flex justify-between space-x-4\"> <button type=\"button\" onClick={() => window.history.back()} className=\"px-6 py-3 bg-slate-100 text-slate-800 font-semibold rounded-lg hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-100 dark:hover:bg-slate-600 transition-colors\">Back</button> <button type=\"button\" onClick={validateAndSave} className=\"px-6 py-3 bg-teal-500 text-white font-bold rounded-lg hover:bg-teal-600 transition-colors\">{isEditingTemplate ? 'Update Template' : 'Save Bill'}</button> </div> </div> );\n\n  const getTitle = () => {\n    if (isEditingTemplate) return 'Edit Template';\n    if (isFromTemplate) return 'Create Bill from Template';\n    if (isConverting) return 'Convert to Template';\n    return 'Create New Bill';\n  }\n\n  const renderContent = () => {\n      if (isEditingTemplate || isConverting) {\n          switch(step) {\n              case 2: return renderPrimaryDetailsStep();\n              case 3: return renderParticipantsStep();\n              case 4: return renderExtrasStep();\n              default: setStep(2); return renderPrimaryDetailsStep();\n          }\n      }\n      switch(step) {\n          case 0: return renderGroupSelectionStep();\n          case 1: return renderStartModeStep();\n          case 1.5: return renderScanStep();\n          case 2: return renderPrimaryDetailsStep();\n          case 3: return renderParticipantsStep();\n          case 4: return renderExtrasStep();\n          default: return renderStartModeStep();\n      }\n  }\n\n  return (\n    <div className=\"max-w-2xl mx-auto\">\n      {isSetupModalOpen && <SetupDisplayNameModal onSave={handleSaveDisplayName} currentName={settings.myDisplayName} />}\n      <button onClick={onBack} className=\"flex items-center gap-2 mb-6 text-teal-600 dark:text-teal-400 font-semibold hover:text-teal-800 dark:hover:text-teal-300\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fillRule=\"evenodd\" d=\"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l-4-4a1 1 0 011.414 0z\" clipRule=\"evenodd\" /></svg>\n          Back\n      </button>\n\n      <form onSubmit={e => { e.preventDefault(); validateAndSave(); }} className=\"space-y-6 relative\">\n        {isProcessingAI && (\n            <div className=\"absolute inset-0 bg-white/80 dark:bg-slate-900/80 z-10 flex flex-col items-center justify-center rounded-lg\">\n                <svg className=\"animate-spin h-10 w-10 text-teal-500 mb-4\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\"><circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle><path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path></svg>\n                <h1 className=\"text-xl font-semibold text-slate-700 dark:text-slate-200\">AI is matching items from your template...</h1>\n            </div>\n        )}\n        <h2 className=\"text-3xl font-bold text-slate-700 dark:text-slate-200\">{getTitle()}</h2>\n        {renderContent()}\n      </form>\n      \n      {isItemEditorOpen && <ItemEditor initialItems={items} participants={participants} onSave={(newItems) => { setItems(newItems); setIsItemEditorOpen(false); }} onCancel={() => setIsItemEditorOpen(false)} isRecurring={isRecurring} />}\n      {isInfoEditorOpen && <AdditionalInfoEditor initialInfo={additionalInfo} onSave={(newInfo) => { setAdditionalInfo(newInfo); setIsInfoEditorOpen(false); }} onCancel={() => setIsInfoEditorOpen(false)} />}\n      \n      {isSelectGroupModalOpen && (\n        <SelectGroupModal \n            isOpen={isSelectGroupModalOpen}\n            onClose={() => setIsSelectGroupModalOpen(false)}\n            groups={groups}\n            onSelect={handleGroupSelect}\n        />\n    )}\n    </div>\n  );\n};\n\nexport default CreateBill;","import React, { useState, useEffect, useCallback } from 'react';\nimport type { Group, Participant, SplitMode } from '../types';\nimport BillParticipants from './BillParticipants';\nimport BillSplitMethod from './BillSplitMethod';\n\ninterface CreateGroupProps {\n  onSave: (group: Omit<Group, 'id' | 'lastUpdatedAt'>) => void;\n  onUpdate: (group: Group) => void;\n  onBack: () => void;\n  groupToEdit?: Group;\n}\n\nconst CreateGroup: React.FC<CreateGroupProps> = ({ onSave, onUpdate, onBack, groupToEdit }) => {\n  const isEditing = !!groupToEdit;\n  const [name, setName] = useState(groupToEdit?.name || '');\n  const [participants, setParticipants] = useState<Participant[]>(groupToEdit?.participants || [{ id: `p-${Date.now()}`, name: '', amountOwed: 0, paid: false }]);\n  const [splitMode, setSplitMode] = useState<SplitMode>(groupToEdit?.defaultSplit.mode || 'equally');\n  const [errors, setErrors] = useState<{ name?: string, participants?: string }>({});\n\n  useEffect(() => {\n    // When switching to a mode that doesn't use splitValue, clear them\n    if (splitMode === 'equally' || splitMode === 'item') {\n      setParticipants(prev => prev.map(p => ({ ...p, splitValue: undefined })));\n    }\n  }, [splitMode]);\n\n  const validate = () => {\n    const newErrors: { name?: string, participants?: string } = {};\n    if (!name.trim()) newErrors.name = 'Group name is required.';\n    if (participants.length === 0 || participants.every(p => !p.name.trim())) newErrors.participants = 'A group must have at least one participant with a name.';\n    if (participants.some(p => !p.name.trim())) newErrors.participants = 'All participants must have a name.';\n    \n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSave = () => {\n    if (!validate()) return;\n    \n    const finalParticipants = participants.filter(p => p.name.trim() !== '');\n\n    const splitValues = (splitMode === 'amount' || splitMode === 'percentage')\n      ? finalParticipants.reduce((acc, p) => {\n          acc[p.id] = p.splitValue || 0;\n          return acc;\n        }, {} as Record<string, number>)\n      : undefined;\n\n    if (isEditing && groupToEdit) {\n      const groupData: Group = {\n        ...groupToEdit,\n        name,\n        participants: finalParticipants,\n        defaultSplit: {\n          mode: splitMode,\n          splitValues,\n        },\n      };\n      onUpdate(groupData);\n    } else {\n      const groupData: Omit<Group, 'id' | 'lastUpdatedAt'> = {\n        name,\n        participants: finalParticipants,\n        defaultSplit: {\n          mode: splitMode,\n          splitValues,\n        },\n        popularity: 0,\n      };\n      onSave(groupData);\n    }\n    onBack();\n  };\n\n  return (\n    <div className=\"max-w-2xl mx-auto\">\n      <button onClick={onBack} className=\"flex items-center gap-2 mb-6 text-teal-600 dark:text-teal-400 font-semibold hover:text-teal-800 dark:hover:text-teal-300\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fillRule=\"evenodd\" d=\"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l-4-4a1 1 0 011.414 0z\" clipRule=\"evenodd\" /></svg>\n        Back to Dashboard\n      </button>\n\n      <form onSubmit={e => { e.preventDefault(); handleSave(); }} className=\"space-y-6\">\n        <h2 className=\"text-3xl font-bold text-slate-700 dark:text-slate-200\">{isEditing ? 'Edit Group' : 'Create New Group'}</h2>\n        \n        <div>\n          <label htmlFor=\"groupName\" className=\"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1\">Group Name</label>\n          <input id=\"groupName\" type=\"text\" value={name} onChange={e => setName(e.target.value)} className=\"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-teal-500 focus:border-teal-500 bg-white dark:bg-slate-700 dark:border-slate-600 text-slate-900 dark:text-slate-100\" />\n          {errors.name && <p className=\"text-sm text-red-500 mt-1\">{errors.name}</p>}\n        </div>\n\n        <BillParticipants participants={participants} setParticipants={setParticipants} splitMode={splitMode} participantsError={errors.participants} />\n        \n        <div className=\"p-4 border border-slate-200 dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/30\">\n            <h3 className=\"text-lg font-semibold text-slate-700 dark:text-slate-200\">Default Split Settings</h3>\n            <p className=\"text-sm text-slate-500 dark:text-slate-400 mb-4\">When you create a bill from this group, these settings will be applied by default.</p>\n            <BillSplitMethod splitMode={splitMode} setSplitMode={setSplitMode} />\n        </div>\n\n        <div className=\"mt-8 flex justify-end space-x-4\">\n          <button type=\"button\" onClick={onBack} className=\"px-6 py-3 bg-slate-100 text-slate-800 font-semibold rounded-lg hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-100 dark:hover:bg-slate-600 transition-colors\">Cancel</button>\n          <button type=\"submit\" className=\"px-6 py-3 bg-teal-500 text-white font-bold rounded-lg hover:bg-teal-600 transition-colors\">{isEditing ? 'Update Group' : 'Save Group'}</button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default CreateGroup;","import React, { useState, useCallback, useMemo } from 'react';\nimport type { Bill, Settings, Participant } from '../types';\nimport { generateShareLink } from '../services/shareService';\nimport { useAppControl } from '../contexts/AppControlContext';\n\ninterface ShareModalProps {\n  bill: Bill;\n  settings: Settings;\n  onClose: () => void;\n  onUpdateBill: (bill: Bill, options?: { skipSync?: boolean }) => Promise<Bill>;\n  checkAndMakeSpaceForImageShare: (bill: Bill) => Promise<boolean>;\n}\n\nconst ActionButton: React.FC<{ onClick: () => void; children: React.ReactNode; disabled?: boolean, title: string, isUsed?: boolean }> = ({ onClick, children, disabled, title, isUsed }) => (\n    <button\n        onClick={onClick}\n        disabled={disabled}\n        title={title}\n        className={`p-2 rounded-full transition-colors disabled:opacity-50 disabled:cursor-wait cursor-pointer ${\n            isUsed \n                ? 'text-emerald-600 bg-emerald-100 dark:text-emerald-400 dark:bg-emerald-400/20' \n                : 'text-slate-500 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-600'\n        }`}\n    >\n        {children}\n    </button>\n);\n\nconst formatTimeAgo = (timestamp: number) => {\n    const now = Date.now();\n    const seconds = Math.floor((now - timestamp) / 1000);\n\n    if (seconds < 60) return `${seconds} second${seconds !== 1 ? 's' : ''} ago`;\n    const minutes = Math.floor(seconds / 60);\n    if (minutes < 60) return `${minutes} minute${minutes !== 1 ? 's' : ''} ago`;\n    const hours = Math.floor(minutes / 60);\n    if (hours < 24) return `${hours} hour${hours !== 1 ? 's' : ''} ago`;\n    const days = Math.floor(hours / 24);\n    return `${days} day${days !== 1 ? 's' : ''} ago`;\n};\n\nconst ShareHistory: React.FC<{bill: Bill}> = ({ bill }) => {\n    const historyEvents = useMemo(() => {\n        if (!bill.shareHistory) return [];\n        const events: { participantName: string; method: string; timestamp: number }[] = [];\n        for (const participantId in bill.shareHistory) {\n            const participant = bill.participants.find(p => p.id === participantId);\n            if (!participant) continue;\n\n            const shares = bill.shareHistory[participantId];\n            for (const method in shares) {\n                events.push({\n                    participantName: participant.name,\n                    method: method,\n                    timestamp: shares[method as keyof typeof shares]!\n                });\n            }\n        }\n        return events.sort((a, b) => b.timestamp - a.timestamp);\n    }, [bill.shareHistory, bill.participants]);\n\n    if (historyEvents.length === 0) {\n        return <p className=\"text-sm text-slate-500 dark:text-slate-400 text-center py-2\">No shares have been sent for this bill yet.</p>;\n    }\n\n    const getMethodText = (method: string) => {\n        switch(method) {\n            case 'sms': return 'via Text Message';\n            case 'email': return 'via Email';\n            case 'copy': return 'via Link Copy';\n            case 'share': return 'via Share';\n            default: return `via ${method}`;\n        }\n    };\n\n    return (\n        <ul className=\"space-y-2 text-sm max-h-48 overflow-y-auto\">\n            {historyEvents.map((event, index) => (\n                <li key={index} className=\"flex justify-between items-center p-2 bg-slate-100 dark:bg-slate-700/50 rounded-md\">\n                    <span className=\"text-slate-700 dark:text-slate-200\">\n                        Shared with <span className=\"font-semibold\">{event.participantName}</span> {getMethodText(event.method)}\n                    </span>\n                    <span className=\"text-slate-500 dark:text-slate-400 text-xs flex-shrink-0 ml-2\">{formatTimeAgo(event.timestamp)}</span>\n                </li>\n            ))}\n        </ul>\n    );\n};\n\nconst ShareModal: React.FC<ShareModalProps> = ({ bill, settings, onClose, onUpdateBill, checkAndMakeSpaceForImageShare }) => {\n  const [loading, setLoading] = useState<string | null>(null);\n  const [copied, setCopied] = useState<string | null>(null);\n  const { showNotification } = useAppControl();\n\n  const getShareMessage = (p: Participant, url: string) => {\n    return `Hi ${p.name.split(' ')[0]}, here is the secure link to our bill for \"${bill.description}\":\\n\\n${url}`;\n  };\n\n  const handleShareAction = async (\n    participant: Participant,\n    method: 'sms' | 'email' | 'copy' | 'share'\n  ) => {\n    const loadingKey = `${participant.id}-${method}`;\n    if (loading === loadingKey) return;\n\n    setLoading(loadingKey);\n\n    try {\n        const canProceed = await checkAndMakeSpaceForImageShare(bill);\n        if (!canProceed) {\n            return;\n        }\n        \n        const { url, billWithNewShareInfo } = await generateShareLink(bill, participant.id, settings, async (updatedBill, options) => { await onUpdateBill(updatedBill, options); });\n        if (!url) {\n            throw new Error('Failed to generate share link.');\n        }\n\n        const updateHistory = async () => {\n            const now = Date.now();\n            const updatedHistory = {\n                ...(billWithNewShareInfo.shareHistory || {}),\n                [participant.id]: {\n                    ...(billWithNewShareInfo.shareHistory?.[participant.id] || {}),\n                    [method]: now,\n                },\n            };\n            await onUpdateBill({ ...billWithNewShareInfo, shareHistory: updatedHistory }, { skipSync: true });\n        };\n\n        const message = getShareMessage(participant, url);\n\n        switch (method) {\n            case 'sms':\n                if (participant.phone) {\n                    window.location.href = `sms:${participant.phone}?&body=${encodeURIComponent(message)}`;\n                    await updateHistory();\n                }\n                break;\n            case 'email':\n                if (participant.email) {\n                    window.location.href = `mailto:${participant.email}?subject=${encodeURIComponent(`Bill: ${bill.description}`)}&body=${encodeURIComponent(message)}`;\n                    await updateHistory();\n                }\n                break;\n            case 'copy':\n                await navigator.clipboard.writeText(url);\n                setCopied(participant.id);\n                setTimeout(() => setCopied(null), 2000);\n                await updateHistory();\n                break;\n            case 'share':\n                if (navigator.share) {\n                    await navigator.share({ title: `Bill: ${bill.description}`, text: message });\n                    await updateHistory();\n                } else {\n                    await navigator.clipboard.writeText(message);\n                    showNotification('Share message with link copied.', 'success');\n                    setCopied(participant.id);\n                    setTimeout(() => setCopied(null), 2000);\n                    await updateHistory();\n                }\n                break;\n        }\n    } catch (e: any) {\n        if (e.name !== 'AbortError') { // AbortError is user cancelling share, not a real error\n          console.error(`Share action '${method}' failed:`, e);\n          showNotification(e.message || 'Failed to perform share action.', 'error');\n        }\n    } finally {\n        setLoading(null);\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4 backdrop-blur-sm\" onClick={onClose}>\n      <div className=\"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-lg flex flex-col max-h-[90vh]\" onClick={e => e.stopPropagation()}>\n        <div className=\"p-6\">\n          <h3 className=\"text-xl font-bold text-center text-slate-800 dark:text-slate-100 mb-2\">Share Bill</h3>\n          <p className=\"text-sm text-center text-slate-500 dark:text-slate-400 mb-6\">Send each participant a unique, secure link to view this bill. Links are single-use for key retrieval and expire after 24 hours.</p>\n          <ul className=\"space-y-2 max-h-60 overflow-y-auto pr-2\">\n            {bill.participants.map(p => (\n              <li key={p.id} className=\"flex items-center justify-between p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg\">\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"flex-shrink-0 h-8 w-8 rounded-full bg-teal-500 flex items-center justify-center text-white font-bold text-xs\">\n                    {p.name.charAt(0)}\n                  </div>\n                  <span className=\"font-semibold text-slate-800 dark:text-slate-100\">{p.name}</span>\n                </div>\n                <div className=\"flex items-center gap-1\">\n                  {p.phone && <ActionButton title=\"Share via Text Message\" onClick={() => handleShareAction(p, 'sms')} disabled={!!loading} isUsed={!!bill.shareHistory?.[p.id]?.sms}><span className=\"text-xl\" role=\"img\" aria-label=\"Text message\">💬</span></ActionButton>}\n                  {p.email && <ActionButton title=\"Share via Email\" onClick={() => handleShareAction(p, 'email')} disabled={!!loading} isUsed={!!bill.shareHistory?.[p.id]?.email}><span className=\"text-xl\" role=\"img\" aria-label=\"Email\">📧</span></ActionButton>}\n                  <ActionButton title=\"Copy Link\" onClick={() => handleShareAction(p, 'copy')} disabled={!!loading} isUsed={!!bill.shareHistory?.[p.id]?.copy}>\n                    {copied === p.id ? <span className=\"text-xl\" role=\"img\" aria-label=\"Checkmark\">✅</span> : <span className=\"text-xl\" role=\"img\" aria-label=\"Copy\">📋</span>}\n                  </ActionButton>\n                  <ActionButton title=\"Share...\" onClick={() => handleShareAction(p, 'share')} disabled={!!loading} isUsed={!!bill.shareHistory?.[p.id]?.share}><span className=\"text-xl\" role=\"img\" aria-label=\"Share\">🔗</span></ActionButton>\n                </div>\n              </li>\n            ))}\n          </ul>\n          <div className=\"mt-4\">\n              <details className=\"bg-slate-50 dark:bg-slate-700/50 rounded-lg\">\n                  <summary className=\"cursor-pointer p-3 font-semibold text-slate-600 dark:text-slate-300\">Share History</summary>\n                  <div className=\"p-3 border-t border-slate-200 dark:border-slate-600\">\n                      <ShareHistory bill={bill} />\n                  </div>\n              </details>\n          </div>\n        </div>\n        <div className=\"p-4 bg-slate-50 dark:bg-slate-800/50 border-t border-slate-200 dark:border-slate-700 flex justify-end\">\n          <button onClick={onClose} className=\"px-5 py-2 bg-teal-500 text-white font-bold rounded-lg hover:bg-teal-600 transition-colors\">Done</button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ShareModal;","import React, { useState, useRef, useEffect, useCallback } from 'react';\nimport type { Bill, Settings, SettingsSection } from '../types';\nimport ShareModal from './ShareModal';\nimport { exportData } from '../services/exportService';\nimport { View } from '../types';\nimport PaymentMethodWarningModal from './PaymentMethodWarningModal';\n\nconst DEBOUNCE_DELAY = 5000; // 5 seconds\n\ninterface BillDetailsProps {\n    bill: Bill;\n    onUpdateBill: (bill: Bill) => Promise<Bill>;\n    onBack: () => void;\n    settings: Settings;\n    updateSettings: (newSettings: Partial<Settings>) => Promise<void>;\n    setSettingsSection: (section: SettingsSection) => void;\n    navigate: (view: View, params?: any) => void;\n    onReshareBill: () => void;\n    checkAndMakeSpaceForImageShare: (bill: Bill) => Promise<boolean>;\n}\n\nconst LiveIndicator: React.FC<{ status: Bill['shareStatus'], onClick?: (e: React.MouseEvent) => void }> = ({ status, onClick }) => {\n    if (!status || !['live', 'expired', 'error'].includes(status)) return null;\n\n    const config = {\n        live: { color: 'bg-emerald-500', title: 'Live: This bill is actively shared.' },\n        expired: { color: 'bg-red-500', title: 'Expired: Click to reactivate sharing.' },\n        error: { color: 'bg-amber-500', title: 'Connection issue with share server.' },\n    }[status];\n    \n    if (!config) return null;\n\n    const indicator = (\n        <div className=\"flex-shrink-0\" title={config.title}>\n            <span className={`block h-3 w-3 rounded-full ${config.color}`}></span>\n        </div>\n    );\n\n    if (status === 'expired' && onClick) {\n        return (\n            <button onClick={onClick} aria-label={config.title} className=\"p-1\">\n                {indicator}\n            </button>\n        );\n    }\n\n    return indicator;\n};\n\n\nconst BillDetails: React.FC<BillDetailsProps> = ({ bill, onUpdateBill, onBack, settings, updateSettings, setSettingsSection, navigate, onReshareBill, checkAndMakeSpaceForImageShare }) => {\n    const [localBill, setLocalBill] = useState(bill);\n    const [isSaving, setIsSaving] = useState(false);\n    const debounceTimerRef = useRef<ReturnType<typeof setTimeout> | null>(null);\n    const pendingUpdateRef = useRef<Bill | null>(null); // Ref to hold pending state\n\n    const [isShareModalOpen, setIsShareModalOpen] = useState(false);\n    const [isPaymentWarningOpen, setIsPaymentWarningOpen] = useState(false);\n    const [isMenuOpen, setIsMenuOpen] = useState(false);\n    const [isReceiptModalOpen, setIsReceiptModalOpen] = useState(false);\n    const [isInfoModalOpen, setIsInfoModalOpen] = useState(false);\n    const [isItemsModalOpen, setIsItemsModalOpen] = useState(false);\n    const menuRef = useRef<HTMLDivElement>(null);\n    \n    useEffect(() => {\n        if (!isSaving) {\n            setLocalBill(bill);\n        }\n    }, [bill, isSaving]);\n    \n    // Function to immediately save any pending debounced changes\n    const flushChanges = useCallback(() => {\n        if (debounceTimerRef.current && pendingUpdateRef.current) {\n            console.log(\"Flushing debounced changes before unmount/pagehide.\");\n            clearTimeout(debounceTimerRef.current);\n            // Fire the update immediately. We don't await because the page might be unloading.\n            onUpdateBill(pendingUpdateRef.current);\n            debounceTimerRef.current = null;\n            pendingUpdateRef.current = null;\n            setIsSaving(false);\n        }\n    }, [onUpdateBill]);\n\n    // Effect to handle component unmount (navigating away) and page exit (closing tab)\n    useEffect(() => {\n        // Handles closing the tab or backgrounding the app\n        window.addEventListener('pagehide', flushChanges);\n\n        // Cleanup function handles component unmount\n        return () => {\n            window.removeEventListener('pagehide', flushChanges);\n            flushChanges();\n        };\n    }, [flushChanges]);\n\n\n    useEffect(() => {\n        const handleClickOutside = (event: MouseEvent) => {\n          if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\n            setIsMenuOpen(false);\n          }\n        };\n        if (isMenuOpen) {\n          document.addEventListener('mousedown', handleClickOutside);\n        }\n        return () => {\n          document.removeEventListener('mousedown', handleClickOutside);\n        };\n    }, [isMenuOpen]);\n\n    const handleTogglePaid = (participantId: string) => {\n        if (debounceTimerRef.current) {\n            clearTimeout(debounceTimerRef.current);\n        }\n        setIsSaving(true);\n\n        const updatedBill = {\n            ...localBill,\n            participants: localBill.participants.map(p =>\n                p.id === participantId ? { ...p, paid: !p.paid } : p\n            ),\n        };\n        setLocalBill(updatedBill); // Update UI immediately\n        pendingUpdateRef.current = updatedBill; // Store the pending update\n\n        debounceTimerRef.current = setTimeout(() => {\n            if (pendingUpdateRef.current) {\n                onUpdateBill(pendingUpdateRef.current).finally(() => {\n                    setIsSaving(false);\n                    pendingUpdateRef.current = null;\n                    debounceTimerRef.current = null;\n                });\n            }\n        }, DEBOUNCE_DELAY);\n    };\n\n    const handleExport = () => {\n        exportData({ owned: [localBill] }, `${localBill.description.replace(/[^a-z0-9]/gi, '_').toLowerCase()}.csv`);\n        setIsMenuOpen(false);\n    };\n    \n    const handleConvertToTemplate = () => {\n        navigate(View.CreateBill, { convertFromBill: localBill.id });\n        setIsMenuOpen(false);\n    };\n\n    const handleOpenShare = () => {\n        const { paymentDetails, hidePaymentMethodWarning } = settings;\n        const hasPaymentMethods = paymentDetails.venmo || paymentDetails.paypal || paymentDetails.cashApp || paymentDetails.zelle || paymentDetails.customMessage;\n\n        if (!hasPaymentMethods && !hidePaymentMethodWarning) {\n            setIsPaymentWarningOpen(true);\n        } else {\n            setIsShareModalOpen(true);\n        }\n    };\n\n    return (\n        <>\n            <div className=\"max-w-2xl mx-auto\">\n                <button onClick={onBack} className=\"flex items-center gap-2 mb-6 text-teal-600 dark:text-teal-400 font-semibold hover:text-teal-800 dark:hover:text-teal-300\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fillRule=\"evenodd\" d=\"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l-4-4a1 1 0 011.414 0z\" clipRule=\"evenodd\" /></svg>\n                    Back\n                </button>\n                <div className=\"bg-white dark:bg-slate-800 p-8 rounded-lg shadow-lg\">\n                    <div className=\"flex justify-between items-start gap-4\">\n                        <div className=\"flex-grow\">\n                            <div className=\"flex items-center gap-3\">\n                                <LiveIndicator status={localBill.shareStatus} onClick={onReshareBill} />\n                                <h2 className=\"text-3xl font-bold text-slate-800 dark:text-slate-100 break-words\">{localBill.description}</h2>\n                            </div>\n                            <p className=\"text-slate-500 dark:text-slate-400 mt-1\">{new Date(localBill.date).toLocaleDateString()}</p>\n                        </div>\n                        <div className=\"flex-shrink-0 flex items-center gap-2\">\n                            <p className=\"text-3xl font-extrabold text-slate-900 dark:text-slate-50\">${localBill.totalAmount.toFixed(2)}</p>\n                            <div ref={menuRef} className=\"relative\">\n                                <button\n                                    onClick={() => setIsMenuOpen(prev => !prev)}\n                                    className=\"p-3 -m-2 text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full\"\n                                    aria-label=\"More options\"\n                                >\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                                      <path d=\"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z\" />\n                                    </svg>\n                                </button>\n                                {isMenuOpen && (\n                                    <div className=\"absolute top-full right-0 mt-2 w-56 bg-white dark:bg-slate-800 rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 py-1 z-20\">\n                                        <button onClick={handleConvertToTemplate} className=\"w-full text-left flex items-center gap-3 px-4 py-2 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700\">\n                                            Convert to Template\n                                        </button>\n                                        <button onClick={handleExport} className=\"w-full text-left flex items-center gap-3 px-4 py-2 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700\">\n                                            Export as CSV\n                                        </button>\n                                    </div>\n                                )}\n                            </div>\n                        </div>\n                    </div>\n\n                    <div className=\"my-4 flex flex-wrap gap-x-4 gap-y-2 border-b border-slate-200 dark:border-slate-700 pb-4\">\n                        {localBill.receiptImage && (\n                            <button onClick={() => setIsReceiptModalOpen(true)} className=\"inline-flex items-center gap-2 text-sm text-teal-600 dark:text-teal-400 font-semibold hover:underline\">\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fillRule=\"evenodd\" d=\"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z\" clipRule=\"evenodd\" /></svg>\n                                View Receipt Image\n                            </button>\n                        )}\n                        {localBill.additionalInfo && Object.keys(localBill.additionalInfo).length > 0 && (\n                            <button onClick={() => setIsInfoModalOpen(true)} className=\"inline-flex items-center gap-2 text-sm text-teal-600 dark:text-teal-400 font-semibold hover:underline\">\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clipRule=\"evenodd\" /></svg>\n                                View Additional Info\n                            </button>\n                        )}\n                        {localBill.items && localBill.items.length > 0 && (\n                            <button onClick={() => setIsItemsModalOpen(true)} className=\"inline-flex items-center gap-2 text-sm text-teal-600 dark:text-teal-400 font-semibold hover:underline\">\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path d=\"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 11a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z\" /></svg>\n                                View Itemization\n                            </button>\n                        )}\n                    </div>\n\n\n                    <div className=\"mt-6\">\n                        <h3 className=\"text-xl font-semibold text-slate-700 dark:text-slate-200 mb-4\">Participants</h3>\n                        <ul className=\"space-y-3\">\n                            {localBill.participants.map(p => (\n                                <li key={p.id} className=\"flex items-center justify-between p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg\">\n                                    <span className=\"font-semibold text-slate-800 dark:text-slate-100\">{p.name} - ${p.amountOwed.toFixed(2)}</span>\n                                    <button onClick={() => handleTogglePaid(p.id)} className={`px-4 py-1.5 text-sm font-semibold rounded-full ${p.paid ? 'bg-emerald-100 text-emerald-800 dark:bg-emerald-900/50 dark:text-emerald-300' : 'bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300'}`}>\n                                        {p.paid ? 'Paid' : 'Unpaid'}\n                                    </button>\n                                </li>\n                            ))}\n                        </ul>\n                    </div>\n\n                    <div className=\"mt-8 border-t border-slate-200 dark:border-slate-700 pt-6 flex justify-between items-center\">\n                        {isSaving ? (\n                            <div className=\"flex items-center gap-2 text-sm text-slate-500 dark:text-slate-400\">\n                                <svg className=\"animate-spin h-4 w-4\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                                    <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                                    <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                                </svg>\n                                <span>Syncing changes...</span>\n                            </div>\n                        ) : (\n                            <div /> // Placeholder to keep button on the right\n                        )}\n                        <button onClick={handleOpenShare} className=\"bg-teal-500 text-white font-bold py-3 px-4 rounded-lg hover:bg-teal-600 transition-colors\">\n                            Share Bill\n                        </button>\n                    </div>\n                </div>\n                {isPaymentWarningOpen && (\n                    <PaymentMethodWarningModal\n                        onClose={() => setIsPaymentWarningOpen(false)}\n                        onContinue={() => {\n                            setIsPaymentWarningOpen(false);\n                            setIsShareModalOpen(true);\n                        }}\n                        onAddMethods={() => {\n                            setIsPaymentWarningOpen(false);\n                            setSettingsSection('payments');\n                        }}\n                        onUpdateSettings={updateSettings}\n                    />\n                )}\n                {isShareModalOpen && <ShareModal bill={localBill} settings={settings} onClose={() => setIsShareModalOpen(false)} onUpdateBill={onUpdateBill} checkAndMakeSpaceForImageShare={checkAndMakeSpaceForImageShare} />}\n            </div>\n\n            {isReceiptModalOpen && localBill.receiptImage && (\n                <div className=\"fixed inset-0 bg-black bg-opacity-80 z-[51] flex justify-center items-center p-4\" onClick={() => setIsReceiptModalOpen(false)} role=\"dialog\" aria-modal=\"true\" aria-label=\"Receipt Image Viewer\">\n                    <div className=\"relative max-w-4xl max-h-[90vh]\" onClick={e => e.stopPropagation()}>\n                        <img src={localBill.receiptImage} alt=\"Receipt\" className=\"w-full h-full object-contain rounded-lg shadow-2xl\" />\n                        <button onClick={() => setIsReceiptModalOpen(false)} className=\"absolute -top-3 -right-3 bg-white text-slate-800 rounded-full p-2 shadow-lg hover:bg-slate-200 focus:outline-none focus:ring-2 focus:ring-white\" aria-label=\"Close receipt view\">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M6 18L18 6M6 6l12 12\" /></svg>\n                        </button>\n                    </div>\n                </div>\n            )}\n            {isInfoModalOpen && localBill.additionalInfo && (\n                <div className=\"fixed inset-0 bg-black bg-opacity-80 z-[51] flex justify-center items-center p-4\" onClick={() => setIsInfoModalOpen(false)} role=\"dialog\" aria-modal=\"true\" aria-labelledby=\"info-dialog-title\">\n                    <div className=\"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-lg flex flex-col max-h-[80vh]\" onClick={e => e.stopPropagation()}>\n                        <div className=\"p-6 border-b border-slate-200 dark:border-slate-700\"><h3 id=\"info-dialog-title\" className=\"text-xl font-bold text-slate-800 dark:text-slate-100\">Additional Information</h3></div>\n                        <div className=\"p-6 flex-grow overflow-y-auto\"><dl className=\"space-y-4\">{Object.entries(localBill.additionalInfo).map(([key, value]) => (<div key={key} className=\"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-md\"><dt className=\"text-sm font-medium text-slate-500 dark:text-slate-400 truncate\">{key}</dt><dd className=\"mt-1 text-slate-800 dark:text-slate-100 whitespace-pre-wrap\">{String(value)}</dd></div>))}</dl></div>\n                        <div className=\"p-4 bg-slate-50 dark:bg-slate-800/50 border-t border-slate-200 dark:border-slate-700 flex justify-end\"><button onClick={() => setIsInfoModalOpen(false)} className=\"px-5 py-2 bg-teal-500 text-white font-bold rounded-lg hover:bg-teal-600 transition-colors\">Close</button></div>\n                    </div>\n                </div>\n            )}\n\n            {isItemsModalOpen && localBill.items && (\n                <div className=\"fixed inset-0 bg-black bg-opacity-80 z-[51] flex justify-center items-center p-4\" onClick={() => setIsItemsModalOpen(false)} role=\"dialog\" aria-modal=\"true\" aria-labelledby=\"items-dialog-title\">\n                    <div className=\"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-lg flex flex-col max-h-[80vh]\" onClick={e => e.stopPropagation()}>\n                        <div className=\"p-6 border-b border-slate-200 dark:border-slate-700\"><h3 id=\"items-dialog-title\" className=\"text-xl font-bold text-slate-800 dark:text-slate-100\">Itemization</h3></div>\n                        <div className=\"p-6 flex-grow overflow-y-auto\">\n                            <ul className=\"space-y-3\">\n                                {localBill.items.map(item => {\n                                    const assignedParticipants = item.assignedTo\n                                        .map(pId => localBill.participants.find(p => p.id === pId)?.name)\n                                        .filter(Boolean);\n\n                                    return (\n                                        <li key={item.id} className=\"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg\">\n                                            <div className=\"flex justify-between items-start\">\n                                                <p className=\"font-semibold text-slate-800 dark:text-slate-100 break-words pr-2\">{item.name}</p>\n                                                <p className=\"font-bold text-lg text-slate-800 dark:text-slate-100\">${item.price.toFixed(2)}</p>\n                                            </div>\n                                            {assignedParticipants.length > 0 && (\n                                                <p className=\"text-xs text-slate-500 dark:text-slate-400 mt-1\">\n                                                    Assigned to: {assignedParticipants.join(', ')}\n                                                </p>\n                                            )}\n                                        </li>\n                                    );\n                                })}\n                            </ul>\n                        </div>\n                        <div className=\"p-4 bg-slate-50 dark:bg-slate-800/50 border-t border-slate-200 dark:border-slate-700 flex justify-end\">\n                            <button onClick={() => setIsItemsModalOpen(false)} className=\"px-5 py-2 bg-teal-500 text-white font-bold rounded-lg hover:bg-teal-600 transition-colors\">Close</button>\n                        </div>\n                    </div>\n                </div>\n            )}\n        </>\n    );\n};\n\nexport default BillDetails;","import React, { useState } from 'react';\nimport type { Bill, ImportedBill, PaymentDetails, ReceiptItem } from '../types';\nimport PaymentMethodsModal from './PaymentMethodsModal';\n\ninterface SummaryBillDetailsModalProps {\n  summaryBill: Bill;\n  creatorName: string;\n  paymentDetails: PaymentDetails;\n  myParticipantId: string | null;\n  importedBill?: ImportedBill;\n  onUpdateImportedBill?: (bill: ImportedBill) => void;\n  onClose: () => void;\n}\n\nconst SummaryBillDetailsModal: React.FC<SummaryBillDetailsModalProps> = ({ summaryBill, creatorName, paymentDetails, myParticipantId, importedBill, onUpdateImportedBill, onClose }) => {\n  const [view, setView] = useState<'list' | 'details'>('list');\n  const [selectedItem, setSelectedItem] = useState<ReceiptItem | null>(null);\n  const [paymentModalItem, setPaymentModalItem] = useState<ReceiptItem | null>(null);\n  const [isReceiptModalOpen, setIsReceiptModalOpen] = useState(false);\n  const [isInfoModalOpen, setIsInfoModalOpen] = useState(false);\n\n  const handleSelectItem = (item: ReceiptItem) => {\n    setSelectedItem(item);\n    setView('details');\n  };\n\n  const handleToggleItemPaid = (itemId: string) => {\n    if (!importedBill || !onUpdateImportedBill) return;\n\n    const currentPaidItems = importedBill.localStatus.paidItems || {};\n    const newPaidItems = { ...currentPaidItems, [itemId]: !currentPaidItems[itemId] };\n\n    const allItemsPaid = (importedBill.sharedData.bill.items || []).every(\n        item => newPaidItems[item.id]\n    );\n\n    const updatedBill: ImportedBill = {\n      ...importedBill,\n      localStatus: {\n        ...importedBill.localStatus,\n        paidItems: newPaidItems,\n        myPortionPaid: allItemsPaid,\n      },\n    };\n    onUpdateImportedBill(updatedBill);\n  };\n\n  const renderListView = () => (\n    <ul className=\"space-y-3\">\n      {(summaryBill.items || []).map(item => {\n        const { name, price, originalBillData } = item;\n        if (!originalBillData) return null;\n        \n        const myNameInSummary = summaryBill.participants.find(p => p.id === myParticipantId)?.name;\n        const myParticipantInOriginalBill = myNameInSummary\n            ? originalBillData.participants.find(p => p.name.toLowerCase().trim() === myNameInSummary.toLowerCase().trim())\n            : null;\n        const isPaidByCreator = myParticipantInOriginalBill?.paid ?? false;\n        \n        const isPaidByMeLocally = importedBill?.localStatus.paidItems?.[item.id] ?? false;\n\n        return (\n          <li key={item.id}>\n            <div className={`w-full p-4 rounded-lg transition-colors text-left ${isPaidByCreator || isPaidByMeLocally ? 'bg-emerald-50 dark:bg-emerald-900/40' : 'bg-slate-50 dark:bg-slate-700/50'}`}>\n                <div className=\"flex justify-between items-start\">\n                    <p className=\"font-semibold text-slate-800 dark:text-slate-100 flex-1 break-words pr-2\">{name}</p>\n                    \n                    {isPaidByCreator ? (\n                         <div className=\"flex-shrink-0\">\n                            <span className=\"px-3 py-1 text-xs font-semibold rounded-full bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300\">\n                                Paid\n                            </span>\n                        </div>\n                    ) : (\n                        <div className=\"text-right flex-shrink-0\">\n                            <p className=\"text-xs font-semibold text-slate-500 dark:text-slate-400\">You Owe</p>\n                            <p className={`font-bold text-xl ${isPaidByMeLocally ? 'text-emerald-700 dark:text-emerald-300' : 'text-slate-800 dark:text-slate-100'}`}>\n                                ${price.toFixed(2)}\n                            </p>\n                        </div>\n                    )}\n                </div>\n                <div className=\"mt-3 flex items-center justify-between\">\n                    <div className=\"text-xs text-slate-500 dark:text-slate-400\">\n                        Total: ${originalBillData.totalAmount.toFixed(2)} &bull; {new Date(originalBillData.date).toLocaleDateString()}\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                        <button onClick={() => handleSelectItem(item)} className=\"px-3 py-1.5 text-xs font-semibold rounded-full bg-slate-200 dark:bg-slate-600 hover:bg-slate-300 dark:hover:bg-slate-500\">Details</button>\n                        {!isPaidByCreator && <button onClick={() => setPaymentModalItem(item)} className=\"px-3 py-1.5 text-xs font-semibold rounded-full bg-emerald-500 text-white hover:bg-emerald-600\">Settle Up</button>}\n                    </div>\n                </div>\n            </div>\n          </li>\n        );\n      })}\n    </ul>\n  );\n\n  const renderDetailView = () => {\n    if (!selectedItem || !selectedItem.originalBillData) return null;\n    \n    const myNameInSummary = summaryBill.participants.find(p => p.id === myParticipantId)?.name;\n    const myParticipantInOriginalBill = myNameInSummary\n        ? selectedItem.originalBillData.participants.find(p => p.name.toLowerCase().trim() === myNameInSummary.toLowerCase().trim())\n        : null;\n    const isPaidByCreator = myParticipantInOriginalBill?.paid ?? false;\n\n    const isPaidByMe = importedBill?.localStatus.paidItems?.[selectedItem.id] ?? false;\n    const { receiptImage, additionalInfo, participants } = selectedItem.originalBillData;\n\n    return (\n      <div>\n        <button onClick={() => setView('list')} className=\"flex items-center gap-2 mb-4 text-teal-600 dark:text-teal-400 font-semibold\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fillRule=\"evenodd\" d=\"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l-4-4a1 1 0 011.414 0z\" clipRule=\"evenodd\" /></svg>\n          Back to List\n        </button>\n        <div className=\"p-6 bg-slate-50 dark:bg-slate-700/50 rounded-lg\">\n            <h4 className=\"text-2xl font-bold text-slate-800 dark:text-slate-100\">{selectedItem.name}</h4>\n             <p className=\"text-sm text-slate-500 dark:text-slate-400 mt-1\">Bill Total: ${selectedItem.originalBillData.totalAmount.toFixed(2)}</p>\n            <p className=\"text-4xl font-extrabold text-teal-600 dark:text-teal-400 mt-2\">${selectedItem.price.toFixed(2)}</p>\n            <p className=\"text-sm font-semibold text-slate-500 dark:text-slate-400 mt-1\">Your Portion</p>\n\n            <div className=\"my-4 flex flex-wrap gap-x-4 gap-y-2\">\n                {receiptImage && (<button onClick={() => setIsReceiptModalOpen(true)} className=\"inline-flex items-center gap-2 text-sm text-teal-600 dark:text-teal-400 font-semibold hover:underline\"><svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fillRule=\"evenodd\" d=\"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z\" clipRule=\"evenodd\" /></svg>View Scanned Receipt</button>)}\n                {additionalInfo && Object.keys(additionalInfo).length > 0 && (<button onClick={() => setIsInfoModalOpen(true)} className=\"inline-flex items-center gap-2 text-sm text-teal-600 dark:text-teal-400 font-semibold hover:underline\"><svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clipRule=\"evenodd\" /></svg>View Additional Info</button>)}\n            </div>\n\n            <div className=\"mt-6 flex flex-col sm:flex-row gap-3\">\n                 {!isPaidByCreator && (\n                     <button onClick={() => setPaymentModalItem(selectedItem)} className=\"w-full flex-1 px-6 py-3 bg-emerald-500 text-white font-bold rounded-lg hover:bg-emerald-600 transition-colors\">\n                        Settle Up\n                    </button>\n                 )}\n                {importedBill && onUpdateImportedBill && (\n                     <button onClick={() => handleToggleItemPaid(selectedItem.id)} disabled={isPaidByCreator} className={`w-full flex-1 px-6 py-3 font-bold rounded-lg transition-colors ${ isPaidByCreator ? 'bg-emerald-100 text-emerald-800 dark:bg-emerald-900/50 dark:text-emerald-300 cursor-not-allowed' : isPaidByMe ? 'bg-emerald-100 text-emerald-800 hover:bg-emerald-200 dark:bg-emerald-900/50 dark:text-emerald-300' : 'bg-slate-200 text-slate-800 hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-100 dark:hover:bg-slate-500' }`}>\n                        {isPaidByCreator ? 'Creator marked as paid' : (isPaidByMe ? 'I Paid' : 'Mark as Paid')}\n                    </button>\n                )}\n            </div>\n        </div>\n        \n        <div className=\"mt-4\">\n            <h4 className=\"text-md font-semibold text-slate-700 dark:text-slate-200 mb-2\">Original Bill Participants</h4>\n            <ul className=\"space-y-2 text-sm\">\n                {participants.map(p => (\n                    <li key={p.id} className=\"flex justify-between p-2 bg-slate-100 dark:bg-slate-700/50 rounded-md\">\n                        <span className=\"text-slate-700 dark:text-slate-200\">{p.name}</span>\n                        <span className={`${p.paid ? 'text-emerald-600 dark:text-emerald-400' : 'text-amber-600 dark:text-amber-400'}`}>{p.paid ? 'Paid' : 'Owes'} ${p.amountOwed.toFixed(2)}</span>\n                    </li>\n                ))}\n            </ul>\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <>\n      <div className=\"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4 backdrop-blur-sm\" onClick={onClose}>\n        <div className=\"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-lg flex flex-col max-h-[90vh]\" onClick={e => e.stopPropagation()}>\n          <div className=\"p-6 border-b border-slate-200 dark:border-slate-700 flex-shrink-0\">\n              <h3 className=\"text-xl font-bold text-slate-800 dark:text-slate-100\">{view === 'list' ? 'Bill Breakdown' : 'Item Details'}</h3>\n          </div>\n          <div className=\"p-6 flex-grow overflow-y-auto\">\n            {view === 'list' ? renderListView() : renderDetailView()}\n          </div>\n          <div className=\"p-4 bg-slate-50 dark:bg-slate-800/50 border-t border-slate-200 dark:border-slate-700 flex justify-end flex-shrink-0\">\n              <button onClick={onClose} className=\"px-5 py-2 bg-teal-500 text-white font-bold rounded-lg hover:bg-teal-600 transition-colors\">\n                  Close\n              </button>\n          </div>\n        </div>\n      </div>\n      {paymentModalItem && (\n        <PaymentMethodsModal\n            paymentDetails={paymentDetails}\n            billDescription={paymentModalItem.name}\n            amountOwed={paymentModalItem.price}\n            creatorName={creatorName}\n            onClose={() => setPaymentModalItem(null)}\n        />\n      )}\n       {isReceiptModalOpen && selectedItem?.originalBillData?.receiptImage && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-80 z-[51] flex justify-center items-center p-4\" onClick={() => setIsReceiptModalOpen(false)} role=\"dialog\" aria-modal=\"true\" aria-label=\"Receipt Image Viewer\">\n          <div className=\"relative max-w-4xl max-h-[90vh]\" onClick={e => e.stopPropagation()}>\n            <img src={selectedItem.originalBillData.receiptImage} alt=\"Scanned receipt\" className=\"w-full h-full object-contain rounded-lg shadow-2xl\" />\n            <button onClick={() => setIsReceiptModalOpen(false)} className=\"absolute -top-3 -right-3 bg-white text-slate-800 rounded-full p-2 shadow-lg hover:bg-slate-200 focus:outline-none focus:ring-2 focus:ring-white\" aria-label=\"Close receipt view\"><svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M6 18L18 6M6 6l12 12\" /></svg></button>\n          </div>\n        </div>\n      )}\n      {isInfoModalOpen && selectedItem?.originalBillData?.additionalInfo && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-80 z-[51] flex justify-center items-center p-4\" onClick={() => setIsInfoModalOpen(false)} role=\"dialog\" aria-modal=\"true\" aria-labelledby=\"info-dialog-title\">\n          <div className=\"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-lg flex flex-col max-h-[80vh]\" onClick={e => e.stopPropagation()}>\n              <div className=\"p-6 border-b border-slate-200 dark:border-slate-700\"><h3 id=\"info-dialog-title\" className=\"text-xl font-bold text-slate-800 dark:text-slate-100\">Additional Information</h3></div>\n              <div className=\"p-6 flex-grow overflow-y-auto\"><dl className=\"space-y-4\">{Object.entries(selectedItem.originalBillData.additionalInfo).map(([key, value]) => (<div key={key} className=\"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-md\"><dt className=\"text-sm font-medium text-slate-500 dark:text-slate-400 truncate\">{key}</dt><dd className=\"mt-1 text-slate-800 dark:text-slate-100 whitespace-pre-wrap\">{String(value)}</dd></div>))}</dl></div>\n              <div className=\"p-4 bg-slate-50 dark:bg-slate-800/50 border-t border-slate-200 dark:border-slate-700 flex justify-end\"><button onClick={() => setIsInfoModalOpen(false)} className=\"px-5 py-2 bg-teal-500 text-white font-bold rounded-lg hover:bg-teal-600 transition-colors\">Close</button></div>\n          </div>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default SummaryBillDetailsModal;","import React, { useState, useRef, useEffect } from 'react';\nimport type { ImportedBill } from '../types';\nimport { exportData } from '../services/exportService';\nimport PaymentMethodsModal from './PaymentMethodsModal';\nimport SummaryBillDetailsModal from './SummaryBillDetailsModal';\n\ninterface ImportedBillDetailsProps {\n    bill: ImportedBill;\n    onUpdateBill: (bill: ImportedBill) => void;\n    onBack: () => void;\n}\n\nconst ImportedBillDetails: React.FC<ImportedBillDetailsProps> = ({ bill, onUpdateBill, onBack }) => {\n    const [isPaymentModalOpen, setIsPaymentModalOpen] = useState(false);\n    const [isSummaryModalOpen, setIsSummaryModalOpen] = useState(false);\n    const [isMenuOpen, setIsMenuOpen] = useState(false);\n    const [isReceiptModalOpen, setIsReceiptModalOpen] = useState(false);\n    const [isInfoModalOpen, setIsInfoModalOpen] = useState(false);\n    const [isItemsModalOpen, setIsItemsModalOpen] = useState(false);\n    const menuRef = useRef<HTMLDivElement>(null);\n\n    const myParticipant = bill.sharedData.bill.participants.find(p => p.id === bill.myParticipantId);\n    const isMyPortionPaid = bill.localStatus.myPortionPaid;\n    const isSummary = bill.id.startsWith('summary-');\n\n    useEffect(() => {\n        const handleClickOutside = (event: MouseEvent) => {\n          if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\n            setIsMenuOpen(false);\n          }\n        };\n        if (isMenuOpen) {\n          document.addEventListener('mousedown', handleClickOutside);\n        }\n        return () => {\n          document.removeEventListener('mousedown', handleClickOutside);\n        };\n    }, [isMenuOpen]);\n\n    const handleTogglePaid = () => {\n        const updatedBill = {\n            ...bill,\n            localStatus: {\n                ...bill.localStatus,\n                myPortionPaid: !bill.localStatus.myPortionPaid\n            }\n        };\n        onUpdateBill(updatedBill);\n    };\n\n    const handleExport = () => {\n        exportData({ imported: [bill] }, `${bill.sharedData.bill.description.replace(/[^a-z0-9]/gi, '_').toLowerCase()}.csv`);\n        setIsMenuOpen(false);\n    };\n\n    return (\n        <>\n            <div className=\"max-w-2xl mx-auto\">\n                <button onClick={onBack} className=\"flex items-center gap-2 mb-6 text-teal-600 dark:text-teal-400 font-semibold hover:text-teal-800 dark:hover:text-teal-300\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fillRule=\"evenodd\" d=\"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l-4-4a1 1 0 011.414 0z\" clipRule=\"evenodd\" /></svg>\n                    Back\n                </button>\n                <div className=\"bg-white dark:bg-slate-800 p-8 rounded-lg shadow-lg\">\n                    <div className=\"flex justify-between items-start gap-4\">\n                        <div className=\"flex-grow\">\n                            <h2 className=\"text-3xl font-bold text-slate-800 dark:text-slate-100 break-words\">{bill.sharedData.bill.description}</h2>\n                            <p className=\"text-slate-500 dark:text-slate-400 mt-1\">From {bill.creatorName} &bull; {new Date(bill.sharedData.bill.date).toLocaleDateString()}</p>\n                        </div>\n                        <div className=\"flex-shrink-0 flex items-center gap-2\">\n                            <p className=\"text-3xl font-extrabold text-slate-900 dark:text-slate-50\">${myParticipant?.amountOwed.toFixed(2)}</p>\n                             <div ref={menuRef} className=\"relative\">\n                                <button\n                                    onClick={() => setIsMenuOpen(prev => !prev)}\n                                    className=\"p-3 -m-2 text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full\"\n                                    aria-label=\"More options\"\n                                >\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path d=\"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z\" /></svg>\n                                </button>\n                                {isMenuOpen && (\n                                    <div className=\"absolute top-full right-0 mt-2 w-48 bg-white dark:bg-slate-800 rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 py-1 z-20\">\n                                        <button onClick={handleExport} className=\"w-full text-left flex items-center gap-3 px-4 py-2 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700\">\n                                            Export as CSV\n                                        </button>\n                                    </div>\n                                )}\n                            </div>\n                        </div>\n                    </div>\n\n                    <div className=\"my-4 flex flex-wrap gap-x-4 gap-y-2 border-b border-slate-200 dark:border-slate-700 pb-4\">\n                        {bill.sharedData.bill.receiptImage && (\n                            <button onClick={() => setIsReceiptModalOpen(true)} className=\"inline-flex items-center gap-2 text-sm text-teal-600 dark:text-teal-400 font-semibold hover:underline\">\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fillRule=\"evenodd\" d=\"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z\" clipRule=\"evenodd\" /></svg>\n                                View Receipt Image\n                            </button>\n                        )}\n                        {bill.sharedData.bill.additionalInfo && Object.keys(bill.sharedData.bill.additionalInfo).length > 0 && (\n                            <button onClick={() => setIsInfoModalOpen(true)} className=\"inline-flex items-center gap-2 text-sm text-teal-600 dark:text-teal-400 font-semibold hover:underline\">\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clipRule=\"evenodd\" /></svg>\n                                View Additional Info\n                            </button>\n                        )}\n                        {bill.sharedData.bill.items && bill.sharedData.bill.items.length > 0 && !isSummary && (\n                            <button onClick={() => setIsItemsModalOpen(true)} className=\"inline-flex items-center gap-2 text-sm text-teal-600 dark:text-teal-400 font-semibold hover:underline\">\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path d=\"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 11a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z\" /></svg>\n                                View Itemization\n                            </button>\n                        )}\n                    </div>\n\n                    {myParticipant && (\n                        <div className=\"mt-6\">\n                            <h3 className=\"text-xl font-semibold text-slate-700 dark:text-slate-200 mb-4\">Your Status</h3>\n                            <div className=\"flex items-center justify-between p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg\">\n                                <span className=\"font-semibold text-slate-800 dark:text-slate-100\">My Portion</span>\n                                <button onClick={handleTogglePaid} className={`px-4 py-1.5 text-sm font-semibold rounded-full ${isMyPortionPaid ? 'bg-emerald-100 text-emerald-800 dark:bg-emerald-900/50 dark:text-emerald-300' : 'bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300'}`}>\n                                    {isMyPortionPaid ? 'Paid' : 'Unpaid'}\n                                </button>\n                            </div>\n                        </div>\n                    )}\n                    \n                    <div className=\"mt-8 border-t border-slate-200 dark:border-slate-700 pt-6 flex flex-col sm:flex-row gap-4\">\n                        {!isMyPortionPaid && <button onClick={() => setIsPaymentModalOpen(true)} className=\"flex-1 w-full bg-emerald-500 text-white font-bold py-3 px-4 rounded-lg hover:bg-emerald-600 transition-colors\">Settle Up</button>}\n                        {isSummary && <button onClick={() => setIsSummaryModalOpen(true)} className=\"flex-1 w-full bg-slate-100 text-slate-800 font-semibold py-3 px-4 rounded-lg hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-100 dark:hover:bg-slate-600 transition-colors\">View Bill Breakdown</button>}\n                    </div>\n                </div>\n            </div>\n            {isPaymentModalOpen && myParticipant && (\n                <PaymentMethodsModal\n                    paymentDetails={bill.sharedData.paymentDetails}\n                    billDescription={bill.sharedData.bill.description}\n                    amountOwed={myParticipant.amountOwed}\n                    creatorName={bill.creatorName}\n                    onClose={() => setIsPaymentModalOpen(false)}\n                />\n            )}\n            {isSummaryModalOpen && myParticipant && (\n                <SummaryBillDetailsModal\n                    summaryBill={bill.sharedData.bill}\n                    paymentDetails={bill.sharedData.paymentDetails}\n                    creatorName={bill.creatorName}\n                    myParticipantId={myParticipant.id}\n                    importedBill={bill}\n                    onUpdateImportedBill={onUpdateBill}\n                    onClose={() => setIsSummaryModalOpen(false)}\n                />\n            )}\n            {isReceiptModalOpen && bill.sharedData.bill.receiptImage && (\n                <div className=\"fixed inset-0 bg-black bg-opacity-80 z-[51] flex justify-center items-center p-4\" onClick={() => setIsReceiptModalOpen(false)} role=\"dialog\" aria-modal=\"true\" aria-label=\"Receipt Image Viewer\">\n                    <div className=\"relative max-w-4xl max-h-[90vh]\" onClick={e => e.stopPropagation()}>\n                        <img src={bill.sharedData.bill.receiptImage} alt=\"Receipt\" className=\"w-full h-full object-contain rounded-lg shadow-2xl\" />\n                        <button onClick={() => setIsReceiptModalOpen(false)} className=\"absolute -top-3 -right-3 bg-white text-slate-800 rounded-full p-2 shadow-lg hover:bg-slate-200 focus:outline-none focus:ring-2 focus:ring-white\" aria-label=\"Close receipt view\">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M6 18L18 6M6 6l12 12\" /></svg>\n                        </button>\n                    </div>\n                </div>\n            )}\n            {isInfoModalOpen && bill.sharedData.bill.additionalInfo && (\n                <div className=\"fixed inset-0 bg-black bg-opacity-80 z-[51] flex justify-center items-center p-4\" onClick={() => setIsInfoModalOpen(false)} role=\"dialog\" aria-modal=\"true\" aria-labelledby=\"info-dialog-title\">\n                    <div className=\"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-lg flex flex-col max-h-[80vh]\" onClick={e => e.stopPropagation()}>\n                        <div className=\"p-6 border-b border-slate-200 dark:border-slate-700\"><h3 id=\"info-dialog-title\" className=\"text-xl font-bold text-slate-800 dark:text-slate-100\">Additional Information</h3></div>\n                        <div className=\"p-6 flex-grow overflow-y-auto\"><dl className=\"space-y-4\">{Object.entries(bill.sharedData.bill.additionalInfo).map(([key, value]) => (<div key={key} className=\"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-md\"><dt className=\"text-sm font-medium text-slate-500 dark:text-slate-400 truncate\">{key}</dt><dd className=\"mt-1 text-slate-800 dark:text-slate-100 whitespace-pre-wrap\">{String(value)}</dd></div>))}</dl></div>\n                        <div className=\"p-4 bg-slate-50 dark:bg-slate-800/50 border-t border-slate-200 dark:border-slate-700 flex justify-end\"><button onClick={() => setIsInfoModalOpen(false)} className=\"px-5 py-2 bg-teal-500 text-white font-bold rounded-lg hover:bg-teal-600 transition-colors\">Close</button></div>\n                    </div>\n                </div>\n            )}\n            {isItemsModalOpen && bill.sharedData.bill.items && (\n                <div className=\"fixed inset-0 bg-black bg-opacity-80 z-[51] flex justify-center items-center p-4\" onClick={() => setIsItemsModalOpen(false)} role=\"dialog\" aria-modal=\"true\" aria-labelledby=\"items-dialog-title\">\n                    <div className=\"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-lg flex flex-col max-h-[80vh]\" onClick={e => e.stopPropagation()}>\n                        <div className=\"p-6 border-b border-slate-200 dark:border-slate-700\"><h3 id=\"items-dialog-title\" className=\"text-xl font-bold text-slate-800 dark:text-slate-100\">Itemization</h3></div>\n                        <div className=\"p-6 flex-grow overflow-y-auto\">\n                            <ul className=\"space-y-3\">\n                                {bill.sharedData.bill.items.map(item => {\n                                    const assignedParticipants = item.assignedTo\n                                        .map(pId => bill.sharedData.bill.participants.find(p => p.id === pId)?.name)\n                                        .filter(Boolean);\n\n                                    return (\n                                        <li key={item.id} className=\"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg\">\n                                            <div className=\"flex justify-between items-start\">\n                                                <p className=\"font-semibold text-slate-800 dark:text-slate-100 break-words pr-2\">{item.name}</p>\n                                                <p className=\"font-bold text-lg text-slate-800 dark:text-slate-100\">${item.price.toFixed(2)}</p>\n                                            </div>\n                                            {assignedParticipants.length > 0 && (\n                                                <p className=\"text-xs text-slate-500 dark:text-slate-400 mt-1\">\n                                                    Assigned to: {assignedParticipants.join(', ')}\n                                                </p>\n                                            )}\n                                        </li>\n                                    );\n                                })}\n                            </ul>\n                        </div>\n                        <div className=\"p-4 bg-slate-50 dark:bg-slate-800/50 border-t border-slate-200 dark:border-slate-700 flex justify-end\">\n                            <button onClick={() => setIsItemsModalOpen(false)} className=\"px-5 py-2 bg-teal-500 text-white font-bold rounded-lg hover:bg-teal-600 transition-colors\">Close</button>\n                        </div>\n                    </div>\n                </div>\n            )}\n        </>\n    );\n};\n\nexport default ImportedBillDetails;","import React from 'react';\nimport type { SettingsSection } from '../types';\n\ninterface SettingsProps {\n  onNavigateToSection: (section: SettingsSection) => void;\n  onBack: () => void;\n  canInstall: boolean;\n  promptInstall: () => void;\n}\n\nconst Settings: React.FC<SettingsProps> = ({ onNavigateToSection, onBack, canInstall, promptInstall }) => {\n\n  const sections: { id: SettingsSection; title: string; description: string; icon: string; }[] = [\n    { id: 'personalization', title: 'Personalization', description: 'Name, theme, and share message', icon: '🎨' },\n    { id: 'payments', title: 'Payment Methods', description: 'Your Venmo, PayPal, etc.', icon: '💳' },\n    { id: 'budgeting', title: 'Budgeting', description: 'Set monthly budgets and categories', icon: '📊' },\n    { id: 'reminders', title: 'Bill Reminders', description: 'Get notifications for due bills', icon: '🔔' },\n    { id: 'subscription', title: 'Subscription', description: 'Manage your Pro subscription', icon: '⭐' },\n    { id: 'data', title: 'Data & Tools', description: 'Import, export, or scan QR', icon: '🛠️' },\n    { id: 'sync', title: 'Sync Devices', description: 'Transfer data to another device', icon: '🔄' },\n    { id: 'about', title: 'About & Support', description: 'Project source, issues, and changelog', icon: 'ℹ️' },\n    { id: 'disclaimer', title: 'Disclaimer & Privacy', description: 'How your data is handled', icon: '⚖️' },\n    { id: 'danger', title: 'Danger Zone', description: 'Reset all application data', icon: '🔥' },\n  ];\n\n  return (\n    <div className=\"max-w-4xl mx-auto\">\n      <button onClick={onBack} className=\"flex items-center gap-2 mb-6 text-teal-600 dark:text-teal-400 font-semibold hover:text-teal-800 dark:hover:text-teal-300\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fillRule=\"evenodd\" d=\"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l-4-4a1 1 0 011.414 0z\" clipRule=\"evenodd\" /></svg>\n        Back\n      </button>\n\n      <h2 className=\"text-3xl font-bold text-slate-800 dark:text-slate-100 mb-6\">Settings</h2>\n      \n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {sections.map(section => (\n          <button\n            key={section.id}\n            onClick={() => onNavigateToSection(section.id)}\n            className=\"relative p-6 bg-white dark:bg-slate-800 rounded-lg shadow-md hover:shadow-xl dark:hover:shadow-teal-900/40 text-left transition-all duration-300 transform hover:-translate-y-1\"\n          >\n            <div className=\"text-4xl mb-4\">{section.icon}</div>\n            <h3 className=\"text-lg font-bold text-slate-800 dark:text-slate-100\">{section.title}</h3>\n            <p className=\"text-sm text-slate-500 dark:text-slate-400 mt-1\">{section.description}</p>\n          </button>\n        ))}\n        {canInstall && (\n          <button\n            onClick={promptInstall}\n            className=\"relative p-6 bg-white dark:bg-slate-800 rounded-lg shadow-md hover:shadow-xl dark:hover:shadow-teal-900/40 text-left transition-all duration-300 transform hover:-translate-y-1\"\n          >\n            <div className=\"text-4xl mb-4\">📥</div>\n            <h3 className=\"text-lg font-bold text-slate-800 dark:text-slate-100\">Install App</h3>\n            <p className=\"text-sm text-slate-500 dark:text-slate-400 mt-1\">Install to your device for an offline, native app experience.</p>\n          </button>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Settings;","import React, { useState, useRef, useCallback, useEffect } from 'react';\n\ninterface QrScannerHook {\n  isScanning: boolean;\n  startScanner: () => void;\n  stopScanner: () => void;\n  videoRef: React.RefObject<HTMLVideoElement>;\n  error: string | null;\n}\n\n// Access the global jsQR function loaded from the script in index.html\ndeclare const jsQR: (data: Uint8ClampedArray, width: number, height: number) => { data: string } | null;\n\nexport const useQrScanner = (onScan: (data: string) => void): QrScannerHook => {\n  const [isScanning, setIsScanning] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const streamRef = useRef<MediaStream | null>(null);\n  const animationFrameRef = useRef<number | null>(null);\n\n  const scan = useCallback(() => {\n    if (videoRef.current && videoRef.current.readyState === videoRef.current.HAVE_ENOUGH_DATA) {\n      const canvas = document.createElement('canvas');\n      const video = videoRef.current;\n      canvas.width = video.videoWidth;\n      canvas.height = video.videoHeight;\n      const ctx = canvas.getContext('2d');\n      if (ctx) {\n        ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n        const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n        const code = jsQR(imageData.data, imageData.width, imageData.height);\n\n        if (code && code.data) {\n          onScan(code.data);\n          // Stop scanning once a code is found\n          // The component using the hook is responsible for calling stopScanner to close the UI\n          return;\n        }\n      }\n    }\n    // Continue scanning if no code is found\n    animationFrameRef.current = requestAnimationFrame(scan);\n  }, [onScan]);\n\n  const startScanner = useCallback(async () => {\n    setError(null);\n    try {\n      if (!navigator.mediaDevices?.getUserMedia) {\n        throw new Error(\"Camera not supported by this browser.\");\n      }\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: { facingMode: 'environment' },\n      });\n\n      streamRef.current = stream;\n      if (videoRef.current) {\n        videoRef.current.srcObject = stream;\n        videoRef.current.setAttribute('playsinline', 'true'); // Required for iOS\n        await videoRef.current.play();\n        setIsScanning(true);\n        animationFrameRef.current = requestAnimationFrame(scan);\n      }\n    } catch (err: any) {\n      console.error(\"QR Scanner Error:\", err);\n      let message = \"Could not access the camera. Please ensure you have granted permission.\";\n      if (err.name === 'NotAllowedError') {\n        message = \"Camera access was denied. Please enable it in your browser settings.\";\n      } else if (err.name === 'NotFoundError') {\n        message = \"No suitable camera was found on your device.\";\n      }\n      setError(message);\n      setIsScanning(false);\n    }\n  }, [scan]);\n\n  const stopScanner = useCallback(() => {\n    if (animationFrameRef.current) {\n      cancelAnimationFrame(animationFrameRef.current);\n      animationFrameRef.current = null;\n    }\n    if (streamRef.current) {\n      streamRef.current.getTracks().forEach(track => track.stop());\n      streamRef.current = null;\n    }\n    setIsScanning(false);\n  }, []);\n  \n  // Cleanup on unmount\n  useEffect(() => {\n    return () => {\n      stopScanner();\n    };\n  }, [stopScanner]);\n\n  return { isScanning, startScanner, stopScanner, videoRef, error };\n};","\n\n\n\nimport React, { useState, useEffect, useCallback } from 'react';\n// FIX: Updated import path for RequestConfirmationFn to central types file.\nimport type { RequestConfirmationFn } from '../types';\nimport { exportData, importData } from '../services/db';\nimport * as cryptoService from '../services/cryptoService';\nimport { useAppControl } from '../contexts/AppControlContext';\nimport { useQrScanner } from '../hooks/useQrScanner';\nimport { getApiUrl, fetchWithRetry } from '../services/api';\n\n// FIX: Added declaration for pako, which is loaded as a global script.\ndeclare var pako: any;\n\ninterface SyncProps {\n  onBack: () => void;\n  requestConfirmation: RequestConfirmationFn;\n}\n\ntype Mode = 'idle' | 'sharing' | 'receiving' | 'error';\ntype ShareStatus = 'generating' | 'waiting';\ntype ReceiveStatus = 'scanning' | 'connecting' | 'decrypting' | 'confirming' | 'complete';\n\n// A simple component to render a countdown timer.\nconst CountdownTimer: React.FC<{ expiry: number; onExpire: () => void }> = ({ expiry, onExpire }) => {\n  const [timeLeft, setTimeLeft] = useState(expiry - Date.now());\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      const remaining = expiry - Date.now();\n      if (remaining <= 0) {\n        clearInterval(interval);\n        setTimeLeft(0);\n        onExpire();\n      } else {\n        setTimeLeft(remaining);\n      }\n    }, 1000);\n    return () => clearInterval(interval);\n  }, [expiry, onExpire]);\n\n  if (timeLeft <= 0) {\n    return <span className=\"font-bold text-amber-500\">Expired</span>;\n  }\n\n  const minutes = Math.floor(timeLeft / 60000);\n  const seconds = Math.floor((timeLeft % 60000) / 1000).toString().padStart(2, '0');\n\n  return <span>{`${minutes}:${seconds}`}</span>;\n};\n\n\nconst SyncComponent: React.FC<SyncProps> = ({ onBack, requestConfirmation }) => {\n    const [mode, setMode] = useState<Mode>('idle');\n    const [shareStatus, setShareStatus] = useState<ShareStatus>('generating');\n    const [receiveStatus, setReceiveStatus] = useState<ReceiveStatus>('scanning');\n    const [errorMessage, setErrorMessage] = useState<string | null>(null);\n    const [syncPayload, setSyncPayload] = useState<{ code: string; qrData: string } | null>(null);\n    const [qrCodeDataUrl, setQrCodeDataUrl] = useState<string | null>(null);\n    const [expiryTime, setExpiryTime] = useState<number>(0);\n    \n    const { reloadApp } = useAppControl();\n\n    // Refactored to resolve a circular dependency where `handleScan` needed `stopScanner`\n    // before `stopScanner` was defined by the `useQrScanner` hook.\n    // Now, `handleScan` just updates the state, and a `useEffect` handles stopping the scanner.\n    const handleScan = useCallback(async (data: string) => {\n        setReceiveStatus('connecting');\n\n        try {\n            const parsed = JSON.parse(data);\n            if (!parsed.c || !parsed.k) {\n                throw new Error(\"Invalid QR code format. Please scan the code generated by the app.\");\n            }\n            const { c: code, k: keyJwk } = parsed;\n\n            // 1. Fetch encrypted data from server\n            const response = await fetchWithRetry(await getApiUrl(`/sync?code=${code}`));\n            const resultText = await response.text();\n            \n            if (!response.ok) {\n                try {\n                  const errorResult = JSON.parse(resultText);\n                  throw new Error(errorResult.error || \"Failed to retrieve data. The code may have expired.\");\n                } catch(e) {\n                  throw new Error(\"Failed to retrieve data. The code may have expired or the server is unavailable.\");\n                }\n            }\n            \n            const result = JSON.parse(resultText);\n\n            // 2. Decrypt and decompress data\n            setReceiveStatus('decrypting');\n            const key = await cryptoService.importEncryptionKey(keyJwk);\n            const decryptedBytes = await cryptoService.decrypt(result.encryptedData, key);\n            const decryptedJson = pako.inflate(decryptedBytes, { to: 'string' });\n            const importedData = JSON.parse(decryptedJson);\n\n            // 3. Confirm with user\n            setReceiveStatus('confirming');\n            requestConfirmation(\n                'Confirm Data Import',\n                'Data has been received. This will overwrite all your current bills and settings.',\n                async () => {\n                    await importData(importedData);\n                    setReceiveStatus('complete');\n                    setTimeout(() => reloadApp(), 2000);\n                },\n                {\n                    confirmText: 'Overwrite & Import',\n                    confirmVariant: 'danger',\n                    onCancel: () => {\n                       // Reset to initial screen if user cancels\n                       setMode('idle'); \n                    }\n                }\n            );\n        } catch (error: any) {\n            console.error(\"Error during receive process:\", error);\n            setErrorMessage(error.message || \"An unknown error occurred.\");\n            setMode('error');\n        }\n    }, [requestConfirmation, reloadApp]);\n    \n    const { isScanning, startScanner, stopScanner, videoRef, error: scannerError } = useQrScanner(handleScan);\n\n    // This effect stops the scanner once a QR code has been found and we've moved to the next state.\n    useEffect(() => {\n        if (isScanning && receiveStatus !== 'scanning') {\n            stopScanner();\n        }\n    }, [isScanning, receiveStatus, stopScanner]);\n\n    const startSharing = useCallback(async () => {\n        setMode('sharing');\n        setShareStatus('generating');\n        setErrorMessage(null);\n        setSyncPayload(null);\n        setQrCodeDataUrl(null);\n        \n        try {\n            const key = await cryptoService.generateEncryptionKey();\n            const exportedKey = await cryptoService.exportKey(key);\n            const dataToExport = await exportData();\n            const jsonString = JSON.stringify(dataToExport);\n            const compressedData = pako.deflate(jsonString);\n            const encryptedData = await cryptoService.encrypt(compressedData, key);\n\n            const response = await fetchWithRetry(await getApiUrl('/sync'), {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({ encryptedData }),\n            });\n            const result = await response.json();\n\n            if (!response.ok) {\n                throw new Error(result.error || \"Failed to create a sync session on the server.\");\n            }\n\n            const { code } = result;\n            // Use compact keys to keep QR code data smaller\n            const qrPayload = JSON.stringify({ c: code, k: exportedKey });\n            \n            setSyncPayload({ code, qrData: qrPayload });\n            setExpiryTime(Date.now() + 5 * 60 * 1000);\n            setShareStatus('waiting');\n        } catch (error: any) {\n            console.error(\"Error during share process:\", error);\n            setErrorMessage(error.message || \"An unknown error occurred.\");\n            setMode('error');\n        }\n    }, []);\n    \n     useEffect(() => {\n        if (shareStatus === 'waiting' && syncPayload) {\n            (window as any).QRCode.toDataURL(syncPayload.qrData, {\n                width: 256,\n                margin: 1,\n                errorCorrectionLevel: 'H'\n            }, (err: any, url: string) => {\n                if (err) {\n                    console.error(\"QR Code generation failed:\", err);\n                    setErrorMessage(\"Failed to generate QR code display.\");\n                    setMode('error');\n                } else {\n                    setQrCodeDataUrl(url);\n                }\n            });\n        }\n    }, [shareStatus, syncPayload]);\n\n    const startReceiving = () => {\n        setReceiveStatus('scanning');\n        setMode('receiving');\n        startScanner();\n    };\n\n    const handleBack = () => {\n        if (isScanning) stopScanner();\n        setMode('idle');\n        setErrorMessage(null);\n        onBack();\n    };\n    \n    useEffect(() => { return () => { if (isScanning) stopScanner(); }; }, [isScanning, stopScanner]);\n\n    const renderIdle = () => (\n        <div className=\"max-w-2xl mx-auto text-center\">\n            <button onClick={handleBack} className=\"flex items-center gap-2 mb-6 text-teal-600 dark:text-teal-400 font-semibold hover:text-teal-800 dark:hover:text-teal-300\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"><path fillRule=\"evenodd\" d=\"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l-4-4a1 1 0 011.414 0z\" clipRule=\"evenodd\" /></svg>\n                Back to Settings\n            </button>\n            <div className=\"bg-white dark:bg-slate-800 p-8 rounded-lg shadow-lg\">\n                <h2 className=\"text-3xl font-bold text-slate-700 dark:text-slate-200 mb-2\">Sync Devices</h2>\n                <p className=\"text-slate-500 dark:text-slate-400 mb-8\">Securely transfer your app data between two devices.</p>\n                <div className=\"flex flex-col md:flex-row gap-6\">\n                    <button onClick={startSharing} className=\"flex-1 p-8 border-2 border-slate-200 dark:border-slate-700 rounded-lg hover:border-teal-500 dark:hover:border-teal-400 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-all transform hover:-translate-y-1\">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-16 w-16 mx-auto text-teal-500\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={1.5}><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M9 8.25H7.5a2.25 2.25 0 00-2.25 2.25v9a2.25 2.25 0 002.25 2.25h9a2.25 2.25 0 002.25-2.25v-9a2.25 2.25 0 00-2.25-2.25H15M9 12l3 3m0 0l3-3m-3 3V2.25\" /></svg>\n                        <h3 className=\"text-xl font-bold mt-4 text-slate-800 dark:text-slate-100\">Share Data</h3>\n                        <p className=\"mt-1 text-slate-500 dark:text-slate-400\">Send data from this device.</p>\n                    </button>\n                    <button onClick={startReceiving} className=\"flex-1 p-8 border-2 border-slate-200 dark:border-slate-700 rounded-lg hover:border-teal-500 dark:hover:border-teal-400 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-all transform hover:-translate-y-1\">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-16 w-16 mx-auto text-teal-500\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={1.5}><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m-3 0l3-3m0 0l-3-3m3 3H9\" /></svg>\n                        <h3 className=\"text-xl font-bold mt-4 text-slate-800 dark:text-slate-100\">Receive Data</h3>\n                        <p className=\"mt-1 text-slate-500 dark:text-slate-400\">Load data onto this device.</p>\n                    </button>\n                </div>\n            </div>\n        </div>\n    );\n    \n    const renderSharing = () => (\n         <div className=\"max-w-md mx-auto text-center\">\n            <div className=\"bg-white dark:bg-slate-800 p-8 rounded-lg shadow-lg\">\n                <h2 className=\"text-2xl font-bold text-slate-700 dark:text-slate-200 mb-2\">Share Data</h2>\n                {shareStatus === 'generating' && (\n                    <>\n                        <svg className=\"animate-spin h-12 w-12 text-teal-500 mx-auto my-8\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\"><circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle><path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path></svg>\n                        <p className=\"text-slate-500 dark:text-slate-400\">Generating secure session...</p>\n                    </>\n                )}\n                {shareStatus === 'waiting' && syncPayload && (\n                    <>\n                        <p className=\"text-slate-500 dark:text-slate-400 mb-6\">On your other device, choose \"Receive Data\" and scan this QR code.</p>\n                        <div className=\"my-6 p-4 bg-white rounded-lg inline-block shadow-md\">\n                            {qrCodeDataUrl ? (\n                                <img src={qrCodeDataUrl} alt=\"QR Code for sync\" width=\"256\" height=\"256\"/>\n                            ) : (\n                                <div className=\"w-[256px] h-[256px] bg-slate-200 dark:bg-slate-600 animate-pulse rounded-lg flex items-center justify-center\">\n                                    <p className=\"text-slate-500\">Generating QR...</p>\n                                </div>\n                            )}\n                        </div>\n                        <div className=\"bg-slate-100 dark:bg-slate-700 p-4 rounded-lg\">\n                            <p className=\"text-sm text-slate-500 dark:text-slate-400\">Sync Code</p>\n                            <p className=\"text-4xl font-bold tracking-widest text-slate-800 dark:text-slate-100\">{syncPayload.code.replace(/(\\d{3})(?=\\d)/, '$1 ')}</p>\n                        </div>\n                        <p className=\"text-sm text-slate-500 dark:text-slate-400 mt-4\">\n                            Expires in: <CountdownTimer expiry={expiryTime} onExpire={() => setMode('error')} />\n                        </p>\n                    </>\n                )}\n                <button onClick={handleBack} className=\"mt-6 px-6 py-3 w-full bg-slate-100 text-slate-800 font-semibold rounded-lg hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-100 dark:hover:bg-slate-600 transition-colors\">\n                    Done\n                </button>\n            </div>\n        </div>\n    );\n\n    const renderReceiving = () => {\n         const statusMessage = {\n            scanning: 'Point your camera at the QR code on the other device.',\n            connecting: 'Code found! Connecting to sync service...',\n            decrypting: 'Download complete. Decrypting data...',\n            confirming: 'Awaiting your confirmation...',\n            complete: 'Success! Your data has been imported.'\n        }[receiveStatus];\n        \n        return (\n            <div className=\"max-w-xl mx-auto text-center\">\n                 <div className=\"bg-white dark:bg-slate-800 p-4 sm:p-8 rounded-lg shadow-lg relative aspect-square sm:aspect-auto\">\n                    <video ref={videoRef} className=\"w-full h-auto rounded-lg shadow-inner bg-slate-900\" playsInline autoPlay/>\n                    <div className=\"absolute inset-0 flex flex-col items-center justify-between p-4 bg-black/20 rounded-lg\">\n                        <div className=\"w-full p-3 bg-black/50 rounded-lg text-white font-semibold text-center backdrop-blur-sm\">\n                            <p>{statusMessage}</p>\n                            {scannerError && <p className=\"mt-2 text-sm text-red-300 bg-red-800/80 p-2 rounded-md\">{scannerError}</p>}\n                        </div>\n                        <button onClick={handleBack} className=\"px-8 py-3 bg-slate-600/70 text-white font-semibold rounded-lg text-lg backdrop-blur-sm\">Cancel</button>\n                    </div>\n                 </div>\n            </div>\n        );\n    };\n\n    const renderError = () => (\n         <div className=\"max-w-md mx-auto text-center\">\n            <div className=\"bg-white dark:bg-slate-800 p-8 rounded-lg shadow-lg\">\n                 <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-16 w-16 mx-auto text-red-500\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                    <path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z\" clipRule=\"evenodd\" />\n                </svg>\n                <h2 className=\"text-2xl font-bold text-slate-700 dark:text-slate-200 mt-4 mb-2\">Sync Failed</h2>\n                <p className=\"text-slate-500 dark:text-slate-400 bg-red-50 dark:bg-red-900/30 p-3 rounded-md\">\n                    {errorMessage || \"An unknown error occurred. The sync code may have expired.\"}\n                </p>\n                <button onClick={handleBack} className=\"mt-6 px-6 py-3 w-full bg-slate-100 text-slate-800 font-semibold rounded-lg hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-100 dark:hover:bg-slate-600 transition-colors\">\n                    Go Back\n                </button>\n            </div>\n        </div>\n    );\n\n    switch(mode) {\n        case 'sharing': return renderSharing();\n        case 'receiving': return renderReceiving();\n        case 'error': return renderError();\n        case 'idle':\n        default:\n            return renderIdle();\n    }\n};\n\nexport default SyncComponent;","import React from 'react';\n\nexport const DisclaimerContent: React.FC = () => (\n    <div className=\"space-y-6 text-slate-600 dark:text-slate-300\">\n        <div>\n            <h3 className=\"text-xl font-semibold mb-2 text-slate-800 dark:text-slate-100\">On-Device Data Storage</h3>\n            <p>\n            All your core application data—bills, participants, settings, etc.—is stored exclusively in your browser's <strong>IndexedDB</strong> database. This is a private, sandboxed database that lives directly on your device (your computer or phone).\n            </p>\n            <ul className=\"list-disc list-inside space-y-1 mt-2 pl-2\">\n            <li><strong>We do not have a central database of user bills.</strong></li>\n            <li><strong>We never see or have access to your personal financial data.</strong></li>\n            <li>Because the data is only on your device, you are responsible for it. If you clear your browser data, your information will be permanently lost unless you have created a backup using the \"Export Data\" feature.</li>\n            </ul>\n        </div>\n        \n        <div>\n            <h3 className=\"text-xl font-semibold mb-2 text-slate-800 dark:text-slate-100\">Ephemeral Server Data for Sync & Share</h3>\n            <p>\n            When you use the <strong>\"Sync with Another Device\"</strong> or <strong>\"Share Bill\"</strong> features, a temporary, end-to-end encrypted copy of your data is sent to our server.\n            </p>\n            <ul className=\"list-disc list-inside space-y-1 mt-2 pl-2\">\n                <li>The data is <strong>end-to-end encrypted</strong> on your device before it is sent. This means we, the server operators, cannot read its contents.</li>\n                <li>This encrypted data is stored temporarily in a secure, managed NoSQL database (<strong>Amazon DynamoDB</strong>) and is automatically deleted upon expiration.</li>\n                <li>\"Sync\" data expires and is deleted after <strong>5 minutes</strong>.</li>\n                <li>\"Share Bill\" encrypted data expires and is deleted after <strong>30 days</strong>.</li>\n            </ul>\n            <div className=\"mt-4 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg\">\n                <h4 className=\"font-semibold text-slate-700 dark:text-slate-200\">How Secure Bill Sharing Works</h4>\n                <p className=\"text-sm mt-1\">\n                    To ensure share links are secure and can only be used once to retrieve the bill's key, we use a two-key system.\n                </p>\n                <ul className=\"list-disc list-inside space-y-1 mt-2 pl-2 text-sm\">\n                    <li>A <strong>long-term key</strong> is created to encrypt the bill data itself. This key is what the recipient will store to view the bill long-term.</li>\n                    <li>A <strong>one-time-use key</strong> is generated and embedded directly into the URL fragment of the share link you send. Your browser does not send this part of the URL to our server.</li>\n                    <li>The long-term key is itself encrypted and stored temporarily on our server with a unique ID.</li>\n                    <li>When your friend opens the link, their browser uses the one-time-use key from the URL to securely download and decrypt the long-term key. This long-term key is then <strong>immediately and permanently deleted</strong> from our server.</li>\n                    <li>This process makes the link single-use for key retrieval and ensures we (the server operators) can never read your bill data.</li>\n                </ul>\n            </div>\n        </div>\n\n        <div>\n            <h3 className=\"text-xl font-semibold mb-2 text-slate-800 dark:text-slate-100\">Third-Party Services & Scripts</h3>\n            <p>\n            To provide advanced features, this application interacts with a few external services and utilizes third-party Javascript libraries.\n            </p>\n            <div className=\"mt-4 space-y-4\">\n            <div className=\"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg\">\n                <h4 className=\"font-semibold text-slate-700 dark:text-slate-200\">Google Gemini API</h4>\n                <p className=\"text-sm mt-1\">\n                The \"Scan with AI\" feature sends your receipt image to our server, which securely forwards it to the <strong>Google Gemini API</strong> for analysis. Because this feature relies on Google's powerful AI, <strong>it is the only feature in the app that requires an active internet connection to function.</strong> The extracted text is sent back to your device and is not stored by us. Your use of this feature is subject to Google's Privacy Policy.\n                </p>\n            </div>\n            <div className=\"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg\">\n                <h4 className=\"font-semibold text-slate-700 dark:text-slate-200\">PayPal Subscriptions</h4>\n                <p className=\"text-sm mt-1\">\n                For Pro subscriptions, our server communicates with <strong>PayPal</strong> to handle all billing features. We do not handle or store your credit card or bank information directly; all payment details are securely managed by PayPal. You can manage or cancel your subscription at any time through your PayPal account.\n                </p>\n            </div>\n            <div className=\"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg\">\n                <h4 className=\"font-semibold text-slate-700 dark:text-slate-200\">A-ADS (Anonymous Ads)</h4>\n                <p className=\"text-sm mt-1\">\n                To support the free version of this application, we display advertisements from <strong>A-ADS</strong>. This is a privacy-focused advertising network that does not collect personal data or use tracking cookies. Ads are served in sandboxed <code>iframe</code> elements to prevent them from accessing application content.\n                </p>\n            </div>\n            <div className=\"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg\">\n                <h4 className=\"font-semibold text-slate-700 dark:text-slate-200\">Core Application Libraries</h4>\n                <p className=\"text-sm mt-1\">\n                This web application is built using modern web technologies. To ensure fast performance, core libraries such as <strong>React</strong> are loaded from secure, third-party Content Delivery Networks (CDNs). These external scripts are essential for the application's functionality.\n                </p>\n            </div>\n            </div>\n        </div>\n\n        <div>\n            <h3 className=\"text-xl font-semibold mb-2 text-slate-800 dark:text-slate-100\">No Warranties</h3>\n            <p>\n            This application is provided \"as is,\" without warranty of any kind. We are not responsible for any data loss. We strongly encourage you to use the export feature to back up your data regularly.\n            </p>\n        </div>\n    </div>\n);","import React from 'react';\nimport { DisclaimerContent } from './DisclaimerContent';\n\ninterface DisclaimerProps {\n  onBack: () => void;\n}\n\nconst Disclaimer: React.FC<DisclaimerProps> = ({ onBack }) => {\n  return (\n    <div className=\"max-w-3xl mx-auto\">\n      <button onClick={onBack} className=\"flex items-center gap-2 mb-6 text-teal-600 dark:text-teal-400 font-semibold hover:text-teal-800 dark:hover:text-teal-300\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n          <path fillRule=\"evenodd\" d=\"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l-4-4a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\n        </svg>\n        Back\n      </button>\n\n      <div className=\"bg-white dark:bg-slate-800 p-8 rounded-lg shadow-lg\">\n        <h2 className=\"text-3xl font-bold text-slate-800 dark:text-slate-100 mb-6\">Disclaimer & Data Privacy</h2>\n        <p className=\"text-lg font-medium text-slate-700 dark:text-slate-200 mb-8\">\n            We believe in complete transparency. This application is designed with a \"privacy first\" approach. Here’s exactly how your data is handled.\n        </p>\n        <DisclaimerContent />\n      </div>\n    </div>\n  );\n};\n\nexport default Disclaimer;","import React, { useState, useRef, useEffect } from 'react';\nimport { DisclaimerContent } from './DisclaimerContent';\n\ninterface PrivacyConsentProps {\n  onAccept: () => void;\n}\n\nconst PrivacyConsent: React.FC<PrivacyConsentProps> = ({ onAccept }) => {\n  const [isScrolledToBottom, setIsScrolledToBottom] = useState(false);\n  const scrollableContentRef = useRef<HTMLDivElement>(null);\n\n  const handleScroll = () => {\n    const element = scrollableContentRef.current;\n    if (element && !isScrolledToBottom) {\n      // Check if user is within a small buffer zone of the bottom\n      const isAtBottom = element.scrollHeight - element.scrollTop <= element.clientHeight + 5;\n      if (isAtBottom) {\n        setIsScrolledToBottom(true);\n      }\n    }\n  };\n  \n  // This effect checks if the content is scrollable at all. If not, it enables the button.\n  // It also runs on resize to handle dynamic layout changes.\n  useEffect(() => {\n    const checkScrollability = () => {\n      const element = scrollableContentRef.current;\n      if (element) {\n        if (element.scrollHeight <= element.clientHeight) {\n          setIsScrolledToBottom(true);\n        } else {\n          // Explicitly set to false if it becomes scrollable on resize and isn't at the bottom\n          const isAtBottom = element.scrollHeight - element.scrollTop <= element.clientHeight + 5;\n          setIsScrolledToBottom(isAtBottom);\n        }\n      }\n    };\n\n    // Check initially and on any resize\n    checkScrollability();\n    window.addEventListener('resize', checkScrollability);\n\n    return () => {\n      window.removeEventListener('resize', checkScrollability);\n    };\n  }, []);\n\n  return (\n    <div className=\"min-h-screen bg-slate-50 dark:bg-slate-900 flex flex-col items-center justify-center p-4\">\n      <div className=\"w-full max-w-2xl mx-auto bg-white dark:bg-slate-800 rounded-2xl shadow-xl p-8 text-center flex flex-col max-h-[90vh]\">\n        <div className=\"flex justify-center items-center mb-6 flex-shrink-0\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-12 w-12 text-teal-500\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n            <path fillRule=\"evenodd\" d=\"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z\" clipRule=\"evenodd\" />\n          </svg>\n          <h1 className=\"text-3xl font-bold text-slate-800 dark:text-slate-100 ml-3\">Data & Privacy Policy</h1>\n        </div>\n        \n        <p className=\"text-slate-600 dark:text-slate-300 mb-4 flex-shrink-0\">\n          Please review our data policy below. This app stores all your data on your device for privacy. You must scroll to the bottom to continue.\n        </p>\n\n        <div\n          ref={scrollableContentRef}\n          onScroll={handleScroll}\n          className=\"text-left overflow-y-auto pr-4 mb-6 text-sm border-y border-slate-200 dark:border-slate-700 py-4 flex-grow\"\n        >\n          <DisclaimerContent />\n        </div>\n\n        <div className=\"flex flex-col gap-4 flex-shrink-0\">\n          <button\n            onClick={onAccept}\n            disabled={!isScrolledToBottom}\n            className=\"w-full px-6 py-3 bg-teal-500 text-white font-bold rounded-lg hover:bg-teal-600 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 dark:focus:ring-offset-slate-800 transition-all duration-300 disabled:bg-slate-400 dark:disabled:bg-slate-600 disabled:cursor-not-allowed disabled:opacity-70\"\n          >\n            {isScrolledToBottom ? 'Acknowledge & Continue' : 'Scroll to Continue'}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default PrivacyConsent;","import React, { useState, useEffect, useRef } from 'react';\nimport type { SharedBillPayload, ImportedBill, Settings, PaymentDetails, Bill, RequestConfirmationFn } from '../types';\nimport * as cryptoService from '../services/cryptoService';\nimport PrivacyConsent from './PrivacyConsent';\nimport { getApiUrl, fetchWithRetry } from '../services/api';\nimport PaymentMethodsModal from './PaymentMethodsModal';\nimport SummaryBillDetailsModal from './SummaryBillDetailsModal';\n\ndeclare var pako: any;\n\ninterface ViewSharedBillProps {\n  onImportComplete: () => void;\n  settings: Settings;\n  addImportedBill: (bill: ImportedBill) => Promise<void>;\n  importedBills: ImportedBill[];\n  requestConfirmation: RequestConfirmationFn;\n  bills: Bill[];\n}\n\ntype Status = 'loading' | 'fetching_key' | 'fetching_data' | 'verifying' | 'verified' | 'imported' | 'error' | 'expired';\n\n/**\n * A robust helper to decode a Base64URL string with detailed error reporting.\n * It correctly handles padding, reverses the URL-safe character encoding,\n * decodes the Base64, and interprets the result as a UTF-8 string.\n *\n * @param base64Url The Base64URL-encoded string.\n * @returns The decoded string.\n * @throws An error with a specific message if decoding fails at any step.\n */\nfunction base64UrlDecode(base64Url: string): string {\n    if (typeof base64Url !== 'string' || !base64Url) {\n        // Throw an error that is specific and helpful for debugging.\n        throw new Error('Malformed share link: The key data in the URL is missing, empty, or invalid.');\n    }\n    // Replace URL-safe characters with standard Base64 characters\n    let base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n    \n    // Add padding if it's missing\n    const padding = base64.length % 4;\n    if (padding) {\n        if (padding === 2) base64 += '==';\n        else if (padding === 3) base64 += '=';\n        else throw new Error('Malformed share link: The key data appears to be truncated (invalid length).');\n    }\n\n    try {\n        // atob decodes a Base64 string into a \"binary string\" (where each character's code is a byte value).\n        const binaryString = atob(base64);\n        \n        // Convert the binary string into a Uint8Array of actual bytes.\n        const bytes = new Uint8Array(binaryString.length);\n        for (let i = 0; i < binaryString.length; i++) {\n            bytes[i] = binaryString.charCodeAt(i);\n        }\n        \n        // Use TextDecoder to interpret the byte array as a UTF-8 string.\n        // This is the crucial step for correctly handling Unicode characters.\n        // `fatal: true` ensures an error is thrown for invalid byte sequences.\n        return new TextDecoder('utf-8', { fatal: true }).decode(bytes);\n    } catch (e: any) {\n        if (e instanceof DOMException && e.name === 'InvalidCharacterError') {\n             // This error comes directly from atob() if the input is not valid Base64.\n             throw new Error(\"Failed to decode share link key. The link is corrupted (invalid Base64 characters).\");\n        } else if (e instanceof TypeError) {\n             // This error from TextDecoder means the byte sequence is not valid UTF-8.\n             throw new Error(\"Failed to decode share link key. The data contains an invalid character sequence (not valid UTF-8).\");\n        } else {\n             // Catch any other unexpected errors.\n             throw new Error(`An unexpected error occurred during link decoding: ${e.message}`);\n        }\n    }\n}\n\nexport const ViewSharedBill: React.FC<ViewSharedBillProps> = ({ onImportComplete, settings, addImportedBill, importedBills, requestConfirmation, bills }) => {\n  const [hasAcceptedPrivacy, setHasAcceptedPrivacy] = useState(\n    () => typeof window !== 'undefined' && localStorage.getItem('privacyConsentAccepted') === 'true'\n  );\n  const [status, setStatus] = useState<Status>('loading');\n  const [error, setError] = useState<string | null>(null);\n  const [sharedData, setSharedData] = useState<SharedBillPayload | null>(null);\n  const [lastUpdatedAt, setLastUpdatedAt] = useState<number>(0);\n  const [billEncryptionKey, setBillEncryptionKey] = useState<JsonWebKey | null>(null);\n  const [myParticipantId, setMyParticipantId] = useState<string | null>(null);\n  const [isOwnBill, setIsOwnBill] = useState(false);\n  const [isReceiptModalOpen, setIsReceiptModalOpen] = useState(false);\n  const [isInfoModalOpen, setIsInfoModalOpen] = useState(false);\n  const [isPaymentModalOpen, setIsPaymentModalOpen] = useState(false);\n  const [isSummaryModalOpen, setIsSummaryModalOpen] = useState(false);\n  const navigationCancelled = useRef(false);\n\n  const isAlreadyImported = sharedData ? importedBills.some(b => b.id === sharedData.bill.id) : false;\n\n  // Main data fetching effect, runs only on initial load or hash change\n  useEffect(() => {\n    if (!hasAcceptedPrivacy) return;\n\n    const processShareLink = async () => {\n      // Reset state for new link processing to avoid showing stale data from a previous link.\n      setStatus('loading');\n      setError(null);\n      setSharedData(null);\n      setLastUpdatedAt(0);\n      setBillEncryptionKey(null);\n      setMyParticipantId(null);\n      setIsOwnBill(false);\n\n      try {\n        const hash = window.location.hash;\n        if (!hash.includes('?')) {\n          throw new Error(\"Share link is missing parameters.\");\n        }\n        const params = new URLSearchParams(hash.split('?')[1]);\n        const shareId = params.get('shareId');\n        const keyId = params.get('keyId');\n        const fragmentKeyStr = params.get('fragmentKey');\n        const encryptedParticipantId = params.get('p');\n\n        if (!shareId || !keyId || !fragmentKeyStr || !encryptedParticipantId) {\n          throw new Error(\"Invalid or incomplete share link. All components are required.\");\n        }\n        \n        // 1. Fetch the encrypted long-term key.\n        setStatus('fetching_key');\n        const keyResponse = await fetchWithRetry(await getApiUrl(`/onetime-key/${keyId}`));\n        if (keyResponse.status === 404) {\n          setStatus('expired');\n          setError(\"This share link has already been used or has expired. Please ask for a new one.\");\n          return;\n        }\n        if (!keyResponse.ok) {\n           const errData = await keyResponse.json().catch(() => ({}));\n           throw new Error(errData.error || \"Failed to retrieve the bill key.\");\n        }\n        const keyData = await keyResponse.json();\n        const { encryptedBillKey } = keyData;\n        if (!encryptedBillKey || typeof encryptedBillKey !== 'string') {\n          throw new Error(\"Received an invalid response from the key server. The encrypted key was missing.\");\n        }\n\n        // 2. Decrypt the long-term key using the key from the URL fragment.\n        const fragmentKeyJwk = JSON.parse(base64UrlDecode(fragmentKeyStr));\n        const fragmentKey = await cryptoService.importEncryptionKey(fragmentKeyJwk);\n        const decryptedBillKeyBytes = await cryptoService.decrypt(encryptedBillKey, fragmentKey);\n        \n        // Backward compatibility for old, uncompressed keys\n        let decryptedBillKeyJson: string;\n        try {\n            decryptedBillKeyJson = pako.inflate(decryptedBillKeyBytes, { to: 'string' });\n        } catch (e) {\n            console.warn(\"Could not decompress bill key, assuming legacy format.\");\n            decryptedBillKeyJson = new TextDecoder().decode(decryptedBillKeyBytes);\n        }\n\n        const billKeyToUse: JsonWebKey = JSON.parse(decryptedBillKeyJson);\n        setBillEncryptionKey(billKeyToUse);\n        const symmetricKey = await cryptoService.importEncryptionKey(billKeyToUse);\n        \n        // 3. Decrypt the participant ID from the URL using the now-decrypted bill key.\n        const decryptedParticipantIdBytes = await cryptoService.decrypt(encryptedParticipantId, symmetricKey);\n        const decryptedParticipantId = pako.inflate(decryptedParticipantIdBytes, { to: 'string' });\n        setMyParticipantId(decryptedParticipantId);\n\n        // 4. Fetch the main encrypted bill data\n        setStatus('fetching_data');\n        const response = await fetchWithRetry(await getApiUrl(`/share/${shareId}`));\n        if (!response.ok) {\n           const errData = await response.json().catch(() => ({}));\n           throw new Error(errData.error || \"Failed to retrieve shared bill data.\");\n        }\n        const sharePayload = await response.json();\n        const { encryptedData, lastUpdatedAt: serverTimestamp } = sharePayload;\n\n        if (!encryptedData || typeof encryptedData !== 'string' || typeof serverTimestamp !== 'number') {\n          throw new Error(\"Received invalid bill data from the server. The payload was incomplete.\");\n        }\n        setLastUpdatedAt(serverTimestamp);\n\n        // 5. Decrypt and verify the main payload\n        setStatus('verifying');\n        const decryptedBytes = await cryptoService.decrypt(encryptedData, symmetricKey);\n        const decryptedJson = pako.inflate(decryptedBytes, { to: 'string' });\n        const data: SharedBillPayload = JSON.parse(decryptedJson);\n\n        const publicKey = await cryptoService.importPublicKey(data.publicKey);\n        const isVerified = await cryptoService.verify(JSON.stringify(data.bill), data.signature, publicKey);\n        if (!isVerified) throw new Error(\"Signature verification failed. The bill data may have been tampered with.\");\n        \n        setSharedData(data);\n        setStatus('verified');\n      } catch (err: any) {\n        console.error(\"Error processing share link:\", err);\n        setError(err.message || \"An unknown error occurred.\");\n        setStatus('error');\n      }\n    };\n    processShareLink();\n  }, [hasAcceptedPrivacy, window.location.hash]);\n\n  // Secondary effect to check if the user is importing their own bill.\n  // This runs only after the shared data and local bills are available.\n  useEffect(() => {\n    if (!sharedData || !bills) {\n      return;\n    }\n\n    const incomingPublicKey = sharedData.publicKey;\n    let isSelfImported = false;\n    for (const localBill of bills) {\n        if (localBill.shareInfo?.signingPublicKey) {\n            if (JSON.stringify(localBill.shareInfo.signingPublicKey) === JSON.stringify(incomingPublicKey)) {\n                isSelfImported = true;\n                break;\n            }\n        }\n    }\n    setIsOwnBill(isSelfImported);\n  }, [sharedData, bills]);\n\n  const handleImport = async () => {\n    if (!sharedData || !myParticipantId || !billEncryptionKey) return;\n\n    const myParticipantForName = sharedData.bill.participants.find(p => p.id === myParticipantId);\n    if (!myParticipantForName) {\n        setStatus('error');\n        setError(\"Could not identify you as a participant in this bill. The link may be corrupted.\");\n        return;\n    }\n    const myName = myParticipantForName.name.toLowerCase().trim();\n\n    const initialPaidItems = (sharedData.bill.items || []).reduce((acc, item) => {\n        if (item.originalBillData) {\n            const participantInConstituent = item.originalBillData.participants.find(p => p.name.toLowerCase().trim() === myName);\n            if (participantInConstituent?.paid) {\n                acc[item.id] = true;\n            }\n        }\n        return acc;\n    }, {} as Record<string, boolean>);\n\n    const imported: ImportedBill = {\n        id: sharedData.bill.id,\n        creatorName: sharedData.creatorName,\n        status: 'active',\n        sharedData: {\n            bill: sharedData.bill,\n            creatorPublicKey: sharedData.publicKey,\n            signature: sharedData.signature,\n            paymentDetails: sharedData.paymentDetails,\n        },\n        shareId: new URLSearchParams(window.location.hash.split('?')[1]).get('shareId')!,\n        shareEncryptionKey: billEncryptionKey,\n        constituentShares: sharedData.constituentShares,\n        lastUpdatedAt: lastUpdatedAt,\n        myParticipantId: myParticipantId,\n        localStatus: {\n            myPortionPaid: false,\n            paidItems: initialPaidItems,\n        },\n        isOwnBill: isOwnBill,\n        liveStatus: 'live',\n    };\n\n    await addImportedBill(imported);\n    setStatus('imported');\n    setTimeout(onImportComplete, 1500);\n  };\n\n  const handleAcceptPrivacy = () => {\n    localStorage.setItem('privacyConsentAccepted', 'true');\n    setHasAcceptedPrivacy(true);\n  };\n\n  const renderContent = () => {\n    if (['loading', 'fetching_key', 'fetching_data', 'verifying'].includes(status)) {\n        const messages = {\n            loading: 'Loading bill...',\n            fetching_key: 'Retrieving secure key...',\n            fetching_data: 'Downloading bill data...',\n            verifying: 'Verifying bill integrity...',\n        };\n        return (\n            <div className=\"text-center p-8\">\n                <svg className=\"animate-spin h-10 w-10 text-teal-500 mx-auto mb-4\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\"><circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle><path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path></svg>\n                <h2 className=\"text-xl font-semibold text-slate-700 dark:text-slate-200\">{messages[status as keyof typeof messages]}</h2>\n            </div>\n        );\n    }\n\n    if (status === 'error' || status === 'expired') {\n        return (\n             <div className=\"text-center p-8\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-16 w-16 mx-auto text-red-500\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={1.5}><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z\" /></svg>\n                <h2 className=\"text-2xl font-bold text-slate-800 dark:text-slate-100 mt-4 mb-2\">{status === 'expired' ? 'Link Expired' : 'An Error Occurred'}</h2>\n                <p className=\"text-slate-500 dark:text-slate-400 bg-red-50 dark:bg-red-900/30 p-3 rounded-md\">{error}</p>\n            </div>\n        )\n    }\n\n    if (status === 'imported') {\n        return (\n             <div className=\"text-center p-8\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-16 w-16 mx-auto text-emerald-500\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={1.5}><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" /></svg>\n                <h2 className=\"text-2xl font-bold text-slate-800 dark:text-slate-100 mt-4\">Bill Imported!</h2>\n                <p className=\"text-slate-500 dark:text-slate-400 mt-2\">Redirecting you to the dashboard...</p>\n            </div>\n        )\n    }\n\n    if (sharedData) {\n        const { bill, paymentDetails, creatorName } = sharedData;\n        const myParticipant = bill.participants.find(p => p.id === myParticipantId);\n        const isSummary = bill.id.startsWith('summary-');\n        \n        const hasPaymentInfo = paymentDetails && (paymentDetails.venmo || paymentDetails.paypal || paymentDetails.cashApp || paymentDetails.zelle || paymentDetails.customMessage);\n\n        return (\n            <>\n                {isSummaryModalOpen && isSummary && (\n                    <SummaryBillDetailsModal\n                        summaryBill={bill}\n                        paymentDetails={paymentDetails}\n                        creatorName={creatorName}\n                        myParticipantId={myParticipantId}\n                        onClose={() => setIsSummaryModalOpen(false)}\n                    />\n                )}\n                 {status === 'verified' && !isAlreadyImported && (\n                    <div className=\"p-4 bg-red-100 dark:bg-red-900/40 border-l-4 border-red-500 rounded-r-lg mb-6\" role=\"alert\">\n                        <div className=\"flex\">\n                        <div className=\"flex-shrink-0\">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 text-red-500\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth=\"2\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" />\n                            </svg>\n                        </div>\n                        <div className=\"ml-3\">\n                            <h3 className=\"text-lg font-bold text-red-800 dark:text-red-200\">Important: One-Time Link</h3>\n                            <p className=\"text-sm text-red-700 dark:text-red-300 mt-1\">\n                            This is a secure, single-use link. <strong>Navigating away or closing this page before importing will invalidate the link.</strong> You will need to request a new one from {creatorName} if you leave.\n                            </p>\n                        </div>\n                        </div>\n                    </div>\n                )}\n                <div className=\"bg-white dark:bg-slate-800 p-8 rounded-lg shadow-lg\">\n                    <div className=\"flex flex-col md:flex-row justify-between md:items-start mb-2\">\n                        <div className=\"flex-grow\">\n                        <h2 className=\"text-3xl font-bold text-slate-800 dark:text-slate-100\">{bill.description}</h2>\n                        <p className=\"text-slate-500 dark:text-slate-400 mt-1\">{new Date(bill.date).toLocaleDateString()}</p>\n                        </div>\n                        <div className=\"text-3xl font-extrabold text-slate-900 dark:text-slate-50 text-right mt-4 md:mt-0\">\n                        ${bill.totalAmount.toFixed(2)}\n                        </div>\n                    </div>\n                    \n                    <div className=\"my-2 flex flex-wrap gap-x-4 gap-y-2\">\n                        {bill.receiptImage && (<button onClick={() => setIsReceiptModalOpen(true)} className=\"inline-flex items-center gap-2 text-sm text-teal-600 dark:text-teal-400 font-semibold hover:underline\"><svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fillRule=\"evenodd\" d=\"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z\" clipRule=\"evenodd\" /></svg>View Scanned Receipt</button>)}\n                        {bill.additionalInfo && Object.keys(bill.additionalInfo).length > 0 && (<button onClick={() => setIsInfoModalOpen(true)} className=\"inline-flex items-center gap-2 text-sm text-teal-600 dark:text-teal-400 font-semibold hover:underline\"><svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clipRule=\"evenodd\" /></svg>View Additional Info</button>)}\n                        {isSummary && (\n                             <button onClick={() => setIsSummaryModalOpen(true)} className=\"inline-flex items-center gap-1.5 text-sm text-teal-600 dark:text-teal-400 font-semibold hover:underline\">\n                                <span>📝</span>\n                                <span>View Bill Breakdown</span>\n                            </button>\n                        )}\n                    </div>\n                    \n                    <div className=\"my-6 border-t border-slate-200 dark:border-slate-700\" />\n                    \n                    {myParticipant ? (\n                        <div>\n                            <h3 className=\"text-xl font-semibold mb-4 text-slate-700 dark:text-slate-200\">This Bill Is For You</h3>\n                             <div className=\"p-4 rounded-lg bg-teal-50 dark:bg-teal-900/40 border-2 border-teal-500/50 flex items-center justify-between\">\n                                <div className=\"flex items-center gap-4\">\n                                    <div className=\"flex-shrink-0 h-10 w-10 rounded-full bg-teal-500 flex items-center justify-center text-white font-bold text-lg\">\n                                        {myParticipant.name.charAt(0)}\n                                    </div>\n                                    <div>\n                                        <p className=\"font-bold text-lg text-slate-800 dark:text-slate-100\">{myParticipant.name}</p>\n                                        <p className=\"text-sm font-semibold text-slate-600 dark:text-slate-300\">You Owe: ${myParticipant.amountOwed.toFixed(2)}</p>\n                                    </div>\n                                </div>\n                                <div className={`px-3 py-1 text-sm font-semibold rounded-full ${myParticipant.paid ? 'bg-emerald-100 text-emerald-800 dark:bg-emerald-900/50 dark:text-emerald-300' : 'bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300'}`}>\n                                    {myParticipant.paid ? 'Paid' : 'Unpaid'}\n                                </div>\n                            </div>\n                            \n                            <div className=\"mt-8 flex flex-col sm:flex-row gap-3\">\n                                {hasPaymentInfo && !myParticipant.paid && (\n                                    <button\n                                        onClick={() => setIsPaymentModalOpen(true)}\n                                        className=\"w-full flex-1 px-6 py-3 bg-emerald-500 text-white font-bold rounded-lg hover:bg-emerald-600 transition-colors order-1 sm:order-none\"\n                                    >\n                                        Settle Up\n                                    </button>\n                                )}\n                                <button \n                                    onClick={handleImport} \n                                    disabled={!myParticipantId || isAlreadyImported} \n                                    className=\"w-full flex-1 px-6 py-3 bg-teal-500 text-white font-bold rounded-lg hover:bg-teal-600 disabled:bg-slate-400 dark:disabled:bg-slate-600 disabled:cursor-not-allowed transition-colors order-2 sm:order-none\"\n                                >\n                                    {isAlreadyImported ? 'Bill Already in Dashboard' : 'Import This Bill'}\n                                </button>\n                            </div>\n\n                        </div>\n                    ) : (\n                         <div className=\"p-4 rounded-lg bg-red-50 dark:bg-red-900/30 text-center\">\n                            <p className=\"font-semibold text-red-800 dark:text-red-200\">\n                                Your participant ID was not found in this bill. The bill may have been updated since this link was shared.\n                            </p>\n                         </div>\n                    )}\n                </div>\n\n                {isReceiptModalOpen && bill.receiptImage && (<div className=\"fixed inset-0 bg-black bg-opacity-80 z-50 flex justify-center items-center p-4\" onClick={() => setIsReceiptModalOpen(false)} role=\"dialog\" aria-modal=\"true\" aria-label=\"Receipt Image Viewer\"><div className=\"relative max-w-4xl max-h-[90vh]\" onClick={e => e.stopPropagation()}><img src={bill.receiptImage} alt=\"Scanned receipt\" className=\"w-full h-full object-contain rounded-lg shadow-2xl\" /><button onClick={() => setIsReceiptModalOpen(false)} className=\"absolute -top-3 -right-3 bg-white text-slate-800 rounded-full p-2 shadow-lg hover:bg-slate-200 focus:outline-none focus:ring-2 focus:ring-white\" aria-label=\"Close receipt view\"><svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M6 18L18 6M6 6l12 12\" /></svg></button></div></div>)}\n                {isInfoModalOpen && bill.additionalInfo && (<div className=\"fixed inset-0 bg-black bg-opacity-80 z-50 flex justify-center items-center p-4\" onClick={() => setIsInfoModalOpen(false)} role=\"dialog\" aria-modal=\"true\" aria-labelledby=\"info-dialog-title\"><div className=\"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-lg flex flex-col max-h-[80vh]\" onClick={e => e.stopPropagation()}><div className=\"p-6 border-b border-slate-200 dark:border-slate-700\"><h3 id=\"info-dialog-title\" className=\"text-xl font-bold text-slate-800 dark:text-slate-100\">Additional Information</h3></div><div className=\"p-6 flex-grow overflow-y-auto\"><dl className=\"space-y-4\">{Object.entries(bill.additionalInfo).map(([key, value]) => (<div key={key} className=\"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-md\"><dt className=\"text-sm font-medium text-slate-500 dark:text-slate-400 truncate\">{key}</dt><dd className=\"mt-1 text-slate-800 dark:text-slate-100 whitespace-pre-wrap\">{String(value)}</dd></div>))}</dl></div><div className=\"p-4 bg-slate-50 dark:bg-slate-800/50 border-t border-slate-200 dark:border-slate-700 flex justify-end\"><button onClick={() => setIsInfoModalOpen(false)} className=\"px-5 py-2 bg-teal-500 text-white font-bold rounded-lg hover:bg-teal-600 transition-colors\">Close</button></div></div></div>)}\n                {isPaymentModalOpen && sharedData && myParticipant && (\n                    <PaymentMethodsModal\n                        paymentDetails={sharedData.paymentDetails}\n                        billDescription={sharedData.bill.description}\n                        amountOwed={myParticipant.amountOwed}\n                        creatorName={creatorName}\n                        onClose={() => setIsPaymentModalOpen(false)}\n                    />\n                )}\n            </>\n        );\n    }\n  };\n\n  if (!hasAcceptedPrivacy) {\n    return (\n      <div className=\"max-w-xl mx-auto py-8\">\n        <PrivacyConsent onAccept={handleAcceptPrivacy} />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-xl mx-auto\">\n      {renderContent()}\n    </div>\n  );\n};\n","import React, { useRef, useState } from 'react';\nimport type { RecurringBill, DashboardLayoutMode } from '../types';\nimport RecurringBillCard from './RecurringBillCard';\n\ninterface SwipeableRecurringBillCardProps {\n  bill: RecurringBill;\n  onClick: () => void;\n  onEdit: () => void;\n  onArchive: () => void;\n  onUnarchive: () => void;\n  onDelete: () => void;\n  layoutMode: DashboardLayoutMode;\n}\n\nconst ACTION_BUTTON_WIDTH = 70;\n\nconst SwipeableRecurringBillCard: React.FC<SwipeableRecurringBillCardProps> = ({ bill, onClick, onEdit, onArchive, onUnarchive, onDelete, layoutMode }) => {\n  const [translateX, setTranslateX] = useState(0);\n  const dragStartX = useRef(0);\n  const dragStartY = useRef(0);\n  const dragInitialTranslateX = useRef(0);\n  const cardRef = useRef<HTMLDivElement>(null);\n  const isDragging = useRef(false);\n  const isScrolling = useRef(false);\n  const dragStartTime = useRef(0);\n\n  const isArchived = bill.status === 'archived';\n  const maxTranslateX = layoutMode === 'card' ? -(ACTION_BUTTON_WIDTH * (isArchived ? 2 : 3)) : 0;\n\n  const handleDragStart = (clientX: number, clientY: number) => {\n    isDragging.current = true;\n    isScrolling.current = false;\n    dragStartX.current = clientX;\n    dragStartY.current = clientY;\n    dragInitialTranslateX.current = translateX;\n    dragStartTime.current = Date.now();\n    if (cardRef.current) {\n        cardRef.current.style.transition = 'none';\n    }\n  };\n\n  const handleDragMove = (clientX: number, clientY: number) => {\n    if (!isDragging.current) return;\n    if (isScrolling.current) return;\n\n    const deltaX = clientX - dragStartX.current;\n    const deltaY = clientY - dragStartY.current;\n\n    if (Math.abs(deltaY) > 5 || Math.abs(deltaX) > 5) {\n        if (Math.abs(deltaY) > Math.abs(deltaX)) {\n            isScrolling.current = true;\n            // This is a scroll. Stop tracking it as a drag for the swipeable component.\n            isDragging.current = false;\n            // If we started to drag a bit horizontally, snap back immediately.\n            if (translateX !== 0) {\n                if (cardRef.current) {\n                    cardRef.current.style.transition = 'transform 0.2s ease-out';\n                }\n                setTranslateX(0);\n            }\n            return;\n        }\n    }\n\n    const newTranslateX = dragInitialTranslateX.current + deltaX;\n    const newClampedTranslateX = Math.min(20, Math.max(maxTranslateX - 20, newTranslateX));\n    setTranslateX(newClampedTranslateX);\n  };\n\n  const handleDragEnd = (e?: React.TouchEvent | React.MouseEvent) => {\n    if (!isDragging.current) return;\n    \n    const wasScrolling = isScrolling.current;\n    isDragging.current = false;\n    isScrolling.current = false;\n    \n    if (cardRef.current) {\n        cardRef.current.style.transition = 'transform 0.4s cubic-bezier(0.2, 0.8, 0.2, 1)';\n    }\n\n    if (wasScrolling) {\n        setTranslateX(0);\n        return;\n    }\n    \n    const dragDuration = Date.now() - dragStartTime.current;\n    const dragDistance = translateX - dragInitialTranslateX.current;\n    \n    if (dragDuration < 250 && Math.abs(dragDistance) < 10) {\n      if (dragInitialTranslateX.current !== 0) { \n        setTranslateX(0); \n      } else { \n        // This is a tap. Prevent the ghost click for touch events.\n        if (e && e.type === 'touchend') {\n            e.preventDefault();\n        }\n        onClick(); \n      }\n      return;\n    }\n    \n    if (translateX < maxTranslateX / 2) { setTranslateX(maxTranslateX); } else { setTranslateX(0); }\n  };\n  \n  const executeAction = (action: () => void) => {\n    action();\n    setTranslateX(0);\n  };\n\n  return (\n    <div className={`relative w-full ${layoutMode === 'card' ? 'overflow-hidden' : ''}`}>\n      {layoutMode === 'card' && (\n        <div className=\"absolute top-0 right-0 h-full flex items-center z-0\">\n          {!isArchived && (\n              <button onClick={() => executeAction(onEdit)} className=\"h-full w-[70px] flex flex-col items-center justify-center bg-indigo-500 text-white transition-colors hover:bg-indigo-600\" aria-label='Edit Template'>\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path d=\"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z\" /><path fillRule=\"evenodd\" d=\"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z\" clipRule=\"evenodd\" /></svg>\n                <span className=\"text-xs mt-1\">Edit</span>\n              </button>\n          )}\n          <button onClick={() => executeAction(isArchived ? onUnarchive : onArchive)} className=\"h-full w-[70px] flex flex-col items-center justify-center bg-blue-500 text-white transition-colors hover:bg-blue-600\" aria-label={isArchived ? 'Unarchive' : 'Archive'}>\n            {isArchived ? <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12\" /></svg> : <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4\" /></svg>}\n            <span className=\"text-xs mt-1\">{isArchived ? 'Unarchive' : 'Archive'}</span>\n          </button>\n          <button onClick={() => executeAction(onDelete)} className=\"h-full w-[70px] flex flex-col items-center justify-center bg-red-500 text-white transition-colors hover:bg-red-600\" aria-label=\"Delete\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" /></svg>\n            <span className=\"text-xs mt-1\">Delete</span>\n          </button>\n        </div>\n      )}\n\n      <div \n        ref={cardRef} \n        className=\"relative z-10\" \n        style={{ transform: `translateX(${translateX}px)`, touchAction: 'pan-y' }} \n        onTouchStart={e => handleDragStart(e.touches[0].clientX, e.touches[0].clientY)} \n        onTouchMove={e => handleDragMove(e.touches[0].clientX, e.touches[0].clientY)} \n        onTouchEnd={e => handleDragEnd(e)} \n        onMouseDown={e => handleDragStart(e.clientX, e.clientY)} \n        onMouseMove={e => handleDragMove(e.clientX, e.clientY)} \n        onMouseUp={e => handleDragEnd(e)} \n        onMouseLeave={() => handleDragEnd()}\n      >\n        <RecurringBillCard bill={bill} onClick={() => { /* Click handled in dragEnd */ }} layoutMode={layoutMode} />\n      </div>\n    </div>\n  );\n};\n\nexport default SwipeableRecurringBillCard;","\n\nimport React, { useState } from 'react';\nimport type { RecurringBill } from '../types';\nimport SwipeableRecurringBillCard from './SwipeableRecurringBillCard';\n\ninterface RecurringBillsListProps {\n  recurringBills: RecurringBill[];\n  onCreateFromTemplate: (template: RecurringBill) => void;\n  onEditTemplate: (template: RecurringBill) => void;\n  onArchive: (billId: string) => void;\n  onUnarchive: (billId: string) => void;\n  onDelete: (billId: string) => void;\n  onBack: () => void;\n}\n\nconst RecurringBillsList: React.FC<RecurringBillsListProps> = ({\n  recurringBills,\n  onCreateFromTemplate,\n  onEditTemplate,\n  onArchive,\n  onUnarchive,\n  onDelete,\n  onBack,\n}) => {\n  const [statusFilter, setStatusFilter] = useState<'active' | 'archived'>('active');\n  \n  const filteredBills = recurringBills.filter(b => b.status === statusFilter);\n\n  return (\n    <div>\n      <button onClick={onBack} className=\"flex items-center gap-2 mb-6 text-teal-600 dark:text-teal-400 font-semibold hover:text-teal-800 dark:hover:text-teal-300\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n          <path fillRule=\"evenodd\" d=\"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l-4-4a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\n        </svg>\n        Back to Dashboard\n      </button>\n\n       <div className=\"mb-6 flex flex-col sm:flex-row justify-between sm:items-center gap-4\">\n          <h2 className=\"text-3xl font-bold text-slate-700 dark:text-slate-200\">Recurring Bills</h2>\n          <div className=\"flex items-center space-x-1 bg-slate-200 dark:bg-slate-700 p-1 rounded-lg self-start sm:self-center\">\n             <button onClick={() => setStatusFilter('active')} className={`px-3 py-1 text-sm font-semibold rounded-md transition-colors ${statusFilter === 'active' ? 'bg-white dark:bg-slate-800 shadow text-teal-600 dark:text-teal-400' : 'text-slate-600 dark:text-slate-300'}`}>Active</button>\n             <button onClick={() => setStatusFilter('archived')} className={`px-3 py-1 text-sm font-semibold rounded-md transition-colors ${statusFilter === 'archived' ? 'bg-white dark:bg-slate-800 shadow text-teal-600 dark:text-teal-400' : 'text-slate-600 dark:text-slate-300'}`}>Archived</button>\n          </div>\n      </div>\n      \n      {filteredBills.length > 0 ? (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {filteredBills.map(bill => (\n            <SwipeableRecurringBillCard\n              key={bill.id}\n              bill={bill}\n              onClick={() => onCreateFromTemplate(bill)}\n              onEdit={() => onEditTemplate(bill)}\n              onArchive={() => onArchive(bill.id)}\n              onUnarchive={() => onUnarchive(bill.id)}\n              onDelete={() => onDelete(bill.id)}\n              // FIX: The layout for this view is always 'card', so pass the required prop.\n              layoutMode=\"card\"\n            />\n          ))}\n        </div>\n      ) : (\n        <div className=\"text-center py-16 px-6 bg-white dark:bg-slate-800 rounded-lg shadow\">\n          <svg className=\"mx-auto h-12 w-12 text-slate-400 dark:text-slate-500\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" aria-hidden=\"true\">\n            <path vectorEffect=\"non-scaling-stroke\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 4v5h5M4 18v-5h5m10-4h5v5h-5M14 18h5v-5h-5\" />\n          </svg>\n          <h3 className=\"mt-2 text-xl font-medium text-slate-900 dark:text-slate-100\">\n            No {statusFilter} recurring bills\n          </h3>\n          <p className=\"mt-1 text-slate-500 dark:text-slate-400\">\n            {statusFilter === 'active' ? 'Create a new recurring bill template to get started.' : 'Archived templates will appear here.'}\n          </p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default RecurringBillsList;","import { useState, useEffect, useCallback } from 'react';\nimport type { PayPalSubscriptionDetails } from '../types';\nimport { getManagedPayPalSubscriptions, saveManagedPayPalSubscriptions } from '../services/db';\nimport { getApiUrl, fetchWithRetry } from '../services/api';\nimport type { SubscriptionDetails } from '../services/db';\n\nexport const useSubscriptionManager = (currentDeviceSubscription: SubscriptionDetails | null) => {\n  const [managedSubscriptions, setManagedSubscriptions] = useState<PayPalSubscriptionDetails[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const fetchAndSetSubscriptions = useCallback(async () => {\n    setIsLoading(true);\n    try {\n      const storedSubs = await getManagedPayPalSubscriptions();\n      const subsMap = new Map(storedSubs.map(s => [s.id, { ...s, isCurrentDevice: false }]));\n\n      if (currentDeviceSubscription && currentDeviceSubscription.provider === 'paypal') {\n        if (!subsMap.has(currentDeviceSubscription.subscriptionId)) {\n          // If the current device's sub isn't stored, fetch its details.\n          try {\n            const response = await fetchWithRetry(await getApiUrl(`/paypal-subscription-details?id=${currentDeviceSubscription.subscriptionId}`));\n            if (!response.ok) throw new Error('Could not verify current subscription.');\n            const details = await response.json();\n            subsMap.set(details.id, details);\n          } catch (e) {\n            console.error(\"Failed to fetch primary subscription details, it may have been cancelled:\", e);\n          }\n        }\n      }\n      \n      // Ensure the current device's subscription is marked correctly\n      if (currentDeviceSubscription) {\n          const current = subsMap.get(currentDeviceSubscription.subscriptionId);\n          if (current) {\n              subsMap.set(current.id, { ...current, isCurrentDevice: true });\n          }\n      }\n      \n      const allSubs = Array.from(subsMap.values()).sort((a, b) => (b.isCurrentDevice ? 1 : -1));\n      setManagedSubscriptions(allSubs);\n      await saveManagedPayPalSubscriptions(allSubs);\n\n    } catch (err) {\n      console.error(\"Failed to load managed subscriptions:\", err);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [currentDeviceSubscription]);\n\n  useEffect(() => {\n    fetchAndSetSubscriptions();\n  }, [fetchAndSetSubscriptions]);\n\n  const addSubscription = useCallback(async (subscriptionId: string): Promise<PayPalSubscriptionDetails> => {\n    const response = await fetchWithRetry(await getApiUrl(`/paypal-subscription-details?id=${subscriptionId}`));\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({}));\n      throw new Error(errorData.error || 'Could not find or verify this subscription ID.');\n    }\n    const details: PayPalSubscriptionDetails = await response.json();\n    \n    setManagedSubscriptions(prev => {\n      const newSubs = [...prev.filter(s => s.id !== details.id), details];\n      newSubs.sort((a, b) => (b.isCurrentDevice ? 1 : -1));\n      saveManagedPayPalSubscriptions(newSubs);\n      return newSubs;\n    });\n    return details;\n  }, []);\n\n  const removeSubscription = useCallback(async (subscriptionId: string) => {\n    setManagedSubscriptions(prev => {\n        const newSubs = prev.filter(s => s.id !== subscriptionId);\n        saveManagedPayPalSubscriptions(newSubs);\n        return newSubs;\n    });\n  }, []);\n\n  return { managedSubscriptions, addSubscription, removeSubscription, isLoading };\n};\n","import React, { useState, useEffect, useCallback } from 'react';\nimport type { RequestConfirmationFn, PayPalSubscriptionDetails } from '../types';\nimport { useAuth } from '../hooks/useAuth';\nimport { useAppControl } from '../contexts/AppControlContext';\nimport { getApiUrl, fetchWithRetry } from '../services/api';\nimport { useSubscriptionManager } from '../hooks/useSubscriptionManager';\n\ninterface ManageSubscriptionPageProps {\n  onBack: () => void;\n  requestConfirmation: RequestConfirmationFn;\n}\n\nconst ManageSubscriptionPage: React.FC<ManageSubscriptionPageProps> = ({ onBack, requestConfirmation }) => {\n  const { subscriptionDetails, logout } = useAuth();\n  const { showNotification } = useAppControl();\n  const { managedSubscriptions, addSubscription, removeSubscription, isLoading: isManagerLoading } = useSubscriptionManager(subscriptionDetails);\n  \n  const [isCancelling, setIsCancelling] = useState<string | null>(null);\n  const [isAdding, setIsAdding] = useState(false);\n  const [addError, setAddError] = useState<string | null>(null);\n  const [newSubId, setNewSubId] = useState('');\n\n  const handleCancelSubscription = (subId: string) => {\n    if (!subscriptionDetails) return;\n\n    requestConfirmation(\n      'Cancel Subscription?',\n      `Are you sure you want to cancel subscription ${subId}? This action is permanent.`,\n      async () => {\n        setIsCancelling(subId);\n        try {\n          const response = await fetchWithRetry(await getApiUrl('/cancel-subscription'), {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n              provider: 'paypal',\n              subscriptionId: subId,\n            }),\n          });\n\n          if (response.status !== 204 && response.status !== 200) {\n            const errorData = await response.json().catch(() => ({}));\n            throw new Error(errorData.error || `Failed to cancel subscription. Status: ${response.status}`);\n          }\n          \n          showNotification('Subscription cancelled successfully.');\n\n          if (subId === subscriptionDetails.subscriptionId) {\n            logout();\n          } else {\n            removeSubscription(subId);\n          }\n        } catch (err: any) {\n          showNotification(err.message || 'An unknown error occurred.', 'error');\n        } finally {\n          setIsCancelling(null);\n        }\n      },\n      { confirmText: 'Yes, Cancel', confirmVariant: 'danger' }\n    );\n  };\n  \n  const handleAddSubscription = async () => {\n      const idToAdd = newSubId.trim();\n      if (!idToAdd) return;\n      if (managedSubscriptions.some(s => s.id === idToAdd)) {\n          setAddError(\"This subscription has already been added.\");\n          return;\n      }\n\n      setIsAdding(true);\n      setAddError(null);\n      try {\n        const details = await addSubscription(idToAdd);\n        showNotification(`Successfully added subscription ${details.id}.`);\n        setNewSubId('');\n      } catch (err: any) {\n          setAddError(err.message);\n      } finally {\n          setIsAdding(false);\n      }\n  };\n\n  const SubscriptionCard: React.FC<{ sub: PayPalSubscriptionDetails }> = ({ sub }) => (\n    <div className={`p-4 rounded-lg border-2 ${sub.isCurrentDevice ? 'bg-teal-50 dark:bg-teal-900/40 border-teal-500/50' : 'bg-slate-50 dark:bg-slate-700/50 border-slate-200 dark:border-slate-700'}`}>\n      {sub.isCurrentDevice && <p className=\"text-xs font-bold text-teal-600 dark:text-teal-400 mb-2\">CURRENT DEVICE</p>}\n      <div className=\"flex flex-col sm:flex-row justify-between sm:items-center gap-4\">\n        <div>\n          <p className=\"font-mono text-sm text-slate-500 dark:text-slate-400 break-all\">{sub.id}</p>\n          <p className=\"font-semibold text-slate-800 dark:text-slate-100 capitalize\">{sub.plan} Plan &bull; Started {new Date(sub.startTime).toLocaleDateString()}</p>\n        </div>\n        <div className=\"flex-shrink-0\">\n          <button\n            onClick={() => handleCancelSubscription(sub.id)}\n            disabled={!!isCancelling}\n            className=\"px-4 py-2 bg-red-600 text-white font-semibold text-sm rounded-lg hover:bg-red-700 disabled:bg-slate-400\"\n          >\n            {isCancelling === sub.id ? 'Cancelling...' : 'Cancel'}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n\n  return (\n    <div className=\"max-w-3xl mx-auto\">\n      <button onClick={onBack} className=\"flex items-center gap-2 mb-6 text-teal-600 dark:text-teal-400 font-semibold hover:text-teal-800 dark:hover:text-teal-300\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fillRule=\"evenodd\" d=\"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l-4-4a1 1 0 011.414 0z\" clipRule=\"evenodd\" /></svg>\n        Back to Settings\n      </button>\n\n      <div className=\"bg-white dark:bg-slate-800 p-8 rounded-lg shadow-lg\">\n        <h2 className=\"text-3xl font-bold text-slate-700 dark:text-slate-200 mb-2\">Manage PayPal Subscriptions</h2>\n        <p className=\"text-slate-500 dark:text-slate-400 mb-6\">View and cancel any active subscriptions linked to your PayPal account for this app.</p>\n        \n        {isManagerLoading ? (\n            <p className=\"text-center p-8\">Loading subscriptions...</p>\n        ) : (\n            <div className=\"space-y-4\">\n              {managedSubscriptions.map(sub => <SubscriptionCard key={sub.id} sub={sub} />)}\n            </div>\n        )}\n        \n        <div className=\"mt-8 pt-6 border-t border-slate-200 dark:border-slate-700\">\n            <h3 className=\"text-lg font-semibold text-slate-700 dark:text-slate-200\">Link Another Subscription</h3>\n            <p className=\"text-sm text-slate-500 dark:text-slate-400 mt-1 mb-4\">\n                If you have other active subscriptions (e.g., from another device), you can add them here to manage them. You can find your Subscription ID (starts with \"I-...\") in your PayPal account under \"Automatic Payments\".\n            </p>\n            <div className=\"flex flex-col sm:flex-row gap-3\">\n                 <input\n                    type=\"text\"\n                    value={newSubId}\n                    onChange={(e) => setNewSubId(e.target.value)}\n                    placeholder=\"Enter Subscription ID (I-...)\"\n                    className=\"flex-grow w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-teal-500 focus:border-teal-500 bg-white dark:bg-slate-700 dark:border-slate-600 text-slate-900 dark:text-slate-100\"\n                  />\n                  <button\n                    onClick={handleAddSubscription}\n                    disabled={isAdding || !newSubId.trim()}\n                    className=\"px-5 py-2 bg-teal-500 text-white font-bold rounded-lg hover:bg-teal-600 disabled:bg-slate-400\"\n                  >\n                    {isAdding ? 'Verifying...' : 'Add'}\n                  </button>\n            </div>\n            {addError && <p className=\"text-sm text-red-500 mt-2\">{addError}</p>}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ManageSubscriptionPage;","import React from 'react';\nimport type { Group } from '../../types';\nimport type { ParticipantData } from '../ParticipantList';\n\ninterface GroupRemindersModalProps {\n  group: Group;\n  participantsWithDebt: ParticipantData[];\n  onClose: () => void;\n  onRemind: (participant: ParticipantData) => void;\n}\n\nconst GroupRemindersModal: React.FC<GroupRemindersModalProps> = ({ group, participantsWithDebt, onClose, onRemind }) => {\n  const debtMap = new Map<string, ParticipantData>(participantsWithDebt.map(p => [p.name, p]));\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4 backdrop-blur-sm\" onClick={onClose}>\n      <div className=\"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-lg flex flex-col max-h-[90vh]\" onClick={e => e.stopPropagation()}>\n        <div className=\"p-6 border-b border-slate-200 dark:border-slate-700 flex-shrink-0\">\n          <h3 className=\"text-xl font-bold text-slate-800 dark:text-slate-100\">Remind Group Members</h3>\n          <p className=\"text-sm text-slate-500 dark:text-slate-400 mt-1\">Send reminders for outstanding balances across all bills.</p>\n        </div>\n        <div className=\"p-6 flex-grow overflow-y-auto\">\n          <ul className=\"space-y-3\">\n            {group.participants.map(p => {\n              const debtInfo = debtMap.get(p.name);\n              const hasDebt = debtInfo && debtInfo.type === 'owed' && debtInfo.amount > 0;\n              return (\n                <li key={p.id} className=\"flex items-center justify-between p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg\">\n                  <div className=\"flex items-center gap-3\">\n                    <div className=\"flex-shrink-0 h-8 w-8 rounded-full bg-teal-500 flex items-center justify-center text-white font-bold text-xs\">{p.name.charAt(0)}</div>\n                    <span className=\"font-semibold text-slate-800 dark:text-slate-100\">{p.name}</span>\n                  </div>\n                  {hasDebt ? (\n                    <div className=\"flex items-center gap-2\">\n                        <span className=\"text-sm font-semibold text-amber-600 dark:text-amber-400\">Owes ${debtInfo.amount.toFixed(2)}</span>\n                        <button onClick={() => onRemind(debtInfo)} className=\"px-3 py-1.5 text-xs font-semibold rounded-full bg-teal-500 text-white hover:bg-teal-600\">\n                            Remind\n                        </button>\n                    </div>\n                  ) : (\n                    <span className=\"text-sm font-semibold text-emerald-600 dark:text-emerald-400\">All settled</span>\n                  )}\n                </li>\n              );\n            })}\n          </ul>\n        </div>\n        <div className=\"p-4 bg-slate-50 dark:bg-slate-800/50 border-t border-slate-200 dark:border-slate-700 flex justify-end flex-shrink-0\">\n          <button onClick={onClose} className=\"px-5 py-2 bg-teal-500 text-white font-bold rounded-lg hover:bg-teal-600 transition-colors\">\n            Done\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default GroupRemindersModal;","import React, { useState, useMemo, useCallback } from 'react';\nimport type { Group, Bill, Participant, Settings } from '../../types';\nimport { View } from '../../types';\nimport type { ParticipantData } from '../ParticipantList';\nimport type { SubscriptionStatus } from '../../hooks/useAuth';\nimport GroupRemindersModal from './GroupRemindersModal';\nimport ShareActionSheet from '../ShareActionSheet';\nimport { generateShareText, generateOneTimeShareLink } from '../../services/shareService';\nimport { useAppControl } from '../../contexts/AppControlContext';\n\ninterface GroupDetailsViewProps {\n  group: Group;\n  participantsData: ParticipantData[];\n  bills: Bill[];\n  settings: Settings;\n  subscriptionStatus: SubscriptionStatus;\n  onBack: () => void;\n  onSelectParticipant: (name: string) => void;\n  onUpdateMultipleBills: (bills: Bill[]) => Promise<void>;\n  navigate: (view: View, params?: any) => void;\n}\n\nconst GroupDetailsView: React.FC<GroupDetailsViewProps> = ({ group, participantsData, bills, settings, subscriptionStatus, onBack, onSelectParticipant, onUpdateMultipleBills, navigate }) => {\n  const [isRemindersModalOpen, setIsRemindersModalOpen] = useState(false);\n  const [shareSheetParticipant, setShareSheetParticipant] = useState<ParticipantData | null>(null);\n  const { showNotification } = useAppControl();\n\n  const groupParticipantsWithDebt = useMemo(() => {\n    const participantNamesInGroup = new Set(group.participants.map(p => p.name));\n    return participantsData.filter(pd => participantNamesInGroup.has(pd.name));\n  }, [group, participantsData]);\n\n  const handleRemindParticipant = (participant: ParticipantData) => {\n    setIsRemindersModalOpen(false);\n    setShareSheetParticipant(participant);\n  };\n\n  const getShareTextForParticipant = useCallback((participantName: string): string => {\n    const participantData = participantsData.find(p => p.name === participantName && p.type === 'owed');\n    if (!participantData) return \"No outstanding bills found.\";\n    const activeBills = bills.filter(b => b.status === 'active');\n    const billsInfo = activeBills.filter(b => b.participants.some(p => p.name === participantName && !p.paid && p.amountOwed > 0)).map(b => ({ description: b.description, amountOwed: b.participants.find(p => p.name === participantName)!.amountOwed }));\n    return generateShareText(participantName, participantData.amount, billsInfo, settings, subscriptionStatus);\n  }, [participantsData, bills, settings, subscriptionStatus]);\n\n  const handleShareGeneric = async (participant: ParticipantData) => {\n    const shareText = getShareTextForParticipant(participant.name);\n    try {\n      if (navigator.share) await navigator.share({ title: 'Bill Split Reminder', text: shareText });\n      else {\n        await navigator.clipboard.writeText(shareText);\n        showNotification('Share text copied to clipboard!');\n      }\n    } catch (err: any) {\n      if (err.name !== 'AbortError') {\n        console.error(\"Error sharing or copying:\", err);\n        showNotification('Failed to share', 'error');\n      }\n    } finally {\n      setShareSheetParticipant(null);\n    }\n  };\n  \n  const handleShareSms = (participant: ParticipantData) => {\n    if (!participant.phone) return;\n    window.location.href = `sms:${participant.phone}?&body=${encodeURIComponent(getShareTextForParticipant(participant.name))}`;\n    setShareSheetParticipant(null);\n  };\n    \n  const handleShareEmail = (participant: ParticipantData) => {\n    if (!participant.email) return;\n    window.location.href = `mailto:${participant.email}?subject=${encodeURIComponent(\"Shared Bill Reminder\")}&body=${encodeURIComponent(getShareTextForParticipant(participant.name))}`;\n    setShareSheetParticipant(null);\n  };\n\n  const handleShareLink = useCallback(async (participantName: string, method: 'sms' | 'email' | 'generic') => {\n    const unpaidBills = bills.filter(b => b.status === 'active' && b.participants.some(p => p.name === participantName && !p.paid && p.amountOwed > 0));\n    if (unpaidBills.length === 0) {\n        showNotification(`${participantName} has no outstanding bills to share.`, 'info');\n        setShareSheetParticipant(null);\n        return;\n    }\n    const { shareUrl, imagesDropped } = await generateOneTimeShareLink(unpaidBills, participantName, settings, onUpdateMultipleBills, bills, subscriptionStatus);\n    \n    if (imagesDropped > 0) {\n        showNotification(`Free image limit reached. ${imagesDropped} older image(s) omitted from summary.`, 'info');\n    }\n\n    const message = `Here is a link to view a summary of your outstanding bills with me. This link contains a key and should not be shared with others:\\n\\n${shareUrl}`;\n    try {\n        if (method === 'sms') {\n            const phone = participantsData.find(p => p.name === participantName)?.phone;\n            if (phone) window.location.href = `sms:${phone}?&body=${encodeURIComponent(message)}`;\n        } else if (method === 'email') {\n            const email = participantsData.find(p => p.name === participantName)?.email;\n            if (email) window.location.href = `mailto:${email}?subject=${encodeURIComponent(\"Summary of Outstanding Bills\")}&body=${encodeURIComponent(message)}`;\n        } else {\n            if (navigator.share) await navigator.share({ title: 'Summary of Outstanding Bills', text: message });\n            else {\n                await navigator.clipboard.writeText(message);\n                showNotification('Share link copied to clipboard!');\n            }\n        }\n    } catch (err: any) {\n        if (err.name === 'AbortError') showNotification('Share cancelled', 'info');\n        else {\n            console.error(\"Error sharing link:\", err);\n            showNotification('An error occurred while trying to share the link.', 'error');\n        }\n    } finally {\n        setShareSheetParticipant(null);\n    }\n  }, [bills, settings, onUpdateMultipleBills, participantsData, showNotification, subscriptionStatus]);\n\n  return (\n    <div className=\"max-w-2xl mx-auto\">\n      <button onClick={onBack} className=\"flex items-center gap-2 mb-6 text-teal-600 dark:text-teal-400 font-semibold hover:text-teal-800 dark:hover:text-teal-300\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fillRule=\"evenodd\" d=\"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l-4-4a1 1 0 011.414 0z\" clipRule=\"evenodd\" /></svg>\n        Back to Dashboard\n      </button>\n\n      <div className=\"bg-white dark:bg-slate-800 p-8 rounded-lg shadow-lg\">\n        <div className=\"flex justify-between items-start gap-4\">\n            <div>\n                <h2 className=\"text-3xl font-bold text-slate-800 dark:text-slate-100\">{group.name}</h2>\n                <p className=\"text-slate-500 dark:text-slate-400 mt-1\">{group.participants.length} members</p>\n            </div>\n            <div className=\"flex-shrink-0\">\n                <button onClick={() => navigate(View.CreateGroup, { groupToEdit: group })} className=\"px-4 py-2 bg-slate-100 text-slate-800 font-semibold rounded-lg hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-100 dark:hover:bg-slate-600\">\n                    Edit\n                </button>\n            </div>\n        </div>\n\n        <div className=\"mt-6 border-t border-slate-200 dark:border-slate-700 pt-6\">\n          <h3 className=\"text-xl font-semibold text-slate-700 dark:text-slate-200 mb-4\">Members</h3>\n          <ul className=\"space-y-3\">\n            {group.participants.map(p => {\n              const debtInfo = participantsData.find(pd => pd.name === p.name);\n              const hasDebt = debtInfo && debtInfo.type === 'owed' && debtInfo.amount > 0;\n              return (\n                <li key={p.id}>\n                  <button onClick={() => onSelectParticipant(p.name)} className=\"w-full flex items-center justify-between p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600/50 text-left\">\n                    <span className=\"font-semibold text-slate-800 dark:text-slate-100\">{p.name}</span>\n                    {hasDebt ? (\n                      <span className=\"text-sm font-semibold text-amber-600 dark:text-amber-400\">Owes ${debtInfo.amount.toFixed(2)}</span>\n                    ) : (\n                      <span className=\"text-sm font-semibold text-emerald-600 dark:text-emerald-400\">All settled</span>\n                    )}\n                  </button>\n                </li>\n              );\n            })}\n          </ul>\n        </div>\n        \n        <div className=\"mt-8 border-t border-slate-200 dark:border-slate-700 pt-6\">\n            <button onClick={() => setIsRemindersModalOpen(true)} className=\"w-full bg-teal-500 text-white font-bold py-3 px-4 rounded-lg hover:bg-teal-600 transition-colors\">\n                Remind Group\n            </button>\n        </div>\n      </div>\n      {isRemindersModalOpen && (\n        <GroupRemindersModal \n            group={group} \n            participantsWithDebt={groupParticipantsWithDebt}\n            onClose={() => setIsRemindersModalOpen(false)}\n            onRemind={handleRemindParticipant}\n        />\n      )}\n      {shareSheetParticipant && (\n        <ShareActionSheet \n            participant={{ ...shareSheetParticipant, id: shareSheetParticipant.name, amountOwed: shareSheetParticipant.amount, paid: false } as Participant} \n            onClose={() => setShareSheetParticipant(null)} \n            onShareSms={handleShareSms as any}\n            onShareEmail={handleShareEmail as any}\n            onShareGeneric={handleShareGeneric as any}\n            onShareLinkSms={() => handleShareLink(shareSheetParticipant.name, 'sms')} \n            onShareLinkEmail={() => handleShareLink(shareSheetParticipant.name, 'email')} \n            onShareLinkGeneric={() => handleShareLink(shareSheetParticipant.name, 'generic')} \n            onViewDetails={() => { onSelectParticipant(shareSheetParticipant.name); setShareSheetParticipant(null); }} \n            shareContext=\"dashboard\" \n        />\n      )}\n    </div>\n  );\n};\n\nexport default GroupDetailsView;","import React from 'react';\nimport type { Bill, Settings, ImportedBill, RecurringBill, SummaryFilter, DashboardView, SettingsSection, Group, RequestConfirmationFn, Category, DashboardLayoutMode } from '../../types';\nimport { View } from '../../types';\nimport type { ParticipantData } from '../ParticipantList';\nimport type { BudgetData } from '../dashboard/BudgetView';\nimport type { SubscriptionStatus } from '../../hooks/useAuth';\n\n// Components\nimport Dashboard from '../dashboard/Dashboard';\nimport CreateBill from '../CreateBill';\nimport CreateGroup from '../CreateGroup';\nimport BillDetails from '../BillDetails';\nimport ImportedBillDetails from '../ImportedBillDetails';\nimport SettingsComponent from '../Settings';\nimport SyncComponent from '../Sync';\nimport Disclaimer from '../Disclaimer';\nimport { ViewSharedBill } from '../ViewSharedBill';\nimport RecurringBillsList from '../RecurringBillsList';\nimport ManageSubscriptionPage from '../ManageSubscriptionPage';\nimport GroupDetailsView from '../dashboard/GroupDetailsView';\n\ntype AppLogicProps = {\n    view: View;\n    isLoading: boolean;\n    // Data\n    bills: Bill[];\n    importedBills: ImportedBill[];\n    recurringBills: RecurringBill[];\n    groups: Group[];\n    categories: Category[];\n    participantsData: ParticipantData[];\n    // Current Items\n    currentBill?: Bill;\n    currentImportedBill?: ImportedBill;\n    recurringBillToEdit?: RecurringBill;\n    fromTemplate?: RecurringBill;\n    billConversionSource?: Bill;\n    groupToEdit?: Group;\n    currentGroup?: Group;\n    // Settings & Auth\n    settings: Settings;\n    subscriptionStatus: SubscriptionStatus;\n    // Navigation & Callbacks\n    navigate: (view: View, params?: any) => void;\n    setSettingsSection: (section: SettingsSection) => void;\n    updateSettings: (newSettings: Partial<Settings>) => Promise<void>;\n    requestConfirmation: RequestConfirmationFn;\n    // Dashboard State\n    dashboardView: DashboardView;\n    selectedParticipant: string | null;\n    dashboardStatusFilter: 'active' | 'archived';\n    dashboardSummaryFilter: SummaryFilter;\n    dashboardLayoutMode: DashboardLayoutMode;\n    onSetDashboardView: (view: DashboardView) => void;\n    onSetDashboardStatusFilter: (status: 'active' | 'archived') => void;\n    onSetDashboardSummaryFilter: (filter: SummaryFilter) => void;\n    onSetDashboardLayoutMode: (mode: DashboardLayoutMode) => void;\n    onSelectParticipant: (name: string | null) => void;\n    // Budget\n    budgetData: BudgetData;\n    budgetDate: { year: number, month: number } | 'last30days';\n    setBudgetDate: (date: { year: number, month: number } | 'last30days') => void;\n    handleSelectBillFromBudget: (billInfo: { billId: string, isImported: boolean }) => void;\n    // Handlers\n    updateBill: (bill: Bill) => Promise<Bill>;\n    addImportedBill: (bill: ImportedBill) => Promise<void>;\n    updateImportedBill: (bill: ImportedBill) => void;\n    handleSaveBill: (billData: Omit<Bill, 'id' | 'status'>, fromTemplateId?: string) => Promise<void>;\n    handleSaveRecurringBill: (billData: Omit<RecurringBill, 'id' | 'status' | 'nextDueDate'>) => Promise<void>;\n    handleUpdateRecurringBill: (bill: RecurringBill) => Promise<void>;\n    handleSaveGroup: (groupData: Omit<Group, 'id' | 'lastUpdatedAt' | 'popularity'>) => Promise<void>;\n    handleUpdateGroup: (group: Group) => Promise<void>;\n    handleDeleteBill: (billId: string) => void;\n    handleDeleteImportedBill: (billId: string) => void;\n    handleDeleteRecurringBill: (billId: string) => void;\n    handleDeleteGroup: (groupId: string) => void;\n    handleReshareBill: (billId: string) => Promise<void>;\n    createFromTemplate: (template: RecurringBill) => void;\n    archiveBill: (billId: string) => Promise<void>;\n    unarchiveBill: (billId: string) => Promise<void>;\n    archiveRecurringBill: (billId: string) => Promise<void>;\n    unarchiveRecurringBill: (billId: string) => Promise<void>;\n    updateMultipleBills: (bills: Bill[]) => Promise<void>;\n    archiveImportedBill: (billId: string) => Promise<void>;\n    unarchiveImportedBill: (billId: string) => Promise<void>;\n    canInstall: boolean;\n    promptInstall: () => void;\n    checkAndMakeSpaceForImageShare: (bill: Bill) => Promise<boolean>;\n};\n\nexport const AppRouter: React.FC<AppLogicProps> = (props) => {\n    const { \n        view, isLoading, currentBill, currentImportedBill, currentGroup,\n        handleSaveBill, handleSaveRecurringBill, handleUpdateRecurringBill, navigate,\n        settings, updateSettings, recurringBillToEdit, fromTemplate, billConversionSource,\n        updateBill, setSettingsSection, requestConfirmation,\n        recurringBills, createFromTemplate, archiveRecurringBill, unarchiveRecurringBill, handleDeleteRecurringBill,\n        addImportedBill, importedBills, canInstall, promptInstall, checkAndMakeSpaceForImageShare,\n        bills, groups, groupToEdit, handleSaveGroup, handleUpdateGroup, handleDeleteGroup, categories\n    } = props;\n\n    if (isLoading) {\n        return (\n            <div className=\"flex-grow flex items-center justify-center text-center\">\n               <div>\n                   <svg className=\"animate-spin h-10 w-10 text-teal-500 mx-auto mb-4\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\"><circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle><path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path></svg>\n                   <h1 className=\"text-xl font-semibold text-slate-700 dark:text-slate-200\">Loading your data...</h1>\n               </div>\n            </div>\n       );\n   }\n\n    switch (view) {\n        case View.CreateBill:\n            return <CreateBill onSaveBill={handleSaveBill} onSaveRecurringBill={handleSaveRecurringBill} onUpdateRecurringBill={handleUpdateRecurringBill} onBack={() => navigate(View.Dashboard)} settings={settings} updateSettings={updateSettings} recurringBillToEdit={recurringBillToEdit} fromTemplate={fromTemplate} billConversionSource={billConversionSource} groups={groups} categories={categories} />;\n        case View.CreateGroup:\n            return <CreateGroup onSave={handleSaveGroup} onUpdate={handleUpdateGroup} onBack={() => navigate(View.Dashboard, { view: 'groups' })} groupToEdit={groupToEdit} />;\n        case View.GroupDetails:\n            return currentGroup ? <GroupDetailsView group={currentGroup} {...props} onUpdateMultipleBills={props.updateMultipleBills} onBack={() => navigate(View.Dashboard, { view: 'groups' })} /> : <div>Group not found.</div>;\n        case View.BillDetails:\n            return currentBill ? <BillDetails bill={currentBill} onUpdateBill={updateBill} onBack={() => navigate(View.Dashboard)} settings={settings} updateSettings={updateSettings} setSettingsSection={setSettingsSection} navigate={navigate} onReshareBill={() => props.handleReshareBill(currentBill.id)} checkAndMakeSpaceForImageShare={checkAndMakeSpaceForImageShare} /> : <div>Bill not found.</div>;\n        case View.ImportedBillDetails:\n            return currentImportedBill ? <ImportedBillDetails bill={currentImportedBill} onUpdateBill={props.updateImportedBill} onBack={() => navigate(View.Dashboard)} /> : <div>Bill not found.</div>;\n        case View.RecurringBills:\n            return <RecurringBillsList recurringBills={recurringBills} onCreateFromTemplate={createFromTemplate} onEditTemplate={(template) => navigate(View.CreateBill, { recurringBillToEdit: template })} onArchive={archiveRecurringBill} onUnarchive={unarchiveRecurringBill} onDelete={handleDeleteRecurringBill} onBack={() => navigate(View.Dashboard)} />;\n        case View.Settings:\n            return <SettingsComponent onNavigateToSection={setSettingsSection} onBack={() => navigate(View.Dashboard)} canInstall={canInstall} promptInstall={promptInstall} />;\n        case View.Sync:\n            return <SyncComponent onBack={() => navigate(View.Settings)} requestConfirmation={requestConfirmation} />;\n        case View.Disclaimer:\n            return <Disclaimer onBack={() => navigate(View.Settings)} />;\n        case View.ViewShared:\n            return <ViewSharedBill onImportComplete={() => { window.location.hash = ''; navigate(View.Dashboard); }} settings={settings} addImportedBill={addImportedBill} importedBills={importedBills} requestConfirmation={requestConfirmation} bills={bills}/>;\n        case View.ManageSubscription:\n            return <ManageSubscriptionPage onBack={() => navigate(View.Settings)} requestConfirmation={requestConfirmation} />;\n        case View.Dashboard:\n        default:\n            return <Dashboard \n                        {...props}\n                        onDeleteGroup={handleDeleteGroup}\n                        onSelectBill={(bill) => navigate(View.BillDetails, { billId: bill.id })} \n                        onSelectImportedBill={(bill) => navigate(View.ImportedBillDetails, { importedBillId: bill.id })}\n                        onArchiveBill={props.archiveBill}\n                        onUnarchiveBill={props.unarchiveBill}\n                        onDeleteBill={props.handleDeleteBill}\n                        onReshareBill={props.handleReshareBill}\n                        onUpdateMultipleBills={props.updateMultipleBills}\n                        onUpdateImportedBill={props.updateImportedBill}\n                        onArchiveImportedBill={props.archiveImportedBill}\n                        onUnarchiveImportedBill={props.unarchiveImportedBill}\n                        onDeleteImportedBill={props.handleDeleteImportedBill}\n                        onShowSummaryDetails={(bill) => navigate(View.ImportedBillDetails, { importedBillId: bill.id, showSummary: true })}\n                        onCreateFromTemplate={props.createFromTemplate}\n                        onSelectParticipant={props.onSelectParticipant}\n                        onClearParticipant={() => props.onSelectParticipant(null)}\n                        budgetData={props.budgetData}\n                        budgetDate={props.budgetDate}\n                        setBudgetDate={props.setBudgetDate}\n                        handleSelectBillFromBudget={props.handleSelectBillFromBudget}\n                   />;\n    }\n};","import React from 'react';\n\ninterface ConfirmationDialogProps {\n  isOpen: boolean;\n  title: string;\n  message: string;\n  onConfirm: () => void;\n  onCancel: () => void;\n  confirmText?: string;\n  cancelText?: string;\n  confirmVariant?: 'danger' | 'primary';\n}\n\nconst ConfirmationDialog: React.FC<ConfirmationDialogProps> = ({\n  isOpen,\n  title,\n  message,\n  onConfirm,\n  onCancel,\n  confirmText = 'Confirm',\n  cancelText = 'Cancel',\n  confirmVariant = 'primary',\n}) => {\n  if (!isOpen) {\n    return null;\n  }\n\n  const confirmButtonClasses = {\n    primary: 'bg-teal-500 text-white hover:bg-teal-600 focus:ring-teal-500',\n    danger: 'bg-red-600 text-white hover:bg-red-700 focus:ring-red-500',\n  };\n\n  return (\n    <div\n      className=\"fixed inset-0 bg-slate-900 bg-opacity-60 z-50 flex justify-center items-center p-4\"\n      role=\"alertdialog\"\n      aria-modal=\"true\"\n      aria-labelledby=\"dialog-title\"\n      aria-describedby=\"dialog-description\"\n    >\n      <div className=\"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md p-6\">\n        <h2 id=\"dialog-title\" className=\"text-xl font-bold text-slate-800 dark:text-slate-100\">\n          {title}\n        </h2>\n        <p id=\"dialog-description\" className=\"mt-2 text-slate-600 dark:text-slate-300\">\n          {message}\n        </p>\n        <div className=\"mt-6 flex justify-end space-x-4\">\n          <button\n            onClick={onCancel}\n            className=\"px-4 py-2 bg-slate-100 text-slate-800 font-semibold rounded-lg hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-100 dark:hover:bg-slate-600 transition-colors\"\n          >\n            {cancelText}\n          </button>\n          <button\n            onClick={onConfirm}\n            className={`px-4 py-2 font-semibold rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-slate-800 transition-colors ${confirmButtonClasses[confirmVariant]}`}\n          >\n            {confirmText}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ConfirmationDialog;","import React from 'react';\nimport type { Settings, Theme } from '../../types';\n\ninterface PersonalizationProps {\n  settings: Settings;\n  onSettingsChange: (newSettings: Partial<Settings>) => void;\n  theme: Theme;\n  setTheme: (theme: Theme) => void;\n}\n\nconst themeOptions: { name: Theme; icon: React.ReactElement; title: string }[] = [\n  {\n    name: 'light',\n    title: 'Light',\n    icon: <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" /></svg>,\n  },\n  {\n    name: 'dark',\n    title: 'Dark',\n    icon: <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z\" /></svg>,\n  },\n  {\n    name: 'system',\n    title: 'System',\n    icon: <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\" /></svg>,\n  },\n];\n\nconst Personalization: React.FC<PersonalizationProps> = ({ settings, onSettingsChange, theme, setTheme }) => {\n  \n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    onSettingsChange({ [e.target.name]: e.target.value });\n  };\n  \n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <label htmlFor=\"myDisplayName\" className=\"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1\">Your Display Name</label>\n        <input id=\"myDisplayName\" name=\"myDisplayName\" type=\"text\" value={settings.myDisplayName} onChange={handleChange} placeholder=\"e.g., Jane Doe\" className=\"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-teal-500 focus:border-teal-500 bg-white dark:bg-slate-700 dark:border-slate-600 text-slate-900 dark:text-slate-100\" />\n      </div>\n      \n      <div>\n        <label className=\"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2\">Theme</label>\n        <div className=\"flex items-center space-x-1 bg-slate-200 dark:bg-slate-700 p-1 rounded-lg\">\n            {themeOptions.map(opt => (\n                <button\n                    key={opt.name}\n                    type=\"button\"\n                    onClick={() => setTheme(opt.name)}\n                    className={`flex-1 flex items-center justify-center gap-2 px-3 py-1.5 text-sm font-semibold rounded-md transition-colors ${\n                    theme === opt.name\n                        ? 'bg-white dark:bg-slate-800 shadow text-teal-600 dark:text-teal-400'\n                        : 'text-slate-600 dark:text-slate-300 hover:bg-white/50 dark:hover:bg-slate-800/50'\n                    }`}\n                >\n                    {opt.icon}\n                    <span>{opt.title}</span>\n                </button>\n            ))}\n        </div>\n      </div>\n\n      <div>\n        <label htmlFor=\"shareTemplate\" className=\"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1\">Share Message Template</label>\n        <textarea id=\"shareTemplate\" name=\"shareTemplate\" value={settings.shareTemplate} onChange={handleChange} rows={5} className=\"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-teal-500 focus:border-teal-500 bg-white dark:bg-slate-700 dark:border-slate-600 text-slate-900 dark:text-slate-100\" />\n        <p className=\"text-xs text-slate-500 dark:text-slate-400 mt-1\">\n          Available placeholders: <code className=\"bg-slate-100 dark:bg-slate-600 rounded px-1\">{'{participantName}'}</code>, <code className=\"bg-slate-100 dark:bg-slate-600 rounded px-1\">{'{totalOwed}'}</code>, <code className=\"bg-slate-100 dark:bg-slate-600 rounded px-1\">{'{billList}'}</code>, <code className=\"bg-slate-100 dark:bg-slate-600 rounded px-1\">{'{paymentInfo}'}</code>, <code className=\"bg-slate-100 dark:bg-slate-600 rounded px-1\">{'{promoText}'}</code>.\n        </p>\n      </div>\n    </div>\n  );\n};\n\nexport default Personalization;\n","import React from 'react';\nimport type { Settings } from '../../types';\n\ninterface PaymentIntegrationsProps {\n  settings: Settings;\n  onPaymentDetailsChange: (newDetails: Partial<Settings['paymentDetails']>) => void;\n}\n\nconst PaymentIntegrations: React.FC<PaymentIntegrationsProps> = ({ settings, onPaymentDetailsChange }) => {\n  \n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    onPaymentDetailsChange({ [e.target.name]: e.target.value });\n  };\n  \n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <label htmlFor=\"venmo\" className=\"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1\">Venmo Username</label>\n        <input id=\"venmo\" name=\"venmo\" type=\"text\" value={settings.paymentDetails.venmo} onChange={handleChange} placeholder=\"e.g., Jane-Doe-1\" className=\"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-teal-500 focus:border-teal-500 bg-white dark:bg-slate-700 dark:border-slate-600 text-slate-900 dark:text-slate-100\" />\n      </div>\n       <div>\n        <label htmlFor=\"paypal\" className=\"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1\">PayPal.Me Link or Email</label>\n        <input id=\"paypal\" name=\"paypal\" type=\"text\" value={settings.paymentDetails.paypal} onChange={handleChange} placeholder=\"e.g., paypal.me/janedoe or email@example.com\" className=\"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-teal-500 focus:border-teal-500 bg-white dark:bg-slate-700 dark:border-slate-600 text-slate-900 dark:text-slate-100\" />\n      </div>\n       <div>\n        <label htmlFor=\"cashApp\" className=\"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1\">Cash App $Cashtag</label>\n        <input id=\"cashApp\" name=\"cashApp\" type=\"text\" value={settings.paymentDetails.cashApp} onChange={handleChange} placeholder=\"e.g., $janedoe\" className=\"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-teal-500 focus:border-teal-500 bg-white dark:bg-slate-700 dark:border-slate-600 text-slate-900 dark:text-slate-100\" />\n      </div>\n       <div>\n        <label htmlFor=\"zelle\" className=\"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1\">Zelle (Phone or Email)</label>\n        <input id=\"zelle\" name=\"zelle\" type=\"text\" value={settings.paymentDetails.zelle} onChange={handleChange} placeholder=\"e.g., 555-123-4567\" className=\"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-teal-500 focus:border-teal-500 bg-white dark:bg-slate-700 dark:border-slate-600 text-slate-900 dark:text-slate-100\" />\n      </div>\n      <div>\n        <label htmlFor=\"customMessage\" className=\"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1\">Custom Payment Message</label>\n        <textarea id=\"customMessage\" name=\"customMessage\" value={settings.paymentDetails.customMessage} onChange={handleChange} rows={3} placeholder=\"e.g., Or pay me back in person!\" className=\"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-teal-500 focus:border-teal-500 bg-white dark:bg-slate-700 dark:border-slate-600 text-slate-900 dark:text-slate-100\" />\n      </div>\n    </div>\n  );\n};\n\nexport default PaymentIntegrations;\n","import React, { useState, useEffect } from 'react';\nimport type { Settings } from '../../types';\nimport * as notificationService from '../../services/notificationService';\n\ninterface BillRemindersProps {\n  settings: Settings;\n  onSettingsChange: (newSettings: Partial<Settings>) => void;\n}\n\ntype NotificationStatus = 'loading' | 'granted' | 'default' | 'denied' | 'unsupported';\n\nconst BillReminders: React.FC<BillRemindersProps> = ({ settings, onSettingsChange }) => {\n  const [status, setStatus] = useState<NotificationStatus>('loading');\n\n  useEffect(() => {\n    if (!notificationService.isSupported()) {\n      setStatus('unsupported');\n      return;\n    }\n    const permission = Notification.permission;\n    setStatus(permission);\n  }, []);\n\n  const handleRequestPermission = async () => {\n    const newPermission = await notificationService.requestPermission();\n    setStatus(newPermission);\n    if (newPermission === 'granted') {\n      onSettingsChange({ notificationsEnabled: true });\n    }\n  };\n\n  const handleToggle = () => {\n    onSettingsChange({ notificationsEnabled: !settings.notificationsEnabled });\n  };\n\n  const handleDaysChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    onSettingsChange({ notificationDays: parseInt(e.target.value, 10) || 1 });\n  };\n  \n  const renderContent = () => {\n    switch (status) {\n      case 'loading':\n        return <div className=\"text-slate-500 dark:text-slate-400\">Checking notification status...</div>;\n\n      case 'unsupported':\n        return (\n          <div className=\"p-4 bg-slate-100 dark:bg-slate-700/50 rounded-lg text-sm\">\n            <p className=\"font-semibold text-slate-700 dark:text-slate-200\">Browser Not Supported</p>\n            <p className=\"text-slate-500 dark:text-slate-400 mt-1\">Your browser or current browsing mode (e.g., private window) does not support scheduled notifications. Please try a modern browser like Chrome, Edge, or Firefox.</p>\n          </div>\n        );\n\n      case 'denied':\n        return (\n          <div className=\"p-4 bg-amber-50 dark:bg-amber-900/40 rounded-lg\">\n            <p className=\"font-semibold text-amber-800 dark:text-amber-200\">Permission Denied</p>\n            <p className=\"text-sm text-amber-700 dark:text-amber-300 mt-1\">You have blocked notifications for this app. You must grant permission in your browser's site settings to enable reminders.</p>\n          </div>\n        );\n\n      case 'default':\n        return (\n          <div className=\"p-4 bg-amber-50 dark:bg-amber-900/40 rounded-lg flex flex-col sm:flex-row items-center gap-4\">\n            <div className=\"flex-grow\">\n              <p className=\"font-semibold text-amber-800 dark:text-amber-200\">Enable Notifications</p>\n              <p className=\"text-sm text-amber-700 dark:text-amber-300 mt-1\">To receive bill reminders, you need to grant permission.</p>\n            </div>\n            <button onClick={handleRequestPermission} className=\"w-full sm:w-auto flex-shrink-0 px-4 py-2 bg-amber-500 text-white font-bold rounded-lg hover:bg-amber-600\">\n              Grant Permission\n            </button>\n          </div>\n        );\n\n      case 'granted':\n        return (\n          <>\n            <div className=\"flex items-center justify-between\">\n              <label htmlFor=\"notificationsEnabled\" className=\"font-medium text-slate-700 dark:text-slate-200\">\n                Enable Reminders\n              </label>\n              <button\n                id=\"notificationsEnabled\"\n                type=\"button\"\n                onClick={handleToggle}\n                className={`relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 ${settings.notificationsEnabled ? 'bg-teal-600' : 'bg-slate-300 dark:bg-slate-600'}`}\n              >\n                <span className={`inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200 ${settings.notificationsEnabled ? 'translate-x-5' : 'translate-x-0'}`} />\n              </button>\n            </div>\n            {settings.notificationsEnabled && (\n              <div>\n                <label htmlFor=\"notificationDays\" className=\"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1\">\n                  Remind me\n                </label>\n                <div className=\"flex items-center gap-3\">\n                  <input\n                    id=\"notificationDays\"\n                    type=\"number\"\n                    min=\"1\"\n                    max=\"30\"\n                    value={settings.notificationDays}\n                    onChange={handleDaysChange}\n                    className=\"w-24 px-3 py-2 border border-slate-300 rounded-lg focus:ring-teal-500 focus:border-teal-500 bg-white dark:bg-slate-700 dark:border-slate-600 text-slate-900 dark:text-slate-100\"\n                  />\n                  <span className=\"text-slate-700 dark:text-slate-200\">days before a bill is due.</span>\n                </div>\n              </div>\n            )}\n          </>\n        );\n      \n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {renderContent()}\n    </div>\n  );\n};\n\nexport default BillReminders;","import React from 'react';\nimport type { RequestConfirmationFn, Bill, ImportedBill } from '../../types';\nimport { exportData, importData } from '../../services/db';\nimport { exportData as exportDataAsCsv } from '../../services/exportService';\nimport { useAppControl } from '../../contexts/AppControlContext';\n\ninterface DataManagementProps {\n  requestConfirmation: RequestConfirmationFn;\n  onOpenCsvImporter: () => void;\n  onOpenQrImporter: () => void;\n  bills: Bill[];\n  importedBills: ImportedBill[];\n}\n\nconst DataManagement: React.FC<DataManagementProps> = ({ requestConfirmation, onOpenCsvImporter, onOpenQrImporter, bills, importedBills }) => {\n  const { reloadApp, showNotification } = useAppControl();\n\n  const handleExport = async () => {\n    try {\n      // FIX: Changed function call from non-existent 'exportDB' to the correctly imported 'exportData'.\n      const data = await exportData();\n      const json = JSON.stringify(data, null, 2);\n      const blob = new Blob([json], { type: 'application/json' });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `sharedbills_backup_${new Date().toISOString().split('T')[0]}.json`;\n      a.click();\n      URL.revokeObjectURL(url);\n      showNotification('Data exported successfully!');\n    } catch (err) {\n      console.error(\"Export failed:\", err);\n      showNotification('Data export failed.', 'error');\n    }\n  };\n  \n  const handleExportAllCsv = async () => {\n    try {\n      if (bills.length === 0 && importedBills.length === 0) {\n        showNotification(\"No bills to export.\", 'info');\n        return;\n      }\n      const filename = `sharedbills_export_${new Date().toISOString().split('T')[0]}.csv`;\n      await exportDataAsCsv({ owned: bills, imported: importedBills }, filename);\n      showNotification('All bills exported to CSV successfully!');\n    } catch (err) {\n      console.error(\"CSV Export failed:\", err);\n      showNotification('CSV export failed.', 'error');\n    }\n  };\n\n  const handleImport = () => {\n    requestConfirmation(\n      'Import Data?',\n      'This will overwrite all current data on this device. This action cannot be undone. Are you sure you want to proceed?',\n      () => {\n        const input = document.createElement('input');\n        input.type = 'file';\n        input.accept = '.json,application/json';\n        input.onchange = async (e) => {\n          const file = (e.target as HTMLInputElement).files?.[0];\n          if (file) {\n            const reader = new FileReader();\n            reader.onload = async (event) => {\n              try {\n                const data = JSON.parse(event.target?.result as string);\n                // FIX: The function `importData` is correctly imported and used. The original error was likely a cascade from the 'exportDB' error above. No change needed here.\n                await importData(data);\n                showNotification('Data imported successfully! App will now reload.');\n                setTimeout(reloadApp, 1500);\n              } catch (err) {\n                console.error(\"Import failed:\", err);\n                showNotification('Failed to import data. The file may be corrupted.', 'error');\n              }\n            };\n            reader.readAsText(file);\n          }\n        };\n        input.click();\n      },\n      { confirmText: 'Overwrite & Import', confirmVariant: 'danger' }\n    );\n  };\n\n  const ActionButton: React.FC<{ onClick: () => void; title: string; description: string; }> = ({ onClick, title, description }) => (\n    <button onClick={onClick} className=\"w-full text-left p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-600 transition-colors\">\n      <h4 className=\"font-semibold text-slate-800 dark:text-slate-100\">{title}</h4>\n      <p className=\"text-sm text-slate-500 dark:text-slate-400 mt-1\">{description}</p>\n    </button>\n  );\n\n  return (\n    <div className=\"space-y-4\">\n      <ActionButton onClick={onOpenCsvImporter} title=\"Import from CSV\" description=\"Import bills from a CSV file using AI.\" />\n      <ActionButton onClick={onOpenQrImporter} title=\"Scan QR Code\" description=\"Import a shared bill by scanning its QR code.\" />\n      <ActionButton onClick={handleExportAllCsv} title=\"Export All Bills (CSV)\" description=\"Save all your owned and imported bills to a single CSV file.\" />\n      <ActionButton onClick={handleExport} title=\"Export All Data (JSON Backup)\" description=\"Save a JSON file of all your data as a backup.\" />\n      <ActionButton onClick={handleImport} title=\"Import All Data (Restore)\" description=\"Restore data from a previously exported JSON backup.\" />\n    </div>\n  );\n};\n\nexport default DataManagement;","import React from 'react';\n\ninterface DataSyncProps {\n  onNavigate: () => void;\n}\n\nconst DataSync: React.FC<DataSyncProps> = ({ onNavigate }) => {\n  \n  return (\n    <div>\n      <p className=\"text-slate-600 dark:text-slate-300 mb-6\">\n        This feature allows you to securely transfer all your app data (bills, settings, etc.) from one device to another using a temporary, end-to-end encrypted connection.\n      </p>\n      \n      <button\n        onClick={onNavigate}\n        className=\"w-full px-6 py-3 bg-teal-500 text-white font-bold rounded-lg hover:bg-teal-600 transition-colors\"\n      >\n        Start Sync\n      </button>\n    </div>\n  );\n};\n\nexport default DataSync;","import React from 'react';\nimport type { RequestConfirmationFn } from '../../types';\nimport { useAppControl } from '../../contexts/AppControlContext';\nimport { closeDB } from '../../services/db';\n\ninterface DangerZoneProps {\n  requestConfirmation: RequestConfirmationFn;\n}\n\nconst DangerZone: React.FC<DangerZoneProps> = ({ requestConfirmation }) => {\n  const { showNotification } = useAppControl();\n  \n  const handleReset = () => {\n    requestConfirmation(\n      'Hard Reset Application?',\n      'This will permanently delete all bills, settings, and subscription data from this device. This action cannot be undone. Are you sure you want to proceed?',\n      () => {\n        // First, close any active database connection from this tab.\n        // This is crucial to prevent the current tab from blocking the delete operation.\n        closeDB();\n\n        const deleteRequest = indexedDB.deleteDatabase('SmartBillSplitterDB');\n        \n        deleteRequest.onsuccess = () => {\n          localStorage.clear();\n          sessionStorage.clear();\n          showNotification('Application has been reset. Reloading now...');\n          setTimeout(() => window.location.reload(), 1500);\n        };\n        deleteRequest.onerror = () => {\n            showNotification('Could not delete database. Please clear site data in browser settings.', 'error');\n        };\n        deleteRequest.onblocked = () => {\n             showNotification('Reset blocked. Close other tabs for this site and try again.', 'error');\n        };\n      },\n      { confirmText: 'Yes, Delete Everything', confirmVariant: 'danger' }\n    );\n  };\n  \n  return (\n    <div className=\"p-4 border-2 border-dashed border-red-500/50 rounded-lg bg-red-50 dark:bg-red-900/20\">\n      <h4 className=\"font-bold text-red-800 dark:text-red-200\">Hard Reset</h4>\n      <p className=\"text-sm text-red-700 dark:text-red-300 mt-1 mb-4\">\n        Permanently delete all data stored by this application on this device. This is useful if the app is not working correctly or you want a fresh start.\n      </p>\n      <button\n        onClick={handleReset}\n        className=\"w-full sm:w-auto px-6 py-2 bg-red-600 text-white font-bold rounded-lg hover:bg-red-700\"\n      >\n        Reset Application\n      </button>\n    </div>\n  );\n};\n\nexport default DangerZone;","import React from 'react';\nimport { useAuth } from '../../hooks/useAuth';\nimport { View } from '../../types';\n\ninterface SubscriptionManagementProps {\n  onNavigate: (view: View, params?: any) => void;\n  onGoToManageSubscriptionPage: () => void;\n}\n\nconst SubscriptionManagement: React.FC<SubscriptionManagementProps> = ({ onNavigate, onGoToManageSubscriptionPage }) => {\n  const { subscriptionStatus, subscriptionDetails, logout } = useAuth();\n  \n  const handleGoToPaywall = () => {\n    // Logging out effectively sends the user to the paywall\n    logout();\n  };\n\n  return (\n    <div>\n      {subscriptionStatus === 'subscribed' && subscriptionDetails ? (\n        <div className=\"p-4 bg-emerald-50 dark:bg-emerald-900/40 rounded-lg\">\n          <p className=\"font-semibold text-emerald-800 dark:text-emerald-200\">You are a Pro Subscriber!</p>\n          <p className=\"text-sm text-emerald-700 dark:text-emerald-300 mt-1\">Thank you for your support.</p>\n          <p className=\"text-xs text-emerald-600 dark:text-emerald-400 mt-2\">\n            {subscriptionDetails.customerId === 'trial-user' ? (\n              'Status: Active (Free Trial)'\n            ) : (\n              `Status: Active (${subscriptionDetails.duration}) via ${subscriptionDetails.provider}`\n            )}\n          </p>\n        </div>\n      ) : (\n        <div className=\"p-4 bg-slate-100 dark:bg-slate-700/50 rounded-lg\">\n           <p className=\"font-semibold text-slate-800 dark:text-slate-100\">You are on the Free Plan</p>\n           <p className=\"text-sm text-slate-600 dark:text-slate-300 mt-1\">Enjoy the core features, supported by ads.</p>\n        </div>\n      )}\n      \n      <div className=\"mt-6 space-y-3\">\n        {subscriptionStatus === 'free' && (\n            <button onClick={handleGoToPaywall} className=\"w-full px-6 py-3 bg-yellow-400 text-yellow-900 font-bold rounded-lg hover:bg-yellow-500\">\n                Upgrade to Pro\n            </button>\n        )}\n        {subscriptionDetails?.provider === 'stripe' && (\n             <button onClick={() => onNavigate(View.ManageSubscription)} className=\"w-full px-6 py-3 bg-slate-100 text-slate-800 font-semibold rounded-lg hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-100 dark:hover:bg-slate-600\">\n                Manage Stripe Subscription\n            </button>\n        )}\n        {subscriptionDetails?.provider === 'paypal' && (\n             <button onClick={onGoToManageSubscriptionPage} className=\"w-full px-6 py-3 bg-slate-100 text-slate-800 font-semibold rounded-lg hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-100 dark:hover:bg-slate-600\">\n                Manage PayPal Subscriptions In-App\n            </button>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default SubscriptionManagement;","import React from 'react';\n\ninterface AboutSupportProps {\n  showDebugConsole: boolean;\n  onToggleDebugConsole: (enabled: boolean) => void;\n}\n\nconst AboutSupport: React.FC<AboutSupportProps> = ({ showDebugConsole, onToggleDebugConsole }) => {\n\n  const links = [\n    {\n      href: 'https://github.com/centerionware/smartbillsplitter',\n      title: 'GitHub Repository',\n      description: 'View the source code, star the project, or contribute.',\n      icon: '⭐'\n    },\n    {\n      href: 'https://github.com/centerionware/smartbillsplitter/issues',\n      title: 'Report an Issue / Request a Feature',\n      description: 'Found a bug or have a great idea? Let us know!',\n      icon: '🐞'\n    },\n    {\n      href: 'https://github.com/centerionware/smartbillsplitter/commits/main',\n      title: 'Changelog',\n      description: 'See what’s new by viewing recent commit messages.',\n      icon: '📜'\n    }\n  ];\n\n  return (\n    <div>\n      <p className=\"text-slate-600 dark:text-slate-300 mb-4\">\n        This is an open-source project. We welcome contributions and feedback from the community.\n      </p>\n      <div className=\"space-y-4\">\n        {links.map(link => (\n          <a \n            key={link.href}\n            href={link.href}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"w-full text-left p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-600 transition-colors flex items-center gap-4\"\n          >\n            <div className=\"text-2xl\">{link.icon}</div>\n            <div className=\"flex-grow\">\n              <h4 className=\"font-semibold text-slate-800 dark:text-slate-100\">{link.title}</h4>\n              <p className=\"text-sm text-slate-500 dark:text-slate-400 mt-1\">{link.description}</p>\n            </div>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 text-slate-400 dark:text-slate-500 flex-shrink-0\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14\" /></svg>\n          </a>\n        ))}\n      </div>\n      <div className=\"mt-6 pt-4 border-t border-slate-200 dark:border-slate-700\">\n        <div className=\"flex items-center justify-between\">\n            <div>\n                <h4 className=\"font-semibold text-slate-800 dark:text-slate-100\">Debug Console</h4>\n                <p className=\"text-sm text-slate-500 dark:text-slate-400 mt-1\">\n                    Show the developer debug console for this session only.\n                </p>\n            </div>\n            <button\n              type=\"button\"\n              onClick={() => onToggleDebugConsole(!showDebugConsole)}\n              className={`relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 dark:focus:ring-offset-slate-800 ${showDebugConsole ? 'bg-teal-600' : 'bg-slate-300 dark:bg-slate-600'}`}\n              aria-pressed={showDebugConsole}\n              aria-label=\"Toggle Debug Console\"\n            >\n              <span className=\"sr-only\">Toggle Debug Console</span>\n              <span className={`inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200 ${showDebugConsole ? 'translate-x-5' : 'translate-x-0'}`} />\n            </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AboutSupport;\n","import React from 'react';\nimport type { Settings, Category } from '../../types';\n\ninterface BudgetingSettingsProps {\n  settings: Settings;\n  onSettingsChange: (newSettings: Partial<Settings>) => void;\n  categories: Category[];\n  onCategoriesChange: (categories: Category[]) => void;\n}\n\nconst BudgetingSettings: React.FC<BudgetingSettingsProps> = ({ settings, onSettingsChange, categories, onCategoriesChange }) => {\n\n    const handleCategoryChange = (id: string, field: 'name' | 'budget', value: string | number) => {\n        onCategoriesChange(categories.map(cat => {\n            if (cat.id === id) {\n                if (field === 'budget') {\n                    const parsedValue = parseFloat(value as string);\n                    return { ...cat, budget: isNaN(parsedValue) ? undefined : parsedValue };\n                }\n                // This assumes value is a string if field is 'name'\n                return { ...cat, name: value as string };\n            }\n            return cat;\n        }));\n    };\n\n    const handleAddCategory = () => {\n        const newCategory: Category = { id: `cat-new-${Date.now()}`, name: '', budget: undefined };\n        onCategoriesChange([...categories, newCategory]);\n    };\n\n    const handleDelete = (id: string, isDefault?: boolean) => {\n        if (isDefault) {\n            // Can't delete default categories, just clear their budget and name (which is disallowed by disabled anyway)\n            // The only real action is clearing a budget\n             onCategoriesChange(categories.map(cat => cat.id === id ? { ...cat, budget: undefined } : cat));\n        } else {\n            onCategoriesChange(categories.filter(cat => cat.id !== id));\n        }\n    };\n\n    return (\n        <div className=\"space-y-6\">\n            <div>\n                <label htmlFor=\"totalBudget\" className=\"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1\">Total Monthly Budget (Optional)</label>\n                <div className=\"relative\">\n                    <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-500\">$</span>\n                    <input id=\"totalBudget\" name=\"totalBudget\" type=\"number\" step=\"0.01\" value={settings.totalBudget ?? ''} onChange={e => onSettingsChange({ totalBudget: e.target.value === '' ? undefined : parseFloat(e.target.value) })} placeholder=\"e.g., 2000\" className=\"w-full pl-7 pr-2 py-2 border border-slate-300 rounded-lg focus:ring-teal-500 focus:border-teal-500 bg-white dark:bg-slate-700 dark:border-slate-600 text-slate-900 dark:text-slate-100\" />\n                </div>\n                <p className=\"text-xs text-slate-500 dark:text-slate-400 mt-1\">\n                    Set an overall budget. If left empty, your total budget will be the sum of individual category budgets.\n                </p>\n            </div>\n            \n            <div className=\"space-y-4\">\n                <h4 className=\"text-lg font-semibold text-slate-700 dark:text-slate-200\">Category Budgets</h4>\n                {categories.map((cat) => (\n                    <div key={cat.id} className=\"flex items-center gap-3\">\n                        <input\n                            type=\"text\"\n                            value={cat.name}\n                            onChange={e => handleCategoryChange(cat.id, 'name', e.target.value)}\n                            placeholder=\"Category Name\"\n                            className=\"flex-grow px-3 py-2 border border-slate-300 rounded-md focus:ring-teal-500 focus:border-teal-500 bg-white dark:bg-slate-700 dark:border-slate-600 disabled:bg-slate-100 dark:disabled:bg-slate-600\"\n                            disabled={cat.isDefault}\n                        />\n                        <div className=\"relative w-32\">\n                            <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-500\">$</span>\n                            <input\n                                type=\"number\"\n                                step=\"0.01\"\n                                value={cat.budget === undefined ? '' : cat.budget}\n                                onChange={e => handleCategoryChange(cat.id, 'budget', e.target.value)}\n                                placeholder=\"Budget\"\n                                className=\"w-full pl-7 pr-2 py-2 border border-slate-300 rounded-md focus:ring-teal-500 focus:border-teal-500 bg-white dark:bg-slate-700 dark:border-slate-600\"\n                            />\n                        </div>\n                        {!cat.isDefault && (\n                            <button onClick={() => handleDelete(cat.id, cat.isDefault)} className=\"p-2 text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-500 bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 rounded-full flex-shrink-0\" aria-label={`Delete category ${cat.name}`}>\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fillRule=\"evenodd\" d=\"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z\" clipRule=\"evenodd\" /></svg>\n                            </button>\n                        )}\n                    </div>\n                ))}\n                 <button onClick={handleAddCategory} className=\"w-full flex items-center justify-center gap-2 px-4 py-2 border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fillRule=\"evenodd\" d=\"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z\" clipRule=\"evenodd\" /></svg>\n                    <span>Add New Category</span>\n                </button>\n            </div>\n        </div>\n    );\n};\n\nexport default BudgetingSettings;","import React, { useState, useEffect } from 'react';\nimport { View } from '../types';\nimport type { Settings, Theme, RequestConfirmationFn, SettingsSection, Bill, ImportedBill, Category } from '../types';\nimport Personalization from './settings/Personalization';\nimport PaymentIntegrations from './settings/PaymentIntegrations';\nimport BillReminders from './settings/BillReminders';\nimport DataManagement from './settings/DataManagement';\nimport DataSync from './settings/DataSync';\nimport DangerZone from './settings/DangerZone';\nimport SubscriptionManagement from './settings/SubscriptionManagement';\nimport { useAppControl } from '../contexts/AppControlContext';\nimport AboutSupport from './settings/AboutSupport';\nimport { DisclaimerContent } from './DisclaimerContent';\nimport BudgetingSettings from './settings/BudgetingSettings';\n\ninterface SettingsModalProps {\n  activeSection: SettingsSection;\n  onClose: () => void;\n  settings: Settings;\n  updateSettings: (newSettings: Partial<Settings>) => Promise<void>;\n  categories: Category[];\n  saveCategories: (categories: Category[]) => Promise<void>;\n  deleteCategory: (categoryId: string) => Promise<void>;\n  onNavigate: (view: View, params?: any) => void;\n  requestConfirmation: RequestConfirmationFn;\n  theme: Theme;\n  setTheme: (theme: Theme) => void;\n  onOpenCsvImporter: () => void;\n  onOpenQrImporter: () => void;\n  bills: Bill[];\n  importedBills: ImportedBill[];\n  showDebugConsole: boolean;\n  toggleDebugConsole: (enabled: boolean) => void;\n}\n\nconst SettingsModal: React.FC<SettingsModalProps> = (props) => {\n  const { activeSection, onClose, settings, updateSettings, categories, saveCategories } = props;\n  const [localSettings, setLocalSettings] = useState(settings);\n  const [localCategories, setLocalCategories] = useState<Category[]>(() => JSON.parse(JSON.stringify(categories)));\n  const [isDirty, setIsDirty] = useState(false);\n  const { showNotification } = useAppControl();\n\n  useEffect(() => {\n    setLocalSettings(settings);\n    setLocalCategories(JSON.parse(JSON.stringify(categories)));\n    setIsDirty(false);\n  }, [settings, categories, activeSection]);\n\n  const handleSettingsChange = (newValues: Partial<Settings>) => {\n    setLocalSettings(prev => ({ ...prev, ...newValues }));\n    setIsDirty(true);\n  };\n  \n  const handleCategoriesChange = (newCategories: Category[]) => {\n    setLocalCategories(newCategories);\n    setIsDirty(true);\n  };\n\n  const handlePaymentDetailsChange = (newDetails: Partial<Settings['paymentDetails']>) => {\n    setLocalSettings(prev => ({ ...prev, paymentDetails: { ...prev.paymentDetails, ...newDetails }}));\n    setIsDirty(true);\n  };\n  \n  const handleSave = async () => {\n    // Filter out new categories that were added but left empty\n    const finalCategories = localCategories.filter(cat => cat.name.trim() !== '');\n    \n    await updateSettings(localSettings);\n    await saveCategories(finalCategories);\n\n    showNotification('Settings saved successfully!');\n    onClose();\n  };\n  \n  const handleCancel = () => {\n    if (isDirty) {\n      props.requestConfirmation(\n        'Discard changes?',\n        'You have unsaved changes. Are you sure you want to discard them?',\n        onClose,\n        { confirmText: 'Discard', confirmVariant: 'danger' }\n      );\n    } else {\n      onClose();\n    }\n  };\n\n  const sectionConfig: { [key in SettingsSection]: { title: string; component: React.ReactNode; hasSave?: boolean } } = {\n    personalization: { title: 'Personalization', component: <Personalization settings={localSettings} onSettingsChange={handleSettingsChange} theme={props.theme} setTheme={props.setTheme} />, hasSave: true },\n    payments: { title: 'Payment Methods', component: <PaymentIntegrations settings={localSettings} onPaymentDetailsChange={handlePaymentDetailsChange} />, hasSave: true },\n    reminders: { title: 'Bill Reminders', component: <BillReminders settings={localSettings} onSettingsChange={handleSettingsChange} />, hasSave: true },\n    budgeting: { title: 'Budgeting', component: <BudgetingSettings settings={localSettings} onSettingsChange={handleSettingsChange} categories={localCategories} onCategoriesChange={handleCategoriesChange} />, hasSave: true },\n    data: { title: 'Data & Tools', component: <DataManagement requestConfirmation={props.requestConfirmation} onOpenCsvImporter={props.onOpenCsvImporter} onOpenQrImporter={props.onOpenQrImporter} bills={props.bills} importedBills={props.importedBills} /> },\n    sync: { title: 'Sync Devices', component: <DataSync onNavigate={() => { onClose(); props.onNavigate(View.Sync); }} /> },\n    subscription: { title: 'Subscription', component: <SubscriptionManagement onNavigate={props.onNavigate} onGoToManageSubscriptionPage={() => props.onNavigate(View.ManageSubscription)} /> },\n    danger: { title: 'Danger Zone', component: <DangerZone requestConfirmation={props.requestConfirmation} /> },\n    about: { title: 'About & Support', component: <AboutSupport showDebugConsole={props.showDebugConsole} onToggleDebugConsole={props.toggleDebugConsole} /> },\n    disclaimer: { title: 'Disclaimer & Privacy', component: <DisclaimerContent /> },\n  };\n\n  const currentSection = sectionConfig[activeSection];\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4 backdrop-blur-sm\" onClick={handleCancel} role=\"dialog\" aria-modal=\"true\" aria-labelledby=\"settings-modal-title\">\n      <div className=\"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-lg flex flex-col max-h-[85vh]\" onClick={e => e.stopPropagation()}>\n        <div className=\"p-6 border-b border-slate-200 dark:border-slate-700 flex-shrink-0\">\n          <h2 id=\"settings-modal-title\" className=\"text-xl font-bold text-slate-800 dark:text-slate-100\">{currentSection.title}</h2>\n        </div>\n        <div className=\"p-6 flex-grow overflow-y-auto\">\n          {currentSection.component}\n        </div>\n        {currentSection.hasSave && (\n          <div className=\"p-4 bg-slate-50 dark:bg-slate-800/50 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-4 flex-shrink-0\">\n            <button onClick={handleCancel} className=\"px-5 py-2.5 bg-slate-100 text-slate-800 font-semibold rounded-lg hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-100 dark:hover:bg-slate-600 transition-colors\">\n              {isDirty ? 'Cancel' : 'Close'}\n            </button>\n            {isDirty && (\n              <button onClick={handleSave} className=\"px-5 py-2.5 bg-teal-500 text-white font-bold rounded-lg hover:bg-teal-600 transition-colors\">\n                Save Changes\n              </button>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default SettingsModal;\n","import React, { useState, useCallback, useRef } from 'react';\n// FIX: Changed import to ParsedCsvData, which is now correctly defined and exported.\nimport { parseCsv, ParsedCsvData, ParsedBillFromCsv } from '../services/geminiService';\nimport type { Settings, ImportedBill } from '../types';\nimport { useAppControl } from '../contexts/AppControlContext';\n\ninterface CsvImporterModalProps {\n  onClose: () => void;\n  onMergeBills: (bills: ParsedBillFromCsv[]) => Promise<{ added: number, updated: number, skipped: number }>;\n  onMergeImportedBills: (bills: Omit<ImportedBill, 'status' | 'liveStatus'>[]) => Promise<{ added: number, updated: number, skipped: number }>;\n  settings: Settings;\n}\n\nconst CsvImporterModal: React.FC<CsvImporterModalProps> = ({ onClose, onMergeBills, onMergeImportedBills, settings }) => {\n    const [status, setStatus] = useState<'idle' | 'processing' | 'error'>('idle');\n    const [error, setError] = useState<string | null>(null);\n    const fileInputRef = useRef<HTMLInputElement>(null);\n    const { showNotification } = useAppControl();\n\n    const handleFileChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const files = event.target.files;\n        if (files && files.length > 0) {\n            processFiles(Array.from(files));\n        }\n    };\n\n    const processFiles = async (files: File[]) => {\n        setStatus('processing');\n        setError(null);\n\n        const allParsedData: ParsedCsvData = { ownedBills: [], importedBills: [] };\n\n        for (const file of files) {\n            try {\n                const csvContent = await file.text();\n                if (!csvContent) {\n                    // Skip empty files silently\n                    continue;\n                }\n                const parsedData = await parseCsv(csvContent, settings.myDisplayName);\n                allParsedData.ownedBills.push(...parsedData.ownedBills);\n                allParsedData.importedBills.push(...parsedData.importedBills);\n            } catch (err: any) {\n                setError(`Failed to process ${file.name}: ${err.message || 'An unknown error occurred.'}`);\n                setStatus('error');\n                return; // Stop processing on the first error\n            }\n        }\n        \n        try {\n            const ownedResult = await onMergeBills(allParsedData.ownedBills);\n            const importedResult = await onMergeImportedBills(allParsedData.importedBills);\n            \n            const totalAdded = ownedResult.added + importedResult.added;\n            const totalUpdated = ownedResult.updated + importedResult.updated;\n            const totalProcessed = totalAdded + totalUpdated + ownedResult.skipped + importedResult.skipped;\n\n            if (totalAdded === 0 && totalUpdated === 0) {\n                if (totalProcessed > 0) {\n                    showNotification(\"All bills in the file(s) already exist and are up-to-date.\", 'info');\n                } else {\n                     showNotification(\"No valid bills could be found in the selected file(s).\", 'info');\n                }\n            } else {\n                 showNotification(`Import complete: ${totalAdded} added, ${totalUpdated} updated.`, 'success');\n            }\n            onClose();\n\n        } catch (mergeError: any) {\n            setError(`Failed to save imported data: ${mergeError.message}`);\n            setStatus('error');\n        }\n    };\n    \n    const handleUploadClick = () => {\n        fileInputRef.current?.click();\n    };\n\n    return (\n        <div \n            className=\"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4 backdrop-blur-sm\" \n            onClick={status !== 'processing' ? onClose : undefined}\n            role=\"dialog\"\n            aria-modal=\"true\"\n            aria-labelledby=\"csv-importer-title\"\n        >\n            <div \n                className=\"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-lg p-8 text-center\" \n                onClick={e => e.stopPropagation()}\n            >\n                <h2 id=\"csv-importer-title\" className=\"text-2xl font-bold text-slate-800 dark:text-slate-100 mb-2\">Import Bills from CSV</h2>\n\n                {status === 'idle' && (\n                    <>\n                        <p className=\"text-slate-600 dark:text-slate-300 mb-6\">Upload a CSV file and let AI automatically create your bills. For best results, use a file previously exported from this app.</p>\n                        <input\n                            type=\"file\"\n                            ref={fileInputRef}\n                            onChange={handleFileChange}\n                            accept=\".csv,text/csv\"\n                            className=\"hidden\"\n                            multiple // Allow multiple file selection\n                        />\n                        <button\n                            onClick={handleUploadClick}\n                            className=\"w-full px-6 py-3 bg-teal-500 text-white font-bold rounded-lg hover:bg-teal-600 transition-colors\"\n                        >\n                            Select CSV File(s)\n                        </button>\n                    </>\n                )}\n\n                {status === 'processing' && (\n                    <div className=\"py-8\">\n                         <svg className=\"animate-spin h-12 w-12 text-teal-500 mx-auto mb-4\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\"><circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle><path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path></svg>\n                         <p className=\"text-slate-600 dark:text-slate-300\">Analyzing CSV, please wait...</p>\n                    </div>\n                )}\n\n                {status === 'error' && (\n                     <>\n                        <p className=\"text-red-600 dark:text-red-400 bg-red-100 dark:bg-red-900/40 p-4 rounded-lg my-6\">{error}</p>\n                        <div className=\"flex gap-4\">\n                            <button onClick={onClose} className=\"flex-1 px-6 py-3 bg-slate-200 text-slate-800 font-semibold rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-100 dark:hover:bg-slate-500\">\n                                Close\n                            </button>\n                             <button onClick={handleUploadClick} className=\"flex-1 px-6 py-3 bg-teal-500 text-white font-bold rounded-lg hover:bg-teal-600\">\n                                Try Again\n                            </button>\n                        </div>\n                    </>\n                )}\n            </div>\n        </div>\n    );\n};\n\nexport default CsvImporterModal;","import React, { useEffect } from 'react';\nimport { useQrScanner } from '../hooks/useQrScanner';\n\ninterface QrImporterModalProps {\n  onClose: () => void;\n  onScanSuccess: (url: string) => void;\n}\n\nconst QrImporterModal: React.FC<QrImporterModalProps> = ({ onClose, onScanSuccess }) => {\n  \n  const { isScanning, startScanner, stopScanner, videoRef, error: scannerError } = useQrScanner(onScanSuccess);\n\n  useEffect(() => {\n    startScanner();\n    return () => stopScanner();\n  }, [startScanner, stopScanner]);\n\n  return (\n    <div\n      className=\"fixed inset-0 bg-black bg-opacity-80 z-50 flex flex-col justify-center items-center p-4\"\n      role=\"dialog\"\n      aria-modal=\"true\"\n      aria-labelledby=\"qr-scanner-title\"\n    >\n        <div className=\"relative w-full max-w-xl bg-slate-900 rounded-lg shadow-xl overflow-hidden aspect-square\">\n            <video\n                ref={videoRef}\n                className=\"w-full h-full object-cover\"\n                playsInline\n                autoPlay\n                aria-label=\"Camera feed for QR code scanning\"\n            />\n            <div className=\"absolute inset-0 flex flex-col justify-between p-4\">\n                <div className=\"w-full p-3 bg-black/50 rounded-lg text-white font-semibold text-center backdrop-blur-sm\">\n                    <h2 id=\"qr-scanner-title\">Scan QR Code</h2>\n                    <p className=\"text-sm font-normal opacity-90 mt-1\">Point your camera at a share QR code to import a bill.</p>\n                </div>\n\n                {scannerError && (\n                    <div className=\"p-3 text-sm text-red-300 bg-red-800/80 rounded-md\">\n                        <p className=\"font-semibold\">Camera Error:</p>\n                        <p>{scannerError}</p>\n                    </div>\n                )}\n\n                <button\n                    onClick={onClose}\n                    className=\"self-center px-8 py-3 bg-slate-600/70 text-white font-semibold rounded-lg text-lg backdrop-blur-sm hover:bg-slate-500/80\"\n                >\n                    Cancel\n                </button>\n            </div>\n\n            {/* Scanning Overlay */}\n            <div className=\"absolute inset-0 pointer-events-none\">\n                <div className=\"w-full h-full relative\">\n                    <div className=\"absolute w-1/2 h-1/2 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2\">\n                         <div className=\"absolute -top-1 -left-1 w-12 h-12 border-t-4 border-l-4 border-white/80 rounded-tl-lg\"></div>\n                         <div className=\"absolute -top-1 -right-1 w-12 h-12 border-t-4 border-r-4 border-white/80 rounded-tr-lg\"></div>\n                         <div className=\"absolute -bottom-1 -left-1 w-12 h-12 border-b-4 border-l-4 border-white/80 rounded-bl-lg\"></div>\n                         <div className=\"absolute -bottom-1 -right-1 w-12 h-12 border-b-4 border-r-4 border-white/80 rounded-br-lg\"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n  );\n};\n\nexport default QrImporterModal;","import React from 'react';\nimport { View } from '../../types';\nimport type { Settings, Theme, RequestConfirmationFn, SettingsSection, Bill, ImportedBill, Category } from '../../types';\nimport ConfirmationDialog from '../ConfirmationDialog';\nimport SettingsModal from '../SettingsModal';\nimport CsvImporterModal from '../CsvImporterModal';\nimport QrImporterModal from '../QrImporterModal';\n\ntype AppModalsProps = {\n    confirmation: { title: string; message: string; onConfirm: () => void; options?: any } | null;\n    setConfirmation: (confirmation: any) => void;\n    settingsSection: SettingsSection | null;\n    setSettingsSection: (section: SettingsSection | null) => void;\n    isCsvImporterOpen: boolean;\n    setIsCsvImporterOpen: (isOpen: boolean) => void;\n    isQrImporterOpen: boolean;\n    setIsQrImporterOpen: (isOpen: boolean) => void;\n    // Props for modals\n    settings: Settings;\n    updateSettings: (newSettings: Partial<Settings>) => Promise<void>;\n    categories: Category[];\n    saveCategories: (categories: Category[]) => Promise<void>;\n    deleteCategory: (categoryId: string) => Promise<void>;\n    requestConfirmation: RequestConfirmationFn;\n    navigate: (view: View, params?: any) => void;\n    theme: Theme;\n    setTheme: (theme: Theme) => void;\n    bills: Bill[];\n    importedBills: ImportedBill[];\n    mergeBills: (bills: any[]) => Promise<any>;\n    mergeImportedBills: (bills: any[]) => Promise<any>;\n    showDebugConsole: boolean;\n    toggleDebugConsole: (enabled: boolean) => void;\n};\n\nexport const AppModals: React.FC<AppModalsProps> = ({\n    confirmation, setConfirmation,\n    settingsSection, setSettingsSection,\n    isCsvImporterOpen, setIsCsvImporterOpen,\n    isQrImporterOpen, setIsQrImporterOpen,\n    ...props\n}) => {\n    return (\n        <>\n            {confirmation && (\n                <ConfirmationDialog \n                    isOpen={true} \n                    title={confirmation.title} \n                    message={confirmation.message} \n                    onConfirm={() => { confirmation.onConfirm(); setConfirmation(null); }} \n                    onCancel={() => { if(confirmation.options?.onCancel) confirmation.options.onCancel(); setConfirmation(null); }} \n                    {...confirmation.options} \n                />\n            )}\n            {settingsSection && (\n                <SettingsModal \n                    activeSection={settingsSection} \n                    onClose={() => setSettingsSection(null)} \n                    settings={props.settings} \n                    updateSettings={props.updateSettings} \n                    categories={props.categories}\n                    saveCategories={props.saveCategories}\n                    deleteCategory={props.deleteCategory}\n                    requestConfirmation={props.requestConfirmation} \n                    onNavigate={props.navigate} \n                    theme={props.theme} \n                    setTheme={props.setTheme} \n                    onOpenCsvImporter={() => { setSettingsSection(null); setIsCsvImporterOpen(true); }} \n                    onOpenQrImporter={() => { setSettingsSection(null); setIsQrImporterOpen(true); }} \n                    bills={props.bills} \n                    importedBills={props.importedBills} \n                    showDebugConsole={props.showDebugConsole}\n                    toggleDebugConsole={props.toggleDebugConsole}\n                />\n            )}\n            {isCsvImporterOpen && (\n                <CsvImporterModal \n                    onClose={() => setIsCsvImporterOpen(false)} \n                    onMergeBills={props.mergeBills} \n                    onMergeImportedBills={props.mergeImportedBills} \n                    settings={props.settings} \n                />\n            )}\n            {isQrImporterOpen && (\n                <QrImporterModal \n                    onClose={() => setIsQrImporterOpen(false)} \n                    onScanSuccess={(url) => { window.location.href = url; setIsQrImporterOpen(false); }} \n                />\n            )}\n        </>\n    );\n};\n","import React, { useState, useEffect } from 'react';\n\nconst PwaInstallBanner: React.FC = () => {\n  const [canOpen, setCanOpen] = useState(false);\n  const [appUrl, setAppUrl] = useState('');\n  const isInIframe = window.self !== window.top;\n\n  useEffect(() => {\n    // This effect runs only when in an iframe to determine if the \"Open\" button can work.\n    if (isInIframe) {\n      try {\n        // We attempt to construct a valid root URL. `window.location.href` is used\n        // as the base. In some sandboxed environments, this `href` might be\n        // something like 'about:blank', which would cause the URL constructor to fail.\n        const url = new URL('/app.html', window.location.href).href;\n        setAppUrl(url);\n        setCanOpen(true); // If construction succeeds, we can show the button.\n      } catch (e) {\n        // If it fails, we're in a restrictive sandbox. We can't open a new tab reliably.\n        console.warn(\"Cannot construct a valid URL to open in a new tab due to sandboxing.\");\n        setCanOpen(false); // The button will be hidden, and a message shown instead.\n      }\n    }\n  }, [isInIframe]);\n\n  if (!isInIframe) {\n    return null; // Don't show the banner if not in an iframe.\n  }\n\n  const openInNewTab = () => {\n    if (canOpen && appUrl) {\n      window.open(appUrl, '_blank');\n    }\n  };\n\n  return (\n    <div className=\"bg-teal-50 dark:bg-teal-900/50 p-4 text-center text-sm text-teal-800 dark:text-teal-200 shadow-sm z-50\">\n      <div className=\"container mx-auto flex flex-col sm:flex-row items-center justify-center gap-3\">\n        {canOpen ? (\n          <>\n            <p>\n              For the best experience, including offline use and installation, please open this app in its own tab.\n            </p>\n            <button\n              onClick={openInNewTab}\n              className=\"bg-teal-500 text-white font-semibold px-4 py-2 rounded-lg hover:bg-teal-600 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 transition-colors duration-300 flex-shrink-0\"\n            >\n              Open Fullscreen\n            </button>\n          </>\n        ) : (\n          <p>\n            For the best experience, please open this app's main URL in a new browser tab. This preview environment does not support opening a new tab automatically.\n          </p>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default PwaInstallBanner;","import React, { useState, useRef, useEffect } from 'react';\nimport type { ConsoleMode } from '../types';\n\nexport const DebugHeader: React.FC<{\n    mode: ConsoleMode;\n    setMode: (mode: ConsoleMode) => void;\n    onClear: () => void;\n    isExpanded: boolean;\n    onToggleExpand: () => void;\n    isDevEnvironment: boolean;\n}> = ({ mode, setMode, onClear, isExpanded, onToggleExpand, isDevEnvironment }) => {\n    const [isMenuOpen, setIsMenuOpen] = useState(false);\n    const menuRef = useRef<HTMLDivElement>(null);\n\n    const modes: { id: ConsoleMode; label: string }[] = [\n        { id: 'console', label: 'Console' },\n        { id: 'network', label: 'Network' },\n        { id: 'broadcast', label: 'Broadcast' },\n        { id: 'database', label: 'Database' },\n    ];\n    if (isDevEnvironment) {\n        modes.push({ id: 'dev', label: 'Dev' });\n    }\n\n    const currentModeLabel = modes.find(m => m.id === mode)?.label || 'Console';\n\n    useEffect(() => {\n        const handleClickOutside = (event: MouseEvent) => {\n            if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\n                setIsMenuOpen(false);\n            }\n        };\n        if (isMenuOpen) {\n            document.addEventListener('mousedown', handleClickOutside);\n        }\n        return () => {\n            document.removeEventListener('mousedown', handleClickOutside);\n        };\n    }, [isMenuOpen]);\n\n    const handleModeSelect = (newMode: ConsoleMode) => {\n        setMode(newMode);\n        setIsMenuOpen(false);\n    };\n\n    return (\n        <header className=\"flex-shrink-0 flex justify-between items-center p-2 bg-slate-800/80 dark:bg-slate-900/80 border-b border-slate-700\">\n            <div className=\"relative\" ref={menuRef}>\n                <button \n                    onClick={() => setIsMenuOpen(!isMenuOpen)} \n                    className=\"flex items-center gap-2 px-3 py-1 bg-slate-700 rounded-lg text-sm font-semibold text-slate-100 hover:bg-slate-600\"\n                    aria-haspopup=\"true\"\n                    aria-expanded={isMenuOpen}\n                >\n                    <span>{currentModeLabel}</span>\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className={`h-4 w-4 transition-transform ${isMenuOpen ? 'rotate-180' : ''}`} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" /></svg>\n                </button>\n                {isMenuOpen && (\n                    <div className=\"absolute bottom-full left-0 mb-2 w-48 bg-slate-800 rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 py-1 z-20\">\n                        {modes.map(m => (\n                            <button\n                                key={m.id}\n                                onClick={() => handleModeSelect(m.id)}\n                                className={`w-full text-left px-4 py-2 text-sm ${mode === m.id ? 'bg-teal-800/50 text-teal-300' : 'text-slate-200 hover:bg-slate-700'}`}\n                            >\n                                {m.label}\n                            </button>\n                        ))}\n                    </div>\n                )}\n            </div>\n            <div className=\"flex items-center gap-4\">\n                <button onClick={onClear} title=\"Clear\" className=\"hover:text-teal-400 p-1\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" /></svg>\n                </button>\n                <button onClick={onToggleExpand} title={isExpanded ? 'Collapse' : 'Expand'} className=\"hover:text-teal-400 p-1\">\n                    {isExpanded ? <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth={2}><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M19 9l-7 7-7-7\" /></svg> : <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth={2}><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M5 15l7-7 7 7\" /></svg>}\n                </button>\n            </div>\n        </header>\n    );\n};\n","import React from 'react';\nimport type { LogEntry, LogLevel } from '../types';\n\nconst formatArg = (arg: any, onExplore: (obj: any) => void): React.ReactNode => {\n    if (typeof arg === 'object' && arg !== null) {\n        return (\n            <button\n                onClick={() => onExplore(arg)}\n                className=\"bg-slate-700 hover:bg-slate-600 px-2 py-1 rounded-md text-cyan-400 font-semibold text-left\"\n            >\n                {arg.constructor?.name || 'Object'}\n            </button>\n        );\n    }\n    if (arg === undefined) return <span className=\"text-slate-500\">undefined</span>;\n    if (arg === null) return <span className=\"text-purple-400\">null</span>;\n    if (typeof arg === 'string') return <span className=\"text-amber-300\">\"{arg}\"</span>;\n    if (typeof arg === 'number') return <span className=\"text-lime-400\">{arg}</span>;\n    if (typeof arg === 'boolean') return <span className=\"text-purple-400\">{String(arg)}</span>;\n\n    return String(arg);\n};\n\nconst getLevelStyles = (level: LogLevel) => {\n    switch (level) {\n        case 'error': return 'text-red-400 border-l-2 border-red-500';\n        case 'warn': return 'text-yellow-400 border-l-2 border-yellow-500';\n        case 'info': return 'text-blue-400 border-l-2 border-blue-400';\n        default: return 'text-slate-300 border-l-2 border-transparent';\n    }\n};\n\nexport const ConsoleView: React.FC<{ logs: LogEntry[], onExploreObject: (obj: any) => void }> = ({ logs, onExploreObject }) => (\n    <>\n        {logs.map(log => (\n            <div key={log.id} className={`flex gap-3 py-1 px-2 items-start ${getLevelStyles(log.level)}`}>\n                <span className=\"text-slate-500 flex-shrink-0\">{log.timestamp}</span>\n                <div className=\"flex-grow flex flex-wrap gap-2\">{log.args.map((arg, i) => <div key={i}>{formatArg(arg, onExploreObject)}</div>)}</div>\n            </div>\n        ))}\n    </>\n);\n","import React from 'react';\nimport type { NetworkLogEntry } from '../types';\n\nexport const NetworkView: React.FC<{ \n    networkLogs: NetworkLogEntry[], \n    onSelectLog: (log: NetworkLogEntry) => void,\n    interceptionActive: boolean \n}> = ({ networkLogs, onSelectLog, interceptionActive }) => {\n    if (!interceptionActive) {\n        return (\n            <div className=\"p-4 text-center text-slate-400\">\n                <p className=\"font-bold\">Network Interception Disabled</p>\n                <p className=\"text-xs mt-2\">Could not attach to `window.fetch`. This can happen in sandboxed environments or due to browser security policies.</p>\n            </div>\n        );\n    }\n\n    if (networkLogs.length === 0) {\n        return <div className=\"p-4 text-center text-slate-500\">No network requests recorded yet.</div>;\n    }\n\n    return (\n        <>\n            {networkLogs.map(log => {\n                const statusColor = log.ok === null ? 'text-slate-400' : log.ok ? 'text-emerald-400' : 'text-red-400';\n                const urlPath = log.url.split('?')[0].split('/').pop() || log.url;\n                const truncatedUrl = urlPath.length > 35 ? `...${urlPath.slice(-32)}` : urlPath;\n                const statusIcon = log.ok === null ? '⏳' : log.ok ? '🟢' : '🚫';\n                return (\n                    <div key={log.id} onClick={() => onSelectLog(log)} className=\"flex gap-3 py-1 px-2 items-center border-b border-slate-800 hover:bg-slate-700/50 cursor-pointer\">\n                        <span title={log.ok === false ? 'Request Failed' : 'Success'}>{statusIcon}</span>\n                        <span className={`font-bold w-12 text-center ${statusColor}`}>{log.status === 0 ? 'FAIL' : (log.status || '...')}</span>\n                        <span className=\"font-semibold text-sky-400 w-16 text-center\">{log.method}</span>\n                        <span className=\"flex-grow text-slate-300\" title={log.url}>{truncatedUrl}</span>\n                        <span className=\"text-slate-500 flex-shrink-0\">{log.timestamp}</span>\n                    </div>\n                );\n            })}\n        </>\n    );\n};","import React, { useState, memo } from 'react';\n\n// --- Utility Functions ---\nconst getCircularReplacer = () => {\n    const seen = new WeakSet();\n    return (key: string, value: any) => {\n        if (typeof value === 'object' && value !== null) {\n            if (seen.has(value)) return '[Circular Reference]';\n            seen.add(value);\n        }\n        return value;\n    };\n};\n\nconst calculateSize = (value: any): number => {\n    if (value === null || value === undefined) return 4;\n    switch (typeof value) {\n        case 'string': return value.length * 2;\n        case 'number': return 8;\n        case 'boolean': return 4;\n        case 'object':\n            try {\n                return JSON.stringify(value, getCircularReplacer()).length;\n            } catch {\n                return 0;\n            }\n        default: return 0;\n    }\n};\n\nconst formatBytes = (bytes: number): string => {\n    if (bytes === 0) return '0 B';\n    const k = 1024;\n    const sizes = ['B', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n};\n\nexport const ObjectNode: React.FC<{ data: any; name: string; path: string }> = memo(({ data, name, path }) => {\n    const [isExpanded, setIsExpanded] = useState(false);\n    const [isValueVisible, setIsValueVisible] = useState(false);\n\n    const isCryptoKey = (value: any): value is CryptoKey => typeof CryptoKey !== 'undefined' && value instanceof CryptoKey;\n    const isCryptoKeyPair = (value: any): value is CryptoKeyPair => \n        typeof CryptoKey !== 'undefined' && \n        value &&\n        value.publicKey instanceof CryptoKey && \n        value.privateKey instanceof CryptoKey;\n    \n    let displayData = data;\n    if (isCryptoKey(data)) {\n        displayData = {\n            '$$typeof': 'CryptoKey',\n            type: data.type,\n            extractable: data.extractable,\n            algorithm: data.algorithm,\n            usages: data.usages,\n        };\n    } else if (isCryptoKeyPair(data)) {\n        displayData = {\n            '$$typeof': 'CryptoKeyPair',\n            publicKey: data.publicKey,\n            privateKey: data.privateKey,\n        };\n    }\n\n    const isExpandable = typeof displayData === 'object' && displayData !== null && Object.keys(displayData).length > 0;\n    const valueType = displayData === null ? 'null' : Array.isArray(displayData) ? 'array' : typeof displayData;\n    const valueSize = calculateSize(displayData);\n\n    const renderValue = () => {\n        if (isExpandable) return null;\n        if (typeof displayData === 'string' && displayData.length > 200) return `\"${displayData.substring(0, 200)}...\"`;\n        return JSON.stringify(displayData, getCircularReplacer(), 2);\n    };\n\n    return (\n        <div className=\"ml-4 pl-2 border-l border-slate-700\">\n            <div className=\"flex items-center gap-2 py-0.5\">\n                {isExpandable ? (\n                    <button onClick={() => setIsExpanded(!isExpanded)} className=\"text-slate-500\">{isExpanded ? '▼' : '▶'}</button>\n                ) : (\n                    <div className=\"w-4\"></div>\n                )}\n                <span className=\"text-purple-400\">{name}:</span>\n                <span className=\"text-xs text-slate-500\">({valueType}, {formatBytes(valueSize)})</span>\n                {!isExpandable && <button onClick={() => setIsValueVisible(!isValueVisible)} className=\"text-cyan-400 text-xs\">[view]</button>}\n            </div>\n            {isValueVisible && !isExpandable && (\n                <pre className=\"text-amber-300 ml-6 bg-slate-800 p-1 rounded-md text-xs whitespace-pre-wrap break-all\">{renderValue()}</pre>\n            )}\n            {isExpanded && isExpandable && (\n                <div>\n                    {Object.entries(displayData).map(([key, value]) => (\n                        <ObjectNode key={`${path}.${key}`} data={value} name={key} path={`${path}.${key}`} />\n                    ))}\n                </div>\n            )}\n        </div>\n    );\n});\n\nexport const ObjectExplorer: React.FC<{ data: any; onClose: () => void }> = ({ data, onClose }) => (\n    <div className=\"absolute inset-0 bg-slate-900/80 z-20 flex justify-center items-center\" onClick={onClose}>\n        <div className=\"bg-slate-800 rounded-lg shadow-xl w-full max-w-2xl flex flex-col max-h-[80vh]\" onClick={e => e.stopPropagation()}>\n            <header className=\"flex justify-between items-center p-4 border-b border-slate-700\">\n                <h2 className=\"font-bold text-lg text-slate-100\">Object Explorer</h2>\n                <button onClick={onClose} className=\"p-1 hover:bg-slate-700 rounded-full text-2xl leading-none\">&times;</button>\n            </header>\n            <div className=\"p-4 overflow-auto\">\n                <ObjectNode data={data} name=\"(root)\" path=\"root\" />\n            </div>\n        </div>\n    </div>\n);\n","import React, { useState, useEffect } from 'react';\nimport type { SignedBroadcastLogEntry } from '../types';\nimport { getCommunicationKeyPair } from '../../../services/db';\nimport { verify } from '../../../services/cryptoService';\nimport { ObjectNode } from '../common/ObjectExplorer';\n\nconst BroadcastLogEntry: React.FC<{ log: SignedBroadcastLogEntry }> = ({ log }) => {\n    const [verificationResult, setVerificationResult] = useState<any>('Verifying...');\n\n    useEffect(() => {\n        const verifyLog = async () => {\n            const signedMessage = log.data;\n            if (!signedMessage || typeof signedMessage.payload !== 'object' || typeof signedMessage.signature !== 'string') {\n                setVerificationResult({ error: \"Malformed or unsigned message.\" });\n                return;\n            }\n            try {\n                const keyPair = await getCommunicationKeyPair();\n                if (!keyPair?.publicKey) {\n                    setVerificationResult({ error: \"Public key not found.\" });\n                    return;\n                }\n                const payloadString = JSON.stringify(signedMessage.payload);\n                const isVerified = await verify(payloadString, signedMessage.signature, keyPair.publicKey);\n                if (isVerified) {\n                    setVerificationResult(signedMessage.payload);\n                } else {\n                    setVerificationResult({ error: \"INVALID SIGNATURE\" });\n                }\n            } catch (e: any) {\n                setVerificationResult({ error: e.message });\n            }\n        };\n        verifyLog();\n    }, [log]);\n\n    return (\n        <div className=\"grid md:grid-cols-2 gap-4 border-t border-slate-700 py-2\">\n            <div>\n                <h4 className=\"font-bold text-slate-400 mb-2\">Raw Signed Message</h4>\n                <div className=\"bg-slate-800 p-2 rounded-md\"><ObjectNode data={log.data} name=\"(root)\" path={`raw-${log.id}`} /></div>\n            </div>\n            <div>\n                <h4 className=\"font-bold text-slate-400 mb-2\">Verification Result</h4>\n                <div className=\"bg-slate-800 p-2 rounded-md\"><ObjectNode data={verificationResult} name=\"(root)\" path={`verified-${log.id}`} /></div>\n            </div>\n        </div>\n    );\n};\n\nexport const BroadcastView: React.FC<{ logs: SignedBroadcastLogEntry[] }> = ({ logs }) => (\n    <div className=\"space-y-2\">\n        {logs.map(log => (\n             <div key={log.id} className=\"flex gap-3 items-start\">\n                <span className=\"text-slate-500 flex-shrink-0\">{log.timestamp}</span>\n                <div className=\"flex-grow\"><BroadcastLogEntry log={log} /></div>\n            </div>\n        ))}\n    </div>\n);\n","import React, { useState, useEffect, useCallback } from 'react';\nimport { getAllStoreData } from '../../../services/db';\nimport { ObjectNode } from '../common/ObjectExplorer';\n\nexport const DatabaseView: React.FC = () => {\n    const [dbData, setDbData] = useState<Record<string, any[]> | null>(null);\n    const [selectedStore, setSelectedStore] = useState<string | null>(null);\n    const [isLoading, setIsLoading] = useState(false);\n    const [error, setError] = useState<string | null>(null);\n\n    const loadDb = useCallback(async () => {\n        setIsLoading(true);\n        setError(null);\n        try {\n            const data = await getAllStoreData();\n            setDbData(data);\n            if (!selectedStore && data && Object.keys(data).length > 0) {\n                setSelectedStore(Object.keys(data)[0]);\n            } else if (selectedStore && data && !data[selectedStore]) {\n                 setSelectedStore(Object.keys(data)[0] || null);\n            }\n        } catch (e: any) {\n            setError(e.message || 'Failed to load database.');\n        } finally {\n            setIsLoading(false);\n        }\n    }, [selectedStore]);\n\n    useEffect(() => {\n        loadDb();\n    }, []); // Load once on mount\n\n    return (\n        <div className=\"flex h-full\">\n            <div className=\"w-1/3 border-r border-slate-700 p-2 overflow-y-auto\">\n                <button onClick={loadDb} disabled={isLoading} className=\"w-full mb-2 p-2 bg-slate-700 hover:bg-slate-600 rounded-md\">\n                    {isLoading ? 'Refreshing...' : 'Refresh DB'}\n                </button>\n                {error && <p className=\"text-red-400 text-xs\">{error}</p>}\n                {dbData && Object.keys(dbData).sort().map(storeName => (\n                    <button \n                        key={storeName} \n                        onClick={() => setSelectedStore(storeName)}\n                        className={`w-full text-left p-2 rounded-md ${selectedStore === storeName ? 'bg-teal-800/50' : 'hover:bg-slate-700'}`}\n                    >\n                        {storeName} ({dbData[storeName].length})\n                    </button>\n                ))}\n            </div>\n            <div className=\"w-2/3 p-2 overflow-y-auto\">\n                {selectedStore && dbData && dbData[selectedStore] ? (\n                     <ObjectNode data={dbData[selectedStore]} name={selectedStore} path={selectedStore} />\n                ) : (\n                    <p className=\"text-slate-500\">Select a store to view its contents.</p>\n                )}\n            </div>\n        </div>\n    );\n};\n","import React from 'react';\nimport { useAuth } from '../../../hooks/useAuth';\n\nexport const DevView: React.FC = () => {\n  const { subscriptionStatus, subscriptionDetails, login, selectFreeTier, logout, startTrial } = useAuth();\n\n  const handleSetFree = () => {\n    selectFreeTier();\n  };\n\n  const handleSetPro = () => {\n    // A mock pro subscription\n    login({\n      provider: 'paypal',\n      duration: 'yearly',\n      customerId: 'dev-pro-user',\n      subscriptionId: 'dev-pro-sub',\n    });\n  };\n  \n  const handleSetTrial = () => {\n    // First logout to clear any existing state, then start trial\n    logout();\n    // A small delay to ensure logout completes before trial starts\n    setTimeout(() => {\n        startTrial();\n    }, 100);\n  };\n\n  const handleLogout = () => {\n    logout();\n  };\n\n  return (\n    <div className=\"p-4 text-slate-300\">\n      <h3 className=\"font-bold text-lg mb-4 text-slate-100\">Auth State Override</h3>\n      <div className=\"space-y-4\">\n        <p>Current Status: <span className=\"font-bold text-teal-400\">{subscriptionStatus || 'None (Paywall)'}</span></p>\n        <div className=\"flex flex-wrap gap-4\">\n            <button onClick={handleSetPro} className=\"px-4 py-2 bg-slate-700 hover:bg-slate-600 rounded-md\">Set to Pro</button>\n            <button onClick={handleSetFree} className=\"px-4 py-2 bg-slate-700 hover:bg-slate-600 rounded-md\">Set to Free (Ads)</button>\n            <button onClick={handleSetTrial} className=\"px-4 py-2 bg-slate-700 hover:bg-slate-600 rounded-md\">Reset to Trial</button>\n            <button onClick={handleLogout} className=\"px-4 py-2 bg-red-800/80 hover:bg-red-700/80 rounded-md\">Logout (Show Paywall)</button>\n        </div>\n        {subscriptionDetails && (\n            <div className=\"mt-4 text-xs\">\n                <p>Details:</p>\n                <pre className=\"bg-slate-900 p-2 rounded mt-1 whitespace-pre-wrap\">{JSON.stringify(subscriptionDetails, null, 2)}</pre>\n            </div>\n        )}\n      </div>\n    </div>\n  );\n};\n","import React, { useState } from 'react';\nimport type { NetworkLogEntry, DetailView } from '../types';\nimport { ObjectNode } from './ObjectExplorer';\n\nexport const NetworkDetailView: React.FC<{ \n    log: NetworkLogEntry, \n    onBack: () => void\n}> = ({ log, onBack }) => {\n    const [detailView, setDetailView] = useState<DetailView>('responseBody');\n\n    const renderBody = (body: any) => {\n        if (body === null || body === undefined) return <span className=\"text-slate-500\">Empty</span>;\n        if (typeof body === 'string' && body.startsWith('[')) {\n             try {\n                const parsed = JSON.parse(body);\n                return <ObjectNode data={parsed} name=\"(root)\" path=\"root\" />;\n            } catch (e) {\n                return <pre className=\"whitespace-pre-wrap break-all\">{body}</pre>;\n            }\n        }\n        if (typeof body === 'object') {\n            return <ObjectNode data={body} name=\"(root)\" path=\"root\" />;\n        }\n        return <pre className=\"whitespace-pre-wrap break-all\">{String(body)}</pre>;\n    };\n    \n    const renderHeaders = (headers: Record<string, string>) => {\n        if (Object.keys(headers).length === 0) return <span className=\"text-slate-500\">No Headers</span>;\n        return (\n            <div className=\"space-y-1\">\n                {Object.entries(headers).map(([key, value]) => (\n                    <div key={key} className=\"flex\">\n                        <span className=\"text-purple-400 w-48 flex-shrink-0\">{key}:</span>\n                        <span className=\"text-slate-300 break-all\">{value}</span>\n                    </div>\n                ))}\n            </div>\n        );\n    };\n\n    const tabClasses = (tab: DetailView) => \n        `px-3 py-1 text-xs font-semibold rounded-md transition-colors ${detailView === tab ? 'bg-slate-800 shadow text-teal-400' : 'text-slate-300'}`;\n\n    return (\n        <div className=\"p-2\">\n            <button onClick={onBack} className=\"flex items-center gap-2 mb-4 text-teal-400 font-semibold\">\n                &larr; Back to Network List\n            </button>\n            <div className=\"p-2 bg-slate-800 rounded-lg\">\n                <p className=\"font-bold break-all\">{log.method} {log.url}</p>\n                <p className={`font-bold ${log.ok ? 'text-emerald-400' : 'text-red-400'}`}>Status: {log.status}</p>\n            </div>\n\n            <div className=\"my-4 flex items-center space-x-1 bg-slate-700 p-1 rounded-lg self-start\">\n                <button onClick={() => setDetailView('responseBody')} className={tabClasses('responseBody')}>Response Body</button>\n                <button onClick={() => setDetailView('requestBody')} className={tabClasses('requestBody')}>Request Body</button>\n                <button onClick={() => setDetailView('responseHeaders')} className={tabClasses('responseHeaders')}>Response Headers</button>\n                <button onClick={() => setDetailView('requestHeaders')} className={tabClasses('requestHeaders')}>Request Headers</button>\n            </div>\n            \n            <div className=\"p-2 bg-slate-800/50 rounded-lg overflow-x-auto\">\n                {detailView === 'responseBody' && renderBody(log.responseBody)}\n                {detailView === 'requestBody' && renderBody(log.requestBody)}\n                {detailView === 'responseHeaders' && renderHeaders(log.responseHeaders)}\n                {detailView === 'requestHeaders' && renderHeaders(log.requestHeaders)}\n            </div>\n        </div>\n    );\n};\n","import { useState, useEffect, useCallback } from 'react';\nimport type { LogEntry, NetworkLogEntry, SignedBroadcastLogEntry, LogLevel } from './types';\n\n// This is a global flag to prevent infinite loops if the console itself logs something.\nlet isIntercepting = false;\n\nexport const useDebugServices = () => {\n    const [logs, setLogs] = useState<LogEntry[]>([]);\n    const [networkLogs, setNetworkLogs] = useState<NetworkLogEntry[]>([]);\n    const [broadcastLogs, setBroadcastLogs] = useState<SignedBroadcastLogEntry[]>([]);\n    const [networkInterceptionActive, setNetworkInterceptionActive] = useState(true);\n\n    const addLog = useCallback((level: LogLevel, args: any[]) => {\n        if (isIntercepting) return;\n        isIntercepting = true;\n        setLogs(prevLogs => [\n            ...prevLogs,\n            {\n                id: prevLogs.length,\n                level,\n                timestamp: new Date().toLocaleTimeString(),\n                args,\n            },\n        ]);\n        isIntercepting = false;\n    }, []);\n\n    const addNetworkLog = useCallback((log: Omit<NetworkLogEntry, 'id'>) => {\n        setNetworkLogs(prevLogs => [...prevLogs, { ...log, id: prevLogs.length }]);\n    }, []);\n    \n    const updateNetworkLog = useCallback((id: number, updates: Partial<NetworkLogEntry>) => {\n        setNetworkLogs(prevLogs => prevLogs.map(log => log.id === id ? { ...log, ...updates } : log));\n    }, []);\n\n    const addBroadcastLog = useCallback((data: any) => {\n        setBroadcastLogs(prevLogs => [\n            ...prevLogs,\n            {\n                id: prevLogs.length,\n                timestamp: new Date().toLocaleTimeString(),\n                data,\n            },\n        ]);\n    }, []);\n\n    const clearLogs = useCallback(() => setLogs([]), []);\n    const clearNetworkLogs = useCallback(() => setNetworkLogs([]), []);\n    const clearBroadcastLogs = useCallback(() => setBroadcastLogs([]), []);\n\n    // Effect for console interception\n    useEffect(() => {\n        const originalConsole = { ...console };\n        \n        const intercept = (level: LogLevel) => (...args: any[]) => {\n            addLog(level, args);\n            originalConsole[level](...args);\n        };\n\n        console.log = intercept('log');\n        console.warn = intercept('warn');\n        console.error = intercept('error');\n        console.info = intercept('info');\n        console.debug = intercept('debug');\n\n        return () => {\n            Object.assign(console, originalConsole);\n        };\n    }, [addLog]);\n\n    // Effect for network interception\n    useEffect(() => {\n        if (typeof window.fetch !== 'function') {\n            setNetworkInterceptionActive(false);\n            return;\n        }\n        \n        const originalFetch = window.fetch;\n        let nextNetworkLogId = 0;\n\n        window.fetch = async (input: RequestInfo | URL, init?: RequestInit): Promise<Response> => {\n            const id = nextNetworkLogId++;\n            const request = new Request(input, init);\n\n            let requestBody: any = null;\n            if (request.body) {\n                try {\n                    // Clone to read, as body can only be read once\n                    requestBody = await request.clone().json();\n                } catch {\n                    try {\n                        requestBody = await request.clone().text();\n                    } catch {\n                         requestBody = '[Could not read body]';\n                    }\n                }\n            }\n            \n            // This needs to happen before the actual fetch call\n            // so we capture the request right away.\n            // Using a function updater with setNetworkLogs to avoid stale state.\n            setNetworkLogs(prevLogs => [\n                ...prevLogs,\n                {\n                    id,\n                    url: request.url,\n                    method: request.method,\n                    status: null,\n                    ok: null,\n                    timestamp: new Date().toLocaleTimeString(),\n                    requestHeaders: Object.fromEntries(request.headers.entries()),\n                    requestBody,\n                    responseHeaders: {},\n                    responseBody: null,\n                }\n            ]);\n\n            try {\n                const response = await originalFetch(request);\n                const responseClone = response.clone();\n                \n                let responseBody: any = null;\n                try {\n                    responseBody = await responseClone.json();\n                } catch {\n                    try {\n                        responseBody = await responseClone.text();\n                    } catch {\n                        responseBody = '[Could not read body]';\n                    }\n                }\n                \n                updateNetworkLog(id, {\n                    status: response.status,\n                    ok: response.ok,\n                    responseHeaders: Object.fromEntries(response.headers.entries()),\n                    responseBody,\n                });\n                \n                return response;\n            } catch (error) {\n                updateNetworkLog(id, { status: 0, ok: false, responseBody: error });\n                throw error;\n            }\n        };\n\n        return () => {\n            window.fetch = originalFetch;\n        };\n    }, [addNetworkLog, updateNetworkLog]);\n    \n    // Effect for BroadcastChannel interception\n    useEffect(() => {\n        if (typeof BroadcastChannel === 'undefined') return;\n        const originalPostMessage = BroadcastChannel.prototype.postMessage;\n        \n        BroadcastChannel.prototype.postMessage = function(message: any) {\n            addBroadcastLog(message);\n            return originalPostMessage.apply(this, [message]);\n        };\n\n        return () => {\n            BroadcastChannel.prototype.postMessage = originalPostMessage;\n        };\n    }, [addBroadcastLog]);\n\n    return { logs, networkLogs, broadcastLogs, clearLogs, clearNetworkLogs, clearBroadcastLogs, networkInterceptionActive };\n};\n","import React, { useState, useRef, useEffect } from 'react';\nimport { DebugHeader } from './debug/common/DebugHeader';\nimport { ConsoleView } from './debug/views/ConsoleView';\nimport { NetworkView } from './debug/views/NetworkView';\nimport { BroadcastView } from './debug/views/BroadcastView';\nimport { DatabaseView } from './debug/views/DatabaseView';\nimport { DevView } from './debug/views/DevView';\nimport { NetworkDetailView } from './debug/common/NetworkDetailView';\nimport { ObjectExplorer } from './debug/common/ObjectExplorer';\nimport { useDebugServices } from './debug/useDebugServices';\nimport type { ConsoleMode, NetworkLogEntry } from './debug/types';\n\ninterface DebugConsoleProps {\n  isDevEnvironment: boolean;\n}\n\nconst DebugConsole: React.FC<DebugConsoleProps> = ({ isDevEnvironment }) => {\n    const { logs, networkLogs, broadcastLogs, clearLogs, clearNetworkLogs, clearBroadcastLogs, networkInterceptionActive } = useDebugServices();\n    const [mode, setMode] = useState<ConsoleMode>('console');\n    const [isExpanded, setIsExpanded] = useState(false);\n    const [selectedNetworkLog, setSelectedNetworkLog] = useState<NetworkLogEntry | null>(null);\n    const [exploringObject, setExploringObject] = useState<any | null>(null);\n    const logContainerRef = useRef<HTMLDivElement>(null);\n\n    useEffect(() => {\n        if (logContainerRef.current) {\n            logContainerRef.current.scrollTop = logContainerRef.current.scrollHeight;\n        }\n    }, [logs, networkLogs, broadcastLogs, mode, selectedNetworkLog, isExpanded]);\n\n    const handleClear = () => {\n        switch (mode) {\n            case 'console': clearLogs(); break;\n            case 'network': clearNetworkLogs(); setSelectedNetworkLog(null); break;\n            case 'broadcast': clearBroadcastLogs(); break;\n            case 'database': /* Database view has its own refresh */ break;\n        }\n    };\n    \n    const renderContent = () => {\n        switch (mode) {\n            case 'console': return <ConsoleView logs={logs} onExploreObject={setExploringObject} />;\n            case 'network': return selectedNetworkLog ? <NetworkDetailView log={selectedNetworkLog} onBack={() => setSelectedNetworkLog(null)} /> : <NetworkView networkLogs={networkLogs} onSelectLog={setSelectedNetworkLog} interceptionActive={networkInterceptionActive} />;\n            case 'broadcast': return <BroadcastView logs={broadcastLogs} />;\n            case 'database': return <DatabaseView />;\n            case 'dev': return <DevView />;\n            default: return null;\n        }\n    };\n\n    return (\n        <div \n            className={`fixed bottom-0 left-0 right-0 bg-slate-900/90 dark:bg-black/90 backdrop-blur-sm text-white font-mono text-sm z-[100] transition-all duration-300 ease-in-out`}\n            style={{ height: isExpanded ? '80vh' : '10vh' }}\n        >\n            <div className=\"flex flex-col h-full\">\n                <DebugHeader \n                    mode={mode} \n                    setMode={(newMode) => { setMode(newMode); setSelectedNetworkLog(null); }}\n                    onClear={handleClear} \n                    isExpanded={isExpanded} \n                    onToggleExpand={() => setIsExpanded(!isExpanded)} \n                    isDevEnvironment={isDevEnvironment}\n                />\n                <div ref={logContainerRef} className=\"flex-grow p-2 overflow-auto\">\n                   {renderContent()}\n                </div>\n            </div>\n            {exploringObject && <ObjectExplorer data={exploringObject} onClose={() => setExploringObject(null)} />}\n        </div>\n    );\n};\n\nexport default DebugConsole;","import React, { useState, useLayoutEffect, useRef } from 'react';\n\ninterface TutorialOverlayProps {\n  targetSelector: string;\n  title: string;\n  description: string;\n  buttonText?: string;\n  placement?: 'top' | 'bottom' | 'left' | 'right';\n  onClose: () => void;\n}\n\nconst ARROW_SIZE = 12;\nconst POPOVER_MARGIN = 16;\n\nconst TutorialOverlay: React.FC<TutorialOverlayProps> = ({\n  targetSelector,\n  title,\n  description,\n  buttonText = 'Got It!',\n  placement = 'bottom',\n  onClose,\n}) => {\n  const [targetRect, setTargetRect] = useState<DOMRect | null>(null);\n  const popoverRef = useRef<HTMLDivElement>(null);\n  const [styles, setStyles] = useState<{ popover: React.CSSProperties; arrow: React.CSSProperties }>({ popover: { opacity: 0 }, arrow: {} });\n\n  // Effect 1: Find the target element and update its position on scroll/resize.\n  useLayoutEffect(() => {\n    const updateTargetRect = () => {\n      const targetElement = document.querySelector(targetSelector);\n      if (targetElement) {\n        setTargetRect(targetElement.getBoundingClientRect());\n      } else {\n        console.warn(`Tutorial target selector \"${targetSelector}\" not found.`);\n        setTargetRect(null);\n      }\n    };\n    \n    updateTargetRect(); // Find it initially\n\n    window.addEventListener('resize', updateTargetRect);\n    window.addEventListener('scroll', updateTargetRect, true);\n\n    return () => {\n      window.removeEventListener('resize', updateTargetRect);\n      window.removeEventListener('scroll', updateTargetRect, true);\n    };\n  }, [targetSelector]);\n\n  // Effect 2: Position the popover relative to the target, once both exist.\n  useLayoutEffect(() => {\n    if (targetRect && popoverRef.current) {\n      const popoverElement = popoverRef.current;\n      const popoverRect = popoverElement.getBoundingClientRect();\n      \n      const newPopoverStyle: React.CSSProperties = { \n        opacity: 1, \n        transition: 'top 0.2s ease-out, left 0.2s ease-out, opacity 0.2s ease-in' \n      };\n      const newArrowStyle: React.CSSProperties = {};\n      const targetCenterX = targetRect.left + targetRect.width / 2;\n      \n      switch (placement) {\n        case 'bottom': {\n          let popoverLeft = targetCenterX - popoverRect.width / 2;\n          \n          // Clamp to viewport\n          if (popoverLeft < POPOVER_MARGIN) {\n            popoverLeft = POPOVER_MARGIN;\n          } else if (popoverLeft + popoverRect.width > window.innerWidth - POPOVER_MARGIN) {\n            popoverLeft = window.innerWidth - POPOVER_MARGIN - popoverRect.width;\n          }\n\n          newPopoverStyle.top = `${targetRect.bottom + ARROW_SIZE + POPOVER_MARGIN}px`;\n          newPopoverStyle.left = `${popoverLeft}px`;\n          \n          newArrowStyle.bottom = '100%';\n          newArrowStyle.left = `${targetCenterX - popoverLeft}px`;\n          newArrowStyle.transform = 'translateX(-50%)';\n          break;\n        }\n        // Other placements can be added here\n      }\n\n      setStyles({ popover: newPopoverStyle, arrow: newArrowStyle });\n    } else {\n      // Hide if target is gone\n      setStyles({ popover: { opacity: 0 }, arrow: {} });\n    }\n  }, [targetRect, placement]);\n\n\n  if (!targetRect) {\n    return null;\n  }\n  \n  const arrowClasses = {\n      bottom: 'border-b-white dark:border-b-slate-800',\n      top: 'border-t-white dark:border-t-slate-800',\n      left: 'border-l-white dark:border-l-slate-800',\n      right: 'border-r-white dark:border-r-slate-800',\n  }[placement];\n\n  return (\n    <div\n      className=\"fixed inset-0 bg-black/80 z-[100] animate-fade-in\"\n      onClick={onClose}\n      role=\"dialog\"\n      aria-modal=\"true\"\n      aria-labelledby=\"tutorial-title\"\n    >\n      {/* Highlighter Element */}\n      <div\n        className=\"absolute rounded-lg pointer-events-none animate-pulse-glow border-2 border-white/50\"\n        style={{\n          top: `${targetRect.top - 4}px`,\n          left: `${targetRect.left - 4}px`,\n          width: `${targetRect.width + 8}px`,\n          height: `${targetRect.height + 8}px`,\n          transition: 'all 0.2s ease-out',\n        }}\n      />\n\n      {/* Popover with Tooltip */}\n      <div\n        ref={popoverRef}\n        className=\"absolute max-w-sm bg-white dark:bg-slate-800 rounded-2xl shadow-xl p-6 text-center\"\n        style={styles.popover}\n        onClick={e => e.stopPropagation()}\n      >\n        {/* Arrow */}\n        <div \n          className={`absolute w-0 h-0 border-solid border-transparent ${arrowClasses}`}\n          style={{ ...styles.arrow, borderWidth: `${ARROW_SIZE}px` }}\n        />\n        \n        <h2 id=\"tutorial-title\" className=\"text-2xl font-bold text-slate-800 dark:text-slate-100\">{title}</h2>\n        <p className=\"text-slate-500 dark:text-slate-400 mt-2 mb-6\">\n          {description}\n        </p>\n        <button\n          onClick={onClose}\n          className=\"w-full px-6 py-3 bg-teal-500 text-white font-bold rounded-lg hover:bg-teal-600 transition-colors\"\n        >\n          {buttonText}\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default TutorialOverlay;","import React, { useState, useEffect, useCallback } from 'react';\nimport type { DashboardView } from '../types';\nimport TutorialOverlay from './TutorialOverlay';\n\ninterface TutorialManagerProps {\n  dashboardView: DashboardView;\n  selectedParticipant: string | null;\n}\n\nconst TutorialManager: React.FC<TutorialManagerProps> = ({ dashboardView, selectedParticipant }) => {\n  const [showTutorial, setShowTutorial] = useState(false);\n\n  // Show tutorial on first load on the main dashboard view\n  useEffect(() => {\n    if (dashboardView === 'bills' && !selectedParticipant) {\n      const tutorialCompleted = localStorage.getItem('sharedbills.tutorialCompleted');\n      if (!tutorialCompleted) {\n        const timer = setTimeout(() => setShowTutorial(true), 500);\n        return () => clearTimeout(timer);\n      }\n    }\n  }, [dashboardView, selectedParticipant]);\n\n  const handleCloseTutorial = useCallback(() => {\n    localStorage.setItem('sharedbills.tutorialCompleted', 'true');\n    setShowTutorial(false);\n  }, []);\n\n  if (!showTutorial) {\n    return null;\n  }\n\n  return (\n    <TutorialOverlay\n      targetSelector=\"#create-new-bill-button\"\n      title=\"Welcome!\"\n      description=\"To get started, tap the plus button to create your first bill.\"\n      buttonText=\"Got It!\"\n      onClose={handleCloseTutorial}\n      placement=\"bottom\"\n    />\n  );\n};\n\nexport default TutorialManager;","import React, { useState, useEffect } from 'react';\nimport { useAppLogic } from './hooks/useAppLogic';\nimport { View } from './types';\nimport { getDiscoveredApiBaseUrl } from './services/api';\n\n// Components\nimport Header from './components/Header';\nimport { AppRouter } from './components/routing/AppRouter';\nimport { AppModals } from './components/modals/AppModals';\nimport PwaInstallBanner from './components/PwaInstallBanner';\nimport DebugConsole from './components/DebugConsole';\nimport TutorialManager from './components/TutorialManager';\n\nconst App: React.FC = () => {\n    const appLogic = useAppLogic();\n    // Use null to represent the \"checking\" state.\n    const [isDevEnvironment, setIsDevEnvironment] = useState<boolean | null>(null);\n\n    // This effect runs once to determine if the environment is 'dev'\n    // based on the user's specific definition.\n    useEffect(() => {\n        const determineEnv = async () => {\n            const backendUrl = await getDiscoveredApiBaseUrl();\n            if (backendUrl === '') {\n                // Fallback to relative path means same host, so it's a dev environment.\n                setIsDevEnvironment(true);\n            } else if (backendUrl) {\n                try {\n                    const backendHost = new URL(backendUrl).hostname;\n                    const frontendHost = window.location.hostname;\n                    setIsDevEnvironment(backendHost === frontendHost);\n                } catch (e) {\n                    // Invalid URL, assume not dev.\n                    setIsDevEnvironment(false);\n                }\n            } else {\n                // API_BASE_URL is null, discovery must have failed. Assume not dev.\n                setIsDevEnvironment(false);\n            }\n        };\n\n        determineEnv();\n    }, []);\n\n    return (\n        <div className=\"min-h-screen bg-slate-50 dark:bg-slate-900 font-sans text-slate-900 dark:text-slate-100 flex flex-col\">\n            <PwaInstallBanner />\n            <Header \n                navigate={appLogic.navigate} \n                onOpenSettings={appLogic.setSettingsSection} \n                currentView={appLogic.view}\n                canInstall={appLogic.canInstall}\n                promptInstall={appLogic.promptInstall}\n            />\n            <main className=\"flex-grow container mx-auto p-4 sm:p-6 lg:p-8\">\n                <AppRouter {...appLogic} />\n            </main>\n            \n            <AppModals {...appLogic} />\n\n            {/* Only render the debug console once the environment has been determined. */}\n            {appLogic.showDebugConsole && isDevEnvironment !== null && (\n              <DebugConsole isDevEnvironment={isDevEnvironment} />\n            )}\n\n            {appLogic.view === View.Dashboard && (\n              <TutorialManager \n                dashboardView={appLogic.dashboardView} \n                selectedParticipant={appLogic.selectedParticipant} \n              />\n            )}\n        </div>\n    );\n};\n\nexport default App;\n","import React, { useState, useEffect } from 'react';\n\ninterface SubscriptionWarningModalProps {\n  onContinue: () => void;\n  onCancel: () => void;\n}\n\nconst SubscriptionWarningModal: React.FC<SubscriptionWarningModalProps> = ({ onContinue, onCancel }) => {\n  const [countdown, setCountdown] = useState(7);\n\n  useEffect(() => {\n    if (countdown > 0) {\n      const timer = setTimeout(() => setCountdown(countdown - 1), 1000);\n      return () => clearTimeout(timer);\n    }\n  }, [countdown]);\n\n  return (\n    <div\n      className=\"fixed inset-0 bg-slate-900 bg-opacity-80 z-50 flex justify-center items-center p-4 backdrop-blur-sm\"\n      role=\"alertdialog\"\n      aria-modal=\"true\"\n      aria-labelledby=\"dialog-title\"\n      aria-describedby=\"dialog-description\"\n      onClick={onCancel}\n    >\n      <div className=\"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-lg p-8\" onClick={e => e.stopPropagation()}>\n        <h2 id=\"dialog-title\" className=\"text-2xl font-bold text-slate-800 dark:text-slate-100 text-center mb-4\">\n          A Quick Heads-Up Before You Subscribe\n        </h2>\n        \n        <div id=\"dialog-description\" className=\"space-y-4 text-slate-600 dark:text-slate-300\">\n            <div className=\"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg\">\n                <h3 className=\"font-semibold text-slate-800 dark:text-slate-100\">1. Manage Your Subscription via PayPal</h3>\n                <p className=\"text-sm mt-1\">Your Pro subscription is managed directly through your PayPal account. This means you have full control and can view or cancel your subscription at any time by logging into PayPal, even if you lose access to this device.</p>\n            </div>\n             <div className=\"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg\">\n                <h3 className=\"font-semibold text-slate-800 dark:text-slate-100\">2. Your Data Lives On Your Device</h3>\n                <p className=\"text-sm mt-1\">For your privacy, all your bill data is stored locally. This means there is no automatic cloud backup. If you change or lose your device, your data will be lost unless you use the 'Export Data' or 'Sync Devices' feature regularly.</p>\n            </div>\n             <div className=\"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg\">\n                <h3 className=\"font-semibold text-slate-800 dark:text-slate-100\">3. Help Us Grow!</h3>\n                <p className=\"text-sm mt-1\">This is a one-man show, and your subscription directly supports development. An automatic cloud sync feature is on our roadmap, but we need enough Pro subscribers to make it happen. Thank you for your support!</p>\n            </div>\n        </div>\n\n        <div className=\"mt-6 flex flex-col sm:flex-row justify-end sm:space-x-4 gap-3 sm:gap-0\">\n          <button\n            onClick={onCancel}\n            className=\"w-full sm:w-auto order-2 sm:order-1 px-6 py-3 bg-slate-100 text-slate-800 font-semibold rounded-lg hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-100 dark:hover:bg-slate-600 transition-colors\"\n          >\n            Cancel\n          </button>\n          <button\n            onClick={onContinue}\n            disabled={countdown > 0}\n            className=\"w-full sm:w-auto order-1 sm:order-2 px-6 py-3 font-bold rounded-lg transition-colors bg-teal-500 text-white hover:bg-teal-600 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 dark:focus:ring-offset-slate-800 disabled:bg-slate-400 dark:disabled:bg-slate-600 disabled:cursor-not-allowed\"\n          >\n            {countdown > 0 ? `Please Read... (${countdown}s)` : 'Continue to Checkout'}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SubscriptionWarningModal;","import React, { useState } from 'react';\nimport { getApiUrl, fetchWithRetry } from '../services/api';\nimport SubscriptionWarningModal from './SubscriptionWarningModal';\n\ninterface PaywallProps {\n  onSelectFreeTier: () => void;\n  initialError?: string;\n}\n\n// The payment provider is now determined at build time from a CI environment variable.\n// Vite replaces `process.env.VITE_PAYMENT_PROVIDER` with its value at build time.\n// It defaults to 'paypal' if the variable is not set or is not 'stripe'.\nconst PAYMENT_PROVIDER = process.env.VITE_PAYMENT_PROVIDER === 'stripe' ? 'stripe' : 'paypal';\n\n\nconst Paywall: React.FC<PaywallProps> = ({ onSelectFreeTier, initialError }) => {\n  const [isLoading, setIsLoading] = useState<string | null>(null);\n  const [error, setError] = useState<string | null>(initialError || null);\n  const [warningPlan, setWarningPlan] = useState<'monthly' | 'yearly' | null>(null);\n\n  // The runtime config fetching logic has been removed.\n\n  const handleCheckout = (plan: 'monthly' | 'yearly') => {\n    setWarningPlan(plan);\n  };\n  \n  const proceedToCheckout = async (plan: 'monthly' | 'yearly') => {\n    setWarningPlan(null); // Close modal\n    setError(null);\n    setIsLoading(plan);\n\n    try {\n        const origin = window.location.origin;\n\n        // This single endpoint starts a checkout with the provider configured on the backend.\n        const response = await fetchWithRetry(await getApiUrl('/create-checkout-session'), {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ plan, origin }),\n        });\n        \n        const data = await response.json();\n        \n        if (!response.ok) {\n            throw new Error(data.error || 'Failed to create a checkout session.');\n        }\n\n        if (data.url) {\n            // Redirect the user to the provider's hosted checkout page.\n            window.location.href = data.url;\n        } else {\n            throw new Error('No checkout URL returned from the server.');\n        }\n\n    } catch (err: any) {\n        console.error('Checkout error:', err);\n        setError(err.message || 'An unknown error occurred. Please try again.');\n        setIsLoading(null);\n    }\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLDivElement>, plan: 'monthly' | 'yearly') => {\n    if ((e.key === 'Enter' || e.key === ' ') && !isLoading) {\n      e.preventDefault();\n      handleCheckout(plan);\n    }\n  };\n\n  const renderPaymentOptions = () => {\n    const providerName = PAYMENT_PROVIDER === 'stripe' ? 'Stripe' : 'PayPal';\n    return (\n        <>\n            <div className=\"space-y-4\">\n                {/* Monthly Plan */}\n                <div\n                onClick={() => !isLoading && handleCheckout('monthly')}\n                onKeyDown={(e) => handleKeyDown(e, 'monthly')}\n                role=\"button\"\n                tabIndex={isLoading ? -1 : 0}\n                className={`p-5 border border-slate-200 dark:border-slate-700 rounded-lg text-left flex items-center transition-all duration-300 ${isLoading ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer hover:shadow-lg hover:border-teal-600 dark:hover:border-teal-500 hover:-translate-y-1'}`}\n                aria-disabled={!!isLoading}\n                >\n                <div className=\"flex-grow\">\n                    <h3 className=\"font-semibold text-slate-800 dark:text-slate-100\">Monthly Plan</h3>\n                    <p className=\"text-slate-500 dark:text-slate-400 text-sm\">Billed every month.</p>\n                </div>\n                {isLoading === 'monthly' ? (\n                    <svg className=\"animate-spin h-6 w-6 text-teal-500\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                        <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                        <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                    </svg>\n                ) : (\n                    <div className=\"text-2xl font-bold text-slate-900 dark:text-slate-50\">$1<span className=\"text-base font-normal text-slate-500 dark:text-slate-400\">/mo</span></div>\n                )}\n                </div>\n                {/* Yearly Plan */}\n                <div\n                onClick={() => !isLoading && handleCheckout('yearly')}\n                onKeyDown={(e) => handleKeyDown(e, 'yearly')}\n                role=\"button\"\n                tabIndex={isLoading ? -1 : 0}\n                className={`relative p-5 border-2 rounded-lg text-left flex items-center transition-all duration-300 ${isLoading ? 'opacity-50 cursor-not-allowed border-slate-300 dark:border-slate-600' : 'cursor-pointer hover:shadow-lg hover:-translate-y-1 border-teal-500'}`}\n                aria-disabled={!!isLoading}\n                >\n                <div className=\"absolute -top-3.5 left-1/2 -translate-x-1/2 bg-teal-500 text-white text-xs font-semibold px-3 py-1 rounded-full\">BEST VALUE</div>\n                <div className=\"flex-grow\">\n                    <h3 className=\"font-semibold text-slate-800 dark:text-slate-100\">Yearly Plan</h3>\n                    <p className=\"text-slate-500 dark:text-slate-400 text-sm\">Save 17% with annual billing.</p>\n                </div>\n                {isLoading === 'yearly' ? (\n                    <svg className=\"animate-spin h-6 w-6 text-teal-500\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                        <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                        <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                    </svg>\n                ) : (\n                    <div className=\"text-2xl font-bold text-slate-900 dark:text-slate-50\">$10<span className=\"text-base font-normal text-slate-500 dark:text-slate-400\">/yr</span></div>\n                )}\n                </div>\n            </div>\n            \n            <p className=\"mt-4 text-center text-xs text-slate-500 dark:text-slate-400\">\n                Payment processing is handled securely by {providerName}.\n            </p>\n        </>\n    );\n  };\n  \n  // No more loading state needed for config fetching.\n  return (\n    <>\n      {warningPlan && (\n        <SubscriptionWarningModal \n          onCancel={() => setWarningPlan(null)}\n          onContinue={() => proceedToCheckout(warningPlan)}\n        />\n      )}\n      <div className=\"min-h-screen bg-slate-50 dark:bg-slate-900 flex flex-col items-center justify-center p-4\">\n        <div className=\"w-full max-w-md mx-auto bg-white dark:bg-slate-800 rounded-2xl shadow-xl p-8\">\n            <div className=\"text-center mb-8\">\n                <svg className=\"h-12 w-12 mx-auto text-teal-500\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z\" />\n                </svg>\n                <h2 className=\"text-3xl font-bold text-slate-800 dark:text-slate-100 mt-4\">Upgrade to Pro</h2>\n                <p className=\"text-slate-500 dark:text-slate-400 mt-2\">Unlock unlimited features and remove ads.</p>\n            </div>\n            {error && (\n                <div className=\"mb-6 p-3 text-sm text-red-700 bg-red-100 rounded-lg dark:bg-red-900/40 dark:text-red-300\" role=\"alert\">\n                   <span className=\"font-medium\">Oops!</span> {error}\n                </div>\n            )}\n            \n            {renderPaymentOptions()}\n\n            <div className=\"relative flex py-4 items-center\">\n                <div className=\"flex-grow border-t border-slate-200 dark:border-slate-700\"></div>\n                <span className=\"flex-shrink mx-4 text-slate-400 dark:text-slate-500 text-xs uppercase font-semibold\">Or</span>\n                <div className=\"flex-grow border-t border-slate-200 dark:border-slate-700\"></div>\n            </div>\n\n            <div className=\"text-center\">\n                <button\n                    onClick={onSelectFreeTier}\n                    className=\"w-full px-6 py-3 bg-slate-100 text-slate-800 font-bold rounded-lg hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-100 dark:hover:bg-slate-600 transition-colors\"\n                >\n                    Continue with the free, ad-supported version\n                </button>\n            </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Paywall;","import React, { useEffect, useState } from 'react';\nimport { useAuth } from './hooks/useAuth';\nimport App from './App';\nimport Paywall from './components/Paywall';\nimport PrivacyConsent from './components/PrivacyConsent';\nimport { getApiUrl, fetchWithRetry } from './services/api';\n\nconst AppGate: React.FC = () => {\n  const { subscriptionStatus, login, selectFreeTier, isLoading: isAuthLoading, startTrial } = useAuth();\n  const [isVerifying, setIsVerifying] = useState(false);\n  const [verificationError, setVerificationError] = useState<string | null>(null);\n  \n  // Initialize state directly from localStorage to see if consent has been given.\n  const [hasAcceptedPrivacy, setHasAcceptedPrivacy] = useState(\n    () => localStorage.getItem('privacyConsentAccepted') === 'true'\n  );\n\n  useEffect(() => {\n    const verifyServerSidePayment = async () => {\n      const urlParams = new URLSearchParams(window.location.search);\n      const stripeSessionId = urlParams.get('session_id');\n      const paypalSubscriptionId = urlParams.get('subscription_id');\n\n      let provider: 'stripe' | 'paypal' | null = null;\n      let sessionId: string | null = null;\n\n      if (stripeSessionId) {\n          provider = 'stripe';\n          sessionId = stripeSessionId;\n      } else if (paypalSubscriptionId) {\n          provider = 'paypal';\n          sessionId = paypalSubscriptionId;\n      }\n\n      if (provider && sessionId) {\n        setIsVerifying(true);\n        setVerificationError(null);\n        try {\n          const response = await fetchWithRetry(await getApiUrl('/verify-payment'), {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ provider, sessionId }),\n          });\n          \n          const data = await response.json();\n\n          if (!response.ok) {\n            throw new Error(data.error || 'Failed to verify payment session.');\n          }\n\n          if (data.status === 'success') {\n            await login({\n              provider: data.provider,\n              duration: data.duration,\n              customerId: data.customerId,\n              subscriptionId: data.subscriptionId,\n            });\n            // Navigate to the clean app URL to clear query params and reload the app state.\n            // This prevents a potential infinite reload loop.\n            window.location.href = '/app.html';\n            return; // Stop execution as the page will navigate.\n          } else {\n             throw new Error('Payment verification was not successful.');\n          }\n\n        } catch (error: any) {\n          console.error(\"Payment verification failed:\", error);\n          setVerificationError(error.message);\n          // If verification fails, clean up the URL and stop the loading spinner.\n          window.history.replaceState({}, document.title, window.location.pathname);\n          setIsVerifying(false);\n        }\n      }\n    };\n\n    verifyServerSidePayment();\n  }, [login]);\n\n  const handleAcceptPrivacy = () => {\n    localStorage.setItem('privacyConsentAccepted', 'true');\n    setHasAcceptedPrivacy(true);\n    startTrial();\n  };\n  \n  const LoadingSpinner = () => (\n     <div className=\"min-h-screen bg-slate-50 dark:bg-slate-900 flex flex-col items-center justify-center text-center p-4\">\n        <svg className=\"animate-spin h-10 w-10 text-teal-500 mb-4\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n          <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n          <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n        </svg>\n        <h1 className=\"text-2xl font-semibold text-slate-700 dark:text-slate-200\">\n          {isVerifying ? 'Verifying your payment...' : 'Loading...'}\n        </h1>\n      </div>\n  );\n\n  // The very first screen the user sees, if they haven't consented yet.\n  if (!hasAcceptedPrivacy) {\n    return <PrivacyConsent onAccept={handleAcceptPrivacy} />;\n  }\n\n  // While checking auth status or verifying payment, show a loading state.\n  if (isAuthLoading || isVerifying) {\n    return <LoadingSpinner />;\n  }\n\n  // If status is null, user hasn't made a choice or subscription expired. Show paywall.\n  if (!subscriptionStatus) {\n    return <Paywall onSelectFreeTier={selectFreeTier} initialError={verificationError ?? undefined} />;\n  }\n\n  // If status is 'subscribed' or 'free', show the app.\n  return <App />;\n};\n\nexport default AppGate;\n","import React, { ErrorInfo, ReactNode } from 'react';\nimport { closeDB } from '../services/db';\n\ninterface Props {\n  children: ReactNode;\n}\n\ninterface State {\n  hasError: boolean;\n  error: Error | null;\n}\n\nexport class ErrorBoundary extends React.Component<Props, State> {\n  // FIX: Using standard class property syntax for state initialization. This is concise and resolves the reported type errors.\n  public state: State = { hasError: false, error: null };\n\n  static getDerivedStateFromError(error: Error): State {\n    return { hasError: true, error };\n  }\n\n  componentDidCatch(error: Error, errorInfo: ErrorInfo) {\n    console.error(\"Uncaught error:\", error, errorInfo);\n  }\n\n  handleReset = () => {\n    // Reloading the page is a safer way to recover from an unknown error state\n    // than simply trying to re-render.\n    window.location.reload();\n  };\n  \n  handleHardReset = () => {\n      console.warn(\"Performing hard reset from Error Boundary.\");\n      closeDB();\n      const deleteRequest = indexedDB.deleteDatabase('SmartBillSplitterDB');\n\n      deleteRequest.onsuccess = () => {\n          console.log(\"Database deleted successfully.\");\n          localStorage.clear();\n          sessionStorage.clear();\n          window.location.reload();\n      };\n      deleteRequest.onerror = (err) => {\n          console.error(\"Error deleting database:\", err);\n          alert(\"Could not delete the database. Please clear your browser's site data manually through the browser settings.\");\n      };\n      deleteRequest.onblocked = () => {\n          alert(\"Database is locked, likely by another open tab. To reset the app, please close all other tabs for this site and then reload this page to try again.\");\n      };\n  };\n\n  render() {\n    if (this.state.hasError) {\n      return (\n        <div className=\"min-h-screen bg-slate-100 dark:bg-slate-900 flex items-center justify-center p-4\">\n            <div className=\"w-full max-w-lg mx-auto bg-white dark:bg-slate-800 rounded-2xl shadow-xl p-8 text-center\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-16 w-16 mx-auto text-red-500\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth=\"1.5\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z\" />\n                </svg>\n                <h1 className=\"text-2xl font-bold text-slate-800 dark:text-slate-100 mt-4\">Something went wrong.</h1>\n                <p className=\"text-slate-500 dark:text-slate-400 mt-2 mb-6\">\n                  The application has encountered an unexpected error. You can try to recover or reset the application data if the problem persists.\n                </p>\n                <div className=\"space-y-4\">\n                  <button onClick={this.handleReset} className=\"w-full px-6 py-3 bg-teal-500 text-white font-bold rounded-lg hover:bg-teal-600\">\n                    Reload App\n                  </button>\n                  <button onClick={this.handleHardReset} className=\"w-full px-6 py-3 bg-red-100 text-red-800 font-bold rounded-lg hover:bg-red-200 dark:bg-red-900/40 dark:text-red-300 dark:hover:bg-red-900/60\">\n                    Hard Reset App Data\n                  </button>\n                </div>\n                 <details className=\"mt-4 text-left text-xs text-slate-400 dark:text-slate-500\">\n                  <summary className=\"cursor-pointer\">Error Details</summary>\n                  <pre className=\"mt-2 p-2 bg-slate-100 dark:bg-slate-700 rounded overflow-auto whitespace-pre-wrap\">\n                    <code>{this.state.error?.name}: {this.state.error?.message}\\n\\n{this.state.error?.stack}</code>\n                  </pre>\n                </details>\n            </div>\n        </div>\n      );\n    }\n    // FIX: Explicitly cast 'this' to its base Component type to resolve a compiler error where 'this.props' was not being found.\n    return (this as React.Component<Props, State>).props.children;\n  }\n}","import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport ReactDOM from 'react-dom/client';\nimport AppGate from './AppGate';\nimport { AuthProvider } from './hooks/useAuth';\nimport { AppControlContext } from './contexts/AppControlContext';\nimport { initDB, closeDB } from './services/db';\nimport { useBroadcastListener, BroadcastMessage } from './services/broadcastService';\nimport { ErrorBoundary } from './components/ErrorBoundary';\nimport { initializeApi } from './services/api';\n\nconst DB_NAME = 'SmartBillSplitterDB'; // Must match db.ts for the hard reset\n\n/**\n * Renders a static HTML fallback UI in case of a catastrophic startup error.\n * This is a last resort when the React app itself cannot render.\n * @param error The error that caused the failure.\n */\nconst renderErrorFallback = (error: Error) => {\n  const rootElement = document.getElementById('root');\n  if (!rootElement) return;\n\n  rootElement.innerHTML = `\n    <div class=\"min-h-screen bg-slate-100 dark:bg-slate-900 flex items-center justify-center p-4 font-sans\">\n      <div class=\"w-full max-w-lg mx-auto bg-white dark:bg-slate-800 rounded-2xl shadow-xl p-8 text-center\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-16 w-16 mx-auto text-red-500\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" stroke-width=\"1.5\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z\" />\n        </svg>\n        <h1 class=\"text-2xl font-bold text-slate-800 dark:text-slate-100 mt-4\">Oops! Something went wrong.</h1>\n        <p class=\"text-slate-500 dark:text-slate-400 mt-2 mb-6\">\n          The application encountered a critical problem during startup.\n        </p>\n        <div id=\"fallback-message-container\" class=\"mb-4 text-left\"></div>\n        <div class=\"space-y-4\">\n          <button id=\"fallback-reload-btn\" class=\"w-full px-6 py-3 bg-teal-500 text-white font-bold rounded-lg hover:bg-teal-600\">\n            Reload App\n          </button>\n          <button id=\"fallback-reset-btn\" class=\"w-full px-6 py-3 bg-red-100 text-red-800 font-bold rounded-lg hover:bg-red-200 dark:bg-red-900/40 dark:text-red-300 dark:hover:bg-red-900/60\">\n            Hard Reset & Reload\n          </button>\n          <p class=\"text-xs text-slate-500 dark:text-slate-400\">\n            <span class=\"font-semibold\">Warning:</span> Hard reset will permanently delete all app data from this device.\n          </p>\n        </div>\n        <details class=\"mt-4 text-left text-xs text-slate-400 dark:text-slate-500\">\n          <summary class=\"cursor-pointer\">Error Details</summary>\n          <pre class=\"mt-2 p-2 bg-slate-100 dark:bg-slate-700 rounded overflow-auto whitespace-pre-wrap\">\n            <code>${error.name}: ${error.message}\\n\\n${error.stack}</code>\n          </pre>\n        </details>\n      </div>\n    </div>\n  `;\n\n  document.getElementById('fallback-reload-btn')?.addEventListener('click', () => {\n    window.location.reload();\n  });\n\n  document.getElementById('fallback-reset-btn')?.addEventListener('click', () => {\n    const messageContainer = document.getElementById('fallback-message-container');\n    if (messageContainer) {\n        messageContainer.innerHTML = '';\n    }\n    console.warn(\"Performing hard reset from fallback UI.\");\n    closeDB(); // Close the connection if it was opened\n    const deleteRequest = indexedDB.deleteDatabase(DB_NAME);\n\n    deleteRequest.onsuccess = () => {\n      console.log(\"Database deleted successfully.\");\n      localStorage.clear();\n      sessionStorage.clear();\n      window.location.reload();\n    };\n\n    deleteRequest.onerror = () => {\n      if (messageContainer) {\n        messageContainer.innerHTML = `\n          <div class=\"p-4 bg-red-100 dark:bg-red-900/40 border-l-4 border-red-500 rounded-r-lg\">\n              <h4 class=\"font-bold text-red-800 dark:text-red-200\">Reset Failed</h4>\n              <p class=\"text-sm text-red-700 dark:text-red-300 mt-1\">\n                  Could not delete the database. Please clear your browser's site data manually through the browser settings.\n              </p>\n          </div>\n        `;\n      } else {\n        alert(\"Could not delete the database. Please clear your browser's site data manually.\");\n      }\n    };\n    \n    deleteRequest.onblocked = () => {\n      if (messageContainer) {\n        messageContainer.innerHTML = `\n          <div class=\"p-4 bg-yellow-100 dark:bg-yellow-900/40 border-l-4 border-yellow-500 rounded-r-lg\">\n              <h4 class=\"font-bold text-yellow-800 dark:text-yellow-200\">Action Required</h4>\n              <p class=\"text-sm text-yellow-700 dark:text-yellow-300 mt-1\">\n                  Database is locked, likely by another open tab. To reset the app, please close all other tabs for this site and then click \"Hard Reset\" again.\n              </p>\n          </div>\n        `;\n      } else {\n        alert(\"Database is locked, likely by another open tab. To reset the app, please close all other tabs for this site and then reload this page to try again.\");\n      }\n    };\n  });\n};\n\n\ntry {\n  const rootElement = document.getElementById('root');\n  if (!rootElement) {\n    // If there is no root element, this script should not have been loaded.\n    // This can happen if the script is incorrectly injected into the landing page (index.html)\n    // or if a server-side rewrite serves the wrong HTML for a given URL.\n    // Instead of crashing, we log an error and gracefully stop execution.\n    console.error(\"React app script loaded on a page without a '#root' element. App will not mount. This is expected if you are on the landing page.\");\n  } else {\n      rootElement.innerHTML = `\n        <div class=\"min-h-screen bg-slate-50 dark:bg-slate-900 flex flex-col items-center justify-center text-center p-4 font-sans\">\n          <svg class=\"animate-spin h-10 w-10 text-teal-500 mb-4\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n            <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\n            <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n          </svg>\n          <h1 class=\"text-2xl font-semibold text-slate-700 dark:text-slate-200\">Initializing App...</h1>\n          <div id=\"loading-warning\" class=\"mt-4 w-full max-w-md\"></div>\n        </div>\n      `;\n      \n      const loadingWarningTimeout = setTimeout(() => {\n          const warningContainer = document.getElementById('loading-warning');\n          if (warningContainer) {\n              warningContainer.innerHTML = `\n                <div class=\"p-4 bg-yellow-100 dark:bg-yellow-900/40 border-l-4 border-yellow-500 rounded-r-lg text-left\">\n                    <h4 class=\"font-bold text-yellow-800 dark:text-yellow-200\">Still Loading?</h4>\n                    <p class=\"text-sm text-yellow-700 dark:text-yellow-300 mt-1\">\n                        This is taking longer than usual. If you have this app open in other browser tabs, closing them may help speed things up.\n                    </p>\n                </div>\n              `;\n          }\n      }, 3000);\n\n      type NotificationType = 'success' | 'info' | 'error';\n      interface NotificationState {\n        message: string;\n        type: NotificationType;\n      }\n\n      const Root: React.FC = () => {\n        const [notification, setNotification] = useState<NotificationState | null>(null);\n        const [isUpdateRequired, setIsUpdateRequired] = useState(false);\n        const [isWaitingForMigration, setIsWaitingForMigration] = useState(false);\n        \n        // --- State for Service Worker Updates ---\n        const [isUpdateAvailable, setIsUpdateAvailable] = useState(false);\n        const waitingWorkerRef = useRef<ServiceWorker | null>(null);\n\n        const triggerReload = useCallback(() => {\n            if (isUpdateRequired || isWaitingForMigration) return;\n            setIsUpdateRequired(true);\n            setTimeout(() => {\n                window.location.reload();\n            }, 4000);\n        }, [isUpdateRequired, isWaitingForMigration]);\n        \n        // --- Effect for Service Worker Update Flow ---\n        useEffect(() => {\n          if (!('serviceWorker' in navigator)) return;\n          \n          const swRegistration = navigator.serviceWorker.ready;\n          \n          // 1. Listen for when a new SW is found and starts installing\n          swRegistration.then(reg => {\n            reg.addEventListener('updatefound', () => {\n              const newWorker = reg.installing;\n              if (newWorker) {\n                console.log('Service Worker: New version found, installing.');\n                // 2. Listen for when the new SW finishes installing\n                newWorker.addEventListener('statechange', () => {\n                  if (newWorker.state === 'installed') {\n                    // If there's an active SW, the new one is now waiting\n                    if (navigator.serviceWorker.controller) {\n                      console.log('Service Worker: New version installed and waiting.');\n                      waitingWorkerRef.current = newWorker;\n                      setIsUpdateAvailable(true);\n                    }\n                  }\n                });\n              }\n            });\n          });\n          \n          // 3. Listen for when the new SW takes control\n          let refreshing = false;\n          navigator.serviceWorker.addEventListener('controllerchange', () => {\n            if (!refreshing) {\n              console.log('Service Worker: Controller changed, reloading page.');\n              window.location.reload();\n              refreshing = true;\n            }\n          });\n\n        }, []);\n\n        const handleUpdateApp = () => {\n          if (waitingWorkerRef.current) {\n            waitingWorkerRef.current.postMessage({ type: 'SKIP_WAITING' });\n            // The 'controllerchange' event listener will handle the reload\n            setIsUpdateAvailable(false);\n          }\n        };\n\n\n        useEffect(() => {\n            window.addEventListener('db-versionchange', triggerReload);\n            return () => {\n                window.removeEventListener('db-versionchange', triggerReload);\n            };\n        }, [triggerReload]);\n        \n        useBroadcastListener(useCallback((message: BroadcastMessage) => {\n            if (message.type === 'db-close-request') {\n                console.log(\"Received request to close DB connection for migration.\");\n                closeDB();\n                setIsWaitingForMigration(true);\n            } else if (message.type === 'db-migration-complete') {\n                if (isWaitingForMigration) {\n                    console.log(\"Migration complete in another tab. Reloading now.\");\n                    window.location.reload();\n                }\n            }\n        }, [isWaitingForMigration]));\n\n        useEffect(() => {\n            if (notification) {\n                const timer = setTimeout(() => setNotification(null), 5000);\n                return () => clearTimeout(timer);\n            }\n        }, [notification]);\n\n        const reloadApp = () => {\n          window.history.replaceState(null, '', '/app.html');\n          window.location.reload();\n        };\n\n        const showNotification = (message: string, type: NotificationType = 'success') => {\n            setNotification({ message, type });\n        };\n        \n        const getNotificationStyles = (type: NotificationType) => {\n            switch (type) {\n                case 'error': return 'bg-red-600 text-white';\n                case 'info': return 'bg-blue-600 text-white';\n                case 'success':\n                default: return 'bg-teal-500 text-white';\n            }\n        };\n        \n        const getNotificationIcon = (type: NotificationType) => {\n            switch (type) {\n                case 'error': return <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clipRule=\"evenodd\" /></svg>;\n                case 'info': return <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clipRule=\"evenodd\" /></svg>;\n                case 'success':\n                default: return <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" /></svg>;\n            }\n        };\n        \n        const UpdateScreen: React.FC<{title: string; message: string; showSpinner: boolean}> = ({title, message, showSpinner}) => (\n            <div className=\"fixed inset-0 bg-slate-900 bg-opacity-80 z-[100] flex justify-center items-center p-4 font-sans backdrop-blur-sm\">\n                <div className=\"w-full max-w-md mx-auto bg-white dark:bg-slate-800 rounded-2xl shadow-xl p-8 text-center\">\n                     <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-16 w-16 mx-auto text-teal-500\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth=\"1.5\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M4 4v5h5M4 18v-5h5m10-4h5v5h-5M14 18h5v-5h-5\" />\n                     </svg>\n                    <h1 className=\"text-2xl font-bold text-slate-800 dark:text-slate-100 mt-4\">{title}</h1>\n                    <p className=\"text-slate-500 dark:text-slate-400 mt-2 mb-6\">{message}</p>\n                    {showSpinner && <div className=\"flex justify-center items-center\">\n                        <svg className=\"animate-spin h-6 w-6 text-teal-500\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                            <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                            <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                        </svg>\n                    </div>}\n                </div>\n            </div>\n        );\n\n        if (isUpdateRequired) {\n            return <UpdateScreen title=\"App Update Required\" message=\"A new version of the app is running in another tab. This page will reload automatically to apply the update.\" showSpinner={true} />;\n        }\n        \n        if (isWaitingForMigration) {\n            return <UpdateScreen title=\"Applying App Update...\" message=\"Please wait while the update finishes in another tab. This page will reload automatically.\" showSpinner={true} />;\n        }\n\n        return (\n          <AppControlContext.Provider value={{ reloadApp, showNotification }}>\n            {isUpdateAvailable && (\n              <div role=\"alert\" className=\"fixed bottom-4 left-1/2 -translate-x-1/2 w-full max-w-md z-[60] bg-slate-800 text-white rounded-lg shadow-2xl p-4 flex items-center justify-between gap-4\">\n                <div className=\"flex items-center gap-3\">\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 text-teal-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12\" />\n                  </svg>\n                  <div className=\"flex-grow\">\n                    <p className=\"font-bold\">Update Available</p>\n                    <p className=\"text-sm text-slate-300\">A new version of the app is ready.</p>\n                  </div>\n                </div>\n                <button onClick={handleUpdateApp} className=\"px-4 py-2 bg-teal-500 text-white font-bold rounded-lg hover:bg-teal-600 flex-shrink-0\">\n                  Refresh\n                </button>\n              </div>\n            )}\n            <div className=\"fixed top-0 left-0 right-0 z-[60] flex justify-center pointer-events-none\">\n                <div className={`transition-all duration-500 ease-in-out mt-4 px-6 py-3 rounded-lg shadow-lg ${notification ? 'translate-y-0 opacity-100' : '-translate-y-20 opacity-0'} ${notification ? getNotificationStyles(notification.type) : ''}`}>\n                  <div className=\"flex items-center gap-3\">\n                    {notification && getNotificationIcon(notification.type)}\n                    <span className=\"font-semibold\">{notification?.message}</span>\n                  </div>\n                </div>\n            </div>\n            <AuthProvider>\n              <AppGate />\n            </AuthProvider>\n          </AppControlContext.Provider>\n        );\n      }\n\n      const startup = async () => {\n        // Start API discovery in the background. It will handle its own errors.\n        initializeApi();\n        // Wait for the local database to be ready, which is essential for the UI.\n        await initDB();\n      };\n\n      startup().then(() => {\n        clearTimeout(loadingWarningTimeout);\n        rootElement.innerHTML = '';\n        const root = ReactDOM.createRoot(rootElement);\n        root.render(\n          <React.StrictMode>\n            {/* FIX: Wrap Root component in ErrorBoundary to provide children prop */}\n            <ErrorBoundary>\n              <Root />\n            </ErrorBoundary>\n          </React.StrictMode>\n        );\n      }).catch(err => {\n        clearTimeout(loadingWarningTimeout);\n        console.error(\"Failed to initialize the application.\", err);\n        renderErrorFallback(err);\n      });\n  }\n\n} catch (error) {\n  console.error(\"A catastrophic error occurred during app startup:\", error);\n  if (error instanceof Error) {\n    renderErrorFallback(error);\n  } else {\n    renderErrorFallback(new Error('An unknown error occurred.'));\n  }\n}"],"names":["l","n","p","q","r","t","u","v","w","x","y","z","A","a","B","C","D","E","b","e","F","G","H","I","J","K","L","M","d","c","k","h","g","f","m","N","O","escape","P","Q","R","S","T","U","V","W","X","react_production_min","reactModule","require$$0","reactJsxRuntime_production_min","jsxRuntimeModule","exports","schedulerModule","aa","ca","require$$1","da","ea","fa","ha","ia","ja","ka","la","ma","oa","pa","qa","ra","sa","ta","ua","va","wa","ya","za","Aa","Ba","Ca","Da","Ea","Fa","Ga","Ha","Ia","Ja","Ka","La","Ma","Na","Oa","Pa","Qa","Ra","Sa","Ta","Ua","Va","Wa","Xa","Ya","Za","ab","bb","cb","db","eb","fb","gb","hb","ib","jb","kb","lb","mb","nb","ob","pb","qb","rb","sb","tb","ub","vb","wb","xb","yb","zb","Ab","Bb","Cb","Db","Eb","Fb","Gb","Hb","Ib","Jb","Kb","Lb","Mb","Nb","Ob","Pb","Qb","Rb","Sb","Tb","Ub","Vb","Wb","Xb","Yb","Zb","$b","ac","bc","cc","dc","ec","fc","gc","hc","ic","jc","kc","lc","mc","oc","nc","pc","qc","rc","sc","tc","uc","vc","wc","xc","yc","zc","Ac","Bc","Cc","Dc","Ec","Fc","Gc","Hc","Ic","Jc","Kc","Lc","Mc","Nc","Oc","Pc","Qc","Rc","Sc","Tc","Uc","Vc","Wc","Xc","Yc","Zc","$c","ad","bd","cd","dd","ed","fd","gd","hd","id","jd","kd","ld","md","nd","od","pd","qd","rd","sd","td","ud","vd","wd","xd","yd","Ad","zd","Bd","Cd","Dd","Ed","Fd","Gd","Hd","Id","Jd","Kd","Ld","Md","Nd","Od","Pd","Qd","Rd","Sd","Td","Ud","Vd","Wd","Xd","Yd","Zd","$d","ae","be","ce","de","ee","fe","ge","he","ie","je","ke","le","me","ne","oe","pe","qe","re","se","te","ue","ve","we","xe","ye","ze","Ae","Be","Ce","De","Ee","Fe","Ge","He","Ie","Je","Ke","Le","Me","Ne","Oe","Pe","Qe","Re","Se","Te","Ue","Ve","We","Xe","Ye","Ze","$e","af","bf","cf","df","ef","ff","gf","hf","jf","kf","lf","mf","nf","of","pf","qf","rf","sf","tf","uf","vf","wf","na","xa","$a","ba","xf","yf","zf","Af","Bf","Cf","Df","Ef","Ff","Gf","Hf","Jf","If","Kf","Lf","Mf","Nf","Of","Pf","Qf","Rf","Sf","Tf","Uf","Vf","Wf","Xf","Yf","Zf","$f","ag","bg","cg","dg","eg","fg","gg","hg","ig","jg","kg","lg","mg","ng","og","pg","qg","rg","sg","tg","ug","vg","wg","xg","yg","zg","Ag","Bg","Cg","Dg","Eg","Fg","Gg","Hg","Ig","Jg","Kg","Lg","Mg","Ng","Og","Pg","Qg","Rg","Sg","Tg","Ug","Vg","Wg","Xg","Yg","Zg","$g","ah","bh","ch","dh","eh","fh","gh","hh","ih","jh","kh","lh","mh","nh","oh","ph","qh","rh","sh","th","uh","vh","wh","xh","yh","zh","Ah","Bh","Ch","Dh","Eh","Fh","Gh","Hh","Ih","Jh","Kh","Lh","Mh","Nh","Oh","Ph","Qh","Rh","Sh","Th","Uh","Vh","Wh","Xh","Yh","Zh","$h","ai","bi","ci","di","ei","fi","gi","hi","ii","ji","ki","li","mi","ni","oi","pi","qi","ri","si","ti","ui","vi","wi","xi","yi","zi","Ai","Bi","Ci","Di","Ei","Fi","Gi","Hi","Ii","Ji","Ki","Li","Mi","Ni","Oi","Pi","Qi","Ri","Si","Ti","Ui","Vi","Wi","Xi","Yi","Zi","$i","aj","bj","cj","dj","ej","fj","gj","hj","ij","jj","kj","lj","mj","nj","oj","pj","qj","rj","sj","tj","uj","vj","wj","xj","yj","zj","Aj","Bj","Cj","Dj","Ej","Fj","Gj","Hj","Ij","Jj","Kj","Lj","Mj","Nj","Oj","Pj","Qj","Rj","Sj","Tj","Uj","Vj","Wj","Xj","Yj","Zj","ak","bk","ck","dk","ek","fk","gk","hk","ik","jk","kk","lk","mk","nk","ok","Y","Z","pk","qk","rk","sk","tk","uk","vk","wk","xk","yk","zk","Ak","Bk","Ck","Dk","Ek","Fk","Gk","Hk","Ik","Jk","Kk","Lk","Mk","Nk","Ok","Pk","Qk","Rk","Sk","Tk","Uk","Vk","Wk","Xk","Yk","Zk","$k","al","bl","cl","dl","el","fl","gl","hl","il","jl","kl","ll","ml","nl","ol","pl","ql","rl","sl","tl","ul","vl","reactDom_production_min","checkDCE","err","reactDomModule","client","SYMMETRIC_ALGORITHM","SYMMETRIC_KEY_OPTIONS","SYMMETRIC_KEY_EXTRACTABLE","SYMMETRIC_KEY_USAGES","SIGNING_ALGORITHM","SIGNING_KEY_OPTIONS","SIGNING_KEY_USAGES","uint8ArrayToBinaryString","arr","binary","i","decodeBase64","base64Input","base64","padding","binaryString","bytes","generateEncryptionKey","exportKey","key","importEncryptionKey","jwk","encrypt","data","iv","encodedData","encryptedContent","encryptedBytes","combined","decrypt","encryptedData","ciphertext","decryptedContent","generateSigningKeyPair","importPublicKey","sign","privateKey","signatureBuffer","verify","signature","publicKey","signatureBytes","CHANNEL_NAME","channel","postMessage","message","keyPair","getCommunicationKeyPair","payloadString","signedMessage","error","useBroadcastListener","onMessage","onMessageRef","useRef","useEffect","handleMessage","event","DB_NAME","DB_VERSION","STORES","SINGLE_KEY","closeDB","getDB","promisifyRequest","request","resolve","reject","initDB","dbInstance","transaction","storeInfo","groupStore","cursor","group","settingsStore","settings","eventWithVersions","getStore","storeName","mode","getAll","store","get","set","value","del","getBills","addBill","bill","updateBill","deleteBillDB","billId","addMultipleBillsDB","bills","tx","mergeBillsDB","billsToAdd","billsToUpdate","getRecurringBills","addRecurringBill","updateRecurringBill","deleteRecurringBillDB","getImportedBills","addImportedBill","updateImportedBill","deleteImportedBillDB","mergeImportedBillsDB","getGroups","addGroup","updateGroup","deleteGroupDB","groupId","getCategories","deleteCategoryDB","categoryId","saveMultipleCategories","categories","cat","getSettings","saveSettings","getTheme","saveTheme","theme","getSubscriptionStatus","status","details","startDate","now","durationDays","expiryDate","deleteSubscriptionDetails","saveSubscriptionStatus","getSubscriptionDetails","saveSubscriptionDetails","getBillSigningKey","saveBillSigningKey","COMM_KEY_ID","saveCommunicationKeyPair","getManagedPayPalSubscriptions","res","saveManagedPayPalSubscriptions","subscriptions","exportData","recurringBills","importedBills","groups","subscription","subscriptionDetails","managedPayPalSubscriptions","importData","txPromise","getAllStoreData","storeNames","promises","name","AuthContext","createContext","AuthProvider","children","subscriptionStatus","setSubscriptionStatus","useState","setSubscriptionDetails","isLoading","setIsLoading","logout","useCallback","loadStatus","storedStatus","trialStartTime","trialDuration","timeRemaining","login","fullDetails","selectFreeTier","startTrial","storedDetails","trialDetails","React","useAuth","context","useContext","View","createDefaultBills","today","yesterday","sortBills","useBills","setBills","loadBills","isInitialLoad","dbBills","defaultBills","newBillData","newBill","addBillDB","prev","updatedBill","billWithTimestamp","updateBillDB","updateMultipleBills","billsWithTimestamp","updatedMap","deleteBill","archiveBill","billToUpdate","unarchiveBill","mergeBills","billsToMerge","existingBillMap","skippedCount","billToProcess","existingBill","prevMap","sortImportedBills","useImportedBills","setImportedBills","loadImportedBills","billsAfterMigration","migratedBill","myNameInSummary","_a","totalOwedByMe","totalPortion","allConstituentsPaid","paidItems","item","isConsideredPaid","originalBill","myParticipantInOriginal","addDB","updateDB","updateMultipleImportedBills","deleteImportedBill","archiveImportedBill","unarchiveImportedBill","mergeImportedBills","calculateFirstDueDate","rule","fromDate","dt","dayOfWeek","dayOfMonth","lastDayCurrentMonth","lastDayNextMonth","calculateNextDueDate","interval","lastDayOfNextMonth","sortRecurringBills","useRecurringBills","setRecurringBills","loadRecurringBills","updateRecurringBillDueDate","archiveRecurringBill","unarchiveRecurringBill","deleteRecurringBill","sortGroups","useGroups","setGroups","loadGroups","dbGroups","newGroupData","newGroup","updatedGroup","groupWithTimestamp","deleteGroup","incrementGroupPopularity","groupToUpdate","createDefaultCategories","sortCategories","useCategories","setCategories","loadCategories","dbCategories","defaultCategories","saveCategories","updatedCategories","deleteCategory","initialSettings","useSettings","setSettings","loadSettings","dbSettings","commKeyPair","updateSettings","newSettings","updatedSettings","useTheme","setThemeState","applyTheme","themeToApply","root","isDark","loadTheme","dbTheme","systemThemeQuery","handleSystemThemeChange","newTheme","usePwaInstall","installPromptEvent","setInstallPromptEvent","canInstall","handleBeforeInstallPrompt","handleAppInstalled","promptInstall","outcome","AppControlContext","type","useAppControl","useRouting","routerState","setRouterState","navigate","view","params","hash","urlParams","newParams","queryString","parseHash","pathWithQuery","path","viewPath","query","convertFromBillId","billConversionSource","editTemplateId","recurringBillToEdit","fromTemplateId","fromTemplate","editGroupId","groupToEdit","currentGroup","useModalStates","confirmation","setConfirmation","settingsSection","setSettingsSection","isCsvImporterOpen","setIsCsvImporterOpen","isQrImporterOpen","setIsQrImporterOpen","showDebugConsole","setShowDebugConsole","showNotification","requestConfirmation","title","onConfirm","options","toggleDebugConsole","enabled","useDashboardState","dashboardView","setDashboardView","selectedParticipant","setSelectedParticipant","dashboardStatusFilter","setDashboardStatusFilter","dashboardSummaryFilter","setDashboardSummaryFilter","budgetDate","setBudgetDate","dashboardLayoutMode","setDashboardLayoutMode","onSetDashboardLayoutMode","onSelectParticipant","onClearParticipant","useDerivedData","isBillsLoading","isImportedLoading","isRecurringLoading","isSettingsLoading","isGroupsLoading","isCategoriesLoading","participantsData","useMemo","myDisplayNameLower","participantContactInfo","existing","debtMap","amount","participantStats","stats","budgetData","myNameLower","endDate","relevantUserBills","billDate","myParticipant","userPortion","iBill","spendingByCategory","totalSpending","category","targetId","totalBudget","sum","hasAnyBillsWithCategory","hasAnyBudgetSet","utf8ToBinaryString","str","uint8Array","base64UrlEncode","generateShareText","participantName","totalOwed","billsInfo","billList","paymentDetails","shareTemplate","paymentInfo","paymentMethods","promoText","appUrl","constructedUrl","encryptAndSignPayload","publicKeyJwk","encryptionKey","constituentShares","participantShareInfo","billData","sanitizedParticipants","phone","email","sanitizedItems","sanitizedOriginalParticipants","billForPayload","cryptoService.sign","payload","originalSize","compressedPayload","compressedSize","cryptoService.encrypt","encryptedSize","formatBytes","sizes","payloadCopy","API_BASE_URL","apiInitializationPromise","rateLimitCache","RATE_LIMIT_MS","checkUrl","url","healthUrl","response","checkUrlWithRetries","retries","delay","discoverApiBaseUrl","envApiUrls","candidates","dynamicCandidates","hostname","protocol","baseHost","prefix","initializeApi","getDiscoveredApiBaseUrl","getApiUrl","fetchWithRetry","backoff","urlObject","rateLimitKey","method","bodyKey","lastCall","lastError","pollImportedBills","constituentToSummaryMap","checkPayload","regularBillsToCheck","share","lastUpdatedAt","_b","uniqueCheckPayload","billsNeedingUpdate","updatedSummaries","updatedShares","updatedShareIds","s","summaryTemplate","summaryToUpdate","constituentInfo","cs","cryptoService.importEncryptionKey","decrypted","cryptoService.decrypt","json","pubKey","cryptoService.importPublicKey","cryptoService.verify","items","itemIndex","_c","symmetricKey","decryptedBytes","decryptedJson","creatorSaysImPaid","newLocalStatus","decryptionError","summary","_d","polledShareIds","pollOwnedSharedBills","billsToCheck","shareIds","statuses","statusMap","newStatus","recreateShareSession","updateBillCallback","existingShareInfo","keyRecord","shareId","encryptionKeyJwk","signingPublicKeyJwk","billEncryptionKey","shareResponse","shareResult","syncSharedBillUpdate","updateToken","result","updatedShareInfo","reactivateShare","generateAggregateBill","unpaidBills","updateMultipleBillsCallback","availableSlots","billsToUpdateMap","needsServerUpdate","signingKeyPair","cryptoService.generateSigningKeyPair","cryptoService.exportKey","cryptoService.generateEncryptionKey","billEncryptionKeyJwk","urlPath","imagesDropped","slotsRemaining","billToStore","summaryParticipant","FREE_TIER_IMAGE_SHARE_LIMIT","generateOneTimeShareLink","allUserBills","usedSlots","summaryBill","participantId","compressedParticipantId","urlSafeEncryptedParticipantId","fragmentKey","compressedBillKey","encryptedBillKey","keyResponse","keyResult","keyId","fragmentKeyJwk","encodedFragmentKey","generateShareLink","needsDBUpdate","errorData","keyIsAvailableOnServer","statusResponse","newFragmentKeyJwk","finalShareInfo","isSupported","hasTriggerSupport","requestPermission","getNotificationTag","scheduleNotification","daysBefore","registration","tag","dueDate","triggerTimestamp","cancelNotification","notification","notifications","useSideEffects","originalUpdateMultipleBills","poll","activeImported","intervalId","ownedShared","notificationService.isSupported","active","notificationService.scheduleNotification","scheduled","notificationService.cancelNotification","useDataHandlers","originalUpdateBill","updatedBills","checkAndMakeSpaceForImageShare","billToShare","sharedImageBills","oldestBill","handleSaveBill","template","handleSelectBillFromBudget","billInfo","handleSaveRecurringBill","handleUpdateRecurringBill","handleSaveGroup","groupData","handleUpdateGroup","handleDeleteBill","handleDeleteImportedBill","handleDeleteRecurringBill","handleDeleteGroup","handleReshareBill","createFromTemplate","useAppLogic","settingsHook","billsHook","importedBillsHook","recurringBillsHook","groupsHook","categoriesHook","themeHook","authHook","pwaInstallHook","appControlHook","modalStates","dashboardState","routing","derivedData","dataHandlers","currentBill","currentImportedBill","Header","onOpenSettings","currentView","isMenuOpen","setIsMenuOpen","menuRef","sections","handleClickOutside","handleMenuAction","action","jsx","jsxs","section","Fragment","ActionButton","onClick","disabled","icon","text","subtext","ShareActionSheet","props","participant","shareContext","onClose","onShareSms","onShareEmail","onShareGeneric","onShareLinkSms","onShareLinkEmail","onShareLinkGeneric","onViewDetails","shareState","setShareState","isGeneratingLink","setIsGeneratingLink","isShareApiAvailable","handleShareLink","shareFn","renderChooseState","renderReminderState","renderLinkState","renderContent","getAAdsContent","unitId","getAdConfig","AD_PROVIDER","AADS_ID","errorMsg","errorMsgAdmob","adConfig","AD_IFRAME_CONTENT","AD_ERROR_MESSAGE","HalfScreenAdModal","modalRef","adContainerRef","loadAd","setLoadAd","timer","observer","entry","handleClose","useIntersectionObserver","onIntersect","rootMargin","threshold","ref","handleIntersect","entries","currentRef","PaymentMethodsModal","billDescription","amountOwed","creatorName","activeMethod","setActiveMethod","handleLaunchApp","note","paypalIdentifier","methods","logo","renderMainView","renderDetailView","PaymentMethodWarningModal","onContinue","onAddMethods","onUpdateSettings","dontShowAgain","setDontShowAgain","handleContinue","handleAddMethods","EXPORT_HEADER_V2","downloadFile","filename","content","mimeType","blob","CSV_HEADERS_V2","csvJson","sanitize","owned","imported","csvRows","shareInfo","signingKeyRecord","privateKeyJwk","shareInfoJson","billRow","participantRow","paidStatus","csvContent","DashboardSummary","summaryTotals","onSetDashboardSummaryFilter","handleSummaryKeyDown","filter","summaryCardBaseClasses","summaryCardInactiveClasses","summaryCardActiveClasses","summaryCardDisabledClasses","DashboardControls","onSetDashboardView","onSetDashboardStatusFilter","searchQuery","setSearchQuery","searchMode","setSearchMode","hasRecurringBills","hasBudgetData","showLayoutToggle","LiveIndicator","config","indicator","BillCard","onArchive","onUnarchive","onDelete","onReshare","onConvertToTemplate","onExport","layoutMode","onMenuToggled","totalOwedToMe","allPaid","handleMenuClick","handleActionClick","handleIndicatorClick","renderMenu","SwipeableBillCard","translateX","setTranslateX","dragStartX","dragStartY","dragInitialTranslateX","cardRef","isDragging","isScrolling","dragStartTime","isArchived","maxTranslateX","handleDragStart","clientX","clientY","handleDragMove","deltaX","deltaY","newTranslateX","newClampedTranslateX","handleDragEnd","wasDragging","dragDuration","dragDistance","executeAction","handleMenuToggled","isOpen","ImportedBillCard","onSettleUp","onShowSummaryDetails","isPaid","isSummary","displayDate","dates","date","dateStr","mostRecentTimestamp","ACTION_BUTTON_WIDTH","SwipeableImportedBillCard","buttonCount","AdBillCard","adRef","AD_INTERVAL","AdListItem","BillList","filteredBills","filteredImportedBills","visibleCount","archivingBillIds","onSelectBill","onArchiveBill","onUnarchiveBill","onDeleteBill","onReshareBill","onSelectImportedBill","onUpdateImportedBill","onArchiveImportedBill","onUnarchiveImportedBill","onDeleteImportedBill","loadMoreRef","hasMore","onExportOwnedBill","onExportImportedBill","itemsWithAds","billsToShow","renderedItems","isFree","AdComponent","index","isArchiving","layoutClasses","ParticipantCard","SwipeableParticipantCard","onPaidInFull","isExiting","setIsExiting","endX","wasScrolling","ParticipantList","onSetShareSheetParticipant","onMarkParticipantAsPaid","EmptyState","isArchiveContext","ParticipantDetailView","participantBills","onExportBill","allArchived","unpaidArchived","RecurringBillCard","getFrequencyText","frequency","dayName","suffix","formatTimeUntilDue","dueDateString","due","diffInMs","current","years","months","weeks","tempDate","originalYear","originalMonth","remainingMs","days","parts","GroupCard","onEdit","SwipeableGroupCard","ProgressBar","max","label","variant","percentage","colorClasses","effectiveVariant","CategorySpendingCard","categoryData","isExpanded","setIsExpanded","spent","budget","hasBudget","BudgetView","setDate","handleDateChange","direction","newDate","sortedCategories","getDateLabel","catData","BILLS_PER_PAGE","Dashboard","onDeleteGroup","onUpdateMultipleBills","onCreateFromTemplate","setVisibleCount","shareSheetParticipant","setShareSheetParticipant","setArchivingBillIds","isHalfScreenAdOpen","setIsHalfScreenAdOpen","settleUpBill","setSettleUpBill","isPaymentWarningOpen","setIsPaymentWarningOpen","deferredShareAction","setDeferredShareAction","activeBills","billsToAutoArchive","idsToArchive","newCount","totalTracked","othersOweMe","iOwe","myPart","lowercasedQuery","allParticipantBills","searchedBills","statusFilteredBills","baseFiltered","upcomingRecurringBills","thirtyDaysFromNow","allRecurringBills","filteredGroups","loadMore","getShareTextForParticipant","participantData","handleShareGeneric","shareText","handleShareSms","handleShareEmail","shareUrl","handleMarkParticipantAsPaid","handleExportParticipant","billsForParticipant","getEmptyState","handleSettleUp","handleSelectParticipantForShare","hidePaymentMethodWarning","myParticipantForSettleUp","activeFilterTag","handleConvertToTemplate","handleExportOwnedBill","handleExportImportedBill","parseReceipt","base64Image","errorMessage","parsedJson","matchAndAssignItems","EXPORT_HEADER","parseAppCsv","lines","line","header","rows","requiredCols","colIndices","col","billGroups","parseCsvLine","fields","currentField","inQuotes","char","nextChar","row","values","rowType","shareInfoString","shareEncryptionKey","creatorPublicKey","myParticipantId","importedBill","parseCsv","myDisplayName","MAX_DIMENSION","JPEG_QUALITY","resizeImage","file","reader","img","width","height","canvas","ctx","dataUrl","newFileName","resizedFile","FlashOnIcon","FlashOffIcon","FlashAutoIcon","ReceiptScanner","onItemsScanned","onImageSelected","onImageCleared","isForTemplate","selectedFile","setSelectedFile","previewUrl","setPreviewUrl","isProcessingImage","setIsProcessingImage","setError","isCameraOpen","setIsCameraOpen","cameraError","setCameraError","canControlFlash","setCanControlFlash","flashMode","setFlashMode","videoRef","streamRef","track","stream","videoTrack","isTorchOn","handleOpenCamera","handleCloseCamera","handleCapture","capturedFile","handleClearImage","handleFlashToggle","modes","nextIndex","FlashIcon","handleFileChange","input","fileToBase64","base64String","handleScan","ItemEditor","initialItems","participants","onSave","onCancel","isRecurring","setItems","handleItemChange","field","currentItems","newItem","handleToggleAssignment","itemId","assignedTo","handleAddItem","handleDeleteItem","handleSave","finalItems","currentTotal","AdditionalInfoEditor","initialInfo","info","setInfo","handleInfoChange","currentInfo","finalInfo","FREQUENCIES","DAYS_OF_WEEK","RecurrenceSelector","onChange","handleFrequencyChange","newRule","handleIntervalChange","handleDayOfWeekChange","day","handleDayOfMonthChange","frequencyLabel","freq","SetupDisplayNameModal","currentName","setName","trimmedName","BillPrimaryDetails","description","setDescription","totalAmount","setTotalAmount","splitMode","errors","BillSplitMethod","setSplitMode","splitError","BillParticipants","setParticipants","participantsError","isContactsApiSupported","setIsContactsApiSupported","handleAddParticipant","handleRemoveParticipant","handleParticipantChange","newParticipants","numericValue","handleAddFromContacts","contacts","existingNamesLower","newParticipantsFromContacts","contact","firstEmptyIndex","updatedParticipants","firstNew","ex","ImageAttachment","receiptImage","onReceiptImageChange","isProcessing","setIsProcessing","BillExtraDetails","additionalInfo","onEditItems","onEditInfo","GROUPS_PER_PAGE","SelectGroupModal","onSelect","sortedAndFilteredGroups","visibleGroups","isLastElement","getTodayDateString","getStepFromHash","stepParam","CreateBill","onSaveBill","onSaveRecurringBill","onUpdateRecurringBill","onBack","initialState","isEditingTemplate","isFromTemplate","isConverting","step","setStepState","isProcessingAI","setIsProcessingAI","selectedGroupId","setSelectedGroupId","isSelectGroupModalOpen","setIsSelectGroupModalOpen","setStep","newStep","baseHash","newQuery","handleHashChange","stepFromHash","setReceiptImage","setAdditionalInfo","setCategoryId","recurrenceRule","setRecurrenceRule","setErrors","isItemEditorOpen","setIsItemEditorOpen","isInfoEditorOpen","setIsInfoEditorOpen","isSetupModalOpen","setIsSetupModalOpen","activeParticipants","totalPercentage","total","diff","firstActive","handleSaveDisplayName","oldName","validateAndSave","validateStep","finalParticipants","additionalInfoRecord","acc","recurringData","handleItemsScanned","scannedItems","newItems","assignments","assigned","self","assignTo","totalFromItems","currentStep","newErrors","handleNext","nextStep","handleGroupSelect","renderGroupSelectionStep","renderStartModeStep","renderScanStep","renderPrimaryDetailsStep","renderParticipantsStep","renderExtrasStep","getTitle","newInfo","CreateGroup","onUpdate","isEditing","validate","splitValues","isUsed","formatTimeAgo","timestamp","seconds","minutes","hours","ShareHistory","historyEvents","events","shares","getMethodText","ShareModal","onUpdateBill","loading","setLoading","copied","setCopied","getShareMessage","handleShareAction","loadingKey","billWithNewShareInfo","updateHistory","updatedHistory","_f","_e","_h","_g","DEBOUNCE_DELAY","BillDetails","localBill","setLocalBill","isSaving","setIsSaving","debounceTimerRef","pendingUpdateRef","isShareModalOpen","setIsShareModalOpen","isReceiptModalOpen","setIsReceiptModalOpen","isInfoModalOpen","setIsInfoModalOpen","isItemsModalOpen","setIsItemsModalOpen","flushChanges","handleTogglePaid","handleExport","handleOpenShare","assignedParticipants","pId","SummaryBillDetailsModal","setView","selectedItem","setSelectedItem","paymentModalItem","setPaymentModalItem","handleSelectItem","handleToggleItemPaid","currentPaidItems","newPaidItems","allItemsPaid","renderListView","price","originalBillData","myParticipantInOriginalBill","isPaidByCreator","isPaidByMeLocally","isPaidByMe","ImportedBillDetails","isPaymentModalOpen","setIsPaymentModalOpen","isSummaryModalOpen","setIsSummaryModalOpen","isMyPortionPaid","Settings","onNavigateToSection","useQrScanner","onScan","isScanning","setIsScanning","animationFrameRef","scan","video","imageData","code","startScanner","stopScanner","CountdownTimer","expiry","onExpire","timeLeft","setTimeLeft","remaining","SyncComponent","setMode","shareStatus","setShareStatus","receiveStatus","setReceiveStatus","setErrorMessage","syncPayload","setSyncPayload","qrCodeDataUrl","setQrCodeDataUrl","expiryTime","setExpiryTime","reloadApp","parsed","keyJwk","resultText","errorResult","importedData","scannerError","startSharing","exportedKey","dataToExport","jsonString","compressedData","qrPayload","startReceiving","handleBack","renderIdle","renderSharing","renderReceiving","statusMessage","renderError","DisclaimerContent","Disclaimer","PrivacyConsent","onAccept","isScrolledToBottom","setIsScrolledToBottom","scrollableContentRef","handleScroll","element","checkScrollability","isAtBottom","base64UrlDecode","base64Url","ViewSharedBill","onImportComplete","hasAcceptedPrivacy","setHasAcceptedPrivacy","setStatus","sharedData","setSharedData","setLastUpdatedAt","setBillEncryptionKey","setMyParticipantId","isOwnBill","setIsOwnBill","isAlreadyImported","fragmentKeyStr","encryptedParticipantId","errData","keyData","decryptedBillKeyBytes","decryptedBillKeyJson","billKeyToUse","decryptedParticipantIdBytes","decryptedParticipantId","sharePayload","serverTimestamp","incomingPublicKey","isSelfImported","handleImport","myParticipantForName","myName","initialPaidItems","participantInConstituent","handleAcceptPrivacy","messages","hasPaymentInfo","SwipeableRecurringBillCard","RecurringBillsList","onEditTemplate","statusFilter","setStatusFilter","useSubscriptionManager","currentDeviceSubscription","managedSubscriptions","setManagedSubscriptions","fetchAndSetSubscriptions","storedSubs","subsMap","allSubs","addSubscription","subscriptionId","newSubs","removeSubscription","ManageSubscriptionPage","isManagerLoading","isCancelling","setIsCancelling","isAdding","setIsAdding","addError","setAddError","newSubId","setNewSubId","handleCancelSubscription","subId","handleAddSubscription","idToAdd","SubscriptionCard","sub","GroupRemindersModal","participantsWithDebt","onRemind","debtInfo","hasDebt","GroupDetailsView","isRemindersModalOpen","setIsRemindersModalOpen","groupParticipantsWithDebt","participantNamesInGroup","handleRemindParticipant","AppRouter","SettingsComponent","ConfirmationDialog","confirmText","cancelText","confirmVariant","confirmButtonClasses","themeOptions","Personalization","onSettingsChange","setTheme","handleChange","opt","PaymentIntegrations","onPaymentDetailsChange","BillReminders","permission","handleRequestPermission","newPermission","notificationService.requestPermission","handleToggle","handleDaysChange","DataManagement","onOpenCsvImporter","onOpenQrImporter","handleExportAllCsv","exportDataAsCsv","DataSync","onNavigate","DangerZone","handleReset","deleteRequest","SubscriptionManagement","onGoToManageSubscriptionPage","handleGoToPaywall","AboutSupport","onToggleDebugConsole","links","link","BudgetingSettings","onCategoriesChange","handleCategoryChange","parsedValue","handleAddCategory","newCategory","handleDelete","isDefault","SettingsModal","activeSection","localSettings","setLocalSettings","localCategories","setLocalCategories","isDirty","setIsDirty","handleSettingsChange","newValues","handleCategoriesChange","newCategories","handlePaymentDetailsChange","newDetails","finalCategories","handleCancel","currentSection","CsvImporterModal","onMergeBills","onMergeImportedBills","fileInputRef","files","processFiles","allParsedData","parsedData","ownedResult","importedResult","totalAdded","totalUpdated","totalProcessed","mergeError","handleUploadClick","QrImporterModal","onScanSuccess","AppModals","PwaInstallBanner","canOpen","setCanOpen","setAppUrl","isInIframe","openInNewTab","DebugHeader","onClear","onToggleExpand","isDevEnvironment","currentModeLabel","handleModeSelect","newMode","formatArg","arg","onExplore","getLevelStyles","level","ConsoleView","logs","onExploreObject","log","NetworkView","networkLogs","onSelectLog","interceptionActive","statusColor","truncatedUrl","statusIcon","getCircularReplacer","seen","calculateSize","ObjectNode","memo","isValueVisible","setIsValueVisible","isCryptoKey","isCryptoKeyPair","displayData","isExpandable","valueType","valueSize","renderValue","ObjectExplorer","BroadcastLogEntry","verificationResult","setVerificationResult","isVerified","BroadcastView","DatabaseView","dbData","setDbData","selectedStore","setSelectedStore","loadDb","DevView","handleSetFree","handleSetPro","handleSetTrial","handleLogout","NetworkDetailView","detailView","setDetailView","renderBody","body","renderHeaders","headers","tabClasses","tab","isIntercepting","useDebugServices","setLogs","setNetworkLogs","broadcastLogs","setBroadcastLogs","networkInterceptionActive","setNetworkInterceptionActive","addLog","args","prevLogs","addNetworkLog","updateNetworkLog","updates","addBroadcastLog","clearLogs","clearNetworkLogs","clearBroadcastLogs","originalConsole","intercept","originalFetch","nextNetworkLogId","init","requestBody","responseClone","responseBody","originalPostMessage","DebugConsole","selectedNetworkLog","setSelectedNetworkLog","exploringObject","setExploringObject","logContainerRef","handleClear","ARROW_SIZE","POPOVER_MARGIN","TutorialOverlay","targetSelector","buttonText","placement","targetRect","setTargetRect","popoverRef","styles","setStyles","useLayoutEffect","updateTargetRect","targetElement","popoverRect","newPopoverStyle","newArrowStyle","targetCenterX","popoverLeft","arrowClasses","TutorialManager","showTutorial","setShowTutorial","handleCloseTutorial","App","appLogic","setIsDevEnvironment","backendUrl","backendHost","frontendHost","SubscriptionWarningModal","countdown","setCountdown","Paywall","onSelectFreeTier","initialError","warningPlan","setWarningPlan","handleCheckout","plan","proceedToCheckout","origin","handleKeyDown","renderPaymentOptions","AppGate","isAuthLoading","isVerifying","setIsVerifying","verificationError","setVerificationError","stripeSessionId","paypalSubscriptionId","provider","sessionId","LoadingSpinner","ErrorBoundary","__publicField","errorInfo","renderErrorFallback","rootElement","messageContainer","loadingWarningTimeout","warningContainer","Root","setNotification","isUpdateRequired","setIsUpdateRequired","isWaitingForMigration","setIsWaitingForMigration","isUpdateAvailable","setIsUpdateAvailable","waitingWorkerRef","triggerReload","reg","newWorker","refreshing","handleUpdateApp","getNotificationStyles","getNotificationIcon","UpdateScreen","showSpinner","ReactDOM"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8]}